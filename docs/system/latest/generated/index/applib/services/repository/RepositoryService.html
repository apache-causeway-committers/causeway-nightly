<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Apache Isis</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../../../../../../.." title="Apache Isis">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../../..">
          <span class="icon">
            <img src="../../../../../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../../../../../setupguide/2.0.0-M5/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../../../../../userguide/2.0.0-M5/about.html">User Guide</a>
            <a class="navbar-item" href="../../../../../../../refguide/2.0.0-M5/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../../../../../testing/2.0.0-M5/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../../../../../subdomains/2.0.0-M5/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../../../../../../valuetypes/2.0.0-M5/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../../../../../../mappings/2.0.0-M5/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../../../../../../incubator/2.0.0-M5/about.html">Incubator</a>
            <a class="navbar-item" href="../../../../../../../legacy/2.0.0-M5/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../../../../../vw/2.0.0-M5/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../../../../../../vro/2.0.0-M5/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../../../../../security/2.0.0-M5/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../../../../../pjdo/2.0.0-M5/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../../../../../../extensions/2.0.0-M5/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../../../../../relnotes/2.0.0-M5/about.html">Release Notes</a>
            <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/archive/1-x.html">Archive (1.x)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../../../../../../conguide/2.0.0-M5/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../../../../../../comguide/2.0.0-M5/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../../../../../core/2.0.0-M5/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../../../../../docs/2.0.0-M5/about.html">
          <span class="icon">
            <img src="../../../../../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="system" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous disabled" rel="prev" href="" title=""><span></span></a>
  <a class="page-next disabled" rel="next"
     href="" title=""><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title=""><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../../system-overview.html">System Overview</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">see also:</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../../../../core/latest/about.html">Core Framework</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">System Overview</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../mappings/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../legacy/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../subdomains/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">System Overview</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../system-overview.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tooling</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../tooling/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/master/antora/components/system/modules/generated/pages/index/applib/services/repository/RepositoryService.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<div class="paragraph">
<p>Collects together methods for creating, persisting and searching for entities from the underlying persistence store.</p>
</div>
<div class="paragraph">
<p>Typically it&#8217;s good practice to define a domain-specific service (eg <code>CustomerRepository</code> ) which then delegates to this service. This domain-specific service can use some <a href="RepositoryService.html" class="page">RepositoryService</a> 's "naive" methods that use client-side predicates for filtering; these can then be replaced by more sophisticated implementations that use proper server-side filtering later on without impacting the rest of the application.</p>
</div>
<div class="sect1">
<h2 id="api"><a class="anchor" href="#api"></a>API</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">RepositoryService.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">interface RepositoryService {
  EntityState getEntityState(Object object)     <i class="conum" data-value="1"></i><b>(1)</b>
  T detachedEntity(T entity)     <i class="conum" data-value="2"></i><b>(2)</b>
  T persist(T domainObject)     <i class="conum" data-value="3"></i><b>(3)</b>
  T persistAndFlush(T domainObject)     <i class="conum" data-value="4"></i><b>(4)</b>
  void remove(Object domainObject)     <i class="conum" data-value="5"></i><b>(5)</b>
  void removeAndFlush(Object domainObject)     <i class="conum" data-value="6"></i><b>(6)</b>
  void removeAll(Class&lt;T&gt; cls)     <i class="conum" data-value="7"></i><b>(7)</b>
  List&lt;T&gt; allInstances(Class&lt;T&gt; ofType)     <i class="conum" data-value="8"></i><b>(8)</b>
  List&lt;T&gt; allInstances(Class&lt;T&gt; ofType, long start, long count)     <i class="conum" data-value="9"></i><b>(9)</b>
  List&lt;T&gt; allMatches(Class&lt;T&gt; ofType, Predicate&lt;? super T&gt; predicate)     <i class="conum" data-value="10"></i><b>(10)</b>
  List&lt;T&gt; allMatches(Class&lt;T&gt; ofType, Predicate&lt;? super T&gt; predicate, long start, long count)     <i class="conum" data-value="11"></i><b>(11)</b>
  List&lt;T&gt; allMatches(Query&lt;T&gt; query)     <i class="conum" data-value="12"></i><b>(12)</b>
  Optional&lt;T&gt; uniqueMatch(Class&lt;T&gt; ofType, Predicate&lt;T&gt; predicate)     <i class="conum" data-value="13"></i><b>(13)</b>
  Optional&lt;T&gt; uniqueMatch(Query&lt;T&gt; query)     <i class="conum" data-value="14"></i><b>(14)</b>
  Optional&lt;T&gt; firstMatch(Class&lt;T&gt; ofType, Predicate&lt;T&gt; predicate)     <i class="conum" data-value="15"></i><b>(15)</b>
  Optional&lt;T&gt; firstMatch(Query&lt;T&gt; query)     <i class="conum" data-value="16"></i><b>(16)</b>
  T refresh(T pojo)     <i class="conum" data-value="17"></i><b>(17)</b>
  T detach(T entity)     <i class="conum" data-value="18"></i><b>(18)</b>
  T detachedEntity(Class&lt;T&gt; ofType)     <i class="conum" data-value="19"></i><b>(19)</b>
  T instantiate(Class&lt;T&gt; ofType)     <i class="conum" data-value="20"></i><b>(20)</b>
  boolean isPersistent(Object domainObject)     <i class="conum" data-value="21"></i><b>(21)</b>
  boolean isDeleted(Object domainObject)     <i class="conum" data-value="22"></i><b>(22)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="#getEntityState__Object">getEntityState(Object)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns the <a href="EntityState.html" class="page">EntityState</a> of given <em>object</em> .</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><a href="#detachedEntity__T">detachedEntity(T)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Usually called as a precursor to persisting a domain entity, this method verifies that the object is an entity and injects domain services into it.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><a href="#persist__T">persist(T)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Persist the specified object (or do nothing if already persistent).</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><a href="#persistAndFlush__T">persistAndFlush(T)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Persist the specified object (or do nothing if already persistent) and flushes changes to the database.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><a href="#remove__Object">remove(Object)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Remove (ie delete) an object from the persistent object store (or do nothing if it has already been deleted).</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><a href="#removeAndFlush__Object">removeAndFlush(Object)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Deletes the domain object but only if is persistent, and flushes changes to the database (meaning the object is deleted immediately).</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><a href="#removeAll__Class">removeAll(Class)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Removes all instances of the domain object.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td><a href="#allInstances__Class">allInstances(Class)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns all persisted instances of specified type (including subtypes).</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td><a href="#allInstances__Class_long_long">allInstances(Class, long, long)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Overload of <em>#allInstances(Class)</em> , returns a <em>page</em> of persisted instances of specified type (including subtypes).</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td><a href="#allMatches__Class_Predicate">allMatches(Class, Predicate)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns all the instances of the specified type (including subtypes) that the predicate object accepts.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td><a href="#allMatches__Class_Predicate_long_long">allMatches(Class, Predicate, long, long)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Overload of <em>#allMatches(Class, Predicate)</em> , returns a <em>page</em> of persisted instances of specified type (including subtypes).</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td><a href="#allMatches__Query">allMatches(Query)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns all the instances that match the given <a href="../../query/Query.html" class="page">Query</a> .</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td><a href="#uniqueMatch__Class_Predicate">uniqueMatch(Class, Predicate)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Finds the only instance of the specified type (including subtypes) that satifies the (client-side) predicate.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td><a href="#uniqueMatch__Query">uniqueMatch(Query)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Find the only instance that matches the provided <a href="../../query/Query.html" class="page">Query</a> .</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="15"></i><b>15</b></td>
<td><a href="#firstMatch__Class_Predicate">firstMatch(Class, Predicate)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Find the only instance of the specified type (including subtypes) that satifies the provided (client-side) predicate.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="16"></i><b>16</b></td>
<td><a href="#firstMatch__Query">firstMatch(Query)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Find the only instance that matches the provided <a href="../../query/Query.html" class="page">Query</a> , if any.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="17"></i><b>17</b></td>
<td><a href="#refresh__T">refresh(T)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Reloads the domain entity from the database.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="18"></i><b>18</b></td>
<td><a href="#detach__T">detach(T)</a>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Explicitly detaches the entity from the current persistence session.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="19"></i><b>19</b></td>
<td><a href="#detachedEntity__Class">detachedEntity(Class)</a>
<div class="openblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>as it requires that the domain entity has a no-arg constructor. Use <em>#detachedEntity(Object)</em> instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Overload of <em>#detachedEntity(Object)</em> , but will also instantiate the domain class first.</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="20"></i><b>20</b></td>
<td><a href="#instantiate__Class">instantiate(Class)</a>
<div class="openblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>as it requires that the domain entity has a no-arg constructor. Use <em>#detachedEntity(Object)</em> instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Equivalent to <em>#detachedEntity(Class)</em> .</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="21"></i><b>21</b></td>
<td><a href="#isPersistent__Object">isPersistent(Object)</a>
<div class="openblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>due to ambiguous semantic, use <em>#getEntityState(Object)</em> instead</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Determines if the specified object is persistent (that it is stored permanently outside of the virtual machine in the object store).</p>
</div>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="22"></i><b>22</b></td>
<td><a href="#isDeleted__Object">isDeleted(Object)</a>
<div class="openblock">
<div class="content">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>due to ambiguous semantic, use <em>#getEntityState(Object)</em> instead</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Determines if the specified object has been deleted from the object store.</p>
</div>
</div>
</div></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="members"><a class="anchor" href="#members"></a>Members</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="getEntityState__Object"><a class="anchor" href="#getEntityState__Object"></a>getEntityState(Object)</h3>
<div class="paragraph">
<p>Returns the <a href="EntityState.html" class="page">EntityState</a> of given <em>object</em> .</p>
</div>
</div>
<div class="sect2">
<h3 id="detachedEntity__T"><a class="anchor" href="#detachedEntity__T"></a>detachedEntity(T)</h3>
<div class="paragraph">
<p>Usually called as a precursor to persisting a domain entity, this method verifies that the object is an entity and injects domain services into it.</p>
</div>
<div class="paragraph">
<p>This approach allows the domain entity to have regular constructor (with parameters) to set up the initial state of the domain object. This is preferred over <em>#detachedEntity(Class)</em> , which also instantiates the class and then injects into it - but requires that the domain object has a no-arg constructor to do so.</p>
</div>
<div class="paragraph">
<p>This is the same functionality as exposed by <em>org.apache.isis.applib.services.factory.FactoryService#detachedEntity(Object)</em> . It is provided in this service as a convenience because instantiating and <em>#persist(Object) persisting</em> an object are often done together.</p>
</div>
</div>
<div class="sect2">
<h3 id="persist__T"><a class="anchor" href="#persist__T"></a>persist(T)</h3>
<div class="paragraph">
<p>Persist the specified object (or do nothing if already persistent).</p>
</div>
<div class="paragraph">
<p>The persist isn&#8217;t necessarily performed immediately; by default all pending changes are flushed to the database when the transaction completes.</p>
</div>
</div>
<div class="sect2">
<h3 id="persistAndFlush__T"><a class="anchor" href="#persistAndFlush__T"></a>persistAndFlush(T)</h3>
<div class="paragraph">
<p>Persist the specified object (or do nothing if already persistent) and flushes changes to the database.</p>
</div>
<div class="paragraph">
<p>Flushing will also result in ORM-maintained bidirectional relationships being updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="remove__Object"><a class="anchor" href="#remove__Object"></a>remove(Object)</h3>
<div class="paragraph">
<p>Remove (ie delete) an object from the persistent object store (or do nothing if it has already been deleted).</p>
</div>
<div class="paragraph">
<p>The delete isn&#8217;t necessarily performed immediately; by default all pending changes are flushed to the database when the transaction completes.</p>
</div>
<div class="paragraph">
<p>Note that this method is also a no-op if the domain object is not attached.</p>
</div>
</div>
<div class="sect2">
<h3 id="removeAndFlush__Object"><a class="anchor" href="#removeAndFlush__Object"></a>removeAndFlush(Object)</h3>
<div class="paragraph">
<p>Deletes the domain object but only if is persistent, and flushes changes to the database (meaning the object is deleted immediately).</p>
</div>
<div class="paragraph">
<p>Flushing will also result in ORM-maintained bidirectional relationships being updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="removeAll__Class"><a class="anchor" href="#removeAll__Class"></a>removeAll(Class)</h3>
<div class="paragraph">
<p>Removes all instances of the domain object.</p>
</div>
<div class="paragraph">
<p>Intended primarily for testing purposes.</p>
</div>
</div>
<div class="sect2">
<h3 id="allInstances__Class"><a class="anchor" href="#allInstances__Class"></a>allInstances(Class)</h3>
<div class="paragraph">
<p>Returns all persisted instances of specified type (including subtypes).</p>
</div>
<div class="paragraph">
<p>Intended primarily for prototyping purposes, though is safe to use in production applications to obtain all instances of domain entities if the number is known to be small (for example, reference/lookup data).</p>
</div>
<div class="paragraph">
<p>If there are no instances the list will be empty.</p>
</div>
</div>
<div class="sect2">
<h3 id="allInstances__Class_long_long"><a class="anchor" href="#allInstances__Class_long_long"></a>allInstances(Class, long, long)</h3>
<div class="paragraph">
<p>Overload of <em>#allInstances(Class)</em> , returns a <em>page</em> of persisted instances of specified type (including subtypes).</p>
</div>
<div class="paragraph">
<p>If the optional range parameters are used, the dataset returned starts from (0 based) index, and consists of only up to count items.</p>
</div>
</div>
<div class="sect2">
<h3 id="allMatches__Class_Predicate"><a class="anchor" href="#allMatches__Class_Predicate"></a>allMatches(Class, Predicate)</h3>
<div class="paragraph">
<p>Returns all the instances of the specified type (including subtypes) that the predicate object accepts.</p>
</div>
<div class="paragraph">
<p>If there are no instances the list will be empty. This method creates a new <em>List</em> object each time it is called so the caller is free to use or modify the returned <em>List</em> , but the changes will not be reflected back to the repository.</p>
</div>
<div class="paragraph">
<p>This method is useful during exploration/prototyping, but - because the filtering is performed client-side - this method is only really suitable for initial development/prototyping, or for classes with very few instances. Use <em>#allMatches(Query)</em> for production code.</p>
</div>
</div>
<div class="sect2">
<h3 id="allMatches__Class_Predicate_long_long"><a class="anchor" href="#allMatches__Class_Predicate_long_long"></a>allMatches(Class, Predicate, long, long)</h3>
<div class="paragraph">
<p>Overload of <em>#allMatches(Class, Predicate)</em> , returns a <em>page</em> of persisted instances of specified type (including subtypes).</p>
</div>
<div class="paragraph">
<p>If the optional range parameters are used, the dataset returned starts from (0 based) index, and consists of only up to count items.</p>
</div>
</div>
<div class="sect2">
<h3 id="allMatches__Query"><a class="anchor" href="#allMatches__Query"></a>allMatches(Query)</h3>
<div class="paragraph">
<p>Returns all the instances that match the given <a href="../../query/Query.html" class="page">Query</a> .</p>
</div>
<div class="paragraph">
<p>This is the main API for server-side (performant) queries returning multiple instances, where a <em>org.apache.isis.applib.query.NamedQuery</em> can be passed in that ultimately describes a SELECT query with WHERE predicates. The mechanism by which this is defined depends on the ORM (JDO or JPA). A <em>org.apache.isis.applib.query.NamedQuery</em> can optionally specify a <em>org.apache.isis.applib.query.NamedQuery#withRange(QueryRange) range</em> of instances to be returned.</p>
</div>
<div class="paragraph">
<p>It is also possible to specify an <em>org.apache.isis.applib.query.AllInstancesQuery</em> . This is equivalent to using <em>#allInstances(Class, long, long)</em> ; a range can also be specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="uniqueMatch__Class_Predicate"><a class="anchor" href="#uniqueMatch__Class_Predicate"></a>uniqueMatch(Class, Predicate)</h3>
<div class="paragraph">
<p>Finds the only instance of the specified type (including subtypes) that satifies the (client-side) predicate.</p>
</div>
<div class="paragraph">
<p>This method is useful during exploration/prototyping, but - because the filtering is performed client-side - this method is only really suitable for initial development/prototyping, or for classes with very few instances. Use <em>#uniqueMatch(Query)</em> for production code.</p>
</div>
<div class="paragraph">
<p>If no instance is found then <em>Optional#empty()</em> will be return, while if there is more that one instances a run-time exception will be thrown.</p>
</div>
</div>
<div class="sect2">
<h3 id="uniqueMatch__Query"><a class="anchor" href="#uniqueMatch__Query"></a>uniqueMatch(Query)</h3>
<div class="paragraph">
<p>Find the only instance that matches the provided <a href="../../query/Query.html" class="page">Query</a> .</p>
</div>
<div class="paragraph">
<p>This is the main API for server-side (performant) queries returning no more than one instance, where a <em>org.apache.isis.applib.query.NamedQuery</em> can be passed in that ultimately describes a SELECT query with WHERE predicates. The mechanism by which this is defined depends on the ORM (JDO or JPA). A <em>org.apache.isis.applib.query.NamedQuery</em> can optionally specify a <em>org.apache.isis.applib.query.NamedQuery#withRange(QueryRange) range</em> of instances to be returned.</p>
</div>
<div class="paragraph">
<p>If no instance is found then <em>Optional#empty()</em> will be return, while if there is more that one instances a run-time exception will be thrown.</p>
</div>
</div>
<div class="sect2">
<h3 id="firstMatch__Class_Predicate"><a class="anchor" href="#firstMatch__Class_Predicate"></a>firstMatch(Class, Predicate)</h3>
<div class="paragraph">
<p>Find the only instance of the specified type (including subtypes) that satifies the provided (client-side) predicate.</p>
</div>
<div class="paragraph">
<p>This method is useful during exploration/prototyping, but - because the filtering is performed client-side - this method is only really suitable for initial development/prototyping, or for classes with very few instances. Use <em>#firstMatch(Query)</em> for production code.</p>
</div>
<div class="paragraph">
<p>If no instance is found then <em>Optional#empty()</em> will be return, while if there is more that one instances then the first will be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="firstMatch__Query"><a class="anchor" href="#firstMatch__Query"></a>firstMatch(Query)</h3>
<div class="paragraph">
<p>Find the only instance that matches the provided <a href="../../query/Query.html" class="page">Query</a> , if any.</p>
</div>
<div class="paragraph">
<p>This is the main API for server-side (performant) queries returning the first matching instance, where a <em>org.apache.isis.applib.query.NamedQuery</em> can be passed in that ultimately describes a SELECT query with WHERE predicates. The mechanism by which this is defined depends on the ORM (JDO or JPA). A <em>org.apache.isis.applib.query.NamedQuery</em> can optionally specify a <em>org.apache.isis.applib.query.NamedQuery#withRange(QueryRange) range</em> of instances to be returned.</p>
</div>
<div class="paragraph">
<p>If no instance is found then <em>Optional#empty()</em> will be return, while if there is more that one instances then the first will be returned.</p>
</div>
</div>
<div class="sect2">
<h3 id="refresh__T"><a class="anchor" href="#refresh__T"></a>refresh(T)</h3>
<div class="paragraph">
<p>Reloads the domain entity from the database.</p>
</div>
</div>
<div class="sect2">
<h3 id="detach__T"><a class="anchor" href="#detach__T"></a>detach(T)</h3>
<div class="paragraph">
<p>Explicitly detaches the entity from the current persistence session.</p>
</div>
<div class="paragraph">
<p>This allows the entity to be read from even after the PersistenceSession that obtained it has been closed.</p>
</div>
</div>
<div class="sect2">
<h3 id="detachedEntity__Class"><a class="anchor" href="#detachedEntity__Class"></a>detachedEntity(Class)</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>as it requires that the domain entity has a no-arg constructor. Use <em>#detachedEntity(Object)</em> instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Overload of <em>#detachedEntity(Object)</em> , but will also instantiate the domain class first.</p>
</div>
</div>
<div class="sect2">
<h3 id="instantiate__Class"><a class="anchor" href="#instantiate__Class"></a>instantiate(Class)</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>as it requires that the domain entity has a no-arg constructor. Use <em>#detachedEntity(Object)</em> instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Equivalent to <em>#detachedEntity(Class)</em> .</p>
</div>
</div>
<div class="sect2">
<h3 id="isPersistent__Object"><a class="anchor" href="#isPersistent__Object"></a>isPersistent(Object)</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>due to ambiguous semantic, use <em>#getEntityState(Object)</em> instead</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Determines if the specified object is persistent (that it is stored permanently outside of the virtual machine in the object store).</p>
</div>
<div class="paragraph">
<p>This method can also return <code>true</code> if the object has been <em>#isDeleted(Object) deleted</em> from the object store.</p>
</div>
</div>
<div class="sect2">
<h3 id="isDeleted__Object"><a class="anchor" href="#isDeleted__Object"></a>isDeleted(Object)</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><span class="red"><em>deprecated:</em></span></p>
</div>
<div class="paragraph">
<p>due to ambiguous semantic, use <em>#getEntityState(Object)</em> instead</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Determines if the specified object has been deleted from the object store.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2020 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M4.20210219-0937-c5e61184</p>
        </div>
    </div>
</footer>
<script src="../../../../../../../_/js/site.js"></script>
<script async src="../../../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../../../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../../../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
