<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Architecture :: Apache Isis</title>
    <link rel="canonical" href="https://isis.apache.org/vro/architecture.html">
    <meta name="generator" content="Antora 2.0.0">
    <link rel="stylesheet" href="../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://isis.apache.org">Apache Isis</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="vro" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">Restful Objects Viewer</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vw/about.html">Wicket Viewer</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vw/layout.html">Layout</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/layout/annotation-based.html">Annotation based</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/layout/file-based.html">File based</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/layout/table-columns.html">Table Columns</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vw/menubars-layout.html">Menubars Layout</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/menubars-layout/annotation-based.html">Annotation-based</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/menubars-layout/file-based.html">File-based</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../vw/configuration-properties.html">Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vw/features.html">End-user Features</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/sidebar-vs-modal-dialogs.html">Sidebar vs Modal Dialogs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/recent-pages.html">Recent Pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/bookmarked-pages.html">Bookmarked Pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/hints-and-copy-url.html">Hints-and-copy URL</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/where-am-i.html">Where am I</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/titles-in-tables.html">Titles in Tables</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/blob-attachments.html">Blob Attachments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/features/user-registration.html">User Registration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../vw/security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vw/customisation.html">Customisation</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/top-level-index-page.html">Top-level Index Page</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/brand-logo.html">Brand Logo</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/welcome-page.html">Welcome Page</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/about-page.html">About Page</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/tweaking-css-classes.html">Tweaking CSS Classes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/cheap-n-cheerful-theme.html">Cheap-n-Cheerful Theme</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/using-different-css-file.html">Using Different CSS File</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/custom-javascript.html">Custom Javascript</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/auto-refresh.html">Auto Refresh</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/customisation/request-parameters.html">Request Parameters</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vw/extending.html">Extending</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/extending/custom-bootstrap-theme.html">Custom Bootstrap Theme</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/extending/replacing-page-elements.html">Replacing Page Elements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/extending/custom-pages.html">Custom Pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/extending/login-via-query-args-prototyping.html">Login via Query Args Prototyping</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../vw/hints-and-tips.html">Hints-n-Tips</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/hints-and-tips/per-user-themes.html">Per User Themes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/hints-and-tips/i18n-label-in-wicket-viewer.html">i18n Label in Wicket Viewer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/hints-and-tips/highlight-current-row.html">Highlight Current Row</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../vw/hints-and-tips/svg-support.html">SVG Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../vw/incode-platform.html">Incode Platform</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Restful Objects Viewer</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Architecture & Design</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../archdesign/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../odn/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - Hello World</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../helloworld/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - SimpleApp</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../simpleapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions - SecMan</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ext-secman/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Fundamentals & Beyond</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../ug/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Guides - Reference Guides</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../rg/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Maven Dependencies</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../mavendeps/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Migration Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../mignotes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../relnotes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Runtime Services</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../runtime-services/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">SmokeTest App</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../smoketests/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Table of Contents</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../toc/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main>
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../toc/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">Restful Objects Viewer</a></li>
    <li><a href="architecture.html">Architecture</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/hobrom/antora/isis/core/viewer-restfulobjects/_adoc/modules/ROOT/pages/architecture.adoc">Edit this Page</a></div>
  </div>
<article class="doc">
<h1 class="page">Architecture</h1>
<div class="paragraph">
<p>The <a href="about.html" class="page">RestfulObjects viewer</a> implements the <a href="http://restfulobjects.org">Restful Object spec</a>, meaning
that it defines a well-defined set of endpoint URLs as resources, and generates a well-defined set of (JSON)
representations when these resources are accessed.</p>
</div>
<div class="paragraph">
<p>By default, the Restful Objects viewer will automatically handle requests and return representations according to the
RO spec.  However, its internal architecture provides several hooks for content negotiation, thereby allowing the
generated representation to be influenced using the standard HTTP <code>Accept</code> header.  In response, the server uses
the <code>Content-Type</code> header which the client can use to know how to process the returned representation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RepresentationService</code><br></p>
<div class="paragraph">
<p>The <a href="../runtime-services/presentation-layer/RepresentationService.html" class="page"><code>RepresentationService</code></a> is an SPI domain service (plugin-point)
that allows an arbitrary representation to be generated for any of the resources defined in the RO spec.<br></p>
</div>
<div class="paragraph">
<p>Normally this SPI service need not be replaced, because the default implementation
(<code>RepresentationServiceContentNegotiator</code>) simply uses the HTTP <code>Accept</code> header and delegates onto another service, the
(slightly misnamed) <code>ContentNegotiationService</code>, to actually generate the representation.  There can be multiple
implementations of the <code>ContentNegotiationService</code> and the content negotiator will delegate to each in turn until one
is able to handle the request (per the chain of responsibliity pattern).</p>
</div>
</li>
<li>
<p><code>ContentNegotiationService</code><br></p>
<div class="paragraph">
<p>As noted above, there can be multiple implementations of the
<a href="../runtime-services/presentation-layer/ContentNegotiationService.html" class="page"><code>ContentNegotiationService</code></a>, each one handling a particular
HTTP <code>Accept</code> header.  If the implementation does not recognize the value of the header, if can simply return <code>null</code>.<br></p>
</div>
<div class="paragraph">
<p>The framework provides a number of implementations; an implementation that handles the
<a href="simplified-representations.html" class="page">simplified representation</a> of the Apache Isis profile; an implementation that provides support for the <code>x-ro-domain-type</code> parameter, and a
default/fallback implementation that returns the representations defined by the RO spec.</p>
</div>
</li>
<li>
<p><code>ContentMappingService</code><br></p>
<div class="paragraph">
<p>The <a href="../rg/svc/presentation-layer-spi/ContentMappingService.html" class="page"><code>ContentMappingService</code></a> is used by the implementation of
<code>ContentNegotationService</code> that recognizes the <code>x-ro-domain-type</code>, its role being to transform a domain object
(usually an entity) into some other form (usually a DTO), as specified by the <code>x-ro-domain-type</code> parameter.  There
can be many such implementations, each handling a different target domain type.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This diagram shows how these services collaborate:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/rgfis/service-collaborations.png"><img src="_images/rgfis/service-collaborations.png" alt="service collaborations" width="800px"></a>
</div>
</div>
<div class="paragraph">
<p>Taken together these domain services offer a lot of flexibility in terms of the representations that can be generated
from the RestfulObjects viewer.</p>
</div>
</article>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
