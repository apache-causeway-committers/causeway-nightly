<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>File-based Menu Bars :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Apache Isis</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/quick-start.html#starter-apps">Starter Apps</a>
            <a class="navbar-item" href="/helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="/simpleapp/about.html">Simple App</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/guides.html#user-guides">User Guides</a>
            <a class="navbar-item" href="/ug/about.html">Fundamentals & Beyond</a>
            <a class="navbar-item" href="/demoapp/about.html">Demo App</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/guides.html#reference-guides">Reference Guides</a>
            <a class="navbar-item" href="/rg/ant/about.html">Annotations</a>
            <a class="navbar-item" href="/rg/svc/about.html">Domain Services</a>
            <a class="navbar-item" href="/rg/cfg/about.html">Core Config Properties</a>
            <a class="navbar-item" href="/rg/cms/about.html">Classes, Methods &amp; Schema</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/guides.html#testing-prototyping">Testing &amp; Prototyping</a>
            <a class="navbar-item" href="/testing/about.html">Unit & Integ Testing</a>
            <a class="navbar-item" href="/ext-fixtures/about.html">Fixtures (extension)</a>
            <a class="navbar-item" href="/ext-specsupport/about.html">BDD (extension)</a>
            <!--
            <a class="navbar-item" href="/rg/mvn/about.html">Maven plugin</a>
            -->
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/components.html#wicket-viewer">Wicket Viewer</a>
            <a class="navbar-item" href="/vw/about.html">User Guide</a>
            <a class="navbar-item" href="/ext-viewer-wicket-excel/about.html">Excel download (extension)</a>
            <a class="navbar-item" href="/ext-asciidoc/about.html">Asciidoc value type (extension)</a>
            <a class="navbar-item" href="/ext-markdown/about.html">Markdown value type (extension)</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/components.html#wicket-viewer">Restful Objects Viewer</a>
            <a class="navbar-item" href="/vro/about.html">User Guide</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/components.html#datanucleus-object-store">DataNucleus Object Store</a>
            <a class="navbar-item" href="/odn/about.html">User Guide</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/components.html#security">Security</a>
            <a class="navbar-item" href="/security/about.html">User Guide</a>
            <a class="navbar-item" href="/ext-secman/about.html">SecMan (extension)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/support.html#resources">Resources</a>
            <a class="navbar-item" href="/toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="/mavendeps/about.html">Maven mixins</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/support.html#help">Mailing Lists</a>
            <a class="navbar-item" href="/toc/mailing-list/how-to-subscribe.html">How to subscribe</a>
            <a class="navbar-item" href="https://lists.apache.org/list.html?users@isis.apache.org">Archives (ASF Pony Mail)</a>
            <a class="navbar-item" href="http://isis.markmail.org/search/?q=">Archives (Markmail)</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/support.html#releases">Releases</a>
            <a class="navbar-item" href="/toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="/relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="/mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item">Other Resources</span>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">ASF JIRA</a>
            <a class="navbar-item" href="https://cwiki.apache.org/confluence/display/ISIS/Index">ASF Wiki</a>
            <a class="navbar-item" href="https://fisheye.apache.org/browse/~br=master/isis-git/">ASF Fisheye</a>
            <a class="navbar-item" href="http://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Internal</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/internal.html#committers">Committers</a>
            <a class="navbar-item" href="/toc/comguide/about.html">Committers' Guide</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/internal.html#implementation">Implementation</a>
            <a class="navbar-item" href="/archdesign/about.html">Architecture & Design</a>
            <a class="navbar-item" href="/fis/about.html">Framework Internal Services</a>
            <a class="navbar-item" href="/smoketests/about.html">SmokeTest App</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">@ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="/toc/about.html">
          <span class="icon">
            <img src="/_/img/isis-logo-48x48.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="vw" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Viewer Wicket Excel (Excel Download Extensions)</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../sse/about.html">About</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Viewer Wicket Excel (Excel Download Extensions)</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../odn/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - Hello World</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../helloworld/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - SimpleApp</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../simpleapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions - SecMan</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ext-secman/secman/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Fundamentals & Beyond</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Guides - Reference Guides</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Maven Dependencies</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mavendeps/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Maven Mixins</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mixins/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Migration Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mignotes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../relnotes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST Client</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">secman</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../secman/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Table of Contents</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../toc/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Viewer Wicket Excel (Excel Download Extensions)</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../toc/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Viewer Wicket Excel (Excel Download Extensions)</a></li>
    <li><a href="file-based.html">File-based Menu Bars</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/core/viewer-wicket/_adoc/modules/ROOT/pages/menubars-layout/file-based.adoc">Edit this Page</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">File-based Menu Bars</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The domain service actions can be arranged across menu items using the <code>menubars.layout.xml</code> file.
Not only is this easier to work with, it also can be reloaded dynamically (if in prototype mode), substantially reducing the edit compile run cycle.</p>
</div>
<div class="paragraph">
<p>As for <a href="../layout/file-based.html" class="page">file-based object layouts</a>, this offers a number of benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Probably most significantly, the layout can be updated without requiring a recompile of the code and redeploy of the app; fine-tuning the layout with your end users is easy to do</p>
</li>
<li>
<p>Many developers also find it easier to rationalize about menu bars layout when all the hints are collated together in a single place (rather than scattered across the domain service classes as annotations).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are some disadvantages to using file-based layouts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>file-based layouts are not typesafe: a typo will result in the metadata not being picked up for the element.</p>
</li>
<li>
<p>they also suffer from syntactic fragility: an invalid XML document will result in no metadata for the entire class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>menubars.layout.xml</code> file is just the serialized form of a <a href="../../refguide/applib-cm/classes/layout.html" class="page"><code>MenuBars</code></a> layout class defined within Apache Isis' applib.
These are JAXB-annotated classes with corresponding XSD schemas; the upshot of that
is that IDEs such as IntelliJ and Eclipse can provide "intellisense", making it easy to author such layout files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="obtaining-an-initial-layout"><a class="anchor" href="#obtaining-an-initial-layout"></a>Obtaining an initial layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An initial <code>menubars.layout.xml</code> - capturing any existing metadata either implicit or explicitly specified through annotations can be downloaded from the <a href="#refguide:applib-svc:metadata-api/MenuBarsService.adoc" class="page unresolved"><code>MenuBarsService</code></a> (exposed on the prototyping menu):</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/menubars/010-download.png"><img src="/menubars/010-download.png" alt="010 download" width="300px"></a>
</div>
</div>
<div class="paragraph">
<p>This action allows either the "Default" or the "Fallback" layout to be downloaded.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="../_images/menubars/020-download.png"><img src="/menubars/020-download.png" alt="020 download" width="400px"></a>
</div>
</div>
<div class="paragraph">
<p>The "Default" layout is that currently in use, while the "Fallback" layout is that provided only from the annotations.
Initially these are identical.</p>
</div>
<div class="paragraph">
<p>For example, here&#8217;s a fragment of that provided by the simpleapp archetype:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;mb3:menuBars
    xsi:schemaLocation="..."
    xmlns:cpt="http://isis.apache.org/applib/layout/component"
    xmlns:lnk="http://isis.apache.org/applib/layout/links"
    xmlns:mb3="http://isis.apache.org/applib/layout/menubars/bootstrap3"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
    &lt;mb3:primary&gt;
        &lt;mb3:menu&gt;
            &lt;mb3:named&gt;Simple Objects&lt;/mb3:named&gt;
            &lt;mb3:section&gt;
                &lt;mb3:serviceAction objectType="simple.SimpleObjectMenu" id="listAll"&gt;
                    &lt;cpt:named&gt;List All&lt;/cpt:named&gt;
                &lt;/mb3:serviceAction&gt;
                &lt;mb3:serviceAction objectType="simple.SimpleObjectMenu" id="findByName"&gt;
                    &lt;cpt:named&gt;Find By Name&lt;/cpt:named&gt;
                &lt;/mb3:serviceAction&gt;
                &lt;mb3:serviceAction objectType="simple.SimpleObjectMenu" id="create"&gt;
                    &lt;cpt:named&gt;Create&lt;/cpt:named&gt;
                &lt;/mb3:serviceAction&gt;
            &lt;/mb3:section&gt;
        &lt;/mb3:menu&gt;
        &lt;mb3:menu unreferencedActions="true"&gt;
            &lt;mb3:named&gt;Other&lt;/mb3:named&gt;
        &lt;/mb3:menu&gt;
    &lt;/mb3:primary&gt;
    &lt;mb3:secondary&gt;
        &lt;mb3:menu&gt;
            &lt;mb3:named&gt;Prototyping&lt;/mb3:named&gt;
            ...
    &lt;/mb3:secondary&gt;
    &lt;mb3:tertiary&gt;
        &lt;mb3:menu&gt;
            ...
        &lt;/mb3:menu&gt;
    &lt;/mb3:tertiary&gt;
&lt;/mb3:menuBars&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the "Other" menu, with <code>unreferencedActions</code> attribute set to <code>true</code>.
For a layout file to be valid there must be exactly one <code>&lt;menu&gt;</code> with this attribute set.
Any domain service actions that are not explicitly listed will be placed under this menu.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adjusting-the-layout"><a class="anchor" href="#adjusting-the-layout"></a>Adjusting the layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The downloaded <code>menubars.layout.xml</code> file can be adjusted as necessary, creating new menus and menu sections.
Once done, it can be saved in the same package as the <code>AppManifest</code> used to bootstrap the application.
Subsequently, the file is then parsed and used when the application is started.</p>
</div>
<div class="paragraph">
<p>If running in prototype mode, the file will be dynamically reloaded from the classpath.</p>
</div>
<div class="paragraph">
<p>Once the application has bootstrapped with a layout file, downloading the "Default" layout (from the prototyping menu) in essence just returns this file.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If, when the application is run, unwanted service actions are shown in the "Other" menu (which you would like to place elsewhere), then download the "Default" layout again.
The downloaded file will list out all these domain service actions, so that they can easily be moved elsewhere.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>

<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">On this page</h3>
    <div id="article-toc"></div>
</aside>
</main>

</div>
<footer class="footer">
  <p>Revision: </p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/tocbot.js"></script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h2, h3, h4, h5',
        collapseDepth: 2,
        positionFixedSelector: '#article-toc',
        scrollSmooth: true,
        hasInnerContainers: true
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>
  </body>
</html>
