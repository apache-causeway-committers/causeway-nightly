<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Layout :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="..">
          <span class="icon">
            <img src="../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../starters/helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="../starters/simpleapp/about.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../userguide/about.html">User Guide</a>
            <a class="navbar-item" href="../refguide/about.html">Reference Guide</a>
            <a class="navbar-item" href="../testing/about.html">Testing Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Libraries</span>
            <a class="navbar-item" href="../subdomain/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../valuetypes/about.html">Value Types</a>
            <a class="navbar-item" href="../mappings/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="../toc/mavendeps/about.html">Maven dependencies</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../security/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../odn/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../extensions/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../toc/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../toc/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Releases</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="../mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">More Libraries</span>
            <a class="navbar-item" href="../incubator/about.html">Incubator</a>
            <a class="navbar-item" href="../legacy/about.html">Legacy</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Internal</span>
            <a class="navbar-item" href="../toc/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../core/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../toc/about.html">
          <span class="icon">
            <img src="../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="vw" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">Wicket Viewer</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="layout.html">Layout</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="menubars-layout.html">Menubars Layout</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="configuration-properties.html">Configuration Properties</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="features.html">End-user Features</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="customisation.html">Customisation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="extending.html">Extending</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="exceldownload/about.html">Excel Download</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pdfjs/about.html">pdf.js</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Wicket Viewer</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../toc/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../mappings/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../pjdo/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../incubator/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../legacy/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter Apps</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../starters/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../subdomains/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorial App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../valuetypes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../toc/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">Wicket Viewer</a></li>
    <li><a href="layout.html">Layout</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/viewers/wicket/adoc/modules/ROOT/pages/layout.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Layout</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In implementing the <a href="http://en.wikipedia.org/wiki/Naked_objects">naked objects pattern</a>, Apache Isis aims to infer as much information from the domain classes as possible.
Nevertheless, some metadata relating solely to the UI is inevitably required.
This chapter describes how this is done both for domain objects using either annotations or using an associated layout file.</p>
</div>
<div class="paragraph">
<p>The chapter also describes how to customising which columns of associated objects appear in tables.
The layout of application menu items is described in a <a href="menubars-layout.html" class="page">separate chapter</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="annotation-based"><a class="anchor" href="#annotation-based"></a>Annotation-based Layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Metadata providing UI hints can be specified either using annotations, or using a <a href="#file-based"><code>layout.xml</code></a> file.</p>
</div>
<div class="paragraph">
<p>In most cases you will probably want to use the file-based approach: changes to file layouts are picked up dynamically, and using a file also allows tabs and tab groups to be specified: this is not supported using annotations.</p>
</div>
<div class="paragraph">
<p>Nevertheless, annotations are still supported and are sometimes useful for very simple objects or just when prototyping.
This section explains how.</p>
</div>
<div class="sect2">
<h3 id="memberorder"><a class="anchor" href="#memberorder"></a><code>@MemberOrder</code></h3>
<div class="paragraph">
<p>The <a href="../refguide/applib-ant/MemberOrder.html" class="page"><code>@MemberOrder</code></a>  annotation is used to specify the relative order of domain class properties, collections and actions.</p>
</div>
<div class="paragraph">
<p>The annotation defines two attributes, <a href="../refguide/applib-ant/MemberOrder.html#name" class="page"><code>name()</code></a> and <a href="../refguide/applib-ant/MemberOrder.html#sequence" class="page"><code>sequence()</code></a>.
Their usage depends on the member type:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for properties, the <code>name()</code> is used to group properties together into a member group (also called a property group or a fieldset.
The <code>sequence()</code> then orders properties within these groups.
If no <code>name()</code> is specified then the property is placed in a fallback "General" group, called "General".</p>
<div class="paragraph">
<p>The name of these member groups/fieldsets are then referenced by <a href="../refguide/applib-ant/MemberGroupLayout.html" class="page"><code>@MemberGroupLayout</code></a>.</p>
</div>
</li>
<li>
<p>for collections, the <code>name()</code> attribute is (currently) unused.
The <code>sequence()</code> orders collections relative to one another</p>
</li>
<li>
<p>for actions, the <code>name()</code> attribute associates an action with either a property or with a collection.</p>
<div class="ulist">
<ul>
<li>
<p>If the <code>name()</code> attribute matches a property name, then the action&#8217;s button is rendered close to the property, according to <a href="../refguide/applib-ant/ActionLayout.html#position" class="page"><code>@ActionLayout#position()</code></a> attribute.</p>
</li>
<li>
<p>On the other hand if the `name() attribute matches a collection name, then the action&#8217;s button is rendered on the collection&#8217;s header.</p>
</li>
<li>
<p>If there is no <code>name()</code> value, then the action is considered to pertain to the object as a whole, and its button is rendered close to the object&#8217;s icon and title.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Within any of these, the <code>sequence()</code> then determines the relative ordering of the action with respect to other actions that have been similarly associated with properties/collections or left as "free-standing".</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem {
    @MemberOrder(sequence="1")
    public String getDescription() { /* ... */ }
    @MemberOrder(sequence="2")
    public String getCategory() { /* ... */ }
    @MemberOrder(sequence="3")
    public boolean isComplete() { /* ... */ }
    @MemberOrder(name="Detail", sequence="1")
    public LocalDate getDueBy() { /* ... */ }
    @MemberOrder(name="Detail", sequence="2")
    public BigDecimal getCost() { /* ... */ }
    @MemberOrder(name="Detail", sequence="4")
    public String getNotes() { /* ... */ }
    @MemberOrder(name="Misc", sequence="99")
    public Long getVersionSequence() { /* ... */ }
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This defines three property (or member) groups, "General", "Detail" and "Misc"; "General" is the default if no <code>name</code> attribute is specified.
Properties in the same member group are rendered together, as a fieldset.</p>
</div>
<div class="paragraph">
<p>In addition, actions can optionally be associated (rendered close to) either properties or actions.
This is done by overloading the <code>@MemberOrder</code>'s <a href="../refguide/applib-ant/MemberOrder.html#name" class="page"><code>name()</code></a> attribute, holding the value of the property or collection.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem {
    @MemberOrder(sequence="3")
    public boolean isComplete() { /* ... */ }
    @MemberOrder(name="complete", sequence="1")
    public ToDoItem completed() { /* ... */ }
    @MemberOrder(name="complete", sequence="2")
    public ToDoItem notYetCompleted() { /* ... */ }

    @MemberOrder(sequence="1")
    public SortedSet&lt;ToDoItem&gt; getDependencies() { /* ... */ }
    @MemberOrder(name="dependencies", sequence="1")
    public ToDoItem add(ToDoItem t) { /* ... */ }
    @MemberOrder(name="dependencies", sequence="2")
    public ToDoItem remove(ToDoItem t) { /* ... */ }
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>will associate the <code>completed()</code> and <code>notYetCompleted()</code> actions with the <code>complete</code> property, and will associate the <code>add()</code> and <code>remove()</code> actions with the <code>dependencies</code> collection.</p>
</div>
<div class="paragraph">
<p>The value of <a href="../refguide/applib-ant/MemberOrder.html#sequence" class="page"><code>sequence()</code></a> is a string.
The simplest convention (as shown in the example above) is to use numbers&#8201;&#8212;&#8201;1, 2, 3&#8201;&#8212;&#8201;though it is a better idea to leave gaps in the numbers&#8201;&#8212;&#8201;10, 20, 30 perhaps&#8201;&#8212;&#8201;such that a new member may be added without having to edit existing numbers.</p>
</div>
<div class="paragraph">
<p>Even better is to adopt the 'dewey-decimal' notation&#8201;&#8212;&#8201;1, 1.1, 1.2, 2, 3, 5.1.1, 5.2.2, 5.2, 5.3&#8201;&#8212;&#8201;which allows for an indefinite amount of future insertion.
It also allows subclasses to insert their class members as required.</p>
</div>
</div>
<div class="sect2">
<h3 id="membergrouplayout"><a class="anchor" href="#membergrouplayout"></a><code>@MemberGroupLayout</code></h3>
<div class="paragraph">
<p>The <a href="../refguide/applib-ant/MemberGroupLayout.html" class="page"><code>@MemberGroupLayout</code></a> annotation specifies the relative positioning of property groups/fieldsets as being either in a left column, a middle column or in a right column.
The annotation also specifies the relative width of the columns.</p>
</div>
<div class="paragraph">
<p>The property groups/fieldsets in this case are those that are inferred from the <code>@MemberOrder#name()</code> attribute.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is also possible to combine <code>@MemberOrder</code> with a <a href="#file-based">file-based layout</a>.
The layout file defines only the regions of a grid structure (fieldsets/columns etc), but does <em>not</em> specify the properties/collections/actions within those grid regions.
The <code>@MemberOrder</code> annotation in effect "binds" the properties or collections to those regions of the grid.</p>
</div>
<div class="paragraph">
<p>When file-based layouts are used this way, the <a href="../refguide/applib-ant/MemberGroupLayout.html" class="page"><code>@MemberGroupLayout</code></a> annotation is essentially ignored, but the metadata from the <a href="../refguide/applib-ant/MemberOrder.html" class="page"><code>@MemberOrder</code></a> annotation (and the other layout annotations, <a href="../refguide/applib-ant/ActionLayout.html" class="page"><code>@ActionLayout</code></a>, <a href="../refguide/applib-ant/PropertyLayout.html" class="page"><code>@PropertyLayout</code></a> and <a href="../refguide/applib-ant/CollectionLayout.html" class="page"><code>@CollectionLayout</code></a>) are all still honoured.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@MemberGroupLayout(
     columnSpans={3,3,0,6},
     left={"General", "Misc"},
     middle="Detail"
 )
public class ToDoItem {
    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Four values are given in the <code>columnSpans</code> attribute.
The first three are the relative widths of the three columns of property groups.
The fourth, meanwhile, indicates the width of a final column that holds all the collections of the object.</p>
</div>
<div class="paragraph">
<p>The values of these spans are taken as proportions of 12 virtual columns across the page (this taken from the <a href="http://getbootstrap.com/2.3.2/">Bootstrap</a> library).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{3,3,0,6}</code> indicates:</p>
<div class="ulist">
<ul>
<li>
<p>a left column of properties taking up 25% of the width</p>
</li>
<li>
<p>a middle column of properties taking up 25% of the width</p>
</li>
<li>
<p>a right column of collections taking up 50% of the width</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>{2,6,0,4}</code> indicates:</p>
<div class="ulist">
<ul>
<li>
<p>a left column of properties taking up ~16% of the width</p>
</li>
<li>
<p>a middle column of properties taking up 50% of the width</p>
</li>
<li>
<p>a right column of collections taking up ~33% of the width</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>{2,3,3,4}</code> indicates:</p>
<div class="ulist">
<ul>
<li>
<p>a left column of properties taking up ~16% of the width</p>
</li>
<li>
<p>a middle column of properties taking up 25% of the width</p>
</li>
<li>
<p>a right column of properties taking up 25% of the width</p>
</li>
<li>
<p>a far right column of collections taking up ~33% of the width</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the sum of all the columns exceeds 12, then the collections are placed underneath the properties, taking up the full span. For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>{4,4,4,12} indicates:</p>
<div class="ulist">
<ul>
<li>
<p>a left column of properties taking up ~33% of the width</p>
</li>
<li>
<p>a middle column of properties taking up ~33% of the width</p>
</li>
<li>
<p>a right column of properties taking up ~33% of the width</p>
</li>
<li>
<p>the collections underneath the property columns, taking up the full width</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="example-layouts"><a class="anchor" href="#example-layouts"></a>Example Layouts</h3>
<div class="paragraph">
<p>Below are sketches for the layout of the <a href="https://github.com/apache/isis/blob/f38fdb92941172eabb12e0943509f239e6d5925f/example/application/quickstart_wicket_restful_jdo/dom/src/main/java/dom/todo/ToDoItem.java">ToDoItem</a> class of the Isis addons example <a href="https://github.com/isisaddons/isis-app-todoapp/">todoapp</a> (not ASF):</p>
</div>
<div class="paragraph">
<p>The first divides the properties into two equal sized columns (6-6-0) and puts the collections underneath (12):</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/reference-layout/6-6-0-12.png"><img src="_images/reference-layout/6-6-0-12.png" alt="6 6 0 12" width="720px"></a>
</div>
</div>
<div class="paragraph">
<p>The next divides the collections into three equal sized columns (4-4-4) and again puts the collections underneath (12):</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/reference-layout/4-4-4-12.png"><img src="_images/reference-layout/4-4-4-12.png" alt="4 4 4 12" width="720px"></a>
</div>
</div>
<div class="paragraph">
<p>The last puts the properties into a single column (4-0) and places the collections into the other larger column (8-0):</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/reference-layout/4-0-8-0.png"><img src="_images/reference-layout/4-0-8-0.png" alt="4 0 8 0" width="720px"></a>
</div>
</div>
</div>
<div class="sect2">
<h3 id="other-annotations"><a class="anchor" href="#other-annotations"></a>Other Annotations</h3>
<div class="paragraph">
<p>Layout semantics can also be specified using the various <code>XxxLayout</code> annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for domain services: <a href="../refguide/applib-ant/DomainServiceLayout.html" class="page"><code>@DomainServiceLayout</code></a></p>
</li>
<li>
<p>for domain objects: <a href="../refguide/applib-ant/DomainObjectLayout.html" class="page"><code>@DomainObjectLayout</code></a> and <a href="../refguide/applib-ant/ViewModelLayout.html" class="page"><code>@ViewModelLayout</code></a></p>
</li>
<li>
<p>for actions: <a href="../refguide/applib-ant/ActionLayout.html" class="page"><code>@ActionLayout</code></a> and <a href="../refguide/applib-ant/ParameterLayout.html" class="page"><code>@ParameterLayout</code></a></p>
</li>
<li>
<p>for properties: <a href="../refguide/applib-ant/PropertyLayout.html" class="page"><code>@PropertyLayout</code></a></p>
</li>
<li>
<p>for collections: <a href="../refguide/applib-ant/CollectionLayout.html" class="page"><code>@CollectionLayout</code></a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="file-based"><a class="anchor" href="#file-based"></a>File-based Layouts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Metadata providing UI hints can be specified either <a href="#annotation-based">using annotations</a>, or using an <code>Xxx.layout.xml</code> file (where <code>Xxx</code> is the entity or view model object to be rendered).</p>
</div>
<div class="paragraph">
<p>File-based layouts offer a number of benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Probably most significantly, the layout can be updated without requiring a recompile of the code and redeploy of the app; fine-tuning the layout with your end users is easy to do</p>
</li>
<li>
<p>Many developers also find it easier to rationalize about layout when all the hints are collated together in a single place (rather than scattered across the class members as annotations).</p>
</li>
<li>
<p>UI hints can be provided for contributed <a href="../userguide/fun/programming-model.html#contributed-action" class="page">actions</a> that are synthesised at runtime.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is also possible to download an initial <code>.layout.xml</code> - capturing any existing layout metadata - using the <a href="../refguide/applib-svc/metadata-api/LayoutService.html" class="page"><code>LayoutService</code></a> (exposed on the prototyping menu) or using a <a href="../refguide/applib-cm/classes/mixins.html#Object" class="page">mixin action</a> contributed to every domain object.</p>
</div>
<div class="paragraph">
<p>There are some downsides, though:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>file-based layouts are not typesafe: a typo will result in the metadata not being picked up for the element.</p>
</li>
<li>
<p>they suffer from syntactic fragility: an invalid XML document will result in no metadata for the entire class.</p>
</li>
<li>
<p>there is no notion of inheritance, so a <code>.layout.xml</code> is required for all concrete classes and also for any abstract classes (if used as a collection type).
In contrast, the dewey-decimal format <code>@MemberOrder</code> annotation allows the metadata of the subclass its superclasses to fit together relatively seamlessly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>Xxx.layout.xml</code> file is just the serialized form of a <a href="../refguide/applib-cm/classes/layout.html" class="page"><code>Grid</code></a> layout class defined within Apache Isis' applib.
These are JAXB-annotated classes with corresponding XSD schemas; the upshot of that is that IDEs such as IntelliJ and Eclipse can provide "intellisense", making iteasy to author such layout files.</p>
</div>
<div class="sect2">
<h3 id="alternative-layouts"><a class="anchor" href="#alternative-layouts"></a>Alternative Layouts</h3>
<div class="paragraph">
<p>A domain object may also have multiple layouts.
For example, there may be the capability to switch into an "edit" mode, which perhaps hides some class members, shows others (perhaps mixins specific to data entry).
Another reason might be to support different tenancies/user groups, where different business processes might require a slightly different UI representation.</p>
</div>
<div class="paragraph">
<p>One way in which the domain object can specify an alternate layout is through its <a href="../refguide/applib-cm/methods.html#layout" class="page"><code>layout()</code></a> method.
If this returns a non-null value, say "edit", then this is used to locate an alternative layout, in the form <code>Xxx-edit.layout.xml</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="search-algorithm-library-support"><a class="anchor" href="#search-algorithm-library-support"></a>Search Algorithm (Library Support)</h3>
<div class="paragraph">
<p>For a given domain object <code>Xxx</code>, if it has specified a layout <code>yyy</code>, then the framework will search for a file <code>Xxx.yyy.layout.xml</code> on the classpath.</p>
</div>
<div class="paragraph">
<p>If no layout has been specified (or if the specified layout cannot be found), then the framework searches for a file called <code>Xxx.layout.xml</code>.</p>
</div>
<div class="paragraph">
<p>Finally, if this can&#8217;t be found, then the framework will search for a file named <code>Xxx.layout.fallback.xml</code>.
If present, this will be used instead.</p>
</div>
<div class="paragraph">
<p>The "fallback" layout this therefore allows libraries that provide a domain entities/view models (for example, the (non-ASF) <a href="https://platform.incode.org">Incode Platform</a> modules) to define the UI of these objects using a layout file, while still allowing the consuming application to override that layout if it so requires.</p>
</div>
</div>
<div class="sect2">
<h3 id="grids-vs-components"><a class="anchor" href="#grids-vs-components"></a>Grids vs Components</h3>
<div class="paragraph">
<p>The layout file distinguishes between two types of element:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>those that define a grid structure, of: rows, columns, tab groups and tabs.<br></p>
<div class="paragraph">
<p>The rows and columns are closely modelled on <a href="http://getbootstrap.com">Bootstrap 3</a> (used in the implementation of the <a href="about.html" class="page">Wicket viewer</a>).</p>
</div>
</li>
<li>
<p>those that defines common components, of: fieldsets (previously called member groups or property groups), properties, collections, actions and also the title/icon of the domain object itself.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More information about these classes can be found in <a href="../refguide/applib-cm/classes/layout.html" class="page">the reference guide</a>.  More information on Bootstrap 3&#8217;s grid system can be found <a href="http://getbootstrap.com/css/#grid">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="screencast"><a class="anchor" href="#screencast"></a>Screencast</h3>
<div class="paragraph">
<p>This <a href="https://www.youtube.com/watch?v=MxewC5Pve5k">screencast</a> describes the feature.</p>
</div>
</div>
<div class="sect2">
<h3 id="examples"><a class="anchor" href="#examples"></a>Examples</h3>
<div class="paragraph">
<p>Probably the easiest way to understand dynamic XML layouts is by example.
For this we&#8217;ll use the <code>ToDoItem</code> from the (non-ASF) <a href="http://github.com/isisaddons/isis-app-todoapp">Isis addons' todoapp</a>:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/layout-dynamic-xml/ToDoItem.png"><img src="_images/layout-dynamic-xml/ToDoItem.png" alt="ToDoItem" width="940px"></a>
</div>
</div>
<div class="sect3">
<h4 id="namespaces"><a class="anchor" href="#namespaces"></a>Namespaces</h4>
<div class="paragraph">
<p>First things first; every <code>.layout.xml</code> file must properly declare the XSD namespaces and schemas.
There are two: one for the grid classes, and one for the common component classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;bs3:grid
  xsi:schemaLocation="http://isis.apache.org/applib/layout/component
                      http://isis.apache.org/applib/layout/component/component.xsd
                      http://isis.apache.org/applib/layout/grid/bootstrap3
                      http://isis.apache.org/applib/layout/grid/bootstrap3/bootstrap3.xsd"
  xmlns:bs3="http://isis.apache.org/applib/layout/grid/bootstrap3"
  xmlns:c="http://isis.apache.org/applib/layout/component"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
    ...
&lt;/bs3:grid&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Most IDEs will automatically download the XSD schemas from the specified schema locations, thereby providing
"intellisense" help as you edit the file.</p>
</div>
</div>
<div class="sect3">
<h4 id="rows-full-width-cols-and-tabs"><a class="anchor" href="#rows-full-width-cols-and-tabs"></a>Rows, full-width cols, and tabs</h4>
<div class="paragraph">
<p>The example layout consists of three rows: a row for the object/icon, a row containing a properties, and a row containing collections.
In all three cases the row contains a single column spanning the full width of the page.
For the property and collection rows, the column contains a tab group.</p>
</div>
<div class="paragraph">
<p>This corresponds to the following XML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bs3:row&gt;
    &lt;bs3:col span="12" unreferencedActions="true"&gt;
        &lt;c:domainObject bookmarking="AS_ROOT"/&gt;
    &lt;/bs3:col&gt;
&lt;/bs3:row&gt;
&lt;bs3:row&gt;
    &lt;bs3:col span="12"&gt;
        &lt;bs3:tabGroup&gt;
            &lt;bs3:tab name="Properties"&gt;...&lt;/bs3:tab&gt;
            &lt;bs3:tab name="Other"&gt;...&lt;/bs3:tab&gt;
            &lt;bs3:tab name="Metadata"&gt;...&lt;/bs3:tab&gt;
        &lt;/bs3:tabGroup&gt;
    &lt;/bs3:col&gt;
&lt;/bs3:row&gt;
&lt;bs3:row&gt;
    &lt;bs3:col span="12"&gt;
        &lt;bs3:tabGroup unreferencedCollections="true"&gt;
            &lt;bs3:tab name="Similar to"&gt;...&lt;/bs3:tab&gt;
            &lt;bs3:tab name="Dependencies"&gt;...&lt;/bs3:tab&gt;
        &lt;/bs3:tabGroup&gt;
    &lt;/bs3:col&gt;
&lt;/bs3:row&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will notice that one of the <code>col</code>umns has an <code>unreferencedActions</code> attribute, while one of the <code>tabGroup</code>s has a similar <code>unreferencedCollections</code> attribute.
This topic is discussed in more detail <a href="#vw:ROOT:layout/file-based/adoc.adoc#unreferenced" class="page unresolved">below</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="fieldsets"><a class="anchor" href="#fieldsets"></a>Fieldsets</h4>
<div class="paragraph">
<p>The first tab containing properties is divided into two columns, each of which holds a single fieldset of multiple properties.
Those properties in turn can have associated actions.</p>
</div>
<div class="paragraph">
<p>This corresponds to the following XML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bs3:tab name="Properties"&gt;
    &lt;bs3:row&gt;
        &lt;bs3:col span="6"&gt;
            &lt;c:fieldSet name="General" id="general" unreferencedProperties="true"&gt;
                &lt;c:action id="duplicate" position="PANEL_DROPDOWN"/&gt;
                &lt;c:action id="delete"/&gt;
                &lt;c:property id="description"/&gt;
                &lt;c:property id="category"/&gt;
                &lt;c:property id="subcategory"&gt;
                    &lt;c:action id="updateCategory"/&gt;
                    &lt;c:action id="analyseCategory" position="RIGHT"/&gt;
                &lt;/c:property&gt;
                &lt;c:property id="complete"&gt;
                    &lt;c:action id="completed" cssClassFa="fa-thumbs-up"/&gt;
                    &lt;c:action id="notYetCompleted" cssClassFa="fa-thumbs-down"/&gt;
                &lt;/c:property&gt;
            &lt;/c:fieldSet&gt;
        &lt;/bs3:col&gt;
        &lt;bs3:col span="6"&gt;
            ...
        &lt;/bs3:col&gt;
    &lt;/bs3:row&gt;
&lt;/bs3:tab&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The tab defines two columns, each span of 6 (meaning half the width of the page).</p>
</div>
<div class="paragraph">
<p>In the first column there is a single fieldset.
Notice how actions - such as <code>duplicate</code> and <code>delete</code> - can be associated with this fieldset directly, meaning that they should be rendered on the fieldset&#8217;s top panel.</p>
</div>
<div class="paragraph">
<p>Thereafter the fieldset lists the properties in order.
Actions can be associated with properties too; here they are rendered underneath or to the right of the field.</p>
</div>
<div class="paragraph">
<p>Note also the <code>unreferencedProperties</code> attribute for the fieldset; this topic is discussed in more detail <a href="layout/file-based.html#unreferenced" class="page">below</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>&lt;fieldset&gt;</code>'s "name" attribute is optional.
If omitted, then the title panel is suppressed, freeing more real estate.</p>
</div>
<div class="paragraph">
<p>Do be aware though that if there are any actions that have been placed on the fieldset&#8217;s panel, then these <em>will <strong>not</strong> be displayed</em>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="collections"><a class="anchor" href="#collections"></a>Collections</h4>
<div class="paragraph">
<p>In the final row the collections are placed in tabs, simply one collection per tab.  This corresponds to the following XML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bs3:tab name="Similar to"&gt;
    &lt;bs3:row&gt;
        &lt;bs3:col span="12"&gt;
            &lt;c:collection defaultView="table" id="similarTo"/&gt;
        &lt;/bs3:col&gt;
    &lt;/bs3:row&gt;
&lt;/bs3:tab&gt;
&lt;bs3:tab name="Dependencies"&gt;
    &lt;bs3:row&gt;
        &lt;bs3:col span="12"&gt;
            &lt;c:collection defaultView="table" id="dependencies"&gt;
                &lt;c:action id="add"/&gt;
                &lt;c:action id="remove"/&gt;
            &lt;/c:collection&gt;
        &lt;/bs3:col&gt;
    &lt;/bs3:row&gt;
&lt;/bs3:tab&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>As with properties, actions can be associated with collections; this indicates that they should be rendered in the collection&#8217;s header.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="unreferenced-members"><a class="anchor" href="#unreferenced-members"></a>Unreferenced Members</h3>
<div class="paragraph">
<p>As noted in the preceding discussion, several of the grid&#8217;s regions have either an <code>unreferencedActions</code>, <code>unreferencedCollections</code> or <code>unreferencedProperties</code> attribute.</p>
</div>
<div class="paragraph">
<p>The rules are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>unreferencedActions</code> attribute can be specified either on a column or on a fieldset. <br></p>
<div class="paragraph">
<p>It would normally be typical to use the column holding the <code>&lt;domainObject/&gt;</code> icon/title, that is as shown in the example.
The unreferenced actions then appear as top-level actions for the domain object.</p>
</div>
</li>
<li>
<p><code>unreferencedCollections</code> attribute can be specified either on a column or on a tabgroup.<br></p>
<div class="paragraph">
<p>If specified on a column, then that column will contain each of the unreferenced collections, stacked one on top of the other.
If specified on a tab group, then a separate tab will be created for each collection, with that tab containing only that single collection.</p>
</div>
</li>
<li>
<p><code>unreferencedProperties</code> attribute can be specified only on a fieldset.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The purpose of these attributes is to indicate where in the layout any unreferenced members should be rendered.
Every grid <em>must</em> nominate one region for each of these three member types, the reason being that to ensure that the layout can be used even if it is incomplete with respect to the object members inferred from the Java source code.
This might be because the developer forgot to update the layout, or it might be because of a new mixin (property, collection or action) contributed to many objects.</p>
</div>
<div class="paragraph">
<p>The framework ensures that in any given grid exactly one region is specified for each of the three <code>unreferenced&#8230;&#8203;</code> attributes.
If the grid fails this validation, then a warning message will be displayed, and the invalid XML logged.  The layout XML will then be ignored.</p>
</div>
</div>
<div class="sect2">
<h3 id="more-advanced-features"><a class="anchor" href="#more-advanced-features"></a>More advanced features</h3>
<div class="paragraph">
<p>This section decribes a number of more features useful in more complex layouts.</p>
</div>
<div class="sect3">
<h4 id="multiple-references-to-a-feature"><a class="anchor" href="#multiple-references-to-a-feature"></a>Multiple references to a feature</h4>
<div class="paragraph">
<p>One feature worth being aware of is that it is possible to render a single feature more than once.</p>
</div>
<div class="paragraph">
<p>For example, the dashboard home page for the (non-ASF) <a href="http://github.com/isisaddons/isis-app-todoapp">Isis addons' todoapp</a> shows
the "not yet complete" collection of todo items twice, once as a table and also as a calendar:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/layout-dynamic-xml/ToDoAppDashboard.png"><img src="_images/layout-dynamic-xml/ToDoAppDashboard.png" alt="ToDoAppDashboard" width="940px"></a>
</div>
</div>
<div class="paragraph">
<p>This is accomplished using the following (slightly abbreviated) layout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;grid ...&gt;
    &lt;row&gt;
        &lt;col span="2" unreferencedActions="true"&gt;
            ...
        &lt;/col&gt;
        &lt;col span="5" unreferencedCollections="true" cssClass="custom-padding-top-20"&gt;
            &lt;ns2:collection id="notYetComplete" defaultView="calendar"/&gt;                <i class="conum" data-value="1"></i><b>(1)</b>
        &lt;/col&gt;
        &lt;col span="5" cssClass="custom-padding-top-20"&gt;
            &lt;ns2:collection id="notYetComplete" defaultView="table" paged="5"/&gt;         <i class="conum" data-value="2"></i><b>(2)</b>
            &lt;ns2:collection id="complete" defaultView="table"/&gt;
        &lt;/col&gt;
        &lt;col span="0"&gt;
            &lt;ns2:fieldSet name="General" id="general" unreferencedProperties="true"/&gt;
        &lt;/col&gt;
    &lt;/row&gt;
&lt;/grid&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>render the collection in "calendar" view</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>also render the collection in "table" view</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the middle column the <code>notYetComplete</code> collection is rendered in "calendar" view, while in the right-most column it is rendered in "table" view.</p>
</div>
<div class="paragraph">
<p>It is also possible to reference object properties and actions more than once.
This might be useful for a complex domain object with multiple tabs; certain properties or actions might appear on a summary tab (that shows the most commonly used info), but also on detail tabs.</p>
</div>
</div>
<div class="sect3">
<h4 id="custom-css"><a class="anchor" href="#custom-css"></a>Custom CSS</h4>
<div class="paragraph">
<p>The ToDoApp&#8217;s dashboard (above) also shows how custom CSS styles can be associated with specific regions of the layout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;grid ...&gt;
    &lt;row&gt;
        &lt;col span="2" unreferencedActions="true"&gt;
            &lt;ns2:domainObject/&gt;
            &lt;row&gt;
                &lt;col span="12" cssClass="custom-width-100"&gt;                             <i class="conum" data-value="1"></i><b>(1)</b>
                    &lt;ns2:action id="exportToWordDoc"/&gt;
                &lt;/col&gt;
            &lt;/row&gt;
            ...
        &lt;/col&gt;
        &lt;col span="5" unreferencedCollections="true" cssClass="custom-padding-top-20"&gt;  <i class="conum" data-value="2"></i><b>(2)</b>
            ...
        &lt;/col&gt;
        &lt;col span="5" cssClass="custom-padding-top-20"&gt;                                 <i class="conum" data-value="3"></i><b>(3)</b>
            ...
        &lt;/col&gt;
    &lt;/row&gt;
&lt;/grid&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Render the column with the <code>custom-width-100</code> CSS class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Render the column with the <code>custom-padding-top-20</code> CSS class.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Ditto</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example the <code>custom-width-100</code> style is used to "stretch" the button for the <code>exportToWordDoc</code> action in the left-most column.
This is accomplished with the following CSS in <code>application.css</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-css hljs" data-lang="css">.custom-width-100 ul,
.custom-width-100 ul li,
.custom-width-100 ul li a.btn {
    width: 100%;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly, the middle and right columns are rendered using the <code>custom-padding-top-20</code> CSS class.  This shifts them down
from the top of the page slightly, using the following CSS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-css hljs" data-lang="css">.custom-padding-top-20 {
    padding-top: 20px;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="migrating-from-earlier-versions"><a class="anchor" href="#migrating-from-earlier-versions"></a>Migrating from earlier versions</h3>
<div class="paragraph">
<p>As noted earlier on, it is possible to download layout XML files using the <a href="../refguide/applib-svc/metadata-api/LayoutService.html" class="page"><code>LayoutService</code></a> (exposed on the prototyping menu); this will download a ZIP file of layout XML files for all domain entities and view models.
Alternatively the layout XML for a single domain object can be downloaded using the <a href="../refguide/applib-cm/classes/mixins.html#Object" class="page">mixin action</a> (contributed to every domain object).</p>
</div>
<div class="paragraph">
<p>There are four "styles":</p>
</div>
<div class="ulist">
<ul>
<li>
<p>current</p>
</li>
<li>
<p>complete</p>
</li>
<li>
<p>normalized</p>
</li>
<li>
<p>minimal</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ignoring the "current" style (which merely downloads the currently cached layout), the other three styles allow the developer to choose how much metadata is to be specified in the XML, and how much (if any) will be obtained from annotations in the metamodel.
The table below summarises the choices:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Table caption</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-bottom">Style</th>
<th class="tableblock halign-center valign-bottom"><a href="../refguide/applib-ant/MemberGroupLayout.html" class="page"><code>@MemberGroupLayout</code></a></th>
<th class="tableblock halign-center valign-bottom"><a href="../refguide/applib-ant/MemberOrder.html" class="page"><code>@MemberOrder</code></a></th>
<th class="tableblock halign-center valign-bottom"><a href="../refguide/applib-ant/ActionLayout.html" class="page"><code>@ActionLayout</code></a>, <a href="../refguide/applib-ant/PropertyLayout.html" class="page"><code>@PropertyLayout</code></a>, <a href="../refguide/applib-ant/CollectionLayout.html" class="page"><code>@CollectionLayout</code></a></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock"><code>COMPLETE</code></p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">serialized as XML</p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">serialized as XML</p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">serialized as XML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock"><code>NORMALIZED</code></p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">serialized as XML</p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">serialized as XML</p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">not in the XML</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-bottom"><p class="tableblock"><code>MINIMAL</code></p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">serialized as XML</p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">not in the XML</p></td>
<td class="tableblock halign-center valign-bottom"><p class="tableblock">not in the XML</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As a developer, you therefore have a choice as to how you provide the metadata required for customised layouts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if you want all layout metadata to be read from the <code>.layout.xml</code> file, then download the "complete" version, and copy the file alongside the domain class.
You can then remove all <code>@MemberGroupLayout</code>, <code>@MemberOrder</code>, <code>@ActionLayout</code>, <code>@PropertyLayout</code> and <code>@CollectionLayout</code> annotations from the source code of the domain class.</p>
</li>
<li>
<p>if you want to use layout XML file to describe the grid (columns, tabs etc) and specify which object members are associated with those regions of the grid, then download the "normalized" version.
You can then remove the <code>@MemberGroupLayout</code> and <code>@MemberOrder</code> annotations from the source code of the domain class, but retain the <code>@ActionLayout</code>, <code>@PropertyLayout</code> and <code>@CollectionLayout</code> annotations.</p>
</li>
<li>
<p>if you want to use layout XML file ONLY to describe the grid, then download the "minimal" version.
The grid regions will be empty in this version, and the framework will use the <code>@MemberOrder</code> annotation to bind object members to those regions.
The only annotation that can be safely removed from the source code with this style is the <code>@MemberGroupLayout</code> annotation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Download either for a single domain object, or download all domain objects (entities and view models).</p>
</div>
</div>
<div class="sect2">
<h3 id="domain-services"><a class="anchor" href="#domain-services"></a>Domain Services</h3>
<div class="paragraph">
<p>For more information about layouts, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../refguide/applib-svc/metadata-api/LayoutService.html" class="page"><code>LayoutService</code></a> (whose functionality is exposed on the prototyping menu as an action) and lso the a <a href="../refguide/applib-cm/classes/mixins.html#Object" class="page">mixin action</a></p>
</li>
<li>
<p><a href="../refguide/applib-svc/presentation-layer-spi/GridService.html" class="page"><code>GridService</code></a> and its supporting services, <a href="../refguide/applib-svc/presentation-layer-spi/GridLoaderService.html" class="page"><code>GridLoaderService</code></a> and <a href="../refguide/applib-svc/presentation-layer-spi/GridSystemService.html" class="page"><code>GridSystemService</code></a></p>
</li>
<li>
<p><a href="../refguide/applib-cm/classes/layout.html" class="page">grid layout classes</a>, defined in the Apache Isis applib</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="required-updates-to-the-dom-projects-pom-xml"><a class="anchor" href="#required-updates-to-the-dom-projects-pom-xml"></a>Required updates to the dom project&#8217;s pom.xml</h3>
<div class="paragraph">
<p>Any <code>.layout.xml</code> files must be compiled and available in the classpath.
Ensure the following is defined in the dom project&#8217;s <code>pom.xml</code>:</p>
</div>
<div class="listingblock xml">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;resources&gt;
    &lt;resource&gt;
        &lt;filtering&gt;false&lt;/filtering&gt;
        &lt;directory&gt;src/main/resources&lt;/directory&gt;
    &lt;/resource&gt;
    &lt;resource&gt;
        &lt;filtering&gt;false&lt;/filtering&gt;
        &lt;directory&gt;src/main/java&lt;/directory&gt;
        &lt;includes&gt;
            &lt;include&gt;**&lt;/include&gt;
        &lt;/includes&gt;
        &lt;excludes&gt;
            &lt;exclude&gt;**/*.java&lt;/exclude&gt;
        &lt;/excludes&gt;
    &lt;/resource&gt;
&lt;/resources&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If using an Apache Isis <a href="https://github.com/apache/isis-app-helloworld">HelloWorld</a> <a href="https://github.com/apache/isis-app-simpleapp">SimpleApp</a> archetypes, then the POM is already correctly configured.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="table-columns"><a class="anchor" href="#table-columns"></a>Table Columns</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The optional <a href="../refguide/applib-svc/presentation-layer-spi/TableColumnOrderService.html" class="page"><code>TableColumnOrderService</code></a> SPI service can be used to reorder columns in a table, either for a parented collection (owned by parent domain object) or a standalone collection (returned from an action invocation).</p>
</div>
<div class="paragraph">
<p>For example, suppose there is a <code>Customer</code> and an <code>Order</code>:</p>
</div>
<div class="imageblock plantuml">
<div class="content">
<img src="http://www.plantuml.com/plantuml/png/SoWkIImgAStDuN8kBIx9pqqjKb0oL5BGqjMrKr3AJSohL5BmBqe1Ybefv8FeOYwkv9p4ucAeQ3MN0X1avfKev9NcWjakYIMf2WKvYScfAVvv297YZCo20hXGS0bO34HorN8vfEQb05q00000" alt="_imageslayouts/customer-order">
</div>
</div>
<div class="paragraph">
<p>The order of these properties of <code>Order</code>, when rendered in the context of its owning <code>Customer</code>, can be controlled using this implementation of <code>TableColumnOrderService</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DomainService(
    nature = NatureOfService.DOMAIN,
    menuOrder = "100"                               <i class="conum" data-value="1"></i><b>(1)</b>
)
public class TableColumnOrderServiceForCustomerOrders
                 implements TableColumnOrderService {
    public List&lt;String&gt; orderParented(
            final Object parent,
            final String collectionId,
            final Class&lt;?&gt; collectionType,
            final List&lt;String&gt; propertyIds) {
        return parent instanceof Customer &amp;&amp; "orders".equals(collectionId)
             ? Arrays.asList("num", "placedOn", "state", "shippedOn")
             : null;
    }
    public List&lt;String&gt; orderStandalone(
            final Class&lt;?&gt; collectionType,
            final List&lt;String&gt; propertyIds) {
        return null;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>specifies the order in which the <code>TableColumnOrderService</code> implementations are called.</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20200119-1120-29a8b9ad</p>
        </div>
    </div>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script src="../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
