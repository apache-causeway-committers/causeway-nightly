<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: Apache Isis</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../../../../../.." title="Apache Isis">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../../../..">
          <span class="icon">
            <img src="../../../../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../../../../setupguide/2.0.0-M5/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../../../../userguide/2.0.0-M5/about.html">User Guide</a>
            <a class="navbar-item" href="../../../../../../refguide/2.0.0-M5/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../../../../testing/2.0.0-M5/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../../../../subdomains/2.0.0-M5/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../../../../../valuetypes/2.0.0-M5/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../../../../../mappings/2.0.0-M5/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../../../../../incubator/2.0.0-M5/about.html">Incubator</a>
            <a class="navbar-item" href="../../../../../../legacy/2.0.0-M5/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../../../../vw/2.0.0-M5/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../../../../../vro/2.0.0-M5/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../../../../security/2.0.0-M5/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../../../../pjdo/2.0.0-M5/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../../../../../extensions/2.0.0-M5/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../../../../relnotes/2.0.0-M5/about.html">Release Notes</a>
            <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/archive/1-x.html">Archive (1.x)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../../../../../conguide/2.0.0-M5/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../../../../../comguide/2.0.0-M5/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../../../../core/2.0.0-M5/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../../../../docs/2.0.0-M5/about.html">
          <span class="icon">
            <img src="../../../../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="refguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous disabled" rel="prev" href="" title=""><span></span></a>
  <a class="page-next disabled" rel="next"
     href="" title=""><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title=""><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../../about.html">Reference Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../applib-ant/about.html">Annotations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Action.html">Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ActionLayout.html">ActionLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Collection.html">Collection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../CollectionLayout.html">CollectionLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/Column.html">Column</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/Digits.html">Digits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/Discriminator.html">Discriminator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DomainObject.html">DomainObject</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DomainObjectLayout.html">DomainObjectLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DomainService.html">DomainService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../DomainServiceLayout.html">DomainServiceLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Facets.html">Facets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../HomePage.html">HomePage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../MemberOrder.html">MemberOrder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/NotPersistent.html">NotPersistent.</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/Nullable.html">Nullable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../MinLength.html">MinLength</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Parameter.html">Parameter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../ParameterLayout.html">ParameterLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/Pattern.html">Pattern</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/PersistenceCapable.html">PersistenceCapable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/PrimaryKey.html">PrimaryKey</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Programmatic.html">Programmatic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Property.html">Property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../PropertyLayout.html">PropertyLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../InteractionScope.html">RequestScoped</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../Title.html">Title</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#refguide:applib-ant:ViewModel.adoc">ViewModel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/XmlJavaTypeAdapter.html">XmlJavaTypeAdapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-ant/XmlRootElement.html">XmlRootElement</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../applib-methods/about.html">Methods</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-methods/prefixes.html">Supporting Method Prefixes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-methods/reserved.html">Reserved Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-methods/lifecycle.html">Lifecycle Methods</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../applib-classes/about.html">Classes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/events.html">Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/ViewModel.html"><code>ViewModel</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/value-types.html">Value Types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/spec.html">Specification pattern</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/i18n.html">i18n support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/roles-mixins-contributees.html">Roles, Mixins and Contributees</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/utility.html">Utility Classes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../applib-classes/layout.html">Layout</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../applib-svc/about.html">Domain Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/acceptheader/AcceptHeaderService.html">AcceptHeaderService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/appfeat/ApplicationFeatureRepository.html">ApplicationFeatureRepository</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/bookmark/BookmarkService.html">BookmarkService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/bookmarkui/BookmarkUiService.html">BookmarkUiService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/clock/ClockService.html">ClockService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/commanddto/processor/spi/CommandDtoProcessorService.html">CommandDtoProcessorService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/command/CommandExecutorService.html">CommandExecutorService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/publishing/spi/CommandSubscriber.html">CommandSubscriber</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/confview/ConfigurationMenu.html">ConfigurationMenu</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/confview/ConfigurationViewService.html">ConfigurationViewService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/conmap/ContentMappingService.html">ContentMappingService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/linking/DeepLinkService.html">DeepLinkService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/userreg/EmailNotificationService.html">EmailNotificationService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/email/EmailService.html">EmailService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/publishing/spi/EntityChangesSubscriber.html">EntityChangesSubscriber</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/publishing/spi/EntityPropertyChangeSubscriber.html">EntityPropertyChangeSubscriber</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/error/ErrorReportingService.html">ErrorReportingService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/eventbus/EventBusService.html">EventBusService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/exceprecog/ExceptionRecognizerService.html">ExceptionRecognizerService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/factory/FactoryService.html">FactoryService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/grid/GridLoaderService.html">GridLoaderService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/grid/GridService.html">GridService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/grid/GridSystemService.html">GridSystemService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/health/HealthCheckService.html">HealthCheckService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/hint/HintStore.html">HintStore</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/homepage/HomePageResolverService.html">HomePageResolverService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/iactn/InteractionContext.html">InteractionContext</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/jaxb/JaxbService.html">JaxbService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/layout/LayoutService.html">LayoutService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/layout/LayoutServiceMenu.html">LayoutServiceMenu</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/i18n/LocaleProvider.html">LocaleProvider</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/menu/MenuBarsLoaderService.html">MenuBarsLoaderService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/menu/MenuBarsService.html">MenuBarsService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/message/MessageService.html">MessageService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/metamodel/MetaModelService.html">MetamodelService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/metamodel/MetaModelServiceMenu.html">MetamodelServiceMenu</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/metrics/MetricsService.html">MetricsService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/publishing/spi/ExecutionSubscriber.html">ExecutionSubscriber</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/queryresultscache/QueryResultsCache.html">QueryResultsCache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/repository/RepositoryService.html">RepositoryService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/routing/RoutingService.html">RoutingService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/scratchpad/Scratchpad.html">Scratchpad</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/inject/ServiceInjector.html">ServiceInjector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/registry/ServiceRegistry.html">ServiceRegistry</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/session/SessionLoggingService.html">SessionLoggingService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/sudo/SudoService.html">SudoService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/swagger/SwaggerService.html">SwaggerService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/tablecol/TableColumnOrderService.html">TableColumnOrderService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/title/TitleService.html">TitleService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/i18n/TranslationService.html">TranslationService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/i18n/TranslationsResolver.html">TranslationsResolver</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/xactn/TransactionalProcessor.html">TransactionProcessor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/xactn/TransactionService.html">TransactionService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/urlencoding/UrlEncodingService.html">UrlEncodingService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/userprof/UserProfileService.html">UserProfileService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/userreg/UserRegistrationService.html">UserRegistrationService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/user/UserService.html">UserService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/wrapper/WrapperFactory.html">WrapperFactory</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/xml/XmlService.html">XmlService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../services/xmlsnapshot/XmlSnapshotService.html">XmlSnapshotService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../config/about.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.applib.html">Applib</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.core.meta-model.html">Core MetaModel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.core.meta-model.introspector.html">Core MetaModel Introspection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.core.meta-model.validator.html">MetaModel Validator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.core.runtime.html">Core Runtime configurations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.core.runtime-services.html">Core Runtime Services configurations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.persistence.schema.html">Core Persistence Schema</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.security.shiro.html">Shiro Security Implementation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.viewer.restfulobjects.html">Restful Objects Viewer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.viewer.wicket.html">Wicket Viewer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.extensions.html">Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.value-types.html">Value types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.testing.html">Testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/isis.legacy.html">Legacy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/resteasy.html">RestEasy Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../config/sections/Other.html">Other</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../../../schema/about.html">Schema</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../schema/mml.html">MetaModel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../schema/cmd.html">Command</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../schema/ixn.html">Interaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../schema/chg.html">Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../../schema/common.html">Common</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Reference Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../mappings/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../legacy/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../subdomains/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tooling</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../tooling/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/master/antora/components/refguide/modules/applib/pages/index/annotation/hooks/Action_010-examples-and-usage.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<div class="sect1">
<h2 id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem {
    public static class CompletedEvent extends ActionDomainEvent&lt;ToDoItem&gt; { }
    @Action(
        commandPublishing=Publishing.ENABLED,
        commandExecuteIn=CommandExecuteIn.FOREGROUND,          <i class="conum" data-value="1"></i><b>(1)</b>
        commandPersistence=CommandPersistence.NOT_PERSISTED,   <i class="conum" data-value="2"></i><b>(2)</b>
        domainEvent=CompletedEvent.class,
        hidden = Where.NOWHERE,                                <i class="conum" data-value="3"></i><b>(3)</b>
        executionPublishing = Publishing.ENABLED,
        semantics = SemanticsOf.IDEMPOTENT
    )
    public ToDoItem completed() { /* ... */ }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>default value, so could be omitted</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>default value, so could be omitted</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>default value, so could be omitted</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage-notes"><a class="anchor" href="#usage-notes"></a>Usage Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="associating-actions-with-properties-and-collections"><a class="anchor" href="#associating-actions-with-properties-and-collections"></a>Associating actions with properties and collections</h3>
<div class="paragraph">
<p>The <code>associateWith</code> element allows an action to be associated with other properties or collections of the same domain object.
The optional <code>associateWithSequence</code> element specifies the order of the action in the UI.</p>
</div>
<div class="paragraph">
<p>For example, an <code>Order</code> could have a collection of <code>OrderItem</code>s, and might provide actions to add and remove items:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Order {

    @Getter @Setter
    @Collection
    private final SortedSet&lt;OrderItem&gt; items = ...

    @Action(
        associateWith="items",                      <i class="conum" data-value="1"></i><b>(1)</b>
        associateWithSequence="1" )                 <i class="conum" data-value="2"></i><b>(2)</b>
    public Order addItem(Product p, int quantity) {
        // ...
    }

    @Action(
        associateWith="items",                      <i class="conum" data-value="3"></i><b>(3)</b>
        associateWithSequence="2" )                 <i class="conum" data-value="4"></i><b>(4)</b>
    public Order removeItem(OrderItem item) {
        // ...
    }

    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>matches the name of the collection</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>first action in the list of all associated actions</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>matches the name of the collection</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>second action in the list of all associated actions</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These actions - <code>addItem()</code> and <code>removeItem()</code> can be thought of as associated with with the <code>items</code> collection because that is the state that they primarily affect.</p>
</div>
<div class="paragraph">
<p>In the user interface associated actions are rendered close to the member to which they relate.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The same effect can be accomplished using <code>@MemberOrder</code> or with the <code>.layout.xml</code> file.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="inferred-defaults-and-choices"><a class="anchor" href="#inferred-defaults-and-choices"></a>Inferred Defaults and Choices</h4>
<div class="paragraph">
<p>If an action is associated with a collection, then any scalar or collection parameter of the action that is the same type as that collection will automatically have a list of choices provided for it, being the items of the associated collection.</p>
</div>
<div class="paragraph">
<p>This is only done provided that there isn&#8217;t already an explicit <code>choicesNXxx()</code> or <code>autoCompleteNXxx()</code> supporting method.
However, this list of choices <em>does</em> take priority over any choices that are inferred from the parameter type itself (as per either an <code>@DomainObject(autoCompleteRepository=&#8230;&#8203;)</code> or <code>@DomainObject(bounded=&#8230;&#8203;)</code>).</p>
</div>
<div class="paragraph">
<p>In addition, if the action has a collection parameter of the same type as the associated collection, then the Wicket viewer will render the collection with checkboxes.
The user can use these checkboxes can be used to select the items of the action parameter.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have a "removeItems(&#8230;&#8203;)" action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Getter;
import lombok.Setter;

public class Order {

    @Getter @Setter
    @Collection
    private final SortedSet&lt;OrderItem&gt; items = ...

    @Action(
        associateWith="items",
        associateWithSequence="2" )
    public Order removeItems(SortedSet&lt;OrderItem&gt; items) {
        // ...
    }

    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Wicket viewer will then render the "items" collection with checkboxes, and any selected items will be used as the pre-selected set of items if the action is invoked.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="command-processing"><a class="anchor" href="#command-processing"></a>Command Processing</h3>
<div class="paragraph">
<p>Every action invocation (and <a href="../Property.html#commandPublishing" class="page">property edit</a> for that matter) is normally reified into a concrete <code>Command</code> object, basically a wrapper around the <a href="../../../../schema/cmd.html" class="page">CommandDto</a> that also captures some timing metrics about the execution as well as the outcome.</p>
</div>
<div class="paragraph">
<p>The main uses cases are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>as a means to allow asynchronous child commands to be executed, using the <a href="../../services/wrapper/WrapperFactory.html" class="page">WrapperFactory</a> service;</p>
</li>
<li>
<p>as a means to audit (persist) commands, by implementing the <a href="../../services/publishing/spi/CommandSubscriber.html" class="page">CommandSubscriber</a> SPI.</p>
<div class="paragraph">
<p>The <a href="../../../../../../extensions/latest/command-log/about.html" class="page">Command Log</a> extension <em>does</em> provide such an implementation.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Another option to achieve this is to use the <a href="../../services/publishing/spi/ExecutionSubscriber.html" class="page">ExecutionSubscriber</a> SPI.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>to replay commands onto a secondary system, for regression testing.</p>
<div class="paragraph">
<p>This is implemented by the <a href="../../../../../../extensions/latest/command-replay/about.html" class="page">Command Replay</a> extension, working in conjunction with the <a href="../../../../../../extensions/latest/command-log/about.html" class="page">Command Log</a> extension.</p>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="commanddtoprocessor-implementations"><a class="anchor" href="#commanddtoprocessor-implementations"></a>CommandDtoProcessor implementations</h4>
<div class="paragraph">
<p>The <code>commandDtoProcessor</code> element allows an implementation of <code>CommandDtoProcessor</code> to be specified.
This interface has the following API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface CommandDtoProcessor {
    CommandDto process(             <i class="conum" data-value="1"></i><b>(1)</b>
            CommandDto dto);        <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The returned <code>CommandDto</code>.
This will typically be the <code>CommandDto</code> passed in, but may be supplemented in some way.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>CommandDto</code> obtained already from the <code>Command</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This interface is used by the framework-provided implementations of <a href="../../services/conmap/ContentMappingService.html" class="page">ContentMappingService</a> for the REST API, allowing <code>Command</code>s implementations that also implement <code>CommandWithDto</code> to be further customised as they are serialized out.
The primary use case for this capability is in support of primary/secondary replication.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on the primary, <code>Command</code>s are serialized to XML.
This includes the identity of the target object and the argument values of all parameters.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Any <code>Blob</code>s and <code>Clob</code>s are deliberately excluded from this XML (they are instead stored as references).
This is to prevent the storage requirements for <code>Command</code> from becoming excessive.
A <code>CommandDtoProcessor</code> can be provided to re-attach blob information if required.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>replaying <code>Command</code>s requires this missing parameter information to be reinstated.
The <code>CommandDtoProcessor</code> therefore offers a hook to dynamically re-attach the missing <code>Blob</code> or <code>Clob</code> argument.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a special case, returning <code>null</code> means that the command&#8217;s DTO is effectively excluded when retrieving the list of commands.
If replicating from master to slave, this effectively allows certain commands to be ignored.
The <code>CommandDtoProcessor.Null</code> class provides a convenience implementation for this requirement.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If <code>commandDtoProcessor()</code> is specified, then <code>commandPublishing()</code> is assumed to be ENABLED.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="example-implementation"><a class="anchor" href="#example-implementation"></a>Example implementation</h4>
<div class="paragraph">
<p>Consider the following method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action(
    domainEvent = IncomingDocumentRepository.UploadDomainEvent.class,
    commandDtoProcessor = DeriveBlobArg0FromReturnedDocument.class
)
public Document upload(final Blob blob) {
    final String name = blob.getName();
    final DocumentType type = DocumentTypeData.INCOMING.findUsing(documentTypeRepository);
    final ApplicationUser me = meService.me();
    String atPath = me != null ? me.getAtPath() : null;
    if (atPath == null) {
        atPath = "/";
    }
    return incomingDocumentRepository.upsertAndArchive(type, atPath, name, blob);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Blob</code> argument will not be persisted in the memento of the <code>Command</code>, but the information is implicitly available in the <code>Document</code> that is returned by the action.
The <code>DeriveBlobArg0FromReturnedDocument</code> processor retrieves this information and dynamically adds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DeriveBlobArg0FromReturnedDocument
        extends CommandDtoProcessorForActionAbstract {

    @Override
    public CommandDto process(Command command, CommandDto commandDto) {
        final Bookmark result = commandWithDto.getResult();
        if(result == null) {
            return commandDto;
        }
        try {
            final Document document = bookmarkService.lookup(result, Document.class);
            if (document != null) {
                ParamDto paramDto = getParamDto(commandDto, 0);
                CommonDtoUtils.setValueOn(paramDto, ValueType.BLOB, document.getBlob(), bookmarkService);
            }
        } catch(Exception ex) {
            return commandDto;
        }
        return commandDto;
    }
    @Inject
    BookmarkService bookmarkService;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="null-implementation"><a class="anchor" href="#null-implementation"></a>Null implementation</h4>
<div class="paragraph">
<p>The null implementation can be used to simply indicate that no DTO should be returned for a <code>Command</code>.
The effect is to ignore it for replay purposes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">pubc interface CommandDtoProcessor {
    ...
    class Null implements CommandDtoProcessor {
        public CommandDto process(Command command, CommandDto commandDto) {
            return null;
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="domain-events"><a class="anchor" href="#domain-events"></a>Domain events</h3>
<div class="paragraph">
<p>Whenever a domain object (or list of domain objects) is to be rendered, the framework fires off multiple domain events for every property, collection and action of the domain object.
In the cases of the domain object&#8217;s actions, the events that are fired are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hide phase: to check that the action is visible (has not been hidden)</p>
</li>
<li>
<p>disable phase: to check that the action is usable (has not been disabled)</p>
</li>
<li>
<p>validate phase: to check that the action&#8217;s arguments are valid</p>
</li>
<li>
<p>pre-execute phase: before the invocation of the action</p>
</li>
<li>
<p>post-execute: after the invocation of the action</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Subscribers subscribe through the <a href="../../services/eventbus/EventBusService.html" class="page"><code>EventBusService</code></a> and can influence each of these phases.</p>
</div>
<div class="paragraph">
<p>By default the event raised is <code>ActionDomainEvent.Default</code>.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem {

    @Action()
    public ToDoItem completed() {
        // ...
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="../Action.html#domainEvent" class="page">domainEvent()</a> element allows a custom subclass to be emitted allowing more precise subscriptions (to those subclasses) to be defined instead.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem {
    public static class CompletedEvent extends ActionDomainEvent&lt;ToDoItem&gt; { }  <i class="conum" data-value="1"></i><b>(1)</b>
    @Action(domainEvent=CompletedEvent.class)
    public ToDoItem completed() { /* ... */ }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The benefit is that subscribers can be more targeted as to the events that they subscribe to.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The framework provides no-arg constructor and will initialize the domain event using (non-API) setters rather than through the constructor.
This substantially reduces the boilerplate required in subclasses because no explicit constructor is required.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="subscribers"><a class="anchor" href="#subscribers"></a>Subscribers</h4>
<div class="paragraph">
<p>Subscribers (which must be domain services) subscribe to events posted through the <a href="../../services/eventbus/EventBusService.html" class="page"><code>EventBusService</code></a>.</p>
</div>
<div class="paragraph">
<p>Subscribers can be either coarse-grained (if they subscribe to the top-level event type):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.context.event.EventListener;
import org.springframework.stereotype.Service;

@Service
public class SomeSubscriber {
    @EventListener(ActionDomainEvent.class)
    public void on(ActionDomainEvent ev) {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or can be fine-grained (by subscribing to specific event subtypes):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.context.event.EventListener;
import org.springframework.stereotype.Service;

@Service
public class SomeSubscriber {
    @EventListener(ToDoItem.CompletedEvent.class)
    public void on(ToDoItem.CompletedEvent ev) {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The subscriber&#8217;s method is called (up to) 5 times:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>whether to veto visibility (hide)</p>
</li>
<li>
<p>whether to veto usability (disable)</p>
</li>
<li>
<p>whether to veto execution (validate)</p>
</li>
<li>
<p>steps to perform prior to the action being invoked</p>
</li>
<li>
<p>steps to perform after the action has been invoked</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The subscriber can distinguish these by calling <code>ev.getEventPhase()</code>.
Thus the general form is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.context.event.EventListener;
import org.springframework.stereotype.Service;

@Service
public class SomeSubscriber {

    @EventListener(ActionDomainEvent.class)
    public void on(ActionDomainEvent ev) {
        switch(ev.getEventPhase()) {

            case HIDE:                      <i class="conum" data-value="1"></i><b>(1)</b>
                break;
            case DISABLE:                   <i class="conum" data-value="2"></i><b>(2)</b>
                break;
            case VALIDATE:                  <i class="conum" data-value="3"></i><b>(3)</b>
                break;

            case EXECUTING:
                break;
            case EXECUTED:
                break;
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>call <code>ev.hide()</code> or <code>ev.veto("")</code> to hide the action</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>call <code>ev.disable("&#8230;&#8203;")</code> or <code>ev.veto("&#8230;&#8203;")</code> to disable the action</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>call ev.invalidate("&#8230;&#8203;") or ev.veto("&#8230;&#8203;") if action arguments are invalid</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is also possible to abort the transaction during the executing or executed phases by throwing an exception.
If the exception is a subtype of <code>RecoverableException</code> then the exception will be rendered as a user-friendly warning (eg Growl/toast) rather than an error.</p>
</div>
</div>
<div class="sect3">
<h4 id="default-doop-and-noop-events"><a class="anchor" href="#default-doop-and-noop-events"></a>Default, Doop and Noop events</h4>
<div class="paragraph">
<p>If the <a href="../Action.html#domainEvent" class="page">domainEvent()</a> element is not explicitly specified (is left as its default value, <code>ActionDomainEvent.Default</code>), then the framework will, by default, post an event.</p>
</div>
<div class="paragraph">
<p>If this is not required, then the <code>isis.reflector.facet.actionAnnotation.domainEvent.postForDefault</code> configuration property can be set to "false"; this will disable posting.</p>
</div>
<div class="paragraph">
<p>On the other hand, if the <code>domainEvent</code> has been explicitly specified to some subclass, then an event will be posted.
The framework provides <code>ActionDomainEvent.Doop</code> as such a subclass, so setting the <code>domainEvent</code> element to this class will ensure that the event to be posted, irrespective of the configuration property setting.</p>
</div>
<div class="paragraph">
<p>And, conversely, the framework also provides <code>ActionDomainEvent.Noop</code>; if <code>domainEvent</code> element is set to this class, then no event will be posted.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="class-level-default"><a class="anchor" href="#class-level-default"></a>Class-level default</h3>
<div class="paragraph">
<p>Sometimes a subscriber is interested in all of the actions of a given class, though not any individual action.
A common use case is to hide or disable all actions for some particular object for some particular user group.</p>
</div>
<div class="paragraph">
<p>For this use, the default action domain event can be annotated using <code>@DomainObject</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DomainObject(
    actionDomainEvent=ToDoItem.ActionDomainEvent.class
)
public class ToDoItem {
    public static class ActionDomainEvent extends
        org.apache.isis.applib.events.domain.ActionDomainEvent&lt;Object&gt; { }
    // ...

    public void updateDescription(final String description) {
        this.description = description;
    }

}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="raising-events-programmatically"><a class="anchor" href="#raising-events-programmatically"></a>Raising events programmatically</h4>
<div class="paragraph">
<p>Normally events are only raised for interactions through the UI.
However, events can be raised programmatically either by calling the <a href="../../services/eventbus/EventBusService.html" class="page">EventBusService</a> API directly, or by emulating the UI by wrapping the target object using the <a href="../../services/wrapper/WrapperFactory.html" class="page">WrapperFactory</a> domain service.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="execution-publishing"><a class="anchor" href="#execution-publishing"></a>Execution Publishing</h3>
<div class="paragraph">
<p>The <a href="../Action.html#executionPublishing" class="page">executionPublishing()</a> element determines whether and how an action invocation is published via the registered implementation of <a href="../../services/publishing/spi/ExecutionSubscriber.html" class="page">ExecutionSubscriber</a>.</p>
</div>
<div class="paragraph">
<p>A common use case is to notify external "downstream" systems of changes in the state of the Apache Isis application.</p>
</div>
<div class="paragraph">
<p>The <a href="../../../../config/sections/isis.applib.html#isis.applib.annotation.property.execution-publishing" class="page"><code>isis.applib.annotation.property.execution-publishing</code></a> configuration property is used to determine the whether the action is published:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>all</code></p>
<div class="paragraph">
<p>all action invocations are published</p>
</div>
</li>
<li>
<p><code>ignoreSafe</code> (or <code>ignoreQueryOnly</code>)</p>
<div class="paragraph">
<p>invocations of actions with safe (read-only) semantics are ignored, but actions which may modify data are not ignored</p>
</div>
</li>
<li>
<p><code>none</code></p>
<div class="paragraph">
<p>no action invocations are published</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If there is no configuration property in <code>application.properties</code> then publishing is automatically enabled.</p>
</div>
<div class="paragraph">
<p>This default can be overridden on an action-by-action basis; if <code>executionPublishing()</code> is set to <code>ENABLED</code> then the action invocation is published irrespective of the configured value; if set to <code>DISABLED</code> then the action invocation is <em>not</em> published, again irrespective of the configured value.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Order {
    @Action(executionPublishing=Publishing.ENABLED)    <i class="conum" data-value="1"></i><b>(1)</b>
    public Invoice generateInvoice(...) {
        // ...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>because set to enabled, will be published irrespective of the configured value.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="deployment-modes"><a class="anchor" href="#deployment-modes"></a>Deployment modes</h3>
<div class="paragraph">
<p>By default actions are available irrespective of the <a href="../../../../config/about.html#deployment-types" class="page">deployment mode</a>.
The <a href="../Action.html#restrictTo" class="page">restrictTo()</a> element specifies whether the action should instead be restricted to only available in prototyping mode.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Customer {

    @Action
    public Order placeNewOrder() {
        // ...
    }
    @Action(semantics=SemanticsOf.SAFE)
    public List&lt;Order&gt; listRecentOrders() {
        // ...
    }

    @Action(restrictTo=RestrictTo.PROTOTYPING)      <i class="conum" data-value="1"></i><b>(1)</b>
    public List&lt;Order&gt; listAllOrders() {
        // ...
    }
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Only visible in prototype mode.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this case the listing of all orders (in the <code>listAllOrders()</code> action) probably doesn&#8217;t make sense for production; there could be thousands or millions.
However, it would be useful to disaply how for a test or demo system where there are only a handful of orders.</p>
</div>
</div>
<div class="sect2">
<h3 id="action-semantics"><a class="anchor" href="#action-semantics"></a>Action Semantics</h3>
<div class="paragraph">
<p>The <a href="../Action.html#semantics" class="page">semantics()</a> element describes whether the invocation modifies state of the system, and if so whether it does so idempotently.
If the action invocation does <em>not</em> modify the state of the system, in other words is safe, then it also can beused to specify whether the results of the action can be cached automatically for the remainder of the request.</p>
</div>
<div class="paragraph">
<p>The <code>semantics</code> element was originally introduced for the <a href="../../../../../../vro/latest/about.html" class="page">RestfulObjects viewer</a> in order that action invocations could be using the appropriate <code>HTTP</code> verb (<code>GET</code>, <code>PUT</code> and <code>POST</code>).</p>
</div>
<div class="paragraph">
<p>The table below summarizes the semantics:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Semantic</th>
<th class="tableblock halign-left valign-top">Changes state</th>
<th class="tableblock halign-left valign-top">Effect of multiple calls</th>
<th class="tableblock halign-left valign-top">HTTP verb<br>
(Restful Objects)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SAFE_AND_REQUEST_CACHEABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will always return the same result each time invoked (within a given request scope)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SAFE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Might result in different results each invocation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IDEMPOTENT</code><br>
<code>IDEMPOTENT_ARE_YOU_SURE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Will make no further changes if called multiple times (eg sets a property or adds to a <code>Set</code>).<br>
The "are you sure" variant requires that the user must explicitly confirm the action.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NON_IDEMPOTENT</code><br>
<code>NON_IDEMPOTENT_ARE_YOU_SURE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Might change the state of the system each time called (eg increments a counter or adds to a <code>List</code>).<br>
The "are you sure" variant requires that the user must explicitly confirm the action.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The actions' semantics are also used by the core runtime as part of the in-built concurrency checkng; invocation of a safe action (which includes request-cacheable) does <em>not</em> perform a concurrency check, whereas non-safe actions <em>do</em> perform a concurrency check.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Customer {

    @Action(semantics=SemanticsOf.SAFE_AND_REQUEST_CACHEABLE)
    public CreditRating checkCredit() {
        // ...
    }

    @Action(semantics=SemanticsOf.IDEMPOTENT)
    public void changeOfAddress(Address address) {
        // ...
    }

    @Action(semantics=SemanticsOf.NON_IDEMPOTENT)
    public Order placeNewOrder() {
        // ...
    }

    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Actions that are safe and request-cacheable automatically use the <a href="../../services/queryresultscache/QueryResultsCache.html" class="page"><code>QueryResultsCache</code></a> service to cache the result of the method.
Note though that the results of this caching will only be apparent if the action is invoked from another method using the <a href="../../services/wrapper/WrapperFactory.html" class="page">WrapperFactory</a> service.</p>
</div>
</div>
<div class="sect2">
<h3 id="collection-type"><a class="anchor" href="#collection-type"></a>Collection type</h3>
<div class="paragraph">
<p>The <a href="../Action.html#typeOf" class="page">typeOf()</a> element specifies the expected type of an element returned by the action (returning a collection), when for whatever reason the type cannot be inferred from the generic type, or to provide a hint about the actual run-time (as opposed to compile-time) type.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void AccountService {

    @Action(typeOf=Customer.class)
    public List errantAccounts() {
        return customers.allNewCustomers();
    }
    ...

    @Inject CustomerRepository customers;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In general we recommend that you use generics instead, eg <code>List&lt;Customer&gt;</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-spis"><a class="anchor" href="#related-spis"></a>Related SPIs</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../services/publishing/spi/CommandSubscriber.html" class="page">CommandSubscriber</a> SPI</p>
<div class="paragraph">
<p>foractions with <a href="../Action.html#commandPublishing" class="page">commandPublishing</a> enabled</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../../../../../extensions/latest/command-log/about.html" class="page">Command Log</a> extension</p>
<div class="paragraph">
<p>provides an implementation that simply logs actions for</p>
</div>
</li>
<li>
<p><a href="../../../../../../extensions/latest/command-replay/about.html" class="page">Command Replay</a> extension</p>
<div class="paragraph">
<p>provides an implementation to replicate commands from a primary to a secondary system.</p>
</div>
<div class="paragraph">
<p>This implementation also leverages <a href="../Action.html#commandDtoProcessor" class="page">commandDtoProcessor()</a> to process <code>CommandDto</code>s before being replciated</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><a href="../../services/publishing/spi/ExecutionSubscriber.html" class="page">ExecutionSubscriber</a> SPI</p>
<div class="paragraph">
<p>for actions where <a href="../Action.html#executionPublishing" class="page">executionPublishing</a> is enabled</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../services/eventbus/EventBusService.html" class="page">EventBusService</a></p>
<div class="paragraph">
<p>which broadcast the action&#8217;s domain event&#8201;&#8212;&#8201;as specified by <a href="../Action.html#domainEvent" class="page">domainEvent()</a>&#8201;&#8212;&#8201; for business rule checking (hide, disable, validate) and its invocation (pre-execute and post-execute).</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2020 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M4.20210224-0425-8a48b959</p>
        </div>
    </div>
</footer>
<script src="../../../../../../_/js/site.js"></script>
<script async src="../../../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
