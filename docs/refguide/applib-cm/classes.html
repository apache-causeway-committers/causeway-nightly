<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Classes and Interfaces :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../starters/helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="../../starters/simpleapp/about.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">User</span>
            <a class="navbar-item" href="../../userguide/about.html">User Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Reference</span>
            <a class="navbar-item" href="../../refguide/about.html">Reference Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Testing</span>
            <a class="navbar-item" href="../../testing/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../odn/about.html">DataNucleus Object Store</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Catalogs</span>
            <a class="navbar-item" href="../../extensions/about.html">Extensions Catalog</a>
            <a class="navbar-item" href="../../incubator/about.html">Incubator Catalog</a>
            <a class="navbar-item" href="../../legacy/about.html">Legacy Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../toc/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../toc/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="../../toc/mavendeps/about.html">Maven dependencies</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Releases</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="../../mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Internal</span>
            <a class="navbar-item" href="../../toc/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/about.html">Core Framework</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../toc/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="refguide" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Reference Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-ant/about.html">Annotations</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Action.html">Action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/ActionLayout.html">ActionLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Collection.html">Collection</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/CollectionLayout.html">CollectionLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Column.html">Column</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Digits.html">Digits</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Discriminator.html">Discriminator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/DomainObject.html">DomainObject</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/DomainObjectLayout.html">DomainObjectLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/DomainService.html">DomainService</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/DomainServiceLayout.html">DomainServiceLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Facets.html">Facets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/HomePage.html">HomePage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Inject.html">Inject</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/MemberGroupLayout.html">MemberGroupLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/MemberOrder.html">MemberOrder</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Mixin.html">Mixin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/NotPersistent.html">NotPersistent.</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Nullable.html">Nullable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/MinLength.html">MinLength</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Parameter.html">Parameter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/ParameterLayout.html">ParameterLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Pattern.html">Pattern</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/PersistenceCapable.html">PersistenceCapable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/PostConstruct.html">PostConstruct</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/PreDestroy.html">PreDestroy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/PrimaryKey.html">PrimaryKey</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Programmatic.html">Programmatic</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Property.html">Property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/PropertyLayout.html">PropertyLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/RequestScoped.html">RequestScoped</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/Title.html">Title</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/ViewModel.html">ViewModel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/ViewModelLayout.html">ViewModelLayout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/XmlJavaTypeAdapter.html">XmlJavaTypeAdapter</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../applib-ant/XmlRootElement.html">XmlRootElement</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/about.html">Domain Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/presentation-layer-api.html">Presentation Layer API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-api/AcceptHeaderService.html">AcceptHeaderService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-api/BookmarkUiService.html">BookmarkUiService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-api/ConfigurationViewService.html">ConfigurationViewService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-api/DeepLinkService.html">DeepLinkService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-api/GuiceBeanProvider.html">GuiceBeanProvider</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/presentation-layer-spi.html">Presentation Layer SPI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/ContentMappingService.html">ContentMappingService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/EmailNotificationService.html">EmailNotificationService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/ErrorReportingService.html">ErrorReportingService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/ExceptionRecognizer.html">ExceptionRecognizer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/GridLoaderService.html">GridLoaderService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/GridService.html">GridService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/GridSystemService.html">GridSystemService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/HintStore.html">HintStore</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/LocaleProvider.html">LocaleProvider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/MenuBarsLoaderService.html">MenuBarsLoaderService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/MenuBarsService.html">MenuBarsService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/RoutingService.html">RoutingService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/SessionLoggingService.html">SessionLoggingService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/TableColumnOrderService.html">TableColumnOrderService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/TranslationService.html">TranslationService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/TranslationsResolver.html">TranslationsResolver</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/UrlEncodingService.html">UrlEncodingService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/presentation-layer-spi/UserProfileService.html">UserProfileService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/application-layer-api.html">Application Layer API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/application-layer-api/BackgroundService.html">BackgroundService</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../applib-svc/application-layer-api/BackgroundService/BackgroundCommandExecution.html">BackgroundCommandExecution</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../applib-svc/application-layer-api/BackgroundService/Quartz.html">Quartz</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/CommandContext.html">CommandContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/DtoMappingHelper.html">DtoMappingHelper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/InteractionContext.html">InteractionContext</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/MessageService.html">MessageService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/SessionManagementService.html">SessionManagementService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/TitleService.html">TitleService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/TransactionService.html">TransactionService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-api/WrapperFactory.html">WrapperFactory</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/application-layer-spi.html">Application Layer SPI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-spi/BackgroundCommandService.html">BackgroundCommandService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-spi/CommandService.html">CommandService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-spi/HomePageProviderService.html">HomePageProviderService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/application-layer-spi/HealthCheckService.html">HealthCheckService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/core-domain-api.html">Core Domain API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/core-domain-api/ClockService.html">ClockService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/core-domain-api/ConfigurationService.html">ConfigurationService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/core-domain-api/EventBusService.html">EventBusService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/core-domain-api/FactoryService.html">FactoryService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/core-domain-api/Scratchpad.html">Scratchpad.</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/core-domain-api/UserService.html">UserService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/integration-api.html">Integration API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/integration-api/BookmarkService.html">BookmarkService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/integration-api/EmailService.html">EmailService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/integration-api/JaxbService.html">JaxbService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/integration-api/MementoService.html">MementoService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/integration-api/XmlSnapshotService.html">XmlSnapshotService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/metadata-api.html">Metadata API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/metadata-api/ApplicationFeatureRepository.html">ApplicationFeatureRepository</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/metadata-api/LayoutService.html">LayoutService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/metadata-api/MetamodelService.html">MetamodelService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/metadata-api/ServiceRegistry.html">ServiceRegistry</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/metadata-api/SwaggerService.html">SwaggerService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/testing.html">Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/testing/ExecutionParametersService.html">ExecutionParametersService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/testing/FixtureScripts.html">FixtureScripts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/testing/FixtureScriptsSpecificationProvider.html">FixtureScriptsSpecificationProvider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/testing/SudoService.html">SudoService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/testing/SwitchUserService.html">SwitchUserService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/persistence-layer-api.html">Persistence Layer API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-api/HsqlDbManagerMenu.html">HsqlDbManagerMenu</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-api/IsisJdoSupport.html">JdoSupport</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-api/MetricsService.html">MetricsService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-api/QueryResultsCache.html">QueryResultsCache</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-api/RepositoryService.html">RepositoryService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/persistence-layer-spi.html">Persistence Layer SPI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-spi/AuditerService.html">AuditerService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-spi/PublisherService.html">PublisherService</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/persistence-layer-spi/UserRegistrationService.html">UserRegistrationService</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../applib-svc/bootstrapping-spi.html">Bootstrapping SPI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../applib-svc/bootstrapping-spi/ClassDiscoveryService.html">ClassDiscoveryService</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="about.html">Classes &amp; Methods</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="methods.html">Methods</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="classes.html">Classes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../config/about.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/deployment-types.html">Deployment Types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/configuration-files.html">Configuration Files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/specifying-components.html">Specifying Components</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/configuring-core.html">Configuring Core</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/spring-configuration.html">Spring Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../schema/about.html">Schema</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/mml.html">MetaModel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/cmd.html">Command</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/ixn.html">Interaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/chg.html">Changes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../schema/common.html">Common</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Reference Guide</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../toc/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../pjdo/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../incubator/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../legacy/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">SecMan</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../secman/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter Apps</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../starters/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorial App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../toc/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Reference Guide</a></li>
    <li><a href="about.html">Classes &amp; Methods</a></li>
    <li><a href="classes.html">Classes</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/core/applib/src/main/doc/modules/applib-cm/pages/classes.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Classes and Interfaces</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the usage of various classes and interfaces that are not otherwise associated with <a href="../applib-svc/about.html" class="page">domain services</a>, <a href="../../vw/layout.html" class="page">object layout</a> or <a href="#refguide:config:about">configuration</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="AppManifest-bootstrapping"><a class="anchor" href="#AppManifest-bootstrapping"></a><code>AppManifest</code> (bootstrapping)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to implement the <code>AppManifest</code> interface to bootstrap both an Apache Isis web application, and also its integration tests.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The framework-provided <code>AppManifestAbstract2</code> and <code>AppManifestAbstract2.Builder</code> makes it easy to write an <code>AppManifest</code>, defined by a set of <a href="#refguide:applib-cm:classes/Module.adoc" class="page unresolved"><code>Module</code></a> implementations.
The app manifest can then be used both to bootstrap the application "proper", or for integration tests.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="api"><a class="anchor" href="#api"></a>API</h3>
<div class="paragraph">
<p>The <code>AppManifest</code> interface allows the constituent parts of an application to be defined programmatically, most specifically the packages that contain domain services and/or persistent entities.
Its API is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface AppManifest {
    public List&lt;Class&lt;?&gt;&gt; getModules();                         <i class="conum" data-value="1"></i><b>(1)</b>
    public List&lt;Class&lt;?&gt;&gt; getAdditionalServices();              <i class="conum" data-value="2"></i><b>(2)</b>
    public String getAuthenticationMechanism();                 <i class="conum" data-value="3"></i><b>(3)</b>
    public String getAuthorizationMechanism();                  <i class="conum" data-value="4"></i><b>(4)</b>
    public List&lt;Class&lt;? extends FixtureScript&gt;&gt; getFixtures();  <i class="conum" data-value="5"></i><b>(5)</b>
    public Map&lt;String,String&gt; getConfigurationProperties();     <i class="conum" data-value="6"></i><b>(6)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Must return a non-null list of classes, each of which representing the root of one of the modules containing services and possibly entities, which together makes up the running application.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If non-<code>null</code>, overrides the value of <code>isis.services</code> configuration property to specify a list of additional classes to be instantiated as domain services (over and above the domain services defined via <code>getModules()</code> method.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If non-<code>null</code>, overrides the value of <code>isis.authentication</code> configuration property to specify the authentication mechanism.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>If non-<code>null</code>, overrides the value of <code>isis.authorization</code> configuration property to specify the authorization mechanism.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>If non-<code>null</code>, overrides the value of <code>isis.fixtures</code> configuration property to specify a fixture script to be installed.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Overrides for any other configuration properties.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sections describe each of these methods in a little more detail.</p>
</div>
<div class="sect3">
<h4 id="getmodules"><a class="anchor" href="#getmodules"></a><code>getModules()</code></h4>
<div class="paragraph">
<p>The most significant method (the only one which must return a non-<code>null</code> value) is the <code>getModules()</code> method.
Each module is identified by a class; the framework simply uses that class' package as the root to search for domain services (annotated with <a href="../applib-ant/DomainService.html" class="page"><code>@DomainService</code></a>) and entities (annotated with <a href="../applib-ant/PersistenceCapable.html" class="page"><code>@PersistenceCapable</code></a>).
Generally there is one such module class per Maven module.</p>
</div>
<div class="paragraph">
<p>A module class for a domain module might for example be defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.mycompany.myapp.dom;
public final class MyAppDomainModule {
    private MyAppDomainModule() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This tells the framework that the package and subpackages under <code>com.mycompany.myapp.dom</code> should be searched for domain services (annotated with <code>@DomainService</code>), mixins (<code>@Mixin</code>) and entities (<code>@PersistenceCapabable</code>).</p>
</div>
<div class="paragraph">
<p>As is perhaps apparent, the <code>getModules()</code> method replaces and overrides both the <code>isis.services.ServicesInstallerFromAnnotation.packagePrefix</code> key (usually found in the <code>isis.properties</code>  file) and also the`isis.persistor.datanucleus.RegisterEntities.packagePrefix` key (usually found in the <code>persistor_datanucleus.properties</code> file).
The value of the <code>isis.services-installer</code> configuration property is also ignored.</p>
</div>
<div class="paragraph">
<p>For example, the (non-ASF) <a href="http://github.com/isisaddons/isis-app-todoapp">Isis addons' todoapp</a> defines the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public List&lt;Class&lt;?&gt;&gt; getModules() {
    return Arrays.asList(
            ToDoAppDomainModule.class,
            ToDoAppFixtureModule.class,
            ToDoAppAppModule.class,
            org.isisaddons.module.audit.AuditModule.class,
            org.isisaddons.module.command.CommandModule.class,
            org.isisaddons.module.devutils.DevUtilsModule.class,
            org.isisaddons.module.docx.DocxModule.class,
            org.isisaddons.module.publishing.PublishingModule.class,
            org.isisaddons.module.sessionlogger.SessionLoggerModule.class,
            org.isisaddons.module.settings.SettingsModule.class,
            org.isisaddons.wicket.gmap3.cpt.service.Gmap3ServiceModule.class
    );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As can be seen, the various (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a> modules also each provide a module class that can be easily referenced.</p>
</div>
</div>
<div class="sect3">
<h4 id="getadditionalservices"><a class="anchor" href="#getadditionalservices"></a><code>getAdditionalServices()</code></h4>
<div class="paragraph">
<p>We normally we recommend that services are defined exclusively through <code>getModules()</code>, and that this method should therefore return an empty list.
However, there are certain use cases where the a service must be explicitly specified either because the service required does not (for whatever reason) have a <a href="../applib-ant/DomainService.html" class="page"><code>@DomainService</code></a> annotation.</p>
</div>
<div class="paragraph">
<p>For example, the <a href="../../secman/about.html" class="page">SecMan extension</a> allows the policy to evaluate conflicting permissions to be specified by explicitly registering either the <code>PermissionsEvaluationServiceAllowBeatsVeto</code> domain service or the <code>PermissionsEvaluationServiceVetoBeatsAllow</code> domain service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public List&lt;Class&lt;?&gt;&gt; getAdditionalServices() {
    return Arrays.asList(
            org.isisaddons.module.security.dom.permission.PermissionsEvaluationServiceVetoBeatsAllow.class
    );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If this method returns a non-<code>null</code> value, then it overrides the value of <code>isis.services</code> configuration property.</p>
</div>
</div>
<div class="sect3">
<h4 id="getauthenticationmechanism"><a class="anchor" href="#getauthenticationmechanism"></a><code>getAuthenticationMechanism()</code></h4>
<div class="paragraph">
<p>If non-<code>null</code>, this method specifies the authentication mechanism to use.
The valid values are currently <code>"shiro"</code>  or <code>"bypass"</code>.
If null is returned then the value of the <code>isis.authentication</code> configuration property (in <code>isis.properties</code> file) is used instead.</p>
</div>
<div class="paragraph">
<p>See the <a href="../../security/about.html" class="page">security guide</a> for further details on configuring shiro or bypass security.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property is ignored for integration tests (which always uses the <code>"bypass"</code> mechanism).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="getauthorizationmechanism"><a class="anchor" href="#getauthorizationmechanism"></a><code>getAuthorizationMechanism()</code></h4>
<div class="paragraph">
<p>If non-<code>null</code>, this method specifies the authorization mechanism to use.
The valid values are currently <code>"shiro"</code>  or <code>"bypass"</code>.
If null is returned then the value of the <code>isis.authorization</code> configuration property (in <code>isis.properties</code> file) is used instead.</p>
</div>
<div class="paragraph">
<p>See the <a href="../../security/about.html" class="page">security guide</a> for further details on configuring shiro or bypass security.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This property is ignored for integration tests (which always uses the <code>"bypass"</code> mechanism).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="getfixtures"><a class="anchor" href="#getfixtures"></a><code>getFixtures()</code></h4>
<div class="paragraph">
<p>If non-<code>null</code>, this method specifies the fixture script(s) to be run on startup.
This is particularly useful when developing or demoing while using an in-memory database.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public List&lt;Class&lt;? extends FixtureScript&gt;&gt; getFixtures() {
    return Lists.newArrayList(todoapp.fixture.demo.DemoFixture.class);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that in order for fixtures to be installed it is also necessary to set the <code>isis.persistor.datanucleus.install-fixtures</code> key to <code>true</code>.
This can most easily be done using the <code>getConfigurationProperties()</code> method, discussed below.</p>
</div>
</div>
<div class="sect3">
<h4 id="getconfigurationproperties"><a class="anchor" href="#getconfigurationproperties"></a><code>getConfigurationProperties()</code></h4>
<div class="paragraph">
<p>This method allow arbitrary other configuration properties to be overridden.
One common use case is in conjunction with the <code>getFixtures()</code> method, discussed above:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
public Map&lt;String, String&gt; getConfigurationProperties() {
    Map&lt;String, String&gt; props = Maps.newHashMap();
    props.put("isis.persistor.datanucleus.install-fixtures", "true");
    return props;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="bootstrapping"><a class="anchor" href="#bootstrapping"></a>Bootstrapping</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The recommendations in this section no longer apply if using the <a href="#bootstrapping"><code>AppManifest2</code></a> interface and <code>Module</code>s to bootstrap your application.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One of the primary goals of the <code>AppManifest</code> is to unify the bootstrapping of both integration tests and the webapp.
This requires that the integration tests and webapp can both reference the implementation.</p>
</div>
<div class="paragraph">
<p>We strongly recommend using a <code>myapp-app</code> Maven module to hold the implementation of the <code>AppManifest</code>.
This Maven module can then also hold dependencies which are common to both integration tests and the webapp, specifically the <code>org.apache.isis.core:isis-core-runtime</code> and the <code>org.apache.isis.core:isis-core-wrapper</code> modules.</p>
</div>
<div class="paragraph">
<p>We also strongly recommend that any application-layer domain services and view models (code that references persistent domain entities but that is not referenced back) is moved to this <code>myapp-app</code> module.
This will allow the architectural layering of the overall application to be enforced by Maven.</p>
</div>
<div class="paragraph">
<p>What then remains is to update the bootstrapping code itself.</p>
</div>
<div class="paragraph">
<p>There are several different contexts in which the framework needs to be bootstrapped:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the first is as a "regular" webapp (using the <a href="../../vw/about.html" class="page">Wicket viewer</a>).
Here the <code>AppManifest</code> just needs to be specified as a configuration property, usually done using the <code>WEB-INF/isis.properties</code> configuration file:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.appManifest=domainapp.app.MyAppAppManifest</code></pre>
</div>
</div>
</li>
<li>
<p>the second is also as a webapp, but from within the context of the IDE.<br></p>
<div class="paragraph">
<p>Here, it&#8217;s common to use the <code>org.apache.isis.WebServer</code> class to launch your application from the <a href="../../userguide/btb/about.html#cmd-line" class="page">command line</a>.
This allows the <code>AppManifest</code> to be specified using the <code>-m</code> (or <code>--manifest</code>) flag:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">java org.apache.isis.WebServer -m com.mycompany.myapp.MyAppAppManifestWithFixtures</code></pre>
</div>
</div>
</li>
<li>
<p>the third case is within an integration test.<br></p>
<div class="paragraph">
<p>The code to boostrap an integration test is shown in the <a href="../../testing/integ-test-support/about.html#bootstrapping" class="page">testing guide</a>, but once again an <code>AppManifest</code> is required.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In some cases an integration test uses the exact same <code>AppManifest</code> as the regular webapp.
Sometimes though it is necessary to "tweak" the <code>AppManifest</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it might use additional services, such as services to mock out external dependencies, or to provide fake data</p>
</li>
<li>
<p>it might override certain configuration properties, eg to run against an in-memory HSQLDB database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The next section describes some helper classes that the framework provides to help achieve this.</p>
</div>
<div class="sect3">
<h4 id="appmanifestabstract"><a class="anchor" href="#appmanifestabstract"></a>AppManifestAbstract</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The framework-provided <code>AppManifestAbstract2</code> and <code>AppManifestAbstract2.Builder</code> supercede <code>AppManifestAbstract</code>, making it easy to write an <code>AppManifest</code> defined by a set of <a href="#refguide:applib-cm:classes/Module.adoc" class="page unresolved"><code>Module</code></a> implementations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>AppManifestAbstract</code> and its associated builder (<code>AppManifestAbstract.Builder</code>) make it easy to bootstrap the application both as a webapp and also as an integration test.</p>
</div>
<div class="paragraph">
<p>Rather than implement <code>AppManifest</code> interface directly, instead your application subclasses from <code>AppManifestAbstract</code>.
This takes an instance of a <code>AppManifestAbstract.Builder</code> in its constructor; the builder is what allows for variation between environments.</p>
</div>
<div class="paragraph">
<p>Moreover, these classes recognise that configuration properties fall into two broad classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>those that are fixed and do not change between environments.<br></p>
<div class="paragraph">
<p>In other words these describe how the application chooses to configure the framework itself, eg global disable of editing of properties, or enabling of auditing.</p>
</div>
</li>
<li>
<p>those that change between environments.<br></p>
<div class="paragraph">
<p>The classic example here is the JDBC URL.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the <a href="https://github.com/apache/isis-app-simpleapp">SimpleApp archetype</a>'s <code>AppManifest</code> is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DomainAppAppManifest extends AppManifestAbstract {

    public static final Builder BUILDER = Builder.forModules(
                    SimpleModuleDomSubmodule.class,                         <i class="conum" data-value="1"></i><b>(1)</b>
                    DomainAppApplicationModuleFixtureSubmodule.class,
                    DomainAppApplicationModuleServicesSubmodule.class
            )
            .withConfigurationPropertiesFile(DomainAppAppManifest.class,    <i class="conum" data-value="2"></i><b>(2)</b>
                    "isis.properties",
                    "authentication_shiro.properties",
                    "persistor_datanucleus.properties",
                    "viewer_restfulobjects.properties",
                    "viewer_wicket.properties"
            ).withAuthMechanism("shiro");                                   <i class="conum" data-value="3"></i><b>(3)</b>

    public DomainAppAppManifest() {
        super(BUILDER);                                                     <i class="conum" data-value="4"></i><b>(4)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the modules that make up the application; corresponds to <code>AppManifest#getModules()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the (non-changing with environment) set of configuration properties, loaded relative to the manifest itself;  corresponds to <code>AppManifest#getConfigurationProperties()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>override of components; correponds to both <code>AppManifest#getAuthenticationMechanism()</code> and <code>AppManifest#getAuthorizationMechanism()</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Pass the builder up to the superclass.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the integration tests requires no tweaking, then the <code>AppManifest</code> can be used directly, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class DomainAppIntegTestAbstract extends IntegrationTestAbstract2 {
    @BeforeClass
    public static void initSystem() {
        bootstrapUsing(new DomainAppAppManifest());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>On the other hand, if tweaking is required then exposing the builder as a <code>public static</code> field makes this easy to do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class DomainAppIntegTestAbstract extends IntegrationTestAbstract2 {
    @BeforeClass
    public static void initSystem() {
        bootstrapUsing(DomainAppAppManifest.BUILDER
                            .withAdditionalModules(...)
                            .withAdditionalServices(...)
                            .withConfigurationPropertiesFile("...")
                            .withConfigurationProperty("...","...")
                            .build()
        );
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="AppManifest2-bootstrapping"><a class="anchor" href="#AppManifest2-bootstrapping"></a><code>AppManifest2</code> (and <code>Module</code>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The bootstrapping of an Apache Isis application has been modularized using the <code>Module</code> interface, with <code>AppManifest2</code> (an extension of the original <a href="classes/AppManifest-bootstrapping.html" class="page"><code>AppManifest</code></a> interface) defined in terms of <code>Module</code>s also.</p>
</div>
<div class="paragraph">
<p>A <code>Module</code> represents a collection of entities and domain services that provide a set of coherent functionality under a single package (and subpackages underneath), with the module class itself residing at the top-level package.</p>
</div>
<div class="paragraph">
<p>Each <code>Module</code> can express its immediate dependencies (using <code>Module#getDependencies()</code> method); from this the framework computes the full set of modules (and therefore entities and domain services) that make up the application.</p>
</div>
<div class="paragraph">
<p>Each <code>Module</code> can also optionally define additional dependencies on "legacy" modules (that is, those that do not implement <code>Module</code>) using <code>Module#getAdditionalModules()</code> method.
These legacy modules simply define a package to search for entities and domain services.
Legacy domain services can also be explicitly identified using <code>Module#getAdditionalServices()</code> method; such services do <em>not</em> need to be annotated with <a href="../applib-ant/DomainService.html" class="page"><code>@DomainService</code></a>.</p>
</div>
<div class="paragraph">
<p>A <code>Module</code> can also declare additional configuration properties (using either <code>Module#getIndividualConfigProps()</code> or <code>Module#getPropertyResources()</code>) that should be      contributed to the overall set of configuration properties used to bootstrap the application.</p>
</div>
<div class="paragraph">
<p>Finally, each <code>Module</code> can also optionally define a reference-data fixture (for reference data entities of the module) and also a tear-down fixture (using <code>Module#{@link #getRefDataSetupFixture()</code> and <code>Module#getTeardownFixture()</code> respectively).
These are executed automatically (and in the correct order) within integration tests, simplifying setup and teardown of such tests.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Implementations of <code>Module</code> are expected to have value-semantics.
Each <code>Module</code> can declare its respective dependencies (using <code>Module#getDependencies()</code>) simply by instantiating the <code>Module</code>s on which it depends.
Any duplicates from the computed graph of all dependencies are automatically eliminated.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The application (or integration test) is still bootstrapped using an <code>AppManifest</code>, but using the <code>AppManifest2</code> sub-interface and corresponding <code>AppManifestAbstract2</code> abstract adapter.
This latter class provides a <code>Builder</code> that allows an app manifest to be created from a single top-level <code>Module</code>.</p>
</div>
<div class="paragraph">
<p>There are a number of similarities between a <code>Module</code> and an <code>AppManifestAbstract2.Builder</code>: both identify the set of modules that make up the application, along with additional services and configuration properties, and can derive a fixture script for start-up and tear-down.
Because of this, the <code>IntegrationTestAbstract3</code> superclass actually requires just a <code>Module</code> to bootstrap rather than an <code>AppManifest</code>.
(Underneath the covers <code>AppManifestAbstract2.Builder</code> can be instantiated from a <code>Module</code> instance, from whence the <code>AppManifest</code> to bootstrap the integration test is obtained).</p>
</div>
<div class="paragraph">
<p>However there are some differences too, these relate to the difference between the running webapp vs integration tests.
Specifically, only the <code>Builder</code> can specify the authentication mechanism, and only the <code>Builder</code> can specify an additional fixture script to run when the application starts (usually, to run up a demo app).</p>
</div>
<div class="sect2">
<h3 id="api-2"><a class="anchor" href="#api-2"></a>API</h3>
<div class="paragraph">
<p>The <code>AppManifest2</code> interface extends <a href="#api"><code>AppManifest</code></a>, additionally declaring the top-level <code>Module</code> that was used to create the app manifest, and fixtures for reference data setup and for teardown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface AppManifest2 extends AppManifest {
    Module getModule();
    FixtureScript getTeardownFixture();
    FixtureScript getRefDataSetupFixture();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The (inherited) <code>AppManifest#getModules()</code> - a list of classes representing the packages to be scanned for domain services and entities - is still used to actually bootstrap the application.
It should therefore be computed from the transitive set of dependencies of the declared <code>Module</code>.
The <code>AppManifestAbstract2</code> (or more precisely, its <code>Builder</code>) provides a suitable implementation of this.</p>
</div>
<div class="paragraph">
<p>The <code>AppManifestAbstract2.Builder</code> is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class AppManifestAbstract2 extends AppManifestAbstract implements AppManifest2 {
    ...
    public static class Builder extends AppManifestAbstract.BuilderAbstract&lt;Builder&gt; {

        private Builder(Module module) { /* ... */ }
        public Module getModule() { /* ... */ }

        public Builder withAdditionalDependency(final Module dependency) { /* ... */ }
        public Builder withAdditionalDependencies(final Set&lt;Module&gt; dependencies) { /* ... */ }

        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additional <code>withXxx(&#8230;&#8203;)</code> builder methods are inherited from <a href="#bootstrapping"><code>AppManifestAbstract.Builder</code></a>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DomainAppAppManifest extends AppManifestAbstract2 {

    public DomainAppAppManifest() {
        super(Builder
                .forModule(new DomainAppApplicationModule())
                .withConfigurationPropertiesFile(DomainAppAppManifest.class,
                                                 "isis.properties",
                                                 "authentication_shiro.properties",
                                                 "persistor_datanucleus.properties",
                                                 "viewer_restfulobjects.properties",
                                                 "viewer_wicket.properties")
                .withAuthMechanism("shiro"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Module</code> interface is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Module {
    Set&lt;Module&gt; getDependencies();                  <i class="conum" data-value="1"></i><b>(1)</b>
    Set&lt;Class&lt;?&gt;&gt; getAdditionalModules();           <i class="conum" data-value="2"></i><b>(2)</b>
    Set&lt;Class&lt;?&gt;&gt; getAdditionalServices();          <i class="conum" data-value="3"></i><b>(3)</b>

    FixtureScript getRefDataSetupFixture();         <i class="conum" data-value="4"></i><b>(4)</b>
    FixtureScript getTeardownFixture();             <i class="conum" data-value="5"></i><b>(5)</b>

    Map&lt;String,String&gt; getIndividualConfigProps();  <i class="conum" data-value="6"></i><b>(6)</b>
    List&lt;PropertyResource&gt; getPropertyResources();
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As per Maven&#8217;s `&lt;dependencies&gt;&lt;/dependencies&gt; element.
The framework calculates a full set of transitive dependencies from this.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Support for "legacy" modules that do not implement <code>Module</code>.
These are added to the set of packages to scan for entities and domain services.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Each <code>Module</code> can define additional "legacy" domain services that have not been defined within modules,or that have not been annotated with <a href="../applib-ant/DomainService.html" class="page"><code>@DomainService</code></a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Optionally each <code>Module</code> can define a <a href="#FixtureScript"><code>FixtureScript</code></a> which holds immutable "reference data".
These are automatically executed whenever running integration tests (but are ignored when bootstrapping the runtime as a webapp.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Similarly, optionally each <code>Module</code> can define a tear-down <a href="#FixtureScript"><code>FixtureScript</code></a>, used to remove the contents of <em>all</em> entities (both reference data and operational/transactional data).</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Optionally each module can define additional configuration properties.
These can either be specified as key-value pair, or by way of the <code>PropertyResource</code> class.
The <code>PropertyResource</code> class identifies a property configuration file to load from the classpath, with respect to some other context class.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Rather than implementing directly it&#8217;s generally easiest for applications to inherit from the <code>ModuleAbstract</code> adapter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
 * Adapter for {@link Module} which has a default no-op implementation.
 *
 * &lt;p&gt;
 *     Subclasses can either override the methods, or can use the various {@link #withAdditionalModules(Class[])}.
 * &lt;/p&gt;
 */
public abstract class ModuleAbstract                                        <i class="conum" data-value="1"></i><b>(1)</b>
        implements Module {

    public ModuleAbstract withAdditionalModules(...) { /* ... */ }                <i class="conum" data-value="2"></i><b>(2)</b>
    public ModuleAbstract withAdditionalServices(...) { /* ... */ }               <i class="conum" data-value="3"></i><b>(3)</b>

    public ModuleAbstract withConfigurationProperties(...) { /* ... */ }          <i class="conum" data-value="4"></i><b>(4)</b>
    public ModuleAbstract withConfigurationPropertiesFile(...) { /* ... */ }
    public ModuleAbstract withConfigurationPropertyResources(...) { /* ... */ }
    public ModuleAbstract withConfigurationPropertyResource(...) { /* ... */ }
    public ModuleAbstract withConfigurationProperty(...) { /* ... */ }

    public Set&lt;Module&gt; getDependencies() { return Collections.emptySet(); } <i class="conum" data-value="5"></i><b>(5)</b>

    public Set&lt;Class&lt;?&gt;&gt; getAdditionalModules() { /* ... */ }                     <i class="conum" data-value="2"></i><b>(2)</b>
    public Set&lt;Class&lt;?&gt;&gt; getAdditionalServices() { /* ... */ }                    <i class="conum" data-value="3"></i><b>(3)</b>

    public FixtureScript getRefDataSetupFixture() { /* ... */ }                   <i class="conum" data-value="6"></i><b>(6)</b>
    public FixtureScript getTeardownFixture() { /* ... */ }

    public Map&lt;String,String&gt; getIndividualConfigProps() { /* ... */ }            <i class="conum" data-value="4"></i><b>(4)</b>
    public List&lt;PropertyResource&gt; getPropertyResources() { /* ... */ }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is slightly simplified; in fact <code>ModuleAbstract</code> inherits from an internal class (<code>ModuleOrBuilderAbstract</code>).
The functionality of this superclass is listed above.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Builder-like methods to specify additional "legacy" <code>Module</code>s.
Alternatively, could override <code>getAdditonalModules()</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Builder-like methods to specify additional "legacy" domain services.
Alternatively, could override <code>getAdditonalServices()</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Builder-like methods to specify additional configuration propeties specific to this module</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Set of other <code>Module</code>s on which this module depends (from which a full graph of transitive dependencies is calculated).</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Optional reference data and teardown fixture scripts for the module.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="bootstrapping-2"><a class="anchor" href="#bootstrapping-2"></a>Bootstrapping</h3>
<div class="paragraph">
<p>One of the overarching goals is to ensure that integration tests and the webapp are bootstrapped in as similar a way as possible.
<a href="#bootstrapping">Previously</a> this was done by using a single <code>AppManifest</code> for both the tests and the webapp.</p>
</div>
<div class="paragraph">
<p>However, this approach does have a significant drawback.
The <code>AppManifest</code> implementation must (necessarily) reference all the modules wthin the application, and this therefore means that the integration tests are also scoped (or at least, have access to) the entire application.</p>
</div>
<div class="paragraph">
<p>(As noted above), the <code>IntegrationTestAbstract3</code> adapter class is bootstrapped from a <code>Module</code> rather than an <code>AppManifest</code>.
This therefore allows the integration tests to reside alongside the module that they exercise, and to bootstrap only the subset of the application required (that is, the module being tested and any of its transitive dependencies)..</p>
</div>
<div class="paragraph">
<p>For more on <code>IntegrationTestAbstract3</code>, see the <a href="../../testing/integ-test-support/about.html#bootstrapping" class="page">testing user guide</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="superclasses"><a class="anchor" href="#superclasses"></a>Superclasses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section catalogues the various convenience (non event) superclasses defined by Apache Isis.
These are listed in the table below.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Convenience Superclasses</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Maven Module<br>
Impl&#8217;n (g: a:)</th>
<th class="tableblock halign-left valign-top">Implementation</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#AbstractService"><code>o.a.i.applib.</code><br>
<code>AbstractService</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#AbstractSubscriber"><code>o.a.i.applib.</code><br>
<code>AbstractSubscriber</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#AbstractViewModel"><code>o.a.i.applib.</code><br>
<code>AbstractViewModel</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#FixtureScript"><code>o.a.i.applib.</code><br>
<code>fixturescript</code><br>
<code>FixtureScript</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#FixtureScripts"><code>o.a.i.applib.</code><br>
<code>fixturescripts</code><br>
<code>FixtureScripts</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>FixtureScriptsDefault</code> is a default implementation that is used when the alternative <a href="../applib-svc/testing/FixtureScriptsSpecificationProvider.html" class="page"><code>FixtureScriptsSpecificationProvider</code></a> is provided
  (and no other implementation of <code>FixtureScripts</code> was found).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">depends on:<br>
<code>ClassDiscoveryService</code></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="AbstractService"><a class="anchor" href="#AbstractService"></a><code>AbstractService</code></h3>
<div class="paragraph">
<p>This class provides an implementation of the optional <code>getId()</code> method for domain services, based upon the classes name.</p>
</div>
<div class="paragraph">
<p>In practice there is little to gain from subclassing.
Instead annotate with <a href="../applib-ant/DomainService.html" class="page"><code>@DomainService</code></a> and specify its <a href="../applib-ant/DomainService.html#objectType" class="page"><code>#objectType()</code></a></p>
</div>
</div>
<div class="sect2">
<h3 id="AbstractSubscriber"><a class="anchor" href="#AbstractSubscriber"></a><code>AbstractSubscriber</code></h3>
<div class="paragraph">
<p>This is a convenience superclass for creating subscriber domain services on the <a href="../applib-svc/core-domain-api/EventBusService.html" class="page"><code>EventBusService</code></a>.
It uses <a href="../applib-ant/PostConstruct.html" class="page"><code>@PostConstruct</code></a> and <a href="../applib-ant/PreDestroy.html" class="page"><code>@PreDestroy</code></a> callbacks to automatically register/unregister itself with the <code>EventBusService</code>.</p>
</div>
<div class="paragraph">
<p>It&#8217;s important that subscribers register before any domain services that might emit events on the <a href="../applib-svc/core-domain-api/EventBusService.html" class="page"><code>EventBusService</code></a>.
For example, the <a href="../../secman/about.html" class="page">SecMan extension</a> provides a domain service that automatically seeds certain domain entities; these will generate <a href="classes/lifecycleevent.html" class="page">lifecycle events</a> and so any subscribers must be registered before such seed services.
The easiest way to do this is to use the Spring <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/core/annotation/Order.html"><code>@Order</code></a> annotation.</p>
</div>
<div class="paragraph">
<p>As a convenience, the <code>AbstractSubscriber</code> specifies this attribute.</p>
</div>
</div>
<div class="sect2">
<h3 id="AbstractViewModel"><a class="anchor" href="#AbstractViewModel"></a><code>AbstractViewModel</code></h3>
<div class="paragraph">
<p>This class simply implements the <a href="#ViewModel"><code>ViewModel</code></a> interface, however the methods are still abstract.
In and of itself it provides no new behaviour.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As an alternative, consider simply annotating the view model class with the {@link org.apache.isis.applib.annotation.ViewModel} annotation.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="FixtureScript"><a class="anchor" href="#FixtureScript"></a><code>FixtureScript</code></h3>
<div class="paragraph">
<p>The <code>FixtureScript</code> class is an abstract class defining an API to set up data within the object store, either for integration tests or while demoing/prototyping.</p>
</div>
<div class="paragraph">
<p>The primary method that subclasses must implement is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">protected abstract void execute(final ExecutionContext executionContext);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this method the fixture script can in theory do anything, but in practice it is recommended that it uses injected domain services to set up data.
The provided <code>ExecutionContext</code> is used to invoke child fixture scripts, and alsocan be used to store references to any created objects (so that the calling test can access these objects/so that they are rendered in the view model).</p>
</div>
<div class="paragraph">
<p>See the see the <a href="#fixtures:ROOT:about.adoc" class="page unresolved">user guide&#8217;s testing chapter</a> for further discussion on the use of fixture scripts, in particular <a href="#fixtures:ROOT:about.adoc#api-and-usage" class="page unresolved">fixture scripts' API and usage</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="FixtureScripts"><a class="anchor" href="#FixtureScripts"></a><code>FixtureScripts</code></h3>
<div class="paragraph">
<p>This abstract class constitutes the API of a domain service to execute <a href="#FixtureScript"><code>FixtureScript</code></a>s.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="../applib-svc/testing/FixtureScripts.html" class="page"><code>FixtureScripts</code></a> in the domain services guide.</p>
</div>
<div class="paragraph">
<p>See the see the <a href="#fixtures:ROOT:about.adoc" class="page unresolved">testing guide</a> for further discussion on the use of fixture scripts, in particular <a href="#fixtures:ROOT:about.adoc#api-and-usage" class="page unresolved">fixture scripts' API and usage</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="domain-event-classes"><a class="anchor" href="#domain-event-classes"></a>Domain Event Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section catalogues the various domain event classes defined by Apache Isis.</p>
</div>
<div class="paragraph">
<p>These events are broadcast on the <a href="../applib-svc/core-domain-api/EventBusService.html" class="page"><code>EventBusService</code></a>.
The domain events are broadcast as a result of being specified in the <a href="../applib-ant/Action.html#domainEvent" class="page"><code>@Action#domainEvent()</code></a>,  <a href="../applib-ant/Property.html#domainEvent" class="page"><code>@Property#domainEvent()</code></a> or <a href="../applib-ant/Collection.html#domainEvent" class="page"><code>@Collection#domainEvent()</code></a> attributes.</p>
</div>
<div class="paragraph">
<p>They are listed in the table below.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Domain Event Classes</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Maven Module<br>
Impl&#8217;n (g: a:)</th>
<th class="tableblock halign-left valign-top">Implementation</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#AbstractDomainEvent"><code>o.a.i.applib.</code><br>
<code>AbstractDomainEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.domain</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Superclass of the other domain events, listed below in this table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ActionDomainEvent"><code>o.a.i.applib.</code><br>
<code>ActionDomainEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.domain</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ActionDomainEvent.Default</code> is the concrete implementation used if no <code>@Action#domainEvent</code> attribute is specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast whenever there is an interaction (hide/disable/validate/pre-execute/post-execute) with an object&#8217;s action.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CollectionDomainEvent"><code>o.a.i.applib.</code><br>
<code>CollectionDomainEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.domain</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>CollectionDomainEvent.Default</code> is the concrete implementation used if no <code>@Collection#domainEvent</code> attribute
is specified.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast whenever there is an interaction (hide/disable/validate/access) with an object&#8217;s collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#PropertyDomainEvent"><code>o.a.i.applib.</code><br>
<code>PropertyDomainEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.domain</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>PropertyDomainEvent.Default</code> is the concrete implementation used if no <code>@Propert#domainEvent</code> attribute is specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast whenever there is an interaction (hide/disable/validate/access) with an object&#8217;s property.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="AbstractDomainEvent"><a class="anchor" href="#AbstractDomainEvent"></a><code>AbstractDomainEvent</code></h3>
<div class="paragraph">
<p>This class is the superclass for all domain events that are raised by the framework when interacting with actions,
properties or collections.</p>
</div>
<div class="paragraph">
<p>Its immediate subclasses are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ActionDomainEvent"><code>ActionDomainEvent</code></a></p>
</li>
<li>
<p><a href="#PropertyDomainEvent"><code>PropertyDomainEvent</code></a></p>
</li>
<li>
<p><a href="#CollectionDomainEvent"><code>CollectionDomainEvent</code></a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The main purpose of the class is to define the protocol by which subscribers can influence an interaction (eg hide a
collection, disable a property, validate action arguments).  It class also provides a simple mechanism to allow
adhoc sharing of user data between different phases.</p>
</div>
<div class="sect3">
<h4 id="api-3"><a class="anchor" href="#api-3"></a>API</h4>
<div class="paragraph">
<p>The API of the class is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class AbstractDomainEvent&lt;S&gt; extends java.util.EventObject {

    public S getSource();                                           <i class="conum" data-value="1"></i><b>(1)</b>
    public Object getMixedIn();                                     <i class="conum" data-value="2"></i><b>(2)</b>
    public Object getSubject();                                     <i class="conum" data-value="3"></i><b>(3)</b>

    public Identifier getIdentifier();                              <i class="conum" data-value="4"></i><b>(4)</b>

    public Phase getEventPhase();                                   <i class="conum" data-value="5"></i><b>(5)</b>

    public void hide();                                             <i class="conum" data-value="6"></i><b>(6)</b>
    public boolean isHidden();                                      <i class="conum" data-value="7"></i><b>(7)</b>

    public void disable(final String reason);                       <i class="conum" data-value="8"></i><b>(8)</b>
    public void disable(final TranslatableString reason);
    public String getDisabledReason();                              <i class="conum" data-value="9"></i><b>(9)</b>
    public TranslatableString getDisabledReasonTranslatable();
    public boolean isDisabled();

    public void invalidate(final String reason);                    <i class="conum" data-value="10"></i><b>(10)</b>
    public void invalidate(final TranslatableString reason);
    public String getInvalidityReason();                            <i class="conum" data-value="11"></i><b>(11)</b>
    public TranslatableString getInvalidityReasonTranslatable();
    public boolean isInvalid();

    public void veto(final String reason, final Object... args);    <i class="conum" data-value="12"></i><b>(12)</b>
    public void veto(final TranslatableString translatableReason);

    public Object get(Object key);                                  <i class="conum" data-value="13"></i><b>(13)</b>
    public void put(Object key, Object value);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The domain object raising this event.
<div class="paragraph">
<p>For a "regular" action, property or collection then this will be the target domain object.
But for a "mixin" action, this will be an instance of the mixin itself.</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>For a "mixin", this will be the target object that is being contributed to.
<div class="paragraph">
<p>For a "regular" action, this will return <code>null</code>.</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Returns the domain object being interacted with, irrespective of whether this is a "regular" action/property/collection or a "mixin".
<div class="ulist">
<ul>
<li>
<p>For a regular member, this will return the same as <code>getSource()</code>.</p>
</li>
<li>
<p>For a mixin, this will return the same as <code>getMixedIn()</code>.</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Identifier of the action, property or collection being interacted with.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Whether the framework is checking visibility, enablement, validity or actually executing
(invoking action, editing property), as per the <code>Phase</code> enum (defined below).</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>API for subscribers to hide the member</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Used by the framework to determine if the member should be hidden (not rendered)</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>API for subscribers to disable the member, specifying the reason why (possibly translated)</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Used by the framework to determine whether the member should be disabled (greyed out) when rendered.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>API for subscribers to invalidate an interaction, eg invalid arguments to an action</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Used by the framework to determine whether the interaction is invalid and should be blocked (eg pressing OK shows
message)</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>Convenience API for subscribers to veto; will automatically call either <code>hide()</code>, <code>disable(&#8230;&#8203;)</code> or
<code>invalidate(&#8230;&#8203;)</code> based on the phase</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td>Mechanism to allow subscribers to share arbitrary information between phases.  One event instance is used for both
the hide and disable phases, and a different event instance is shared between validate/pre-execute/post-execute.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The referenced <code>Phase</code> enum is in turn:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public enum Phase {
    HIDE,
    DISABLE,
    VALIDATE,
    EXECUTING,
    EXECUTED;
    public boolean isValidatingOrLater();    <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The significance being that at this point the proposed values/arguments are known, and so the event can be fully
populated.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ActionDomainEvent"><a class="anchor" href="#ActionDomainEvent"></a><code>ActionDomainEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractDomainEvent"><code>AbstractDomainEvent</code></a> for actions.</p>
</div>
<div class="paragraph">
<p>The class has a number of responsibilities (in addition to those it inherits):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture the target object being interacted with</p>
</li>
<li>
<p>capture the arguments for each of the action&#8217;s parameters</p>
</li>
<li>
<p>provide selected metadata about the action parameters from the metamodel (names, types)</p>
</li>
<li>
<p>link back to the <a href="../applib-svc/application-layer-api/CommandContext.html" class="page"><code>CommandContext</code></a> service&#8217;s <code>Command</code> object</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The class itself is instantiated automatically by the framework whenever interacting with a rendered object&#8217;s action.</p>
</div>
<div class="sect3">
<h4 id="api-4"><a class="anchor" href="#api-4"></a>API</h4>
<div class="paragraph">
<p>The API of the class is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class ActionDomainEvent&lt;S&gt; extends AbstractDomainEvent&lt;S&gt; {

    public static class Default extends ActionDomainEvent&lt;Object&gt; { /* ... */ }   <i class="conum" data-value="1"></i><b>(1)</b>
    public static class Noop extends ActionDomainEvent&lt;Object&gt; { /* ... */ }      <i class="conum" data-value="2"></i><b>(2)</b>
    public static class Doop extends ActionDomainEvent&lt;Object&gt; { /* ... */ }      <i class="conum" data-value="3"></i><b>(3)</b>

    @Deprecated
    public Command getCommand();                                            <i class="conum" data-value="4"></i><b>(4)</b>

    public SemanticsOf getSemantics();

    public List&lt;String&gt; getParameterNames();
    public List&lt;Class&lt;?&gt;&gt; getParameterTypes();

    public List&lt;Object&gt; getArguments();                                     <i class="conum" data-value="5"></i><b>(5)</b>
    public Object getReturnValue();                                         <i class="conum" data-value="6"></i><b>(6)</b>
    public void setReturnValue();                                         <i class="conum" data-value="7"></i><b>(7)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>Default</code> nested static class is the default for the <a href="../applib-ant/Action.html#domainEvent" class="page"><code>@Action#domainEvent()</code></a>
annotation attribute.
Whether this raises an event or not depends upon the <code>isis.reflector.facet.actionAnnotation.domainEvent.postForDefault</code> configuration property.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>Noop</code> class is provided as a convenience to indicate that an event should <em>not</em> be posted (irrespective of the configuration property setting).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Similarly, the <code>Doop</code> class is provided as a convenience to indicate that an event <em>should</em> be raised (irrespective of the configuration property setting).</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Deprecated, use <a href="../applib-svc/application-layer-api/CommandContext.html" class="page"><code>CommandContext</code></a> or (better)  <a href="../applib-svc/application-layer-api/InteractionContext.html" class="page"><code>InteractionContext</code></a>instead.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The arguments being used to invoke the action; populated during validate phase and subsequent phases.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The value returned by the action; populated only in the executed phase.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Allows the subscriber to effectively change the value returned by the action; may only be called in the executed phase.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="CollectionDomainEvent"><a class="anchor" href="#CollectionDomainEvent"></a><code>CollectionDomainEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractDomainEvent"><code>AbstractDomainEvent</code></a> for collections.</p>
</div>
<div class="paragraph">
<p>The class has a couple of responsibilities (in addition to those it inherits):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture the target object being interacted with</p>
</li>
<li>
<p>indicate whether the interaction is to add or remove an object from the collection (or simply to indicate that the collection is being accessed/read)</p>
</li>
<li>
<p>capture the object reference being added or removed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The class itself is instantiated automatically by the framework whenever interacting with a rendered object&#8217;s collection.</p>
</div>
<div class="sect3">
<h4 id="api-5"><a class="anchor" href="#api-5"></a>API</h4>
<div class="paragraph">
<p>The API of the class is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class CollectionDomainEvent&lt;S,T&gt; extends AbstractDomainEvent&lt;S&gt; {

    public static class Default                                 <i class="conum" data-value="1"></i><b>(1)</b>
        extends CollectionDomainEvent&lt;Object, Object&gt; { /* ... */ }
    public static class Noop                                    <i class="conum" data-value="2"></i><b>(2)</b>
        extends CollectionDomainEvent&lt;Object, Object&gt; { /* ... */ }
    public static class Doop                                    <i class="conum" data-value="3"></i><b>(3)</b>
        extends CollectionDomainEvent&lt;Object, Object&gt; { /* ... */ }

    public T getValue();                                        <i class="conum" data-value="4"></i><b>(4)</b>
    public Of getOf();                                          <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>Default</code> nested static class is the default for the <a href="../applib-ant/Collection.html#domainEvent" class="page"><code>@Collection#domainEvent()</code></a> annotation attribute.
Whether this raises an event or not depends upon the
<code>isis.reflector.facet.collectionAnnotation.domainEvent.postForDefault</code> configuration property.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>Noop</code> class is provided as a convenience to indicate that an event should <em>not</em> be posted (irrespective of the configuration property setting).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Similarly, the <code>Doop</code> class is provided as a convenience to indicate that an event <em>should</em> be raised (irrespective of the configuration property setting).</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the object being added or removed</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>whether this is to add or to remove</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>where the <code>Of</code> enum indicates in turn how the collection is being interacted with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static enum Of {
    ACCESS,         <i class="conum" data-value="1"></i><b>(1)</b>
    ADD_TO,         <i class="conum" data-value="2"></i><b>(2)</b>
    REMOVE_FROM     <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>collection is being rendered; set during for hide and disable phases</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>collection is being added to; set for validate, executing and executed phases</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>or, collection is being removed from; set for validate, executing and executed phases</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="PropertyDomainEvent"><a class="anchor" href="#PropertyDomainEvent"></a><code>PropertyDomainEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractDomainEvent"><code>AbstractDomainEvent</code></a> for properties.</p>
</div>
<div class="paragraph">
<p>The class has a couple of responsibilities (in addition to those it inherits):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture the target object being interacted with</p>
</li>
<li>
<p>capture the old and new values of the property</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The class itself is instantiated automatically by the framework whenever interacting with a rendered object&#8217;s property.</p>
</div>
<div class="sect3">
<h4 id="api-6"><a class="anchor" href="#api-6"></a>API</h4>
<div class="paragraph">
<p>The API of the class is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class PropertyDomainEvent&lt;S,T&gt; extends AbstractDomainEvent&lt;S&gt; {

    public static class Default                                 <i class="conum" data-value="1"></i><b>(1)</b>
        extends PropertyDomainEvent&lt;Object, Object&gt; { /* ... */ }
    public static class Noop                                    <i class="conum" data-value="2"></i><b>(2)</b>
        extends PropertyDomainEvent&lt;Object, Object&gt; { /* ... */ }
    public static class Doop                                    <i class="conum" data-value="3"></i><b>(3)</b>
        extends PropertyDomainEvent&lt;Object, Object&gt; { /* ... */ }

    public T getOldValue();                                     <i class="conum" data-value="4"></i><b>(4)</b>
    public T getNewValue();                                     <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>Default</code> nested static class is the default for the <a href="../applib-ant/Property.html#domainEvent" class="page"><code>@Property#domainEvent()</code></a> annotation attribute.
Whether this raises an event or not depends upon the
<code>isis.reflector.facet.propertyAnnotation.domainEvent.postForDefault</code> configuration property.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>Noop</code> class is provided as a convenience to indicate that an event should <em>not</em> be posted (irrespective of the configuration property setting).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Similarly, the <code>Doop</code> class is provided as a convenience to indicate that an event <em>should</em> be raised (irrespective of the configuration property setting).</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The pre-modification value of the property; populated at validate and subsequent phases.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The proposed (post-modification) value of the property; populated at validate and subsequent phases</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ui-event-classes"><a class="anchor" href="#ui-event-classes"></a>UI Event Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section catalogues the various UI event classes defined by Apache Isis.</p>
</div>
<div class="paragraph">
<p>These events are broadcast on the <a href="../applib-svc/core-domain-api/EventBusService.html" class="page"><code>EventBusService</code></a>.  The domain
events are broadcast as a result of being specified in the <a href="../applib-ant/DomainObjectLayout.html#titleUiEvent" class="page"><code>@DomainObjectLayout#titleUiEvent()</code></a>,  <a href="../applib-ant/DomainObjectLayout.html#iconUiEvent" class="page"><code>@DomainObjectLayout#iconUiEvent()</code></a> or <a href="../applib-ant/DomainObjectLayout.html#cssClassUiEvent" class="page"><code>@DomainObjectLayout#cssClassUiEvent()</code></a> attributes.</p>
</div>
<div class="paragraph">
<p>They are listed in the table below.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. UI Event Classes</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Maven Module<br>
Impl&#8217;n (g: a:)</th>
<th class="tableblock halign-left valign-top">Implementation</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#TitleUiEvent"><code>o.a.i.applib.</code><br>
<code>TitleUiEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.ui</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>TitleUiEvent.Default</code> is the concrete implementation used if no <code>@DomainObjectLayout#titleUiEvent</code> attribute is specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast whenever there is a requirement to obtain a title for a domain object.  Note that if the domain object defines its own <a href="methods.html#title" class="page"><code>title()</code></a> supporting method, or has <a href="../applib-ant/Title.html" class="page"><code>@Title</code></a> annotation(s) on its properties, then these will take precedence.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#IconUiEvent"><code>o.a.i.applib.</code><br>
<code>IconUiEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.ui</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>IconUiEvent.Default</code> is the concrete implementation used if no <code>@DomainObjectLayout#iconUiEvent</code> attribute is specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast whenever there is a requirement to obtain an icon (or rather, the name of an icon) for a domain object.  Note that if the domain object defines its own <a href="methods.html#iconName" class="page"><code>iconName()</code></a> supporting method, or if it has the <a href="../applib-ant/DomainObjectLayout.html#cssClassFa.adoc" class="page"><code>@DomainObjectLayout#cssClassFa()</code></a> attribute, then these will take precedence.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#CssClassUiEvent"><code>o.a.i.applib.</code><br>
<code>CssClassUiEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.ui</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>CssClassUiEvent.Default</code> is the concrete implementation used if no <code>@DomainObjectLayout#cssClassUiEvent</code> attribute is specified</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast whenever there is a requirement to obtain a CSS class hint for a domain object.  Note that if the domain object defines its own <a href="methods.html#cssClass" class="page"><code>cssClass()</code></a> supporting method then this
will take precedence.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="TitleUiEvent"><a class="anchor" href="#TitleUiEvent"></a><code>TitleUiEvent</code></h3>
<div class="paragraph">
<p>This event class represents a request to obtain the title of a domain object.  The class has a number of responsibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture the target object being interacted with</p>
</li>
<li>
<p>capture the title, if any, as specified to one of the subscribers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The class itself is instantiated automatically by the framework whenever interacting with a rendered object&#8217;s action.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the domain object defines its own <a href="methods.html#title" class="page"><code>title()</code></a> supporting method, or
has <a href="../applib-ant/Title.html" class="page"><code>@Title</code></a> annotation(s) on its properties, then these will take
precedence.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="IconUiEvent"><a class="anchor" href="#IconUiEvent"></a><code>IconUiEvent</code></h3>
<div class="paragraph">
<p>This event class represents a request to obtain the icon (or rather, name of icon) of a domain object.  The class has a number of responsibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture the target object being interacted with</p>
</li>
<li>
<p>capture the icon (name), if any, as specified to one of the subscribers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The class itself is instantiated automatically by the framework whenever interacting with a rendered object&#8217;s action.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If the domain object defines its own <a href="methods.html#iconName" class="page"><code>iconName()</code></a> supporting method,
or if it has the
<a href="../applib-ant/DomainObjectLayout.html#cssClassFa.adoc" class="page"><code>@DomainObjectLayout#cssClassFa()</code></a> attribute, then
these will take precedence.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="CssClassUiEvent"><a class="anchor" href="#CssClassUiEvent"></a><code>CssClassUiEvent</code></h3>
<div class="paragraph">
<p>This event class represents a request to obtain the a CSS class hint of a domain object.  The class has a number of
responsibilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>capture the target object being interacted with</p>
</li>
<li>
<p>capture the CSS class, if any, as specified to one of the subscribers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The class itself is instantiated automatically by the framework whenever interacting with a rendered object&#8217;s action.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>if the domain object defines its own <a href="methods.html#cssClass" class="page"><code>cssClass()</code></a> supporting
method then this will take precedence.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lifecycle-events"><a class="anchor" href="#lifecycle-events"></a>Lifecycle Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section catalogues the various lifecycle event classes defined by Apache Isis.
These events are fired automatically when a domain object is loaded, created, updated and so forth.</p>
</div>
<div class="paragraph">
<p>The lifecycle event classes are listed in the table below:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Lifecycle Event Classes</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 50%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">Maven Module<br>
Impl&#8217;n (g: a:)</th>
<th class="tableblock halign-left valign-top">Implementation</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#AbstractLifecycleEvent"><code>o.a.i.applib.</code><br>
<code>AbstractLifecycleEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Superclass of the other lifecycle events, listed below in this table.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ObjectCreatedDomainEvent"><code>o.a.i.applib.</code><br>
<code>ObjectCreatedEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ObjectCreatedEvent.Default</code> is the concrete implementation that is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast when an object is first instantiated using the <a href="../applib-svc/core-domain-api/FactoryService.html" class="page"><code>FactoryService</code></a>'s
<code>#instantiate(&#8230;&#8203;)</code> method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ObjectLoadedDomainEvent"><code>o.a.i.applib.</code><br>
<code>ObjectLoadedEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ObjectLoadedEvent.Default</code> is the concrete implementation that is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast when an object is retrieved from the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ObjectPersistedDomainEvent"><code>o.a.i.applib.</code><br>
<code>ObjectPersistedEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ObjectPersistedEvent.Default</code> is the concrete implementation that is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast when an object is first saved (inserted) into the database using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s
<code>#persist(&#8230;&#8203;)</code> method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ObjectPersistingDomainEvent"><code>o.a.i.applib.</code><br>
<code>ObjectPersistingEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ObjectPersistingEvent.Default</code> is the concrete implementation that is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast when an object is about to be saved (inserted) into the database using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s
<code>#persist(&#8230;&#8203;)</code> method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ObjectRemovingDomainEvent"><code>o.a.i.applib.</code><br>
<code>ObjectRemovingEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ObjectRemovingEvent.Default</code> is the concrete implementation that is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast when an object is about to be deleted from the database using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s
<code>#remove(&#8230;&#8203;)</code> method.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ObjectUpdatedDomainEvent"><code>o.a.i.applib.</code><br>
<code>ObjectUpdatedEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ObjectUpdatedEvent.Default</code> is the concrete implementation that is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast when an object has just been updated in the database.
This is done either explicitly when the current transaction is flushed using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s <code>#flush(&#8230;&#8203;)</code> method, else is done implicitly when the transaction commits at the end of the user request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#ObjectUpdatingDomainEvent"><code>o.a.i.applib.</code><br>
<code>ObjectUpdatingEvent</code></a></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>o.a.i.core</code><br>
<code>events.lifecycle</code><br>
<code>isis-core-applib</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(abstract class).<br>
<code>ObjectUpdatingEvent.Default</code> is the concrete implementation that is used.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast when an object is about to be updated in the database.
This is done either explicitly when the current transaction is flushed using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s <code>#flush(&#8230;&#8203;)</code> method, else is done implicitly when the transaction commits at the end of the user request.</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="AbstractLifecycleEvent"><a class="anchor" href="#AbstractLifecycleEvent"></a><code>AbstractLifecycleEvent</code></h3>
<div class="paragraph">
<p>This class is the superclass for all lifecycle events that are raised by the framework when loading, saving, updating
or deleting objects from the database.</p>
</div>
<div class="paragraph">
<p>Its immediate subclasses are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#ObjectCreatedEvent"><code>ObjectCreatedEvent</code></a></p>
</li>
<li>
<p><a href="#ObjectLoadedEvent"><code>ObjectLoadedEvent</code></a></p>
</li>
<li>
<p><a href="#ObjectPersistedEvent"><code>ObjectPersistedEvent</code></a></p>
</li>
<li>
<p><a href="#ObjectPersistingEvent"><code>ObjectPersistingEvent</code></a></p>
</li>
<li>
<p><a href="#ObjectRemovingEvent"><code>ObjectRemovingEvent</code></a></p>
</li>
<li>
<p><a href="#ObjectUpdatedEvent"><code>ObjectUpdatedEvent</code></a></p>
</li>
<li>
<p><a href="#ObjectUpdatingEvent"><code>ObjectUpdatingEvent</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ObjectCreatedEvent"><a class="anchor" href="#ObjectCreatedEvent"></a><code>ObjectCreatedEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractLifecycleEvent"><code>AbstractLifecycleEvent</code></a>, broadcast when an object is first instantiated using the <a href="../applib-svc/core-domain-api/FactoryService.html" class="page"><code>FactoryServuce</code></a>'s <code>#instantiate(&#8230;&#8203;)</code> method.</p>
</div>
<div class="paragraph">
<p><code>ObjectCreatedEvent.Default</code> is the implementation that is used by default, but this can be overridden using <a href="../applib-ant/DomainObject.html#createdLifecycleEvent" class="page"><code>@DomainObject#createdLifecycleEvent()</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ObjectLoadedEvent"><a class="anchor" href="#ObjectLoadedEvent"></a><code>ObjectLoadedEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractLifecycleEvent"><code>AbstractLifecycleEvent</code></a>, broadcast when an object is retrieved from the database.</p>
</div>
<div class="paragraph">
<p><code>ObjectLoadedEvent.Default</code> is the concrete implementation that is used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the future this may be generalized to allow arbitrary subclasses to be broadcast, see ISIS-803.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ObjectPersistedEvent"><a class="anchor" href="#ObjectPersistedEvent"></a><code>ObjectPersistedEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractLifecycleEvent"><code>AbstractLifecycleEvent</code></a>, broadcast when an object is first saved (inserted) into the database using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s <code>#persist(&#8230;&#8203;)</code> method.</p>
</div>
<div class="paragraph">
<p><code>ObjectPersistedEvent.Default</code> is the implementation that is used by default, but this can be overridden using <a href="../applib-ant/DomainObject.html#persistedLifecycleEvent" class="page"><code>@DomainObject#persistedLifecycleEvent()</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ObjectPersistingEvent"><a class="anchor" href="#ObjectPersistingEvent"></a><code>ObjectPersistingEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractLifecycleEvent"><code>AbstractLifecycleEvent</code></a>, broadcast when an object is about to be saved (inserted) into the database using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s <code>#persist(&#8230;&#8203;)</code> method.</p>
</div>
<div class="paragraph">
<p><code>ObjectPersistingEvent.Default</code> is the implementation that is used by default, but this can be overridden using <a href="../applib-ant/DomainObject.html#persistingLifecycleEvent" class="page"><code>@DomainObject#persistingLifecycleEvent()</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ObjectRemovingEvent"><a class="anchor" href="#ObjectRemovingEvent"></a><code>ObjectRemovingEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractLifecycleEvent"><code>AbstractLifecycleEvent</code></a>, broadcast when an object is about to be deleted from the database using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s <code>#remove(&#8230;&#8203;)</code> method.</p>
</div>
<div class="paragraph">
<p><code>ObjectRemovingEvent.Default</code> is the implementation that is used by default, but this can be overridden using <a href="../applib-ant/DomainObject.html#removingLifecycleEvent" class="page"><code>@DomainObject#removingLifecycleEvent()</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ObjectUpdatedEvent"><a class="anchor" href="#ObjectUpdatedEvent"></a><code>ObjectUpdatedEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractLifecycleEvent"><code>AbstractLifecycleEvent</code></a>, broadcast when an object has just been updated in the database.
This is done either explicitly when the current transaction is flushed using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s <code>#flush(&#8230;&#8203;)</code> method, else is done implicitly when the transaction commits at the end of the user request.</p>
</div>
<div class="paragraph">
<p><code>ObjectUpdatedEvent.Default</code> is the implementation that is used by default, but this can be overridden using <a href="../applib-ant/DomainObject.html#updatedLifecycleEvent" class="page"><code>@DomainObject#updatedLifecycleEvent()</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ObjectUpdatingEvent"><a class="anchor" href="#ObjectUpdatingEvent"></a><code>ObjectUpdatingEvent</code></h3>
<div class="paragraph">
<p>Subclass of <a href="#AbstractLifecycleEvent"><code>AbstractLifecycleEvent</code></a>, broadcast when an object is about to be updated in the database.
This is done either explicitly when the current transaction is flushed using the <a href="#refguide:applib-svc:core-domain-api/RepositoryService.adoc" class="page unresolved"><code>RepositoryService</code></a>'s <code>#flush(&#8230;&#8203;)</code> method, else is done implicitly when the transaction commits at the end of the user request.</p>
</div>
<div class="paragraph">
<p><code>ObjectUpdatingEvent.Default</code> is the implementation that is used by default, but this can be overridden using <a href="../applib-ant/DomainObject.html#updatingLifecycleEvent" class="page"><code>@DomainObject#updatingLifecycleEvent()</code></a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="value-types"><a class="anchor" href="#value-types"></a>Value Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis can render and persist all of the JDK primitives and wrapper classes, and a number of other JDK (7.x) classes that represent value types.</p>
</div>
<div class="paragraph">
<p>It also supports some of the <a href="http://www.joda.org/joda-time/">Joda-Time</a> datatypes, and a number of value types that are shipped by the framework itself.</p>
</div>
<div class="paragraph">
<p>In addition to primitives, the JDK Classes supported are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the wrapper classes:</p>
<div class="ulist">
<ul>
<li>
<p><code>java.lang.Boolean</code>, <code>java.lang.Character</code>, <code>java.lang.Double</code>, <code>java.lang.Float</code>, <code>java.lang.Long</code>, <code>java.lang.Integer</code>, <code>java.lang.Short</code>, <code>java.lang.Byte</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>java.lang.String</code></p>
</li>
<li>
<p>numeric data types:</p>
<div class="ulist">
<ul>
<li>
<p><code>java.math.BigDecimal</code></p>
</li>
<li>
<p><code>java.math.BigInteger</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>date types:</p>
<div class="ulist">
<ul>
<li>
<p><code>java.sql.Date</code></p>
</li>
<li>
<p><code>java.sql.Time</code></p>
</li>
<li>
<p><code>java.sql.Timestamp</code></p>
</li>
<li>
<p><code>java.util.Date</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>It supports these Joda-Time classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.joda.time.DateTime</code></p>
</li>
<li>
<p><code>org.joda.time.LocalDateTime</code></p>
</li>
<li>
<p><code>org.joda.time.LocalDate</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The value types defined by the framework itself (in the applib) are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>o.a.i.applib.value.Blob</code></p>
<div class="paragraph">
<p>binary large object, eg PDFs or images</p>
</div>
</li>
<li>
<p><code>o.a.i.applib.value.Markup</code></p>
<div class="paragraph">
<p>Intended for use as a read-only property to display arbitrary HTML.</p>
</div>
</li>
<li>
<p><code>o.a.i.applib.value.Clob</code></p>
<div class="paragraph">
<p>character large objects, eg XML</p>
</div>
</li>
<li>
<p><code>o.a.i.applib.value.Money</code></p>
<div class="paragraph">
<p>A currency and amount</p>
</div>
</li>
<li>
<p><code>o.a.i.applib.value.Password</code></p>
<div class="paragraph">
<p>A simple wrapper around a string, but never shown in plain-text.</p>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="blob"><a class="anchor" href="#blob"></a><code>Blob</code></h3>
<div class="paragraph">
<p><code>Blob</code> (in the <code>org.apache.isis.applib.value</code> package) is a value type defined by the Apache Isis framework to
represent a binary large object.  Conceptually you can consider it as a set of bytes (a picture, a video etc), though
in fact it wraps three pieces of information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the set of bytes</p>
</li>
<li>
<p>a name</p>
</li>
<li>
<p>a mime type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is reflected in the class' constructors and properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public final class Blob ... {
    ...
    public Blob(String name, String primaryType, String subtype, byte[] bytes) { /* ... */ }
    public Blob(String name, String mimeTypeBase, byte[] bytes) { /* ... */ }
    public Blob(String name, MimeType mimeType, byte[] bytes) { /* ... */ }
    ...
    public String getName() { /* ... */ }
    public MimeType getMimeType() { /* ... */ }
    public byte[] getBytes() { /* ... */ }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Properties of this type can be mapped to JDO/DataNucleus using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@javax.jdo.annotations.Persistent(defaultFetchGroup="false", columns = {
        @javax.jdo.annotations.Column(name = "someImage_name"),
        @javax.jdo.annotations.Column(name = "someImage_mimetype"),
        @javax.jdo.annotations.Column(name = "someImage_bytes", jdbcType = "BLOB", sqlType = "LONGVARBINARY")
})
private Blob someImage;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For character large objects, use <a href="#Clob"><code>Clob</code></a> value type.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="clob"><a class="anchor" href="#clob"></a><code>Clob</code></h3>
<div class="paragraph">
<p><code>Clob</code> (in the <code>org.apache.isis.applib.value</code> package) is a value type defined by the Apache Isis framework to
represent a character large object.  Conceptually you can consider it as a set of characters (an RTF or XML document,
for example), though in fact it wraps three pieces of information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the set of characters</p>
</li>
<li>
<p>a name</p>
</li>
<li>
<p>a mime type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is reflected in the class' constructors and properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public final class Clob ... {
    ...
    public Clob(String name, String primaryType, String subType, char[] chars) { /* ... */ }
    public Clob(String name, String mimeTypeBase, char[] chars) { /* ... */ }
    public Clob(String name, MimeType mimeType, char[] chars) { /* ... */ }
    public Clob(String name, String primaryType, String subType, CharSequence chars) { /* ... */ }
    public Clob(String name, String mimeTypeBase, CharSequence chars) { /* ... */ }
    public Clob(String name, MimeType mimeType, CharSequence chars) { /* ... */ }
    ...
    public String getName() { /* ... */ }
    public MimeType getMimeType() { /* ... */ }
    public CharSequence getChars() { /* ... */ }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Properties of this type can be mapped to JDO/DataNucleus using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@javax.jdo.annotations.Persistent(defaultFetchGroup="false", columns = {
        @javax.jdo.annotations.Column(name = "someClob_name"),
        @javax.jdo.annotations.Column(name = "someClob_mimetype"),
        @javax.jdo.annotations.Column(name = "someClob_chars", jdbcType = "CLOB", sqlType = "LONGVARCHAR")
})
private Clob someClob;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For binary large objects, use <a href="#Blob"><code>Blob</code></a> value type.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="markup"><a class="anchor" href="#markup"></a><code>Markup</code></h3>
<div class="paragraph">
<p>The <code>Markup</code> value type (introduced in <code>1.15.1</code>) is intended to be used as a read-only property, to render arbitrary markup into the user interface.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/value-types/markup.png"><img src="_images/value-types/markup.png" alt="markup" width="400px"></a>
</div>
</div>
<div class="paragraph">
<p>Corresponds to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@javax.jdo.annotations.Persistent
@javax.jdo.annotations.Column(allowsNull = "true", length = 4000)
@lombok.Getter @lombok.Setter
@Property(optionality=Optionality.OPTIONAL, editing = Editing.DISABLED)
private Markup someMarkup;

public BlobClobObject updateSomeMarkup(Markup markup) {
    setSomeMarkup(markup);
    return this;
}
public Markup defaultUpdate0SomeMarkup(String markup) {
    return getSomeMarkup();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>with this corresponding <code>layout.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;cpt:fieldSet name="Markup" id="markup"&gt;
    &lt;cpt:action id="updateSomeMarkup"/&gt;
    &lt;cpt:property id="someMarkup" labelPosition="NONE"&gt;
    &lt;/cpt:property&gt;
&lt;/cpt:fieldSet&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the property is also editable then an text edit box is also displayed - unlikely to be the desired effect.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="applib-utility-classes"><a class="anchor" href="#applib-utility-classes"></a>Applib Utility Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>org.apache.isis.applib.util</code> package has a number of simple utility
classes designed to simplify the coding of some common tasks.</p>
</div>
<div class="sect2">
<h3 id="Enums"><a class="anchor" href="#Enums"></a><code>Enums</code></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
FIXME
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public final class Enums {
    public static String getFriendlyNameOf(Enum&lt;?&gt; anEnum) { /* ... */ }
    public static String getFriendlyNameOf(String anEnumName) { /* ... */ }
    public static String getEnumNameFromFriendly(String anEnumFriendlyName) { /* ... */ }
    public static String enumToHttpHeader(final Enum&lt;?&gt; anEnum) { /* ... */ }
    public static String enumNameToHttpHeader(final String name) { /* ... */ }
    public static String enumToCamelCase(final Enum&lt;?&gt; anEnum) { /* ... */ }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ObjectContracts"><a class="anchor" href="#ObjectContracts"></a><code>ObjectContracts2</code></h3>
<div class="paragraph">
<p>The <code>ObjectContracts2</code> utility class provides a series of methods to make it easy for your domain objects to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>implement <code>Comparable</code> (eg so can be stored in <code>java.util.SortedSet</code>s)</p>
</li>
<li>
<p>implement <code>toString()</code></p>
</li>
<li>
<p>implement <code>equals()</code></p>
</li>
<li>
<p>implement <code>hashCode()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem implements Comparable&lt;ToDoItem&gt; {

    public boolean isComplete() { /* ... */ }
    public LocalDate getDueBy() { /* ... */ }
    public String getDescription() { /* ... */ }
    public String getOwnedBy() { /* ... */ }

    public int compareTo(final ToDoItem other) {
        return ObjectContracts2.compare(this, other, "complete","dueBy","description");
    }

    public String toString() {
        return ObjectContracts2.toString(this, "description","complete","dueBy","ownedBy");
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Note that <code>ObjectContracts2</code> makes heavy use of Java Reflection.  While it&#8217;s great to get going quickly in prototyping, we recommend you use your IDE to code generate implementations of these methods for production code.</p>
</div>
<div class="paragraph">
<p>Moreover (and perhaps even more importantly) <code>ObjectContracts</code> implementation can cause DataNucleus to recursively rehydrate a larger number of associated entities (More detail below).</p>
</div>
<div class="paragraph">
<p>We therefore recommend that you disable persistence-by-reachability by adding:</p>
</div>
<div class="listingblock">
<div class="title">persistor_datanucleus.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.persistenceByReachabilityAtCommit=false</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="the-issue-in-more-detail"><a class="anchor" href="#the-issue-in-more-detail"></a>The issue in more detail</h4>
<div class="paragraph">
<p>Consider the <a href="http://yuml.me/edit/742ad446">entities</a>:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/reference-classes/issue-in-more-detail.png"><img src="_images/reference-classes/issue-in-more-detail.png" alt="issue in more detail"></a>
</div>
</div>
<div class="paragraph">
<p>In the course of a transaction, the <code>Agreement</code> entity is loaded into memory (not necessarily modified), and then new <code>AgreementRole</code>s are associated to it.</p>
</div>
<div class="paragraph">
<p>All these entities implement <code>Comparable</code> using <code>ObjectContracts</code>, so that the implementation of <code>AgreementRole</code>'s (simplified) is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AgreementRole {
    ...
    public int compareTo(AgreementRole other) {
        return ObjectContracts.compareTo(this, other, "agreement","startDate","party");
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>while <code>Agreement</code>'s is implemented as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">    public class Agreement {
        ...
        public int compareTo(Agreement other) {
            return ObjectContracts.compareTo(this, other, "reference");
        }
        ...
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>and <code>Party</code>'s is similarly implemented as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Party {
    ...
    public int compareTo(Party other) {
        return ObjectContracts.compareTo(this, other, "reference");
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>DataNucleus&#8217;s persistence-by-reachability algorithm adds the <code>AgreementRole</code>s into a <code>SortedSet</code>, which causes <code>AgreementRole#compareTo()</code> to fire:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the evaluation of the "agreement" property delegates back to the <code>Agreement</code>, whose own <code>Agreement#compareTo()</code> uses the scalar <code>reference</code> property.  As the <code>Agreement</code> is already in-memory, this does not trigger any further database queries</p>
</li>
<li>
<p>the evaluation of the "startDate" property is just a scalar property of the <code>AgreementRole</code>, so will already in-memory</p>
</li>
<li>
<p>the evaluation of the "party" property delegates back to the <code>Party</code>, whose own <code>Party#compareTo()</code> requires the uses the scalar <code>reference</code> property.  However, since the <code>Party</code> is not yet in-memory, using the <code>reference</code> property triggers a database query to "rehydrate" the <code>Party</code> instance.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In other words, figuring out whether <code>AgreementRole</code> is comparable requires the persistence-by-reachability algorithm to run, causing the adjacent associated entity <code>Party</code> to also be retrieved.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Reasons"><a class="anchor" href="#Reasons"></a><code>Reasons</code></h3>
<div class="paragraph">
<p>There are two different classes provided to help build reasons returned
by <code>disableXxX()</code> and <code>validateXxx()</code> methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>org.apache.isis.applib.util.ReasonBuffer</code> helper class</p>
</li>
<li>
<p>the <code>org.apache.isis.applib.util.Reasons</code> helper class</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Customer {
    ...
    public String validatePlaceOrder(Product p, int quantity) {
        return Reasons.coalesce(
            whetherCustomerBlacklisted(this),
            whetherProductOutOfStock(p)
        );
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which you use (if any) is up to you.</p>
</div>
</div>
<div class="sect2">
<h3 id="TitleBuffer"><a class="anchor" href="#TitleBuffer"></a><code>TitleBuffer</code></h3>
<div class="paragraph">
<p>The <code>TitleBuffer</code> utility class is intended to make it easy to construct title strings (returned from the <a href="methods.html#title" class="page"><code>title()</code></a> method).</p>
</div>
<div class="paragraph">
<p>For example, it has overloaded versions of methods called <code>append()</code> and <code>concat()</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specification-pattern"><a class="anchor" href="#specification-pattern"></a>Specification pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The interfaces and classes listed in this chapter provide support for the  <code>Specification</code> pattern, as described in Eric Evans' book <em>Domain Driven Design</em>, p224.</p>
</div>
<div class="paragraph">
<p>Apache Isis will automatically apply such specifications as validation rules on properties (as per <a href="../applib-ant/Property.html#mustSatisfy" class="page"><code>@Property#mustSatisfy()</code></a>) and on action parameters (as per <a href="../applib-ant/Parameter.html#mustSatisfy" class="page"><code>@Parameter#mustSatisfy()</code></a>).</p>
</div>
<div class="sect2">
<h3 id="specification"><a class="anchor" href="#specification"></a><code>Specification</code></h3>
<div class="paragraph">
<p>The heart of the support for this pattern is the <code>Specification</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Specification {
    public String satisfies(Object obj);  <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>if returns <code>null</code>, then the constraint is satisfies; otherwise returns the reason why the constraint has not been satisfied.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class StartWithCapitalLetterSpecification implements Specification {
    public String satisfies(Object proposedObj) {
        String proposed = (String)proposedObj;               <i class="conum" data-value="1"></i><b>(1)</b>
        return "".equals(proposed)
            ? "Empty string"
            : !Character.isUpperCase(proposed.charAt(0))
                ? "Does not start with a capital letter"
                : null;
    }
}
public class Customer {
    @Property(mustSatisfy=StartWithCapitalLetterSpecification.class)
    public String getFirstName() { /* ... */ }
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>this ugly cast can be avoided using some of the other classes available; see below.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="specification2"><a class="anchor" href="#specification2"></a><code>Specification2</code></h3>
<div class="paragraph">
<p>The <code>Specification2</code> interface extends the <code>Specification</code> API to add support for i18n.
This is done by defining an additional method that returns a <a href="#TranslatableString">translatable string</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Specification2 extends Specification {
    public TranslatableString satisfiesTranslatable(Object obj);  <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>if returns <code>null</code>, then the constraint is satisfies; otherwise returns the reason why the constraint has not been satisfied.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that if implementing <code>Specification2</code> then there is no need to also provide an implementation of the inherited <code>satisfies(Object)</code> method; this will never be called by the framework for <code>Specification2</code> instances.</p>
</div>
</div>
<div class="sect2">
<h3 id="adapter-classes"><a class="anchor" href="#adapter-classes"></a>Adapter classes</h3>
<div class="paragraph">
<p>The <code>AbstractSpecification</code> and <code>AbstractSpecification2</code> adapter classes provide a partial implementation of the respective interfaces, providing type-safety.
(Their design is modelled on the <code>TypesafeMatcher</code> class within <a href="http://hamcrest.org/JavaHamcrest/">Hamcrest</a>).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class StartWithCapitalLetterSpecification extends AbstractSpecification&lt;String&gt; {
    public String satisfiesSafely(String proposed) {
        return "".equals(proposed)
            ? "Empty string"
            : !Character.isUpperCase(proposed.charAt(0))
                ? "Does not start with a capital letter"
                : null;
    }
}
public class Customer {
    @Property(mustSatisfy=StartWithCapitalLetterSpecification.class)
    public String getFirstName() { /* ... */ }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>AbstractSpecification2</code> class is almost identical; its type-safe method is <code>satisfiesTranslatableSafely(T)</code> instead.</p>
</div>
</div>
<div class="sect2">
<h3 id="combining-specifications"><a class="anchor" href="#combining-specifications"></a>Combining specifications</h3>
<div class="paragraph">
<p>There are also adapter classes that can be inherited from to combine specifications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SpecificationAnd</code> - all provided specifications' constraints must be met</p>
</li>
<li>
<p><code>SpecificationOr</code> - at least one provided specifications' constraints must be met</p>
</li>
<li>
<p><code>SpecificationNot</code> - its constraints are met if-and-only-if the provided specification&#8217;s constraint was <em>not</em> met.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that these adapter classes inherit <code>Specification</code> but do not inherit <code>Specification2</code>; in other words they do not support i18n.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="i18n-support"><a class="anchor" href="#i18n-support"></a>i18n support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>org.apache.isis.applib.services.i18n</code> package contains a single class to support i18n.</p>
</div>
<div class="sect2">
<h3 id="TranslatableString"><a class="anchor" href="#TranslatableString"></a><code>TranslatableString</code></h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
FIXME - see <a href="../../userguide/btb/i18n.html" class="page">user guide, i18n</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>TranslatableString</code> utility class &#8230;&#8203;</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributee"><a class="anchor" href="#contributee"></a>Contributee</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The interfaces listed in this chapter act as contributees; they allow domain services to contribute actions/properties/collections to any domain objects that implement these interfaces.</p>
</div>
<div class="sect2">
<h3 id="HasTransactionId"><a class="anchor" href="#HasTransactionId"></a><code>HasTransactionId</code></h3>
<div class="paragraph">
<p>The <code>HasTransactionId</code> interface is a mix-in for any domain objects that reference a transaction id, such as
auditing entries or commands, or for <a href="../applib-svc/application-layer-api/InteractionContext.html" class="page"><code>Interaction</code></a>s persisted as published events.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This identifier actually is for the request/interaction in which the object was created, so is actually now mis-named.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The interface is defined is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface HasTransactionId {
    public UUID getTransactionId();                             <i class="conum" data-value="1"></i><b>(1)</b>
    public void setTransactionId(final UUID transactionId);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>unique identifier (a GUID) of this request/interaction.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Modules in the (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a> that have domain entity/ies that implement this interface, and/or services that contribute this interface are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>audit module: <code>AuditEntry</code> entity, <code>AuditingServiceContributions</code> service</p>
</li>
<li>
<p>command module: <code>CommandJdo</code> entity, <code>CommandServiceJdoContributions</code> service</p>
</li>
<li>
<p>publishmq module: <code>PublishedEvent</code> entity</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="representsinteractionmemberexecution"><a class="anchor" href="#representsinteractionmemberexecution"></a><code>RepresentsInteractionMemberExecution</code></h4>
<div class="paragraph">
<p>The <code>RepresentsInteractionMemberExecution</code> interface is a sub-interface of <code>HasTransactionId</code> that also includes a sequence property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface RepresentsInteractionMemberExecution extends HasTransactionId {
    int getSequence();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here the (inherited) <code>getTransactionId()</code> is intended to be interpreted as an interaction (cf <a href="#refguide:schema:ixn"><code>InteractionDto</code></a>) that has at least one member execution (cf <a href="../schema/about.html#ixn/memberExecutionDto.adoc" class="page"><code>memberExecutionDto</code></a>).</p>
</div>
<div class="paragraph">
<p>If the interaction (almost certainly an action) calls other actions by way of <a href="#refguide:applib-svc:WrapperFactory.adoc" class="page unresolved"><code>WrapperFactory</code></a>), then there may be several member executions, each with a unique sequence number, within the same transaction Id.</p>
</div>
<div class="paragraph">
<p>The purpose of this interface is to allow mixins to be defined, though the framework itself defines none.</p>
</div>
<div class="paragraph">
<p>Currently the only implementation of this interface is that for <code>PublishedObjects</code> applib interface as defined by the <a href="../applib-svc/persistence-layer-spi/PublisherService.html" class="page"><code>PublisherService</code></a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="HasUserName"><a class="anchor" href="#HasUserName"></a><code>HasUsername</code></h3>
<div class="paragraph">
<p>The <code>HasUsername</code> interface is a mix-in for domain objects to be associated with a username.
Other services and modules can then contribute actions/collections to render such additional information relating to the activities of the user.</p>
</div>
<div class="paragraph">
<p>The interface is defined is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface HasUsername {
    public String getUsername();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Modules in the <a href="../../secman/about.html" class="page">SecMan extension</a> and also the (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a> that either have domain entity that implement and/or services that contribute this interface are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../secman/about.html" class="page">SecMan extension</a>: <code>ApplicationUser</code> entity, <code>HasUsernameContributions</code> service</p>
</li>
<li>
<p>audit module: <code>AuditEntry</code> entity</p>
</li>
<li>
<p>command module: <code>CommandJdo</code> entity, <code>HasUsernameContributions</code> service</p>
</li>
<li>
<p>sessionlogger module: <code>SessionLogEntry</code> entity, <code>HasUsernameContributions</code> service</p>
</li>
<li>
<p>settings module: <code>UserSettingJdo</code> entity</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="roles"><a class="anchor" href="#roles"></a>Roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The interfaces listed in this chapter are role interfaces; they define a contract for the framework to interact with those domain objects that implement these interfaces.</p>
</div>
<div class="sect2">
<h3 id="HoldsUpdatedAt"><a class="anchor" href="#HoldsUpdatedAt"></a><code>HoldsUpdatedAt</code></h3>
<div class="paragraph">
<p>The <code>HoldsUpdatedAt</code> role interface allows the (framework-provided) <code>TimestampService</code> to update each object with the current timestamp whenever it is modified in a transaction.</p>
</div>
<div class="paragraph">
<p>The interface is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface HoldsUpdatedAt {
    void setUpdatedAt(java.sql.Timestamp updatedAt);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The current time is obtained from the <a href="../applib-svc/core-domain-api/ClockService.html" class="page"><code>ClockService</code></a>.</p>
</div>
<div class="paragraph">
<p>Entities that implement this interface often also implement <a href="#HoldsUpdatedBy"><code>HoldsUpdatedBy</code></a> role interface; as a convenience the <a href="#Timestampable"><code>Timestampable</code></a> interface combines the two roles.</p>
</div>
<div class="sect3">
<h4 id="alternative-approaches"><a class="anchor" href="#alternative-approaches"></a>Alternative approaches</h4>
<div class="paragraph">
<p>An alternative way to maintain a timestamp is to use JDO&#8217;s <code>@Version</code> annotation.
With this approach, it is the JDO/DataNucleus that maintains the version, rather than the framework&#8217;s <code>TimestampService</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@javax.jdo.annotations.Version(
        strategy=VersionStrategy.DATE_TIME,
        column="version")
public class Customer {
    ...
    public java.sql.Timestamp getVersionSequence() {
        return (java.sql.Timestamp) JDOHelper.getVersion(this);
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="HoldsUpdatedBy"><a class="anchor" href="#HoldsUpdatedBy"></a><code>HoldsUpdatedBy</code></h3>
<div class="paragraph">
<p>The <code>HoldsUpdatedBy</code> role interface &#8230;&#8203;</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
FIXME &#8230;&#8203; incomplete
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface HoldsUpdatedBy {
    void setUpdatedBy(String updatedBy);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Entities that implement this interface often also implement <a href="#HoldsUpdatedAt"><code>HoldsUpdatedAt</code></a> role interface; as a convenience the <a href="#Timestampable"><code>Timestampable</code></a> interface combines the two roles.</p>
</div>
</div>
<div class="sect2">
<h3 id="Timestampable"><a class="anchor" href="#Timestampable"></a><code>Timestampable</code></h3>
<div class="paragraph">
<p>The <code>Timestampable</code> role interface is a convenience that combines the <a href="#HoldsUpdatedAt"><code>HoldsUpdatedAt</code></a> and <a href="#HoldsUpdatedBy"><code>HoldsUpdatedBy</code></a> interfaces.
It is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Timestampable
    extends HoldsUpdatedAt, HoldsUpdatedBy {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The interface no additional methods of its own.</p>
</div>
<div class="sect3">
<h4 id="alternatives"><a class="anchor" href="#alternatives"></a>Alternatives</h4>
<div class="paragraph">
<p>An alternative way to maintain a timestamp is to use JDO&#8217;s <code>@Version</code> annotation.
With this approach, it is the JDO/DataNucleus that maintains the version, rather than the framework&#8217;s <code>TimestampService</code>.
See <a href="#HoldsUpdatedBy"><code>HoldsUpdatedBy</code></a> for further details.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mixins"><a class="anchor" href="#mixins"></a>Mixins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter defines a number of role interfaces that definea contract for some framework-defined mixins.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>See the <a href="../../userguide/fun/building-blocks.html#mixins" class="page">fundamentals user guide</a> for a discussion of mixins.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="Object"><a class="anchor" href="#Object"></a><code>Object</code></h3>
<div class="paragraph">
<p>The framework provides a single mixin that contributes to simply <code>java.lang.Object</code>.
It provides the ability to download the layout XML for any domain object (in practical terms: entities and view models).</p>
</div>
<div class="paragraph">
<p>These mixin actions are all associated with the "Metadata" fieldset.
A number of other <a href="#Persistable">mixins</a> also contribute properties or actions to the "Metadata" fieldset.</p>
</div>
<div class="sect3">
<h4 id="clearhints"><a class="anchor" href="#clearhints"></a><code>clearHints()</code></h4>
<div class="paragraph">
<p>When a domain object is rendered the end-user can select different tabs, and for collections can sort the columns,
navigate to second pages, or select different views of collections.
If the user revisits that object, the <a href="../../vw/about.html" class="page">Wicket viewer</a> will remember these hints and render the domain object in the same state.
These rendering hints are also included if the user copies the URL using the anchor link (to right hand of the object&#8217;s title).</p>
</div>
<div class="paragraph">
<p>The <code>Object_clearHints</code> mixin provides the ability for the end-user to discard these hints so that the object is
rendered in its initial state:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void clearHints() {
    ...
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="related-services"><a class="anchor" href="#related-services"></a>Related Services</h5>
<div class="paragraph">
<p>This mixin uses the <a href="../applib-svc/presentation-layer-spi/HintStore.html" class="page"><code>HintStore</code></a> service to store and retrieve UI hints for each rendered object, per user.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="downloadlayoutxml"><a class="anchor" href="#downloadlayoutxml"></a><code>downloadLayoutXml()</code></h4>
<div class="paragraph">
<p>The <code>Object_downloadLayoutXml</code> mixin provides an action to download the <a href="../../vw/layout.html#file-based" class="page">layout XML</a> for the current domain object.
It has the following signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Object downloadLayoutXml(
    @ParameterLayout(named = "File name")
    final String fileName,
    final LayoutService.Style style) {          <i class="conum" data-value="1"></i><b>(1)</b>
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>either current, complete, normalized or minimal.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See the documentation on <a href="../../vw/layout.html#file-based" class="page">layout XML</a> and also
the <a href="../applib-svc/metadata-api/LayoutService.html" class="page"><code>LayoutService</code></a> for more information on these styles</p>
</div>
<div class="sect4">
<h5 id="related-services-2"><a class="anchor" href="#related-services-2"></a>Related Services</h5>
<div class="paragraph">
<p>This mixin calls <a href="../applib-svc/metadata-api/LayoutService.html" class="page"><code>LayoutService</code></a> to obtain the layout XML.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="rebuildmetamodel"><a class="anchor" href="#rebuildmetamodel"></a><code>rebuildMetamodel()</code></h4>
<div class="paragraph">
<p>The <code>Object_rebuildMetamodel</code> mixin provides the ability to discard the current internal metamodel data (an instance of <code>ObjectSpecification</code>) for the domain class of the rendered object, and recreate from code and other sources (most notably, layout XML data).
It has the following signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void rebuildMetamodel() {
    ...
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="related-services-3"><a class="anchor" href="#related-services-3"></a>Related Services</h5>
<div class="paragraph">
<p>This mixin calls <a href="../applib-svc/metadata-api/MetamodelService.html" class="page"><code>MetaModelService</code></a> and the <a href="../applib-svc/presentation-layer-spi/GridService.html" class="page"><code>GridService</code></a> to invalidate their caches.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="downloadlayoutxml-2"><a class="anchor" href="#downloadlayoutxml-2"></a><code>downloadLayoutXml()</code></h4>
<div class="paragraph">
<p>The <code>Object_downloadLayoutXml</code> mixin provides an action to download the <a href="../../vw/layout.html#file-based" class="page">layout XML</a> for the current domain object.
It has the following signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Object downloadLayoutXml(
    @ParameterLayout(named = "File name")
    final String fileName,
    final LayoutService.Style style) {          <i class="conum" data-value="1"></i><b>(1)</b>
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>either current, complete, normalized or minimal.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See the documentation on <a href="../../vw/layout.html#file-based" class="page">layout XML</a> and also
the <a href="../applib-svc/metadata-api/LayoutService.html" class="page"><code>LayoutService</code></a> for more information on these styles</p>
</div>
<div class="sect4">
<h5 id="related-services-4"><a class="anchor" href="#related-services-4"></a>Related Services</h5>
<div class="paragraph">
<p>This mixin calls <a href="../applib-svc/metadata-api/LayoutService.html" class="page"><code>LayoutService</code></a> to obtain the layout XML.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="openrestapi"><a class="anchor" href="#openrestapi"></a><code>openRestApi()</code></h4>
<div class="paragraph">
<p>The <code>Object_openRestApi</code> mixin provides an action to navigate to the URL of the <a href="../../vro/about.html" class="page">Restful Objects resource</a> corresponding to the domain object.
It has the following signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public URL openRestApi() { /* ... */ }</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="related-services-5"><a class="anchor" href="#related-services-5"></a>Related Services</h5>
<div class="paragraph">
<p>This mixin calls <a href="../applib-svc/integration-api/BookmarkService.html" class="page"><code>BookmarkService</code></a> to build the URL.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dto"><a class="anchor" href="#Dto"></a><code>Dto</code></h3>
<div class="paragraph">
<p>The <code>Dto</code> role interface is intended to be implemented by JAXB-annotated view models, that is, annotated using
<a href="../applib-ant/XmlRootElement.html" class="page"><code>@XmlRootElement</code></a>.
It enables the ability to download the XML and XSD schema of those objects using two <a href="../../userguide/fun/building-blocks.html#mixins" class="page">mixins</a>, <code>Dto_downloadXml</code> and <code>Dto_downloadXsd</code>.</p>
</div>
<div class="paragraph">
<p>The interface is just a marker interface (with no members), and is defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Dto { }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Dto_downloadXml</code> mixin defines the following action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mixin(method="act")
public class Dto_downloadXml {
    public Dto_downloadXml(final Dto dto) { /* ... */ }     <i class="conum" data-value="1"></i><b>(1)</b>
    public Object act(final String fileName) { /* ... */ }   <i class="conum" data-value="2"></i><b>(2)</b>
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>provided as an action to any class that (trivially) implements the <code>Dto</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The action&#8217;s name is derived from the class name.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This will return the XML text wrapped up in a <a href="#Clob"><code>Clob</code></a>.</p>
</div>
<div class="paragraph">
<p>The <code>Dto_downloadXsd</code> mixin is similar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mixin(method="act")
public class Dto_downloadXsd {
    public Dto_downloadXsd(final Dto dto) { /* ... */ }                                             <i class="conum" data-value="1"></i><b>(1)</b>
    public Object act(final String fileName, final IsisSchemes isisSchemas) { /* ... */ }   <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>provided as an action to any class that (trivially) implements the <code>Dto</code> interface</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The action&#8217;s name be derived from the class name.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the domain object&#8217;s JAXB annotations reference only a single XSD schema then this will return that XML text as a <a href="#Clob"><code>Clob</code></a> of that XSD.
If there are multiple XSD schemas referenced then the action will return a zip of those schemas, wrapped up in a <a href="#Blob"><code>Blob</code></a>.
The <code>IsisSchemas</code> parameter to the action can be used to optionally ignore the common <a href="../schema/about.html" class="page">Apache Isis schemas</a> (useful if there is only one other XSD schema referenced by the DTO).</p>
</div>
<div class="sect3">
<h4 id="related-services-6"><a class="anchor" href="#related-services-6"></a>Related Services</h4>
<div class="paragraph">
<p>The <code>Dto_downloadXml</code> and <code>Dto_downloadXsd</code> delegate to the <a href="../applib-svc/integration-api/JaxbService.html" class="page"><code>JaxbService</code></a> to actually generate the XML/XSD.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Persistable"><a class="anchor" href="#Persistable"></a><code>Persistable</code></h3>
<div class="paragraph">
<p>All domain entities automatically implement the DataNucleus <code>Persistable</code> role interface as a result of the enhancer process (the fully qualified class name is <code>org.datanucleus.enhancement.Persistable</code>).
So as a developer you do not need to write any code to obtain the mixins that contribute to this interface.</p>
</div>
<div class="paragraph">
<p>These mixin properties/actions are all associated with the "Metadata" fieldset.
A number of other <a href="#Object">mixins</a> also contribute properties or actions to the "Metadata" fieldset.</p>
</div>
<div class="sect3">
<h4 id="downloadjdometadata"><a class="anchor" href="#downloadjdometadata"></a><code>downloadJdoMetadata()</code></h4>
<div class="paragraph">
<p>The <code>Persistable_downloadJdoMetadata</code> mixin provides an action which allows the JDO <a href="http://www.datanucleus.org/products/datanucleus/jdo/metadata_xml.html">class metadata</a> to be downloaded as XML.
It has the following signature:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Clob downloadJdoMetadata(                    <i class="conum" data-value="1"></i><b>(1)</b>
    @ParameterLayout(named = ".jdo file name")
    final String fileName) {
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>returns the XML text wrapped up in a <a href="#Clob"><code>Clob</code></a>.</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="related-services-7"><a class="anchor" href="#related-services-7"></a>Related Services</h5>
<div class="paragraph">
<p>The mixin delegates to the <a href="../applib-svc/persistence-layer-api/IsisJdoSupport.html" class="page"><code>IsisJdoSupport</code></a> service to obtain a reference to the JDO <code>PersistenceManagerFactory</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datanucleusxxx"><a class="anchor" href="#datanucleusxxx"></a><code>datanucleusXxx</code></h4>
<div class="paragraph">
<p>The framework provides a number of mixins that expose the datanucleus Id and version of a persistable domain entity.
Several implementations are provided to support different datatypes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Persistable_datanucleusIdLong</code> will expose the entity&#8217;s id, assuming that the id is or can be cast to <code>java.lang.Long</code>.
Otherwise the property will be hidden.</p>
</li>
<li>
<p><code>Persistable_datanucleusVersionTimestamp</code> will expose the entity&#8217;s version, assuming that the version is or can be cast to <code>java.sql.Timestamp</code>.
Otherwise the property will be hidden.</p>
</li>
<li>
<p><code>Persistable_datanucleusVersionLong</code> will expose the entity&#8217;s version, assuming that the version is or can be cast to <code>java.lang.Long</code>.
Otherwise the property will be hidden.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="object-layout"><a class="anchor" href="#object-layout"></a>(Object) Layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>org.apache.isis.applib.layout.grid</code> and <code>org.apache.isis.applib.layout.component</code> packages together define a number of classes that allow the layout of domain objects (entities and view models) to be customized.
These classes fall into two main categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>grid classes, that define a grid structure of rows, columns, tab groups and tabs, and;</p>
</li>
<li>
<p>common component classes, that capture the layout metadata for an object&#8217;s properties, collections and actions.
These are bound (or associated) to the regions of the grid</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The framework provides an implementation of the grid classes modelled closely on <a href="http://getbootstrap.com">Bootstrap 3</a>, along with <a href="../../vw/about.html" class="page">Wicket viewer</a> components capable of rendering that grid system.
In principle it is also possible to extend the layout architecture for other grid systems.
The component classes, though, are intended to be reusable across all grid systems.</p>
</div>
<div class="paragraph">
<p>The component classes, meanwhile, are broadly equivalent to the "layout" annotations (<a href="../applib-ant/PropertyLayout.html" class="page"><code>@PropertyLayout</code></a>, <a href="../applib-ant/CollectionLayout.html" class="page"><code>@CollectionLayout</code></a>, <a href="../applib-ant/ActionLayout.html" class="page"><code>@ActionLayout</code></a> and <a href="../applib-ant/DomainObjectLayout.html" class="page"><code>@DomainObjectLayout</code></a></p>
</div>
<div class="paragraph">
<p>All of the classes in this package are JAXB-annotated, meaning that they can be serialized to/from XML (the <code>component</code> classes in the <code><a href="http://isis.apache.org/applib/layout/component" class="bare">http://isis.apache.org/applib/layout/component</a></code> XSD namespace, the bootstrap 3 grid classes in the <code><a href="http://isis.apache.org/applib/layout/grid/bootstrap3" class="bare">http://isis.apache.org/applib/layout/grid/bootstrap3</a></code> XSD namespace).
This ability to serialize to/from XML is used by the <a href="../applib-svc/presentation-layer-spi/GridLoaderService.html" class="page"><code>GridLoaderService</code></a>, the default implementation of which reads the grid layout for a domain class from a <code>.layout.xml</code> file on the classpath.
It also allows the grid to be exposed through the REST API provided by the <a href="../../vro/about.html" class="page">Restful Objects viewer</a>, as either XML or JSON.</p>
</div>
<div class="paragraph">
<p>The various components (properties, collections, actions and domain object) also allow a link to be associated with each.
These links are populated by the framework automatically when exposing the object layout grid through the REST API, pointing back to the standard Restful Objects resources.
This design greatly assists in the implementation of generic REST clients.</p>
</div>
<div class="sect2">
<h3 id="component"><a class="anchor" href="#component"></a>Component</h3>
<div class="paragraph">
<p>The component classes reside in the <code>org.apache.isis.applib.layout.component</code> package, and consist of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FieldSet</code><br></p>
<div class="paragraph">
<p>A fieldset (sometimes also called a property group or member group) of a number of the domain object&#8217;s properties (along with any associationed actions of those properties).</p>
</div>
</li>
<li>
<p>layout data classes, which correspond to the similarly named annotations:</p>
<div class="ulist">
<ul>
<li>
<p><code>PropertyLayoutData</code>, corresponding to the <a href="../applib-ant/PropertyLayout.html" class="page"><code>@PropertyLayout</code></a> annotation;</p>
</li>
<li>
<p><code>CollectionLayoutData</code>, corresponding to the <a href="../applib-ant/CollectionLayout.html" class="page"><code>@CollectionLayout</code></a> annotation;</p>
</li>
<li>
<p><code>ActionLayoutData</code>, corresponding to the <a href="../applib-ant/ActionLayout.html" class="page"><code>@ActionLayout</code></a> annotation;</p>
</li>
<li>
<p><code>DomainObjectLayoutData</code>, corresponding to the <a href="../applib-ant/DomainObjectLayout.html" class="page"><code>@DomainObjectLayout</code></a> annotation.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, the component package includes <code>Grid</code>, representing the top level container for a custom layout for a domain object.
<code>Grid</code> itself is merely an interface, but it also defines the visitor pattern to make it easy for validate and normalize the grid layouts.
The <code>GridAbstract</code> convenience superclass provides a partial implementation of this visitor pattern.</p>
</div>
<div class="paragraph">
<p>The XSD for these classes is available at <a href="http://isis.apache.org/applib/layout/component/component.xsd" class="bare">http://isis.apache.org/applib/layout/component/component.xsd</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="bootstrap3-grid"><a class="anchor" href="#bootstrap3-grid"></a>Bootstrap3 Grid</h3>
<div class="paragraph">
<p>The bootstrap3 grid classes are modelled closely on <a href="http://getbootstrap.com">Bootstrap 3</a>.
Bootstrap&#8217;s <a href="http://getbootstrap.com/css/#grid">grid system</a> divides the page width equally into 12 columns, and so each column spans 1 or more of these widths.
Thus, a column with a span of 12 is the full width, one with a span of 6 is half the width, one with a span of 4 is a third of the width, and so on.</p>
</div>
<div class="paragraph">
<p>When specifying the span of a column, Bootstrap also allows a size to be specified (<code>XS</code>, <code>SM</code>, <code>MD</code>, <code>LG</code>).
The size determines the rules for responsive design.
Apache Isis defaults to <code>MD</code> but this can be overridden.
It is also possible to specify multiple size/spans for a given column.</p>
</div>
<div class="paragraph">
<p>The grid classes provided by Apache Isis reside in the <code>org.apache.isis.applib.layout.grid.bootstrap3</code> package, and consist of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BS3Grid</code><br></p>
<div class="paragraph">
<p>Consists of a number of <code>BS3Row</code>s.</p>
</div>
<div class="paragraph">
<p>This class is the concrete implementation of <code>Grid</code> interface, discussed previously.
As such, it extends the <code>Grid.Visitor</code> to iterate over all of the <code>Row</code>s of the grid.</p>
</div>
</li>
<li>
<p><code>BS3Row</code><br></p>
<div class="paragraph">
<p>A container of <code>BS3Col</code>s.
This element is rendered as <code>&lt;div class="row"&gt;</code>.</p>
</div>
</li>
<li>
<p><code>BS3Col</code><br></p>
<div class="paragraph">
<p>A container of almost everything else.
A column most commonly contains properties (grouped into <code>FieldSet</code>s, described above) or collections (specified by <code>CollectionLayoutData</code>, also above).
However, a <code>Col</code> might instead contain a <code>BS3TabGroup</code> (described below) in order that the object members is arranged into tabs.</p>
</div>
<div class="paragraph">
<p>It is also possible for a <code>Col</code> to contain the object&#8217;s title/icon (using <code>DomainObjectLayoutData</code>) or indeed arbitrary actions (using <code>`ActionLayoutData</code>).</p>
</div>
<div class="paragraph">
<p>Finally, a <code>BS3Col</code> can also contain other <code>BS3Row</code>s, allowing arbitrarily deep hierarchies of containers as required.</p>
</div>
<div class="paragraph">
<p>This element is rendered as, for example, <code>&lt;div class="col-md-4"&gt;</code> (for a size <code>MD</code>, span of 4).</p>
</div>
</li>
<li>
<p><code>BS3TabGroup</code><br></p>
<div class="paragraph">
<p>A container of <code>BS3Tab</code>s.</p>
</div>
</li>
<li>
<p><code>BS3Tab</code><br></p>
<div class="paragraph">
<p>A container of <code>BS3Row</code>s, which will in turn contain <code>BS3Col</code>s and thence ultimately the object&#8217;s members.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are also two close cousins of <code>Col</code>, namely <code>ClearFixVisible</code> and <code>ClearFixHidden</code>.
These map to Bootstrap&#8217;s <a href="http://getbootstrap.com/css/#responsive-utilities">responsive utility class</a>es, and provide greater control for responsive designs.</p>
</div>
<div class="paragraph">
<p>As you can probably guess, the <code>BS3Grid</code> is the top-level object (that is, it is JAXB <code>@XmlRootElement</code>); this is the object that is serialized to/from XML.</p>
</div>
<div class="paragraph">
<p>All of these classes also allow custom CSS to be specified; these are added to the CSS classes for the corresponding <code>&lt;div</code>&gt; in the rendered page.
The <a href="../../vw/customisation.html#tweaking-css-classes" class="page"><code>application.css</code></a> file can then be used for application-specific CSS, allowing arbitrary fine-tuning of the layout of the page.</p>
</div>
<div class="paragraph">
<p>The XSD for these classes is available at <a href="http://isis.apache.org/applib/layout/menubars/bootstrap3/menubars.xsd" class="bare">http://isis.apache.org/applib/layout/menubars/bootstrap3/menubars.xsd</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="link"><a class="anchor" href="#link"></a>Link</h3>
<div class="paragraph">
<p>The link classes reside in the <code>org.apache.isis.applib.layout.links</code> package, and consist of just the <code>Link</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Link  {
    public String getRel() { /* ... */ }      <i class="conum" data-value="1"></i><b>(1)</b>
    public String getMethod() { /* ... */ }   <i class="conum" data-value="2"></i><b>(2)</b>
    public String getHref() { /* ... */ }     <i class="conum" data-value="3"></i><b>(3)</b>
    public String getType() { /* ... */ }     <i class="conum" data-value="4"></i><b>(4)</b>
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>a "rel" (as defined by section 2.7.1.2 of the RO spec v1.0), identifying the nature of the link.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the HTTP method to access the link.
This is always "GET".</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The (absolute) URL to access the Restful Objects resource.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The media type (<code>Accept</code> header) that will be returned by the URL.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The XSD for these classes is available at <a href="http://isis.apache.org/applib/layout/links/links.xsd" class="bare">http://isis.apache.org/applib/layout/links/links.xsd</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="menubars-layout"><a class="anchor" href="#menubars-layout"></a>MenuBars Layout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>org.apache.isis.applib.layout.menubars</code> package and subpackages define a number of interfaces classes that allow the layout of domain service actions to be organised across menu bars, menus and menu sections.</p>
</div>
<div class="paragraph">
<p>The classes define a hierarchical structure of menu bars, menus and menu sections.
Similar to the <a href="classes/layout.html" class="page">object layout</a> classes, the concrete menu classes support bootstrap3; support for other layout systems is possible.</p>
</div>
<div class="paragraph">
<p>The component class <code>ServiceActionLayoutData</code> defines action metadata, being broadly equivalent to the "layout" annotations for actions, ie <a href="../applib-ant/ActionLayout.html" class="page"><code>@ActionLayout</code></a>.
This is similar to the <code>ActionLayoutData</code> component class used for object layouts, but also captures the identity of the "owning" domain service.
Service actions are grouped into menu sections.</p>
</div>
<div class="paragraph">
<p>All of the classes in this package are JAXB-annotated, meaning that they can be serialized to/from XML (in the <code><a href="http://isis.apache.org/applib/layout/menubars/bootstrap3" class="bare">http://isis.apache.org/applib/layout/menubars/bootstrap3</a></code> XSD namespace).
This ability to serialize to/from XML is used by the <a href="../applib-svc/presentation-layer-spi/MenuBarsLoaderService.html" class="page"><code>MenuBarsLoaderService</code></a>, the default implementation of which reads the grid layout for a domain class from a <code>.layout.xml</code> file on the classpath.
It also allows the menu bars to be exposed through the REST API provided by the <a href="../../vro/about.html" class="page">Restful Objects viewer</a>, as either XML or JSON.</p>
</div>
<div class="paragraph">
<p>The service action component also allows a link to be associated with it.
Each such link is populated by the framework automatically when exposing the menu bars layout through the REST API, pointing back to the standard Restful Objects resources.
This design greatly assists in the implementation of generic REST clients.</p>
</div>
<div class="sect2">
<h3 id="menus"><a class="anchor" href="#menus"></a>Menus</h3>
<div class="paragraph">
<p>The menu classes reside in the <code>org.apache.isis.applib.layout.menubars.bootstrap3</code> package, consisting of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BS3MenuBars</code></p>
<div class="paragraph">
<p>The top-level structure that define three fields: a primary <code>BS3MenuBar</code>, secondary <code>BS3MenuBar</code> and tertiary <code>BS3MenuBar</code>.
The <a href="../../vw/about.html" class="page">Wicket viewer</a> places the primary bar to the left, the secondary bar aligned right, and the tertiary bar (expected to consist of just one <code>BS3Menu</code>) under the user names.</p>
</div>
</li>
<li>
<p><code>BS3MenuBar</code></p>
<div class="paragraph">
<p>consisting of one or many <code>BS3Menu</code>s.</p>
</div>
</li>
<li>
<p><code>BS3Menu</code></p>
<div class="paragraph">
<p>consisting of one or many <code>BS3MenuSection</code>s.
The <a href="../../vw/about.html" class="page">Wicket viewer</a> renders a separator between each section.</p>
</div>
</li>
<li>
<p><code>BS3MenuSection</code></p>
<div class="paragraph">
<p>consisting of one or many actions (<code>ServiceActionLayoutData</code>s)</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="components"><a class="anchor" href="#components"></a>Components</h3>
<div class="paragraph">
<p>The service action class reside in the <code>org.apache.isis.applib.layout.component</code> package, consisting of just:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ServiceActionLayoutData</code> class</p>
<div class="paragraph">
<p>which correspond to the <a href="../applib-ant/ActionLayout.html" class="page"><code>@ActionLayout</code></a> annotation.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is similar to <code>ActionLayoutData</code> (of the <a href="classes/layout.html" class="page">object layout</a> classes), however it also identifies the domain service to which it belongs.
(This isn&#8217;t required for the object layouts because the owner in that case is implicit).</p>
</div>
</div>
<div class="sect2">
<h3 id="link-2"><a class="anchor" href="#link-2"></a>Link</h3>
<div class="paragraph">
<p>The link classes reside in the <code>org.apache.isis.applib.layout.links</code> package, and consist of just the <code>Link</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Link  {
    public String getRel() { /* ... */ }      <i class="conum" data-value="1"></i><b>(1)</b>
    public String getMethod() { /* ... */ }   <i class="conum" data-value="2"></i><b>(2)</b>
    public String getHref() { /* ... */ }     <i class="conum" data-value="3"></i><b>(3)</b>
    public String getType() { /* ... */ }     <i class="conum" data-value="4"></i><b>(4)</b>
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>an "rel" (as defined by section 2.7.1.2 of the RO spec v1.0), identifying the nature of the link.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the HTTP method to access the link.
This is always "GET".</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The (absolute) URL to access the Restful Objects resource.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The media type (<code>Accept</code> header) that will be returned by the URL.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The XSD for these classes is available at <a href="http://isis.apache.org/applib/layout/links/links.xsd" class="bare">http://isis.apache.org/applib/layout/links/links.xsd</a>.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright  2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20191221-0402-9b0d5965</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hideEffect: "slideUp",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
