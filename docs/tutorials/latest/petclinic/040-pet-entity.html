<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pet entity :: Apache Isis</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../../.." title="Apache Isis">
  <link rel="next" href="050-visit-entity.html" title="Visit module and entity">
  <link rel="prev" href="030-petowner-entity.html" title="PetOwner entity">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">
          <span class="icon">
            <img src="../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../setupguide/2.0.0-M7/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide/2.0.0-M7/about.html">User Guide</a>
            <a class="navbar-item" href="../../../refguide/2.0.0-M7/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../testing/2.0.0-M7/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../vw/2.0.0-M7/about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../../vro/2.0.0-M7/about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../pjpa/2.0.0-M7/about.html">JPA (EclipseLink)</a>
            <a class="navbar-item" href="../../../pjdo/2.0.0-M7/about.html">JDO (DataNucleus)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security/2.0.0-M7/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../subdomains/2.0.0-M7/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../../valuetypes/2.0.0-M7/about.html">Value Type Catalog</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../../mappings/2.0.0-M7/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extending the framework itself</span>
            <a class="navbar-item" href="../../../extensions/2.0.0-M7/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../relnotes/2.0.0-M7/about.html">Release Notes</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M7/archive/1-x.html">Archive (1.x)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../../conguide/2.0.0-M7/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../../comguide/2.0.0-M7/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../core/2.0.0-M7/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../docs/2.0.0-M7/about.html">
          <span class="icon">
            <img src="../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="tutorials" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="030-petowner-entity.html" title="PetOwner entity"><span></span></a>
  <a class="page-next" rel="next"
     href="050-visit-entity.html" title="Visit module and entity"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title="PetOwner entity"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Tutorials</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="010-getting-started.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#prereqs">Prereqs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-1-starter-apps-clone-the-repo"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>1.1</strong>: Starter apps / clone the repo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-2-explore-the-simple-app">1.2: Explore the Simple App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-3-running-from-the-ide">1.3: Running from the IDE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-4-naked-objects-pattern">1.4: Naked Objects pattern</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-5-ui-hints">1.5: UI Hints</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="020-the-petclinic-domain.html">The PetClinic Domain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="020-the-petclinic-domain.html#exercise-2-1-refactor-simpleobject-to-petowner"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>2.1</strong>: Refactor SimpleObject to PetOwner</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="030-petowner-entity.html">PetOwner entity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-1-rename-petowners-name-property"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.1</strong>: Rename PetOwner&#8217;s name property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-2-add-petowners-firstname-property"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.2</strong>: Add PetOwner&#8217;s firstName property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-3-modify-petowners-updatename-action"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.3</strong>: Modify PetOwner&#8217;s updateName action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-4-modify-the-menu-action-to-create-petowners"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.4</strong>: Modify the menu action to create PetOwners</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-5-initial-fixture-script"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.5</strong>: Initial Fixture Script</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-6-prompt-styles"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.6</strong>: Prompt styles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-7-derived-name-property"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.7</strong>: Derived name property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-8-add-other-properties-for-petowner"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.8</strong>: Add other properties for PetOwner</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-9-validation"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.9</strong>: Validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-10-field-layout"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.10</strong>: Field layout</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-11-column-orders"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.11</strong>: Column Orders</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="040-pet-entity.html">Pet entity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-1-pet-entitys-key-properties"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.1</strong>: Pet entity&#8217;s key properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-2-add-petrepository"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.2</strong>: Add PetRepository</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-3-add-petowners-collection-of-pets"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.3</strong>: Add PetOwner&#8217;s collection of Pets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-4-add-pets-remaining-properties"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.4</strong>: Add Pet&#8217;s remaining properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-5-digression-clean-up-casing-of-database-schema"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.5</strong>: Digression: clean-up casing of database schema</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-6-add-petowner-action-to-add-pets"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.6</strong>: Add PetOwner action to add Pets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-7-add-pets-ui-customisation"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.7</strong>: Add Pet&#8217;s UI customisation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-8-update-fixture-script-using-pet-personas"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.8</strong>: Update fixture script using Pet personas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-9-add-petowner-action-to-delete-a-pet"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.9</strong>: Add PetOwner action to delete a Pet</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-4-10-cleanup"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.10</strong>: Cleanup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="050-visit-entity.html">Visit module and entity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="050-visit-entity.html#exercise-5-1-the-visits-module"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>5.1</strong>: The visits module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="050-visit-entity.html#exercise-5-2-visit-entitys-key-properties"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>5.2</strong>: Visit entity&#8217;s key properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="050-visit-entity.html#exercise-5-3-book-visit-action"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>5.3</strong>: "Book Visit" action</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="060-unit-testing.html">Unit Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="060-unit-testing.html#exercise-6-1-unit-test-the-default-time-when-booking-visits"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>6.1</strong>: Unit test the default time when booking visits</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="070-modularity.html">Modularity (domain events)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="070-modularity.html#exercise-7-1-refactor-petowners-delete-action"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>7.1</strong>: refactor PetOwner&#8217;s delete action</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="080-view-models.html">View Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="080-view-models.html#exercise-8-1-extend-the-home-page"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>8.1</strong>: Extend the Home Page.</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="080-view-models.html#exercise-8-2-add-a-convenience-action"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>8.2</strong>: Add a convenience action</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="080-view-models.html#exercise-8-3-using-a-view-model-as-a-projection-of-an-entity"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>8.3</strong>: Using a view model as a projection of an entity</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="090-integration-testing.html">Integration Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="090-integration-testing.html#exercise-9-1-testing-bookvisit-using-an-integtest"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>9.1</strong>: Testing bookVisit using an integtest</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Tutorials</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mapping Libraries</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../mappings/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../subdomains/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tooling</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../tooling/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Tutorials</a></li>
    <li><a href="040-pet-entity.html">Pet entity</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/master/antora/components/tutorials/modules/petclinic/pages/040-pet-entity.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Pet entity</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Right now our domain model still only consists of the single domain class, <code>PetOwner</code>.
We still have the <code>Pet</code> and <code>Visit</code> entities to add, along with the <code>PetSpecies</code>  enum.</p>
</div>
<div class="imageblock kroki">
<div class="content">
<object type="image/svg+xml" data="_images/diag-f2272669c17041f382689c565faa92a2c6ee5472.svg"><span class="alt">Diagram</span></object>
</div>
</div>
<div class="paragraph">
<p>In this set of exercises we&#8217;ll focus on the <code>Pet</code> entity and its relationship with <code>PetOwner</code>.
Each <code>PetOwner</code> will hold a collection of their <code>Pet</code>s, with actions to add or remove <code>Pet</code> instances for that collection.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-1-pet-entitys-key-properties"><a class="anchor" href="#exercise-4-1-pet-entitys-key-properties"></a>Ex 4.1: Pet entity&#8217;s key properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise we&#8217;ll just create the outline of the <code>Pet</code> entity, and ensure it is mapped to the database correctly.</p>
</div>
<div class="sect2">
<h3 id="solution"><a class="anchor" href="#solution"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-01-pet-entity-key-properties
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks"><a class="anchor" href="#tasks"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>create a meta-annotation <code>@PetName</code> for the Pet&#8217;s name:</p>
<div class="listingblock">
<div class="title">PetName.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Property(maxLength = PetName.MAX_LEN, optionality = Optionality.MANDATORY)
@Parameter(maxLength = PetName.MAX_LEN, optionality = Optionality.MANDATORY)
@Target({ ElementType.METHOD, ElementType.FIELD, ElementType.PARAMETER, ElementType.ANNOTATION_TYPE })
@Retention(RetentionPolicy.RUNTIME)
public @interface PetName {

    int MAX_LEN = 60;
}</code></pre>
</div>
</div>
</li>
<li>
<p>create the <code>Pet</code> entity, using the <code>@PetName</code> meta-annotation for the <code>name</code> property:</p>
<div class="listingblock">
<div class="title">Pet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Entity
@Table(
    schema="pets",
    uniqueConstraints = {
        @UniqueConstraint(name = "Pet__owner_name__UNQ", columnNames = {"owner_id, name"})
    }
)
@EntityListeners(IsisEntityListener.class)
@DomainObject(logicalTypeName = "pets.Pet", entityChangePublishing = Publishing.ENABLED)
@DomainObjectLayout()
@NoArgsConstructor(access = AccessLevel.PUBLIC)
@XmlJavaTypeAdapter(PersistentEntityAdapter.class)
@ToString(onlyExplicitlyIncluded = true)
public class Pet implements Comparable&lt;Pet&gt; {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id", nullable = false)
    @Getter @Setter
    @PropertyLayout(fieldSetId = "metadata", sequence = "1")
    private Long id;

    @Version
    @Column(name = "version", nullable = false)
    @PropertyLayout(fieldSetId = "metadata", sequence = "999")
    @Getter @Setter
    private long version;


    Pet(PetOwner petOwner, String name) {
        this.petOwner = petOwner;
        this.name = name;
    }


    @ManyToOne(optional = false)
    @JoinColumn(name = "owner_id")
    @PropertyLayout(fieldSetId = "name", sequence = "1")
    @Getter @Setter
    private PetOwner petOwner;

    @PetName
    @Column(name = "name", length = FirstName.MAX_LEN, nullable = false)
    @Getter @Setter
    @PropertyLayout(fieldSetId = "name", sequence = "2")
    private String name;


    private final static Comparator&lt;Pet&gt; comparator =
            Comparator.comparing(Pet::getPetOwner).thenComparing(Pet::getName);

    @Override
    public int compareTo(final Pet other) {
        return comparator.compare(this, other);
    }

}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Run the application, and confirm that the table is created correctly using <span class="menuseq"><b class="menu">Prototyping</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">H2 Console</b></span>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-2-add-petrepository"><a class="anchor" href="#exercise-4-2-add-petrepository"></a>Ex 4.2: Add PetRepository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will need to find the <code>Pet</code>s belonging to a <code>PetOwner</code>.
We do this by introducing a <code>PetRepository</code>, implemented as a <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repositories.definition">Spring Data repository</a>.</p>
</div>
<div class="sect2">
<h3 id="solution-2"><a class="anchor" href="#solution-2"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-02-PetRepository
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-2"><a class="anchor" href="#tasks-2"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>create the <code>PetRepository</code>, extending Spring Data&#8217;s <code>org.springframework.data.repository.Repository</code> interface:</p>
<div class="listingblock">
<div class="title">PetRepository.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.springframework.data.repository.Repository;

public interface PetRepository extends Repository&lt;Pet, Long&gt; {

    List&lt;Pet&gt; findByPetOwner(PetOwner petOwner);
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Confirm the application still runs</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-3-add-petowners-collection-of-pets"><a class="anchor" href="#exercise-4-3-add-petowners-collection-of-pets"></a>Ex 4.3: Add PetOwner&#8217;s collection of Pets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this next exercise we&#8217;ll add the <code>PetOwner</code>'s collection of <code>Pet</code>s, using a <a href="../../../userguide/latest/fun/mixins.html" class="page">mixin</a>.</p>
</div>
<div class="imageblock kroki">
<div class="content">
<object type="image/svg+xml" data="_images/diag-eaa9d52f1ae08b5e73724e105ad23df2795cf652.svg"><span class="alt">Diagram</span></object>
</div>
</div>
<div class="sect2">
<h3 id="solution-3"><a class="anchor" href="#solution-3"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-03-PetOwner-pets-mixin-collection
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-3"><a class="anchor" href="#tasks-3"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>create the <code>PetOwner_pets</code> mixin class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import org.apache.isis.applib.annotation.Collection;
import org.apache.isis.applib.annotation.CollectionLayout;

import lombok.RequiredArgsConstructor;

@Collection                                             <i class="conum" data-value="1"></i><b>(1)</b>
@CollectionLayout(defaultView = "table")
@RequiredArgsConstructor                                <i class="conum" data-value="2"></i><b>(2)</b>
public class PetOwner_pets {                            <i class="conum" data-value="3"></i><b>(3)</b>

    private final PetOwner petOwner;                    <i class="conum" data-value="4"></i><b>(4)</b>

    public List&lt;Pet&gt; coll() {
        return petRepository.findByPetOwner(petOwner);  <i class="conum" data-value="5"></i><b>(5)</b>
    }

    @Inject PetRepository petRepository;                <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates that this is a collection mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>lombok annotation to avoid some boilerplate</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>collection name is derived from the mixin class name, being the name after the '_'.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the "mixee" that is being contributed to, in other words <code>PetOwner</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>inject the <code>PetRepository</code> as defined in previous exercise, in order to find the <code>Pet</code>s owned by the <code>PetOwner</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Run the application to confirm that the <code>pets</code> collection is visible (it won&#8217;t have any <code>Pet</code> instances in it just yet).</p>
</li>
<li>
<p>update the <code>PetOwner.layout.xml</code> file to specify the position of the <code>pets</code> collection.
For example:</p>
<div class="listingblock">
<div class="title">PetOwner.layout.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;bs3:grid&gt;
    &lt;bs3:row&gt;
        &lt;!--...--&gt;
    &lt;/bs3:row&gt;
    &lt;bs3:row&gt;
        &lt;bs3:col span="6"&gt;
            &lt;!--...--&gt;
        &lt;/bs3:col&gt;
        &lt;bs3:col span="6"&gt;
            &lt;bs3:tabGroup  unreferencedCollections="true" collapseIfOne="false"&gt;
                &lt;bs3:tab name="Pets"&gt;                   <i class="conum" data-value="1"></i><b>(1)</b>
                    &lt;bs3:row&gt;
                        &lt;bs3:col span="12"&gt;
                            &lt;c:collection id="pets"/&gt;
                        &lt;/bs3:col&gt;
                    &lt;/bs3:row&gt;
                &lt;/bs3:tab&gt;
            &lt;/bs3:tabGroup&gt;
        &lt;/bs3:col&gt;
    &lt;/bs3:row&gt;
&lt;/bs3:grid&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define a tab on the right hand side to hold the <code>pets</code> collection.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run the application (or just reload the changed classes) and confirm the positioning the <code>pets</code> collection.</p>
</div>
</li>
<li>
<p>Create a column order file to define the order of columns in the <code>PetOwner</code>'s <code>pets</code> collection:</p>
<div class="listingblock">
<div class="title">PetOwner#pets.columnOrder.txt</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">name
id</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the application (or just reload the changed classes) and confirm the columns of the <code>pets</code> collection are correct.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-4-add-pets-remaining-properties"><a class="anchor" href="#exercise-4-4-add-pets-remaining-properties"></a>Ex 4.4: Add Pet&#8217;s remaining properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise we&#8217;ll add the remaining properties for <code>Pet</code>.</p>
</div>
<div class="imageblock kroki">
<div class="content">
<object type="image/svg+xml" data="_images/diag-1083d8aaada0e637a3f1882a9e3121b9befe9abd.svg"><span class="alt">Diagram</span></object>
</div>
</div>
<div class="sect2">
<h3 id="solution-4"><a class="anchor" href="#solution-4"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-04-pet-remaining-properties
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-4"><a class="anchor" href="#tasks-4"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>declare the <code>PetSpecies</code> enum:</p>
<div class="listingblock">
<div class="title">PetSpecies.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public enum PetSpecies {
    Dog,
    Cat,
    Hamster,
    Budgerigar,
}</code></pre>
</div>
</div>
</li>
<li>
<p>add in a reference to <code>PetSpecies</code>:</p>
<div class="listingblock">
<div class="title">Pet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Enumerated(EnumType.STRING)                                <i class="conum" data-value="1"></i><b>(1)</b>
@Column(nullable = false)
@Getter @Setter
@PropertyLayout(fieldSetId = "details", sequence = "1")     <i class="conum" data-value="2"></i><b>(2)</b>
private PetSpecies petSpecies;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>mapped to a string rather than an integer value in the database</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>anticipates adding a 'details' fieldSet in the layout xml (see <a href="#exercise-4-7-add-pets-ui-customisation">ex 4.7</a>)</td>
</tr>
</table>
</div>
</li>
<li>
<p>As the <code>petSpecies</code> property is mandatory, also update the constructor:</p>
<div class="listingblock">
<div class="title">Pet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Pet(PetOwner petOwner, String name, PetSpecies petSpecies) {
    this.petOwner = petOwner;
    this.name = name;
    this.petSpecies = petSpecies;
}</code></pre>
</div>
</div>
</li>
<li>
<p>add in an optional <code>notes</code> property:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Notes
@Column(length = Notes.MAX_LEN, nullable = true)
@Getter @Setter
@Property(commandPublishing = Publishing.ENABLED, executionPublishing = Publishing.ENABLED)
@PropertyLayout(fieldSetId = "notes", sequence = "1")
private String notes;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Run the application and use <span class="menuseq"><b class="menu">Prototyping</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">H2 Console</b></span> to confirm the database schema for <code>Pet</code> is as expected.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-5-digression-clean-up-casing-of-database-schema"><a class="anchor" href="#exercise-4-5-digression-clean-up-casing-of-database-schema"></a>Ex 4.5: Digression: clean-up casing of database schema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reviewing the tables in the database we can see that we have a mix between lower- and upper-case table and column names.
In this exercise we&#8217;ll take a timeout to make everything consistent.</p>
</div>
<div class="sect2">
<h3 id="solution-5"><a class="anchor" href="#solution-5"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-05-db-schema-consistent-casings
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-5"><a class="anchor" href="#tasks-5"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>check out the tag and inspect the changes:</p>
<div class="ulist">
<ul>
<li>
<p><code>Pet</code> entity table name</p>
</li>
<li>
<p><code>PetOwner</code> entity table name and column names</p>
</li>
<li>
<p>JDBC URL</p>
</li>
</ul>
</div>
</li>
<li>
<p>run the application to check the database schema.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-6-add-petowner-action-to-add-pets"><a class="anchor" href="#exercise-4-6-add-petowner-action-to-add-pets"></a>Ex 4.6: Add PetOwner action to add Pets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise we&#8217;ll bring in the capability to add <code>Pet</code>s, as a responsibility of <code>PetOwner</code>.
We&#8217;ll use an mixin action to implement this.</p>
</div>
<div class="sect2">
<h3 id="solution-6"><a class="anchor" href="#solution-6"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-06-PetOwner-addPet-action
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-6"><a class="anchor" href="#tasks-6"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>create the <code>PetOwner_addPet</code> action mixin:</p>
<div class="listingblock">
<div class="title">PetOwner_addPet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action(                                                <i class="conum" data-value="1"></i><b>(1)</b>
        semantics = SemanticsOf.IDEMPOTENT,
        commandPublishing = Publishing.ENABLED,
        executionPublishing = Publishing.ENABLED
)
@ActionLayout(associateWith = "pets")                   <i class="conum" data-value="2"></i><b>(2)</b>
@RequiredArgsConstructor
public class PetOwner_addPet {                          <i class="conum" data-value="3"></i><b>(3)</b>

    private final PetOwner petOwner;                    <i class="conum" data-value="4"></i><b>(4)</b>

    public PetOwner act(
            @PetName final String name,
            final PetSpecies petSpecies
            ) {
        repositoryService.persist(new Pet(petOwner, name, petSpecies));
        return petOwner;
    }

    @Inject RepositoryService repositoryService;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates that this class is a mixin action.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the action is associated with the "pets" collection (defined earlier).
This means that in the UI, the button representing the action will be rendered close to the table representing the "pets" collection.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the action name "addPet" is derived from the mixin class name.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run the application and verify that <code>Pet</code>s can now be added to <code>PetOwner</code>s.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s now add some validation to ensure that two pets with the same name cannot be added.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first, we need a new method in <code>PetRepository</code>:</p>
<div class="listingblock">
<div class="title">PetRepository.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Optional&lt;Pet&gt; findByPetOwnerAndName(PetOwner petOwner, String name);</code></pre>
</div>
</div>
</li>
<li>
<p>Now use a supporting <a href="../../../userguide/latest/fun/business-rules/validity.html" class="page">validate</a> method to prevent two pets with the same name from being added:</p>
<div class="listingblock">
<div class="title">PetOwner_addPet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String validate0Act(final String name) {
    return petRepository.findByPetOwnerAndName(petOwner, name).isPresent()
            ? String.format("Pet with name '%s' already defined for this owner", name)
            : null;
}

@Inject PetRepository petRepository;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
we could also just rely on the database, but adding a check here will make for better UX.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Run the application and check the validation message is fired when you attempt to add two <code>Pet</code>s with the same name for the same <code>PetOwner</code> (but two different <code>PetOwner</code>s should be able to have a <code>Pet</code> with the same name).</p>
</div>
</li>
<li>
<p>Let&#8217;s suppose that owners own dogs for this particular clinic.
Use a <a href="../../../refguide/latest/applib-methods/prefixes.html#default" class="page">default</a> supporting method to default the petSpecies parameter:</p>
<div class="listingblock">
<div class="title">PetOwner_addPet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public PetSpecies default1Act() {
    return PetSpecies.Dog;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the application once more to test.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-7-add-pets-ui-customisation"><a class="anchor" href="#exercise-4-7-add-pets-ui-customisation"></a>Ex 4.7: Add Pet&#8217;s UI customisation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If we run the application and create a <code>Pet</code>, then the framework will render a page but the layout could be improved.
So in this exercise we&#8217;ll add a layout file for <code>Pet</code> and other UI files.</p>
</div>
<div class="sect2">
<h3 id="solution-7"><a class="anchor" href="#solution-7"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-07-Pet-ui-customisation
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-7"><a class="anchor" href="#tasks-7"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>Create a <code>Pet.layout.xml</code> file as follows:</p>
<div class="listingblock">
<div class="title">Pet.layout.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;bs3:grid xsi:schemaLocation="http://isis.apache.org/applib/layout/component http://isis.apache.org/applib/layout/component/component.xsd http://isis.apache.org/applib/layout/links http://isis.apache.org/applib/layout/links/links.xsd http://isis.apache.org/applib/layout/grid/bootstrap3 http://isis.apache.org/applib/layout/grid/bootstrap3/bootstrap3.xsd" xmlns:bs3="http://isis.apache.org/applib/layout/grid/bootstrap3" xmlns:cpt="http://isis.apache.org/applib/layout/component" xmlns:lnk="http://isis.apache.org/applib/layout/links" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
    &lt;bs3:row&gt;
        &lt;bs3:col span="12" unreferencedActions="true"&gt;
            &lt;cpt:domainObject bookmarking="AS_ROOT"/&gt;
        &lt;/bs3:col&gt;
    &lt;/bs3:row&gt;
    &lt;bs3:row&gt;
        &lt;bs3:col span="6"&gt;
            &lt;bs3:row&gt;
                &lt;bs3:col span="12"&gt;
                    &lt;bs3:tabGroup&gt;
                        &lt;bs3:tab name="General"&gt;
                            &lt;bs3:row&gt;
                                &lt;bs3:col span="12"&gt;
                                    &lt;cpt:fieldSet id="name"/&gt;
                                &lt;/bs3:col&gt;
                            &lt;/bs3:row&gt;
                        &lt;/bs3:tab&gt;
                        &lt;bs3:tab name="Metadata"&gt;
                            &lt;bs3:row&gt;
                                &lt;bs3:col span="12"&gt;
                                    &lt;cpt:fieldSet name="Metadata" id="metadata"/&gt;
                                &lt;/bs3:col&gt;
                            &lt;/bs3:row&gt;
                        &lt;/bs3:tab&gt;
                        &lt;bs3:tab name="Other"&gt;
                            &lt;bs3:row&gt;
                                &lt;bs3:col span="12"&gt;
                                    &lt;cpt:fieldSet name="Other" id="other" unreferencedProperties="true"/&gt;
                                &lt;/bs3:col&gt;
                            &lt;/bs3:row&gt;
                        &lt;/bs3:tab&gt;
                    &lt;/bs3:tabGroup&gt;
                    &lt;cpt:fieldSet id="details" name="Details"/&gt;
                    &lt;cpt:fieldSet id="notes" name="Notes"/&gt;
                &lt;/bs3:col&gt;
            &lt;/bs3:row&gt;
            &lt;bs3:row&gt;
                &lt;bs3:col span="12"&gt;
                &lt;/bs3:col&gt;
            &lt;/bs3:row&gt;
        &lt;/bs3:col&gt;
        &lt;bs3:col span="6"&gt;
            &lt;bs3:tabGroup unreferencedCollections="true"/&gt;
        &lt;/bs3:col&gt;
    &lt;/bs3:row&gt;
&lt;/bs3:grid&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>reload changed classes (or run the application), and check the layout.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
if the layout isn&#8217;t quite as you expect, try using <span class="menuseq"><b class="menu">Metadata</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Rebuild metamodel</b></span> to force the domain object metamodel to be recreated.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>add a <code>Pet.png</code> file to act as the icon, in the same package.</p>
<div class="paragraph">
<p>This might be a good point to find a better icon for <code>PetOwner</code>, too.</p>
</div>
</li>
<li>
<p>we also need a title for each <code>Pet</code>, which we can provide using a
<a href="../../../refguide/latest/applib-methods/ui-hints.html#title" class="page">title()</a> method:</p>
<div class="listingblock">
<div class="title">Pet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String title() {
    return getName() + " " + getPetOwner().getLastName();
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the same way that titles are specific an object instance, we can also customise the icon:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>download additional icons for each of the <code>PetSpecies</code> (dog, cat, hamster, budgie)</p>
</li>
<li>
<p>save these icons as <code>Pet-dog.png</code>, <code>Pet-cat.png</code> and so on, ie the pet species as suffix.</p>
</li>
<li>
<p>implement the <a href="../../../refguide/latest/applib-methods/ui-hints.html#iconName" class="page">iconName()</a> method as follows:</p>
<div class="listingblock">
<div class="title">Pet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String iconName() {
    return getPetSpecies().name().toLowerCase();
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the application.
You should find that the appropriate icon is selected based upon the species of the <code>Pet</code>.</p>
</li>
<li>
<p>One further tweak is to show both the title and icon for objects in tables.
This can be done by changing some configuration properties:</p>
<div class="listingblock">
<div class="title">application-custom.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">isis:
  viewer:
    wicket:
      max-title-length-in-standalone-tables: 10
      max-title-length-in-parented-tables: 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>also update the <code>application.css</code> file, otherwise the icon and title will be centred:</p>
</div>
<div class="listingblock">
<div class="title">application.css</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-css hljs" data-lang="css">td.title-column &gt; div &gt; div &gt; div {
    text-align: left;
}
.collectionContentsAsAjaxTablePanel table.contents thead th.title-column,
.collectionContentsAsAjaxTablePanel table.contents tbody td.title-column {
    width: 10%;
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="optional-exercise"><a class="anchor" href="#optional-exercise"></a>Optional exercise</h3>
<div class="paragraph">
<p>An alternative way to create the layout file is to run the application, obtain/create an instance of the domain object in question (eg <code>Pet</code>) and then download the inferred layout XML from the metadata menu:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/04-07/download-layout-xml.png" alt="download layout xml" width="400">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-8-update-fixture-script-using-pet-personas"><a class="anchor" href="#exercise-4-8-update-fixture-script-using-pet-personas"></a>Ex 4.8: Update fixture script using Pet personas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By now you are probably tiring of continually creating a Pet in order to perform your tests.
So let&#8217;s take some time out to extend our fixture so that each <code>PetOwner</code> also has some <code>Pet</code>s.</p>
</div>
<div class="sect2">
<h3 id="solution-8"><a class="anchor" href="#solution-8"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-08-Pet-personas
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-8"><a class="anchor" href="#tasks-8"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>First we need to modify the <code>PetOwnerBuilder</code> to make it idempotent:</p>
<div class="listingblock">
<div class="title">PetOwnerBuilder.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Accessors(chain = true)
public class PetOwnerBuilder extends BuilderScriptWithResult&lt;PetOwner&gt; {

    @Getter @Setter
    private String name;

    @Override
    protected PetOwner buildResult(final ExecutionContext ec) {

        checkParam("name", ec, String.class);

        PetOwner petOwner = petOwners.findByLastNameExact(name);
        if(petOwner == null) {
            petOwner = wrap(petOwners).create(name, null);
        }
        return this.object = petOwner;
    }

    @Inject PetOwners petOwners;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Now we create a similar <code>PetBuilder</code> fixture script to add <code>Pet</code>s through a <code>PetOwner</code>:</p>
<div class="listingblock">
<div class="title">PetBuilder.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Accessors(chain = true)
public class PetBuilder extends BuilderScriptWithResult&lt;Pet&gt; {

    @Getter @Setter String name;
    @Getter @Setter PetSpecies petSpecies;
    @Getter @Setter PetOwner_persona petOwner_persona;

    @Override
    protected Pet buildResult(final ExecutionContext ec) {

        checkParam("name", ec, String.class);
        checkParam("petSpecies", ec, PetSpecies.class);
        checkParam("petOwner_persona", ec, PetOwner_persona.class);

        PetOwner petOwner = ec.executeChildT(this, petOwner_persona.builder()).getObject(); <i class="conum" data-value="1"></i><b>(1)</b>

        Pet pet = petRepository.findByPetOwnerAndName(petOwner, name).orElse(null);
        if(pet == null) {
            wrapMixin(PetOwner_addPet.class, petOwner).act(name, petSpecies);       <i class="conum" data-value="2"></i><b>(2)</b>
            pet = petRepository.findByPetOwnerAndName(petOwner, name).orElseThrow();
        }

        return this.object = pet;
    }

    @Inject PetRepository petRepository;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Transitively sets up its prereqs (<code>PetOwner</code>).
This relies on thefact that <code>PetOwnerBuilder</code> is idempotent.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>calls domain logic to add a <code>Pet</code> if required</td>
</tr>
</table>
</div>
</li>
<li>
<p>Now we create a "persona" enum for <code>Pet</code>s:</p>
<div class="listingblock">
<div class="title">Pet_persona.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@AllArgsConstructor
public enum Pet_persona
implements PersonaWithBuilderScript&lt;PetBuilder&gt;, PersonaWithFinder&lt;Pet&gt; {

    TIDDLES_JONES("Tiddles", PetSpecies.Cat, PetOwner_persona.JONES),
    ROVER_JONES("Rover", PetSpecies.Dog, PetOwner_persona.JONES),
    HARRY_JONES("Harry", PetSpecies.Hamster, PetOwner_persona.JONES),
    BURT_JONES("Burt", PetSpecies.Budgerigar, PetOwner_persona.JONES),
    TIDDLES_FARRELL("Tiddles", PetSpecies.Cat, PetOwner_persona.FARRELL),
    SPIKE_FORD("Spike", PetSpecies.Dog, PetOwner_persona.FORD),
    BARRY_ITOJE("Barry", PetSpecies.Budgerigar, PetOwner_persona.ITOJE);

    @Getter private final String name;
    @Getter private final PetSpecies petSpecies;
    @Getter private final PetOwner_persona petOwner_persona;

    @Override
    public PetBuilder builder() {
        return new PetBuilder()                                     <i class="conum" data-value="1"></i><b>(1)</b>
                        .setName(name)                              <i class="conum" data-value="2"></i><b>(2)</b>
                        .setPetSpecies(petSpecies)
                        .setPetOwner_persona(petOwner_persona);
    }

    @Override
    public Pet findUsing(final ServiceRegistry serviceRegistry) {   <i class="conum" data-value="3"></i><b>(3)</b>
        PetOwner petOwner = petOwner_persona.findUsing(serviceRegistry);
        PetRepository petRepository = serviceRegistry.lookupService(PetRepository.class).orElseThrow();
        return petRepository.findByPetOwnerAndName(petOwner, name).orElse(null);
    }

    public static class PersistAll
    extends PersonaEnumPersistAll&lt;Pet_persona, Pet&gt; {
        public PersistAll() {
            super(Pet_persona.class);
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Returns the <code>PetBuilder</code> added earlier</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Copies over the state of the enum to the builder</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Personas can also be used to lookup domain entities.
The <a href="../../../refguide/latest/applib/index/services/registry/ServiceRegistry.html" class="page">ServiceRegistry</a> can be used as a service locator of any domain service (usually a repository).</td>
</tr>
</table>
</div>
</li>
<li>
<p>Finally, update the top-level <code>PetClinicDemo</code> to create both <code>Pet</code>s and also <code>PetOwner</code>s.</p>
<div class="listingblock">
<div class="title">PetClinicDemo.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class PetClinicDemo extends FixtureScript {

    @Override
    protected void execute(final ExecutionContext ec) {
        ec.executeChildren(this, moduleWithFixturesService.getTeardownFixture());
        ec.executeChild(this, new Pet_persona.PersistAll());
        ec.executeChild(this, new PetOwner_persona.PersistAll());
    }

    @Inject ModuleWithFixturesService moduleWithFixturesService;
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-9-add-petowner-action-to-delete-a-pet"><a class="anchor" href="#exercise-4-9-add-petowner-action-to-delete-a-pet"></a>Ex 4.9: Add PetOwner action to delete a Pet</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will probably also need to delete an action to delete a <code>Pet</code> (though once there are associated <code>Visit</code>s for a <code>Pet</code>, we&#8217;ll need to disable this action).</p>
</div>
<div class="sect2">
<h3 id="solution-9"><a class="anchor" href="#solution-9"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-09-PetOwner-deletePet-action
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-9"><a class="anchor" href="#tasks-9"></a>Tasks</h3>
<div class="paragraph">
<p>+ create a new action mixins, <code>PetOwner_removePet</code>:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="title">PetOwner_removePet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action(
        semantics = SemanticsOf.IDEMPOTENT,
        commandPublishing = Publishing.ENABLED,
        executionPublishing = Publishing.ENABLED
)
@ActionLayout(associateWith = "pets", sequence = "2")
@RequiredArgsConstructor
public class PetOwner_removePet {

    private final PetOwner petOwner;

    public PetOwner act(@PetName final String name) {
        petRepository.findByPetOwnerAndName(petOwner, name)
                .ifPresent(pet -&gt; repositoryService.remove(pet));
        return petOwner;
    }

    @Inject PetRepository petRepository;
    @Inject RepositoryService repositoryService;
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To be explicit, add in an <a href="../../../refguide/latest/applib/index/annotation/ActionLayout.html#sequence" class="page">@ActionLayout#sequence</a> for "addPet" also:</p>
<div class="listingblock">
<div class="title">PetOwner_addPet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// ...
@ActionLayout(associateWith = "pets", sequence = "1")
// ...
public class PetOwner_addPet {
    // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>Run the application and test the action; it should work, but requires the <code>Pet</code>'s <code>name</code> to be spelt exactly correctly.</p>
</li>
<li>
<p>Use a <a href="../../../refguide/latest/applib-methods/prefixes.html#choices" class="page">choices</a> supporting method to restrict the list of <code>Pet</code> <code>name</code>s:</p>
<div class="listingblock">
<div class="title">PetOwner_removePet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public List&lt;String&gt; choices0Act() {
    return petRepository.findByPetOwner(petOwner)
            .stream()
            .map(Pet::getName)
            .collect(Collectors.toList());
}</code></pre>
</div>
</div>
</li>
<li>
<p>We also should <a href="../../../refguide/latest/applib-methods/prefixes.html#disable" class="page">disable</a> (grey out) the <code>removePet</code> action if the <code>PetOwner</code> has no <code>Pet</code>s:</p>
<div class="listingblock">
<div class="title">PetOwner_removePet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String disableAct() {
    return petRepository.findByPetOwner(petOwner).isEmpty() ? "No pets" : null;
}</code></pre>
</div>
</div>
</li>
<li>
<p>As a final refinement, if there is exactly one <code>Pet</code> then that could be the <a href="../../../refguide/latest/applib-methods/prefixes.html#default" class="page">default</a>:</p>
<div class="listingblock">
<div class="title">PetOwner_removePet.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String default0Act() {
    List&lt;String&gt; names = choices0Act();
    return names.size() == 1 ? names.get(0) : null;
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="optional-exercise-2"><a class="anchor" href="#optional-exercise-2"></a>Optional exercise</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you decide to do this optional exercise, make the changes on a git branch so that you can resume with the main flow of exercises later.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If we wanted to work with multiple instances of the <code>pets</code> collection, we can use the <a href="../../../refguide/latest/applib-methods/prefixes.html#choices" class="page">choices</a> method using the <a href="../../../refguide/latest/applib/index/annotation/Action.html#choicesFrom" class="page">@Action#choicesFrom</a> attribute.</p>
</div>
<div class="paragraph">
<p>Add this mixin to allow multiple <code>Pet</code>s to be removed at the same time:</p>
</div>
<div class="listingblock">
<div class="title">PetOwner_removePets.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action(
        semantics = SemanticsOf.IDEMPOTENT,
        commandPublishing = Publishing.ENABLED,
        executionPublishing = Publishing.ENABLED,
        choicesFrom = "pets"                            <i class="conum" data-value="1"></i><b>(1)</b>
)
@ActionLayout(associateWith = "pets", sequence = "2")
@RequiredArgsConstructor
public class PetOwner_removePets {                      <i class="conum" data-value="2"></i><b>(2)</b>

    private final PetOwner petOwner;

    public PetOwner act(final List&lt;Pet&gt; pets) {         <i class="conum" data-value="3"></i><b>(3)</b>
        pets.forEach(repositoryService::remove);
        return petOwner;
    }
    public String disableAct() {
        return petRepository.findByPetOwner(petOwner).isEmpty() ? "No pets" : null;
    }
                                                        <i class="conum" data-value="4"></i><b>(4)</b>
    @Inject PetRepository petRepository;
    @Inject RepositoryService repositoryService;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Results in checkboxes in the table, allowing the user to optionally check one or more instances before invoking the action.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Renamed as the action now works with a list of <code>Pet</code>s</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Signature changed.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <code>choices</code> method is removed.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-4-10-cleanup"><a class="anchor" href="#exercise-4-10-cleanup"></a>Ex 4.10: Cleanup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reviewing the contents of the <code>pets</code> module, we can see (in the solutions provided at least) that there are a few thing that still need some attention:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the classes and files for <code>Pet</code> are in the same package as for <code>PetOwner</code>; they probably should live in their own package</p>
</li>
<li>
<p>the "delete" action for <code>PetOwner</code> is not present in the UI, because its "associateWith" relates to a non-visible property</p>
</li>
<li>
<p>the "delete" action for <code>PetOwner</code> fails if there are <code>Pet</code>s, due to a referential integrity issue.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this exercise we clean up these oversights.</p>
</div>
<div class="sect2">
<h3 id="solution-10"><a class="anchor" href="#solution-10"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/04-10-pets-module-cleanup
mvn clean install
mvn -pl spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-10"><a class="anchor" href="#tasks-10"></a>Tasks</h3>
<div class="paragraph">
<p>Just check out the tag above and inspect the fixes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>Pet</code> entity, <code>PetRepository</code> and related UI files have been moved to <code>petclinic.modules.pets.dom.pet</code> package</p>
</li>
<li>
<p>the <code>PetOwner_pet</code>, <code>PetOwner_addPet</code> and <code>PetOwner_removePet</code> mixins have also been moved.</p>
<div class="paragraph">
<p>This means that <code>PetOwner</code> is actually unaware of the fact that there are associated <code>Pet</code>s.
This abliity to control the direction of dependencies is very useful for ensuring modularity.</p>
</div>
</li>
<li>
<p>the <code>PetOwner</code>'s <code>delete</code> action has been refactored into a mixin, and also moved to the <code>pets</code> package so that it will delete the child <code>Pet</code>s first.</p>
<div class="paragraph">
<p>Also fixes tests.</p>
</div>
</li>
<li>
<p>the fixtures for <code>PetOwner</code> and <code>Pet</code> have also been moved into their own packages.</p>
</li>
<li>
<p>the tear down fixture for <code>PetsModule</code> has been updated to also delete from the <code>Pet</code> entity.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2021 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M6.20220223-0232-65c56279</p>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
