<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The PetClinic domain, and the petowner module :: causeway</title>
    <link rel="canonical" href="https://apache-causeway-committers.github.io/causeway-nightly/tutorials/latest/petclinic/020-the-petclinic-domain.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-custom.css">
<link rel="home" href="https://apache-causeway-committers.github.io/causeway-nightly" title="causeway">
  <link rel="next" href="030-petowner-entity.html" title="The &lt;code&gt;PetOwner&lt;/code&gt; entity">
  <link rel="prev" href="010-getting-started.html" title="Getting Started">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://apache-causeway-committers.github.io/causeway-nightly">
          <span class="icon">
            <img src="../../../_/img/causeway-logo-no-words-65x48.png"></img>
          </span>
        <span class="navbar-title">causeway</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../docs/latest/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../docs/latest/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Learning &amp; Tutorials</span>
            <a class="navbar-item" href="../../../docs/latest/reference/about.html">Reference App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../docs/latest/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../docs/latest/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide/latest/about.html">User Guide</a>
            <a class="navbar-item" href="../../../refguide/latest/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../testing/latest/about.html">Testing Guide</a>
            <a class="navbar-item" href="../../../security/latest/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">For use in apps</span>
            <a class="navbar-item" href="../../../valuetypes/latest/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../setupguide/latest/about.html">Setup Guide</a>
            <a class="navbar-item" href="../../../conguide/latest/about.html">Contributors' Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security/latest/bypass/about.html">Bypass</a>
            <a class="navbar-item" href="../../../security/latest/simple/about.html">Simple</a>
            <a class="navbar-item" href="../../../security/latest/shiro/about.html">Shiro</a>
            <a class="navbar-item" href="../../../security/latest/spring/about.html">Spring</a>
            <a class="navbar-item" href="../../../security/latest/keycloak/about.html">Keycloak</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../vw/latest/about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../../gqlv/latest/about.html">GraphQL API</a>
            <a class="navbar-item" href="../../../vro/latest/about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../pjpa/latest/about.html">JPA (EclipseLink)</a>
            <a class="navbar-item" href="../../../pjdo/latest/about.html">JDO (DataNucleus)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Extensions</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide/latest/commandlog/about.html">Command Log</a>
            <a class="navbar-item" href="../../../userguide/latest/docgen/about.html">Doc Gen</a>
            <a class="navbar-item" href="../../../userguide/latest/executionlog/about.html">Execution Log</a>
            <a class="navbar-item" href="../../../userguide/latest/executionoutbox/about.html">Execution Outbox</a>
            <a class="navbar-item" href="../../../userguide/latest/executionrepublisher/about.html">Execution Republisher</a>
            <a class="navbar-item" href="../../../userguide/latest/excel/about.html">Excel</a>
            <a class="navbar-item" href="../../../userguide/latest/flyway/about.html">Flyway</a>
            <a class="navbar-item" href="../../../userguide/latest/layoutloaders/about.html">Layout Loaders</a>
            <a class="navbar-item" href="../../../userguide/latest/titlecache/about.html">Title Cache</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security/latest/secman/about.html">Secman</a>
            <a class="navbar-item" href="../../../security/latest/audittrail/about.html">Audit Trail</a>
            <a class="navbar-item" href="../../../security/latest/spring-oauth2/about.html">Spring OAuth2 Integration</a>
            <a class="navbar-item" href="../../../security/latest/shiro-realm-ldap/about.html">LDAP Realm for Shiro</a>
            <a class="navbar-item" href="../../../security/latest/sessionlog/about.html">Session Log</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Web UI (Wicket)</span>
            <a class="navbar-item" href="../../../vw/latest/fullcalendar/about.html">Full Calendar</a>
            <a class="navbar-item" href="../../../vw/latest/pdfjs/about.html">pdf.js</a>
            <a class="navbar-item" href="../../../vw/latest/sse/about.html">Server Side Events</a>
            <a class="navbar-item" href="../../../vw/latest/tabular/about.html">Tabular Download</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">REST API (Restful Objects)</span>
            <a class="navbar-item" href="../../../vro/latest/cors/about.html">CORS</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../docs/latest/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../docs/latest/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/CAUSEWAY">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/causeway">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../docs/latest/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../relnotes/latest/about.html">Release Notes</a>
            <hr class="navbar-divider"/>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Framework</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Process</span>
            <a class="navbar-item" href="../../../comguide/latest/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../tooling/latest/about.html">Tooling</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Automated Analysis</span>
            <a class="navbar-item" href="https://sonarcloud.io/dashboard?id=apache_causeway">SonarCloud.io</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Interim Builds</span>
            <a class="navbar-item" href="../../../comguide/latest/nightly-builds.html">Nightly builds</a>
            <a class="navbar-item" href="../../../comguide/latest/weekly-builds.html">Weekly builds</a>
            <a class="navbar-item" href="https://apache-causeway-committers.github.io/causeway-nightly">Website Preview (not ASF hosted)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../core/latest/about.html">Internal Design Docs</a>
            <a class="navbar-item" href="../../../regressiontests/latest/about.html">Regression Tests</a>
            <a class="navbar-item" href="../../../incubator/latest/about.html">Incubator</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Thanks</span>
            <a class="navbar-item" href="../../../more-thanks/latest/more-thanks.html">Acknowledgements</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">License</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Causeway.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../docs/latest/about.html">
          <span class="icon">
            <img src="../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="tutorials" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-search hide-for-print">
  <input id="algolia-search-input" placeholder="Search"></span>
</div>
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="010-getting-started.html" title="Getting Started"><span></span></a>
  <a class="page-next" rel="next"
     href="030-petowner-entity.html" title="The &lt;code&gt;PetOwner&lt;/code&gt; entity"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title="Getting Started"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Tutorials</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="010-getting-started.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#prereqs">Prereqs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-1-starter-apps-clone-the-repo"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>1.1</strong>: Starter apps / clone the repo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-2-explore-the-simple-app">1.2: Explore the Simple App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-3-running-from-the-ide">1.3: Running from the IDE</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-4-naked-objects-pattern">1.4: Naked Objects pattern</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="010-getting-started.html#exercise-1-5-ui-hints">1.5: UI Hints</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="020-the-petclinic-domain.html">The PetClinic Domain and <code>petowner</code> module</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-2-1-create-a-new-petowner-module"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>2.1</strong>: Create new <code>petowner</code> module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-2-2-configure-the-app-to-include-the-petowner-module"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>2.2</strong>: Include the <code>petowner</code> module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-2-3-add-security-role-for-petowner-module"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>2.3</strong>: Add security role for the <code>petowner</code> module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-2-4-update-menubar-for-PetOwners"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>2.4</strong>: Update menubar for <code>PetOwners</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#exercise-2-5-setup-demo-PetOwners"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>2.5</strong>: Setup demo <code>PetOwner</code>s</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="030-petowner-entity.html">The <code>PetOwner</code> entity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-1-add-petowners-knownAs-property"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.1</strong>: Add <code>PetOwner</code>'s <code>knownAs</code> property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-2-define-PetOwners-title-imperatively"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.2</strong>: Define <code>PetOwner</code>'s title imperatively</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-3-remaining-PetOwner-properties"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.3</strong>: Add remaining <code>PetOwner</code> properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-4-list-new-properties-of-PetOwner"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.4</strong>: List new properties of <code>PetOwner</code></a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-5-initial-fixture-script"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.5</strong>: Initial Fixture Script</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-6-update-home-page-to-show-PetOwners"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.6</strong>:  Update Home Page to show <code>PetOwner</code>s</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-7-modify-the-menu-action-that-creates-petowners"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.7</strong>: Modify the menu action that creates <code>PetOwner</code>s</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-8-prompt-styles"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.8</strong>: Prompt styles</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-9-derived-days-since-last-visit-property"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.9</strong>: Derived 'days since last visit' property</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-10-use-meta-annotations-to-reduce-duplication"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.10</strong>: Use meta-annotations to reduce duplication</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-11-validation"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.11</strong>: Validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-12-more-validation"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.12</strong>: More validation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-13-scalar-custom-value-types"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.13</strong>: Scalar custom value types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-14-use-layout-xml-file-for-ui-semantics"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.14</strong>: Use layout xml file for UI semantics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="030-petowner-entity.html#exercise-3-15-update-icon-for-pet-owner"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>3.15</strong>: Update icon for <code>PetOwner</code></a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="040-pet-entity.html">The <code>Pet</code> entity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-1-pet-entitys-key-properties"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.1</strong>: <code>Pet</code> entity&#8217;s key properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-2-add-pet-ui-and-layout-semantics"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.2</strong>: Add <code>Pet</code>'s UI and layout semantics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-3-add-petowners-collection-of-pets"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.3</strong>: Add <code>PetOwner</code>'s collection of <code>Pet</code>s</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-4-add-actions-to-add-or-remove-pets"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.4</strong>: Add actions to add or remove <code>Pet</code>s</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-5-extend-the-fixture-data-to-add-in-Pets"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.5</strong>: Extend the fixture data to add in <code>Pet</code>s</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-6-add-action-validation"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.6</strong>: Unique <code>Pet</code> names (action validation)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-7-add-pets-remaining-properties"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.7</strong>: Add <code>Pet</code>'s remaining properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="040-pet-entity.html#exercise-4-8-dynamic-icons-for-pet"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>4.8</strong>: Add dynamic icons for <code>Pet</code></a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="050-visit-entity.html">The <code>visit</code> module and <code>Visit</code> entity</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="050-visit-entity.html#exercise-5-1-the-visits-module"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>5.1</strong>: The <code>visit</code> module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="050-visit-entity.html#exercise-5-2-visit-module-dependencies"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>5.2</strong>: The <code>visit</code> module dependencies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="050-visit-entity.html#exercise-5-3-visit-entitys-key-properties"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>5.3</strong>: <code>Visit</code> entity&#8217;s key properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="050-visit-entity.html#exercise-5-4-book-visit-action"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>5.4</strong>: The "Book Visit" action</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="060-unit-testing.html">Unit Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="060-unit-testing.html#exercise-6-1-unit-test-the-default-time-when-booking-visits"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>6.1</strong>: Unit test the default time when booking visits</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="070-modularity.html">Modularity (domain events)</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="070-modularity.html#exercise-7-1-refactor-petowners-delete-action"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>7.1</strong>: refactor <code>PetOwner</code>'s delete action</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="080-view-models.html">View Models</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="080-view-models.html#exercise-8-1-extend-the-home-page"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>8.1</strong>: Extend the Home Page.</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="080-view-models.html#exercise-8-2-add-a-convenience-action"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>8.2</strong>: Add a convenience action</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="090-integration-testing.html">Integration Testing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="090-integration-testing.html#exercise-9-1-testing-bookvisit-using-an-integtest"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>9.1</strong>: Testing <code>bookVisit()</code> using an integtest</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="090-integration-testing.html#exercise-9-2-adds-visit-fixture"><span class="image"><img src="_images/hand.png" alt="hand"></span> <strong>9.2</strong>: Adds fixtures for the <code>visit</code> module</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Tutorials</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version">
          <a href="../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">GraphQL Viewer</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../gqlv/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">QueryDSL</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../querydsl/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">regressiontests</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../regressiontests/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Tutorials</a></li>
    <li><a href="020-the-petclinic-domain.html">The PetClinic Domain and <code>petowner</code> module</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/causeway/edit/main/antora/components/tutorials/modules/petclinic/pages/020-the-petclinic-domain.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">The PetClinic domain, and the <code>petowner</code> module</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>By now you should understand the basics of what Apache Causeway does, but there&#8217;s only so much we can learn from a single domain class.
Let&#8217;s therefore evolve the app into a slightly more interesting domain and explore other features of the framework.</p>
</div>
<div class="paragraph">
<p>The domain we&#8217;re going to work on is a version of the venerable "Pet Clinic" app.
Here&#8217;s a sketch of (our version of) its domain:</p>
</div>
<div class="listingblock kroki-error">
<div class="content">
<pre>hide empty members
hide methods

skinparam class {
	BackgroundColor&lt;&lt;desc&gt;&gt; Cyan
	BackgroundColor&lt;&lt;ppt&gt;&gt; LightGreen
	BackgroundColor&lt;&lt;mi&gt;&gt; LightPink
	BackgroundColor&lt;&lt;role&gt;&gt; LightYellow
}


package petowner {

    enum PetSpecies &lt;&lt;desc&gt;&gt; {
        Dog
        Cat
        Hamster
        Budgerigar
    }

    class Pet &lt;&lt;ppt&gt;&gt; {
        +id
        ..
        #petOwner
        #name
        ..
        -species
        -notes
        ..
        -version
    }


    class PetOwner &lt;&lt;role&gt;&gt; {
        +id
        ..
        #name
        #knownAs
        ..
        -phoneNumber
        -emailAddress
        ..
        -lastVisit
        -/daysSinceLastVisit
        ..
        -notes
    }
}


package visit {

    class Visit &lt;&lt;mi&gt;&gt; {
        +id
        ..
        #pet
        #visitAt: LocalDateTime
    }
}


PetOwner *-r--&gt; "0..*" Pet
Visit "   \n*" -r-&gt;  Pet
Pet  "*" -u-&gt; PetSpecies</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The colours used are from "Java: Modeling in Color" book by Coad et al.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some of the use cases we might want to support include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a <code>PetOwner</code></p>
</li>
<li>
<p>add and remove <code>Pet</code>s for said <code>PetOwner</code></p>
</li>
<li>
<p>delete a <code>PetOwner</code> and its <code>Pet</code>s and <code>Visit</code>s, so long as there are no unpaid <code>Visit</code>s.</p>
</li>
<li>
<p>book a <code>Pet</code> in for a <code>Visit</code></p>
</li>
<li>
<p>delete a <code>PetOwner</code> and its <code>Pet</code>s, unless there are  <code>Visit</code>s.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This tutorial has worked solutions for all of these</p>
</div>
<div class="paragraph">
<p>Some ideas for future extensions to the domain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>enter an <code>outcome</code> and <code>cost</code> of a <code>Visit</code></p>
</li>
<li>
<p>allow a <code>PetOwner</code> to pay for a <code>Visit</code></p>
</li>
<li>
<p>find <code>Visit</code>s not yet paid and overdue</p>
</li>
<li>
<p>delete a <code>PetOwner</code> and its <code>Pet</code>s and <code>Visit</code>s, so long as there are no unpaid <code>Visit</code>s.</p>
</li>
<li>
<p>add a previous/next buttons when paging through upcoming <code>Visit</code>s</p>
</li>
<li>
<p>make "lastVisit" non-editable and maintained automatically from <code>Visit</code>s</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once you have finished the formal tutorial, have a go at implementing some of these ideas.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-2-1-create-a-new-petowner-module"><a class="anchor" href="#exercise-2-1-create-a-new-petowner-module"></a>Ex 2.1: Create a new <code>petowner</code> module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise we&#8217;ll create a new <code>petowner</code> module, copying the <code>simple</code> module to get us started.
The <code>SimpleObject</code> entity will be copied to <code>PetOwner</code>, and the <code>SimpleObjects</code> domain service will be copied to <code>PetOwners</code>, but we won&#8217;t change the structure.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll also leave the <code>simple</code> module untouched, to use as a reference.</p>
</div>
<div class="sect2">
<h3 id="solution"><a class="anchor" href="#solution"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/3.2.0/02-01-copies-SimpleObject-to-PetOwner
mvn clean install
mvn -pl webapp spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks"><a class="anchor" href="#tasks"></a>Tasks</h3>
<div class="paragraph">
<p>To save time, just checkout the solution tag above and review the git history to see the classes that were copied and renamed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dom.petowner</code> package:</p>
<div class="ulist">
<ul>
<li>
<p><code>SimpleObject</code> &#8594; <code>PetOwner</code> (entity)</p>
<div class="paragraph">
<p>plus related <code>.layout.xml</code>, <code>.png</code> and <code>.columnOrder.txt</code> files</p>
</div>
</li>
<li>
<p><code>SimpleObjects</code> &#8594; <code>PetOwners</code> (domain service)</p>
</li>
<li>
<p><code>SimpleObjectRepository</code> repository service &#8594; <code>PetOwnerRepository</code></p>
</li>
<li>
<p><code>SimpleModule</code> &#8594; <code>PetOwnerModule</code> (module)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>fixture</code> package:</p>
<div class="ulist">
<ul>
<li>
<p><code>PetOwner_persona</code> (fixture script)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>types</code> package</p>
<div class="ulist">
<ul>
<li>
<p><code>Name</code> (meta annotation)</p>
</li>
<li>
<p><code>Notes</code> (meta annotation)</p>
</li>
</ul>
</div>
</li>
<li>
<p>root package of module</p>
<div class="ulist">
<ul>
<li>
<p><code>PetOwnerModule</code> (Spring <code>@Configuration</code>, aka module class)</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <code>PetOwnerModule</code>, the namespace and schema constants were changed:</p>
<div class="listingblock">
<div class="title">PetOwnerModule.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// ...
public class PetOwnerModule implements ModuleWithFixtures {

    public static final String NAMESPACE = "petowner";
    public static final String SCHEMA = "petowner";

    // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>in <code>application.properties</code>, the "petowner" schema was also added to the <a href="../../../refguide/latest/config/sections/causeway.persistence.schema.html#causeway.persistence.schema.auto-create-schemas" class="xref page">causeway.persistence.schema.auto-create-schemas</a> config property:</p>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">causeway.persistence.schema.auto-create-schemas=petowner,simple,...</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Resource classes were also copied.</p>
</div>
<div class="paragraph">
<p>In addition, the new Maven module was defined in the top-level <code>pom.xml</code>, and included in <code>&lt;modules&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Confirm that the code still builds:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn install</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if you run the app confirm that it is still showing just the original <code>simpleapp</code> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn -pl webapp spring-boot:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ll fix this in the next exercise.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-2-2-configure-the-app-to-include-the-petowner-module"><a class="anchor" href="#exercise-2-2-configure-the-app-to-include-the-petowner-module"></a>Ex 2.2: Configure the app to include the <code>petowner</code> module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We have our new <code>petowner</code> module, but we&#8217;re not actually using it; if we run the application we still see the original <code>simpleapp</code> module.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn -pl webapp spring-boot:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this exercise we&#8217;ll update the app to include <code>petowners</code> as well.</p>
</div>
<div class="sect2">
<h3 id="solution-2"><a class="anchor" href="#solution-2"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/3.2.0/02-02-configure-the-app-to-include-petowner
mvn clean install
mvn -pl webapp spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-2"><a class="anchor" href="#tasks-2"></a>Tasks</h3>
<div class="paragraph">
<p>Rename the main class that acts as the entry point for the app (annotated with <code>@@SpringBootApplication</code>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>locate the <code>SimpleApp</code> class and rename to <code>PetClinicApp</code></p>
</li>
<li>
<p>Also update classes that reference this type (in particular, in <code>pom.xml</code>).</p>
<div class="paragraph">
<p>Your IDE can probably do this for you automatically.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>PetClinicApp</code> main class references the <code>AppManifest</code>, a top-level Spring <code>@Configuration</code> which imports all the other classes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Inspect the <code>AppManifest</code> class: most will be <code>CausewayXxxModule</code>s</p>
</li>
<li>
<p>note that it also imports the <code>ApplicationModule</code>, which defines your own modules which make up the application</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We want to update <code>ApplicationModule</code> to reference <code>PetOwnerModule</code>.
We need to change both Maven and then Spring:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in the <code>pom.xml</code> (of the <code>webapp</code> module), add in a dependency to the <code>petowner</code> module:</p>
<div class="listingblock">
<div class="title">webapp/pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;
        &lt;artifactId&gt;simpleapp-jpa-module-petowner&lt;/artifactId&gt;
    &lt;/dependency&gt;
    ...
&lt;dependencies&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You might need to reimport or refresh so that your IDE rebuilds its classpath.</p>
</div>
</li>
<li>
<p>in the <code>ApplicationModule</code>, update the <code>@Import</code> to reference the <code>PetOwnerModule</code>:</p>
<div class="listingblock">
<div class="title">Application.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@Import({
        PetOwnerModule.class,   <i class="conum" data-value="1"></i><b>(1)</b>
        SimpleModule.class,
})
@ComponentScan
public class ApplicationModule {

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>add this import</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Run up the application using the IDE or from maven command line.
Although everything looks good, in fact you won&#8217;t see any change.
That&#8217;s because the simpleapp starter app includes the <a href="../../../security/latest/secman/about.html" class="xref page">SecMan</a> security module, for users, roles and permissions.
We&#8217;ll fix this in the next exercise.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-2-3-add-security-role-for-petowner-module"><a class="anchor" href="#exercise-2-3-add-security-role-for-petowner-module"></a>Ex 2.3: Add security role for the <code>petowner</code> module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise we&#8217;ll add a security role to grant access to our new <code>petowner</code> module, and we&#8217;ll make sure that our "sven" demo user is a member of this role.</p>
</div>
<div class="sect2">
<h3 id="solution-3"><a class="anchor" href="#solution-3"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/3.2.0/02-03-add-security-role-for-petowner
mvn clean install
mvn -pl webapp spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-3"><a class="anchor" href="#tasks-3"></a>Tasks</h3>
<div class="paragraph">
<p>The starter app is configured to use an in-memory database.
The <a href="../../../security/latest/secman/about.html" class="xref page">SecMan</a> roles and permissions are therefore set up each time the applicatoin is bootstrapped, using a fixture scripts.
We&#8217;ll learn more about fixture scripts and their role in testing in a later exercise.
For now, all that&#8217;s necessary to know is that we can use them to set up the roles.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Locate the <code>CustomRolesAndUsers</code> fixture script class</p>
</li>
<li>
<p>within it, copy the existing <code>SimpleModuleSuperuserRole</code> to create a similar <code>PetOwnerModuleSuperuserRole</code>:</p>
<div class="listingblock">
<div class="title">CustomRolesAndUsers.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private static class PetOwnerModuleSuperuserRole
        extends AbstractRoleAndPermissionsFixtureScript {

    public static final String ROLE_NAME = "petowner-superuser";

    public PetOwnerModuleSuperuserRole() {
        super(ROLE_NAME, "Permission to use everything in the 'petowner' module");
    }

    @Override
    protected void execute(ExecutionContext executionContext) {
        newPermissions(
                ApplicationPermissionRule.ALLOW,
                ApplicationPermissionMode.CHANGING,
                Can.of(ApplicationFeatureId.newNamespace("petowner"))
        );
    }
}</code></pre>
</div>
</div>
</li>
<li>
<p>further down in the same class, update the fixture script for the "sven" end-user, and add them into our new role:</p>
<div class="listingblock">
<div class="title">CustomRolesAndUsers.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">private static class SvenUser extends AbstractUserAndRolesFixtureScript {
    ...

    private static class RoleSupplier implements Supplier&lt;Can&lt;String&gt;&gt; {
        @Override
        public Can&lt;String&gt; get() {
            return Can.of(
                    causewayConfiguration.getExtensions().getSecman().getSeed().getRegularUser().getRoleName(), // built-in stuff
                    PetOwnerModuleSuperuserRole.ROLE_NAME,  <i class="conum" data-value="1"></i><b>(1)</b>
                    SimpleModuleSuperuserRole.ROLE_NAME
                    );
        }
        @Inject CausewayConfiguration causewayConfiguration;
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>reference new role.</td>
</tr>
</table>
</div>
</li>
<li>
<p>and in the <code>execute()</code> method at top of the class, remember to include the call to the new fixture script:</p>
<div class="listingblock">
<div class="title">CustomRolesAndUsers.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected void execute(ExecutionContext executionContext) {
    executionContext.executeChildren(this,
            new SimpleModuleSuperuserRole(),
            new PetOwnerModuleSuperuserRole(),      <i class="conum" data-value="1"></i><b>(1)</b>
            new SvenUser());
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Remember to call the new module</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now run the application from the IDE or Maven:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The menubar should now show a new "Other" menu - these are the now-visible actions arising from the <code>PetOwners</code> domain service.</p>
</li>
<li>
<p>Create a new <code>PetOwner</code> using <span class="menuseq"><b class="menu">Other</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Create</b></span>.</p>
<div class="paragraph">
<p>The resultant object will look identical in structure to a <code>SimpleObject</code>, but you can confirm that it is indeed an instance of a <code>PetOwner</code> by hovering over the title or icon and checking the tooltip.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The fact that the <code>PetOwners</code> domain service&#8217;s actions are displayed automatically is an important principle of the <em>naked objects pattern</em> as implemented by Apache Causeway.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-2-4-update-menubar-for-PetOwners"><a class="anchor" href="#exercise-2-4-update-menubar-for-PetOwners"></a>Ex 2.4: Update menubar for PetOwners</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s now update the menu bar so that the actions to create <code>PetOwner</code>s live under an appropriately named menu, "Pet Owners".</p>
</div>
<div class="sect2">
<h3 id="solution-4"><a class="anchor" href="#solution-4"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/3.2.0/02-04-update-menubar-for-petowners
mvn clean install
mvn -pl webapp spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-4"><a class="anchor" href="#tasks-4"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>Locate the <code>menubars.layout.xml</code> file.</p>
<div class="paragraph">
<p>You should find it in <code>src/main/resources</code> (in the <code>webapp</code> module).</p>
</div>
</li>
<li>
<p>Add in the following XML, under the <code>&lt;mb3:primary&gt;</code> tag:</p>
<div class="listingblock">
<div class="title">menubars.layout.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;mb3:primary&gt;
    &lt;mb3:menu&gt;
        &lt;mb3:named&gt;Pet Owners&lt;/mb3:named&gt;
        &lt;mb3:section&gt;
            &lt;mb3:serviceAction objectType="petowner.PetOwners" id="create"/&gt;
            &lt;mb3:serviceAction objectType="petowner.PetOwners" id="findByName"/&gt;
            &lt;mb3:serviceAction objectType="petowner.PetOwners" id="findByNameLike"/&gt;
            &lt;mb3:serviceAction objectType="petowner.PetOwners" id="listAll"/&gt;
        &lt;/mb3:section&gt;
    &lt;/mb3:menu&gt;
...
&lt;/mb3:primary&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>objectType</code> attribute corresponds to the <code>@Named</code> value of the <code>PetOwners</code> domain service (its "logical type name"), while the <code>id</code> attribute matches the method name of each action.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Run the application; the menubar should be updated correctly.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exercise-2-5-setup-demo-PetOwners"><a class="anchor" href="#exercise-2-5-setup-demo-PetOwners"></a>Ex 2.5: Set up demo PetOwners</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="../../../testing/latest/fixtures/about.html#fixture-scripts" class="xref page">Fixture scripts</a> are used for both prototyping and for integration testing, allowing us to quickly create demo data in the H2 in-memory database.</p>
</div>
<div class="paragraph">
<p>The <a href="../../../testing/latest/fixtures/about.html#personas-and-builders" class="xref page">persona</a> pattern lets us define example data in an enum (the "what"), while a companion builder uses domain logic to set up the corresponding domain entities (the "how").</p>
</div>
<div class="paragraph">
<p>In this exercise we&#8217;ll modify the <code>PetOwners_persona</code> (copied from <code>SimpleObjects_persona</code> earlier) to create more realistic data.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll also update the existing top-level <code>DomainAppDemo</code> fixture script, so that it will recreate our new <code>PetOwner</code>s.
This will allow us to quickly create a whole set of <code>PetOwner</code> objects from the "Prototyping" menu.</p>
</div>
<div class="sect2">
<h3 id="solution-5"><a class="anchor" href="#solution-5"></a>Solution</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout tags/3.2.0/02-05-setup-demo-petowners
mvn clean install
mvn -pl webapp spring-boot:run</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tasks-5"><a class="anchor" href="#tasks-5"></a>Tasks</h3>
<div class="ulist">
<ul>
<li>
<p>locate the <code>PetOwners_persona</code> class, and refactor the enum constants and values to create 10 realistic pet owner names</p>
<div class="listingblock">
<div class="title">PetOwners_persona.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RequiredArgsConstructor
public enum PetOwner_persona
implements Persona&lt;PetOwner, PetOwner_persona.Builder&gt; {

    JAMAL("Jamal Washington", "jamal.pdf", "J"),
    CAMILA("Camila González", "camila.pdf", null),
    ARJUN("Arjun Patel", "arjun.pdf", null),
    NIA("Nia Robinson", "nia.pdf", null),
    OLIVIA("Olivia Hartman", "olivia.pdf", null),
    LEILA("Leila Hassan", "leila.pdf", null),
    MATT("Matthew Miller", "matt.pdf", "Matt"),
    BENJAMIN("Benjamin Thatcher", "benjamin.pdf", "Ben"),
    JESSICA("Jessica Raynor", "jessica.pdf", "Jess"),
    DANIEL("Daniel Keating", "daniel.pdf", "Dan");

    ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>create new <code>.pdf</code> files each pet owner, to store a "veterinary clinic service agreement" for each.</p>
<div class="paragraph">
<p>The solution already provides these <code>.pdf</code> files, so you might want to borrow them.</p>
</div>
</li>
<li>
<p>locate the <code>DomainAppDemo</code> class and update:</p>
<div class="listingblock">
<div class="title">DomainAppDemo.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected void execute(final ExecutionContext ec) {
    ec.executeChildren(this, moduleWithFixturesService.getTeardownFixture());
    ec.executeChild(this, new PetOwner_persona.PersistAll());   <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>change to set up <code>PetOwner</code>s (rather than <code>SimpleObject</code>s, as before)</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Test that you can quickly create a whole set of <code>PetOwner</code> objects
from the "Prototyping" menu:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><span class="menuseq"><b class="menu">Prototyping</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Run Fixture Script</b></span> and select "Domain App Demo", or</p>
</li>
<li>
<p><span class="menuseq"><b class="menu">Prototyping</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Recreate Objects and Return First</b></span>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2024 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Causeway, and the Apache Causeway project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 4.0.0-SNAPSHOT.20251015-1619-ac4980e3</p>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="../../../_/js/vendor/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'causeway-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
