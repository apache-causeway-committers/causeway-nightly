<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Upgrading to DataNucleus 4 :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Apache Isis</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/quick-start.html#starter-apps">Starter Apps</a>
            <a class="navbar-item" href="/helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="/simpleapp/about.html">Simple App</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/guides.html#user-guides">User Guides</a>
            <a class="navbar-item" href="/ug/about.html">Fundamentals & Beyond</a>
            <a class="navbar-item" href="/demoapp/about.html">Demo App</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/guides.html#reference-guides">Reference Guides</a>
            <a class="navbar-item" href="/rg/ant/about.html">Annotations</a>
            <a class="navbar-item" href="/rg/svc/about.html">Domain Services</a>
            <a class="navbar-item" href="/rg/cfg/about.html">Core Config Properties</a>
            <a class="navbar-item" href="/rg/cms/about.html">Classes, Methods &amp; Schema</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/guides.html#testing-prototyping">Testing &amp; Prototyping</a>
            <a class="navbar-item" href="/testing/about.html">Unit & Integ Testing</a>
            <a class="navbar-item" href="/ext-fixtures/about.html">Fixtures (extension)</a>
            <a class="navbar-item" href="/ext-specsupport/about.html">BDD (extension)</a>
            <!--
            <a class="navbar-item" href="/rg/mvn/about.html">Maven plugin</a>
            -->
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/components.html#wicket-viewer">Wicket Viewer</a>
            <a class="navbar-item" href="/vw/about.html">User Guide</a>
            <a class="navbar-item" href="/ext-viewer-wicket-excel/about.html">Excel download (extension)</a>
            <a class="navbar-item" href="/ext-asciidoc/about.html">Asciidoc value type (extension)</a>
            <a class="navbar-item" href="/ext-markdown/about.html">Markdown value type (extension)</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/components.html#wicket-viewer">Restful Objects Viewer</a>
            <a class="navbar-item" href="/vro/about.html">User Guide</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/components.html#datanucleus-object-store">DataNucleus Object Store</a>
            <a class="navbar-item" href="/odn/about.html">User Guide</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/components.html#security">Security</a>
            <a class="navbar-item" href="/security/about.html">User Guide</a>
            <a class="navbar-item" href="/ext-secman/about.html">SecMan (extension)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/support.html#resources">Resources</a>
            <a class="navbar-item" href="/toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="/mavendeps/about.html">Maven mixins</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/support.html#help">Mailing Lists</a>
            <a class="navbar-item" href="/toc/mailing-list/how-to-subscribe.html">How to subscribe</a>
            <a class="navbar-item" href="https://lists.apache.org/list.html?users@isis.apache.org">Archives (ASF Pony Mail)</a>
            <a class="navbar-item" href="http://isis.markmail.org/search/?q=">Archives (Markmail)</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/support.html#releases">Releases</a>
            <a class="navbar-item" href="/toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="/relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="/mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item">Other Resources</span>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">ASF JIRA</a>
            <a class="navbar-item" href="https://cwiki.apache.org/confluence/display/ISIS/Index">ASF Wiki</a>
            <a class="navbar-item" href="https://fisheye.apache.org/browse/~br=master/isis-git/">ASF Fisheye</a>
            <a class="navbar-item" href="http://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Internal</a>
          <div class="navbar-dropdown">
            <a class="navbar-item navbar-heading" href="/toc/internal.html#committers">Committers</a>
            <a class="navbar-item" href="/toc/comguide/about.html">Committers' Guide</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item navbar-heading" href="/toc/internal.html#implementation">Implementation</a>
            <a class="navbar-item" href="/archdesign/about.html">Architecture & Design</a>
            <a class="navbar-item" href="/fis/about.html">Framework Internal Services</a>
            <a class="navbar-item" href="/smoketests/about.html">SmokeTest App</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">@ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="/toc/about.html">
          <span class="icon">
            <img src="/_/img/isis-logo-48x48.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="mignotes" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Migration Notes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../about.html">Migration Notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Migration Notes</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../odn/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - Hello World</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../helloworld/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Example App - SimpleApp</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../simpleapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Fundamentals & Beyond</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Guides - Reference Guides</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Maven Dependencies</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mavendeps/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Maven Mixins</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mixins/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Migration Notes</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../relnotes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST Client</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">SecMan</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../secman/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Table of Contents</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../toc/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Viewer Wicket Excel (Excel Download Extensions)</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../toc/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Migration Notes</a></li>
    <li><a href="mn-1.8.0-to-1.9.0_upgrading-to-dn4.html">Upgrading to DataNucleus 4</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/antora/components/mignotes/modules/ROOT/pages/mn-1.8.0-to-1.9.0/mn-1.8.0-to-1.9.0_upgrading-to-dn4.adoc">Edit this Page</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Upgrading to DataNucleus 4</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis 1.9.0 updates to DataNucleus 4.0.0, which requires some changes (simplifications) to the Maven configuration.</p>
</div>
<div class="paragraph">
<p>If you starting a new app then you can start from the <a href="https://isis.apache.org/versions/1.9.0/arch/simpleapp/about.html">SimpleApp archetype</a>; its Maven configuration has been updated.</p>
</div>
<div class="paragraph">
<p>If you have an existing Apache Isis app that you want to upgrade, then you&#8217;ll need to make some changes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="in-the-parent-pom-xml"><a class="anchor" href="#in-the-parent-pom-xml"></a>In the parent <code>pom.xml</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>under the <code>project/properties</code>, remove:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- must be consistent with the versions defined by the JDO Objectstore --&gt;
&lt;datanucleus-accessplatform-jdo-rdbms.version&gt;3.3.6&lt;/datanucleus-accessplatform-jdo-rdbms.version&gt;
&lt;datanucleus-maven-plugin.version&gt;3.3.2&lt;/datanucleus-maven-plugin.version&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="in-dompom-xml"><a class="anchor" href="#in-dompom-xml"></a>In <code>dom/pom.xml</code>,</h2>
<div class="sectionbody">
<div class="paragraph">
<p>under <code>build/plugins</code>, remove:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
    &lt;artifactId&gt;datanucleus-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${datanucleus-maven-plugin.version}&lt;/version&gt;
    &lt;configuration&gt;
        &lt;fork&gt;false&lt;/fork&gt;
        &lt;log4jConfiguration&gt;${basedir}/log4j.properties&lt;/log4jConfiguration&gt;
        &lt;verbose&gt;true&lt;/verbose&gt;
        &lt;props&gt;${basedir}/datanucleus.properties&lt;/props&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;compile&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;enhance&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and (if you have it) under <code>build/pluginManagement/plugins</code>, remove:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.--&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;
    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;configuration&gt;
        &lt;lifecycleMappingMetadata&gt;
            &lt;pluginExecutions&gt;
                &lt;pluginExecution&gt;
                    &lt;pluginExecutionFilter&gt;
                        &lt;groupId&gt;
                            org.datanucleus
                        &lt;/groupId&gt;
                        &lt;artifactId&gt;
                            datanucleus-maven-plugin
                        &lt;/artifactId&gt;
                        &lt;versionRange&gt;
                            [3.2.0-release,)
                        &lt;/versionRange&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;enhance&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/pluginExecutionFilter&gt;
                    &lt;action&gt;
                        &lt;ignore&gt;&lt;/ignore&gt;
                    &lt;/action&gt;
                &lt;/pluginExecution&gt;
            &lt;/pluginExecutions&gt;
        &lt;/lifecycleMappingMetadata&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and instead, under <code>&lt;profiles&gt;</code> add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;profile&gt;
    &lt;id&gt;enhance&lt;/id&gt;
    &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
    &lt;/activation&gt;
    &lt;properties&gt;
        &lt;datanucleus-maven-plugin.version&gt;4.0.1&lt;/datanucleus-maven-plugin.version&gt;
    &lt;/properties&gt;
    &lt;build&gt;
        &lt;pluginManagement&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.--&gt;
                    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;
                    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;
                    &lt;version&gt;1.0.0&lt;/version&gt;
                    &lt;configuration&gt;
                        &lt;lifecycleMappingMetadata&gt;
                            &lt;pluginExecutions&gt;
                                &lt;pluginExecution&gt;
                                    &lt;pluginExecutionFilter&gt;
                                        &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
                                        &lt;artifactId&gt;datanucleus-maven-plugin&lt;/artifactId&gt;
                                        &lt;versionRange&gt;[${datanucleus-maven-plugin.version},)&lt;/versionRange&gt;
                                        &lt;goals&gt;
                                            &lt;goal&gt;enhance&lt;/goal&gt;
                                        &lt;/goals&gt;
                                    &lt;/pluginExecutionFilter&gt;
                                    &lt;action&gt;
                                        &lt;ignore&gt;&lt;/ignore&gt;
                                    &lt;/action&gt;
                                &lt;/pluginExecution&gt;
                            &lt;/pluginExecutions&gt;
                        &lt;/lifecycleMappingMetadata&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/pluginManagement&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
                &lt;artifactId&gt;datanucleus-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${datanucleus-maven-plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;fork&gt;false&lt;/fork&gt;
                    &lt;log4jConfiguration&gt;${basedir}/log4j.properties&lt;/log4jConfiguration&gt;
                    &lt;verbose&gt;true&lt;/verbose&gt;
                    &lt;props&gt;${basedir}/datanucleus.properties&lt;/props&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;phase&gt;process-classes&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;enhance&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
            &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
            &lt;artifactId&gt;datanucleus-jodatime&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
            &lt;artifactId&gt;datanucleus-api-jdo&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/profile&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t use Eclipse then you can omit the <code>org.eclipse.m2e</code> plugin in <code>&lt;pluginManagement&gt;</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="in-the-webapps-persistor_datanucleus-properties"><a class="anchor" href="#in-the-webapps-persistor_datanucleus-properties"></a>In the webapp&#8217;s <code>persistor_datanucleus.properties</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>in <code>src/main/webapp/WEB-INF/</code>,</p>
</div>
<div class="paragraph">
<p>change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.autoCreateSchema=true
isis.persistor.datanucleus.impl.datanucleus.validateTables=true
isis.persistor.datanucleus.impl.datanucleus.validateConstraints=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.schema.autoCreateAll=true
isis.persistor.datanucleus.impl.datanucleus.schema.validateTables=true
isis.persistor.datanucleus.impl.datanucleus.schema.validateConstraints=true</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Previously Apache Isis would automatically add the auto-create property if they were absent from <code>isis.properties</code>, set to "true".
The framework does still add the property, but now sets it to "false".
This is to prevent the framework from unexpectedly modifying a target database if the application was misconfigured and the auto-create property not defined.</p>
</div>
<div class="paragraph">
<p>The framework will also automatically add the auto-validate property.
Previously this was set to "true" and it is <em>still</em> set to "true"; there is no risk of the target database being modified as a result of this auto-validate property being defaulted by the framework.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Setting <code>autoCreateAll</code> to <code>true</code> is important to do when running with an in-memory database.
If you don&#8217;t do this then the tables will be created lazily anyway by DataNucleus, but in some circumstances this can lead to deadlocks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.identifier.case=PreserveCase</code></pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.identifier.case=MixedCase</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="run-mvn-clean"><a class="anchor" href="#run-mvn-clean"></a>Run <code>mvn clean</code> !</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Be careful to ensure that your classes are only enhanced by the DataNucleus 4 enhancer, and <em>not</em> by the DataNucleus 3 enhancer.
Or even, be careful that they are not doubly enhanced.
One of our committers had this situation and it led to all sorts of bizarre issues.
The solution, it turned out, was actually just to do a full <code>mvn clean</code>.</p>
</div>
<div class="paragraph">
<p>If you are struggling and suspect you may have misconfigured the enhancer plugin, then you can decompile the bytecode (eg in IntelliJ) and take a look:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A class enhanced with DataNucleus 3 would implement <code>javax.jdo.spi.PersistenceCapable</code> interface</p>
</li>
<li>
<p>A class enhanced with DataNucleus 4 will implement <code>org.datanucleus.enhancer.Persistable</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</article>

<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">On this page</h3>
    <div id="article-toc"></div>
</aside>
</main>

</div>
<footer class="footer">
  <p>Revision: </p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/tocbot.js"></script>

<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h2, h3, h4, h5',
        collapseDepth: 2,
        positionFixedSelector: '#article-toc',
        scrollSmooth: true,
        hasInnerContainers: true
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>
  </body>
</html>
