<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Publishing the Docs :: Apache Isis</title>
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../.." title="Apache Isis">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../docs/2.0.0-M5/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../docs/2.0.0-M5/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../docs/2.0.0-M5/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../docs/2.0.0-M5/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../docs/2.0.0-M5/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../setupguide/2.0.0-M5/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/2.0.0-M5/about.html">User Guide</a>
            <a class="navbar-item" href="../../refguide/2.0.0-M5/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../testing/2.0.0-M5/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../subdomains/2.0.0-M5/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../valuetypes/2.0.0-M5/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../mappings/2.0.0-M5/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../incubator/2.0.0-M5/about.html">Incubator</a>
            <a class="navbar-item" href="../../legacy/2.0.0-M5/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/2.0.0-M5/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/2.0.0-M5/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/2.0.0-M5/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../pjdo/2.0.0-M5/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../extensions/2.0.0-M5/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../docs/2.0.0-M5/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../docs/2.0.0-M5/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../docs/2.0.0-M5/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/2.0.0-M5/about.html">Release Notes</a>
            <a class="navbar-item" href="../../docs/2.0.0-M5/archive/1-x.html">Archive (1.x)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../conguide/2.0.0-M5/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../comguide/2.0.0-M5/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/2.0.0-M5/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../docs/2.0.0-M5/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="comguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous disabled" rel="prev" href="" title=""><span></span></a>
  <a class="page-next disabled" rel="next"
     href="" title=""><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title=""><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">Committers&#x27; Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="merging-a-pull-request.html">Merging a Pull Request</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="applying-patches.html">Applying Patches</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cutting-a-release.html">Cutting a Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="verifying-releases.html">Verifying Releases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="post-release-successful.html">Post Release (Successful)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="post-release-unsuccessful.html">Post Release (Unsuccessful)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="release-process-for-interim-releases.html">Interim Releases</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="key-generation.html">Key Generation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="algolia-search.html">Appendix: Algolia Search</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="release-process-prereqs.html">Appendix: Release Process Prereqs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="policies.html">Appendix: Policies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pmc-notes.html">Appendix: PMC Notes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Committers&#x27; Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mappings/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../legacy/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../subdomains/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">System Overview</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../system/latest/system-overview.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">Committers' Guide</a></li>
    <li><a href="antora-publish-procedure.html">Publishing the Docs</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/master/antora/components/comguide/modules/ROOT/pages/antora-publish-procedure.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Publishing the Docs</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
TODO: v2 - not yet updated.
There is relevant material in <a href="post-release-successful.html" class="page">Post Release (Successful)</a>, specifically:
 <a href="post-release-successful.html#generate-website" class="page">Generate website</a> and
 <a href="post-release-successful.html#publish-website" class="page">Publish website</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Apache Isis' documentation (meaning the website and the users' guide, the reference guide and this contributors' guide) is written using <a href="https://asciidoctor.org/">Asciidoctor</a> syntax, and organized to be published as an <a href="https://antora.org">Antora</a> website.</p>
</div>
<div class="paragraph">
<p>The website and guides are created by running build tools (documented below) which create the HTML version of the site and guides.
You can therefore easily check the documentation before raising a pull request (as a contributor) or publishing the site (if a committer).</p>
</div>
<div class="paragraph">
<p>For details of authoring/updating the documents and website, see the <a href="../../conguide/latest/documentation/about.html" class="page">Contributors' Guide</a>.</p>
</div>
<div class="paragraph">
<p>Publishing is performed by copying the generated HTML to a different git repository (<a href="https://github.com/apache/isis-site.git">isis-site</a>).
This is synced by ASF infrastructure over to <a href="http://isis.apache.org">isis.apache.org</a>.
This can only be done by Apache Isis committers, and is discussed below.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="one-time-setup"><a class="anchor" href="#one-time-setup"></a>One-time setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The generated site is published by copying into the <code>content/</code> directory of the <a href="https://github.com/apache/isis-site.git">isis-site</a> git repo.
You therefore need to check this out this repo.</p>
</div>
<div class="paragraph">
<p>The procedure assumes that two git repos (for <a href="https://github.com/apache/isis">isis</a> itself on github, and for isis-site) are checked out into the same parent directory, eg:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>/GITHUB/
  apache/
    isis/                       <i class="conum" data-value="1"></i><b>(1)</b>
      adocs
        documentation/
          README.adoc
          ...
    isis-site/                  <i class="conum" data-value="2"></i><b>(2)</b>
      content/                  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>checkout of isis.git</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>checkout of isis-site.git</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the published website</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One oddity; ASF&#8217;s script to upload the documentation to the web server checks out from the 'asf-site' branch, NOT from the 'master' branch.
Therefore, in the <code>isis.git</code> repo site:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git checkout asf-site</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preview"><a class="anchor" href="#preview"></a>Preview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To preview changes (ignoring PDFs), run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sh preview-html.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will update the documentation and start a (Python) webserver so that the documents can be viewed.</p>
</div>
<div class="paragraph">
<p>If you want to also view the PDFs, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sh preview-pdf.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>There&#8217;s generally little point in doing this, however.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publishing-full-build"><a class="anchor" href="#publishing-full-build"></a>Publishing (full build)</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
TODO: v2 - not yet updated.
Need to figure out how to merge the v1 docs (as an archive) with Antora.
Also, need to use Antora versioning rather than just 'master'
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>content</code> directory for the published website contains not only the "current version" of the docs, but also has an archive of older versions of the document from earlier releases:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>/GITHUB/
  apache/
    isis-site/
      content/                  <i class="conum" data-value="1"></i><b>(1)</b>
        index.html              <i class="conum" data-value="2"></i><b>(2)</b>
        *                       <i class="conum" data-value="3"></i><b>(3)</b>
        versions/
          current/              <i class="conum" data-value="4"></i><b>(4)</b>
          SNAPSHOT/             <i class="conum" data-value="5"></i><b>(5)</b>
          ...                   <i class="conum" data-value="6"></i><b>(6)</b>
          latest/               <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the published website</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>home page.
This has a drop-down to access older versions of the documentation, but most links are through to the "current version"</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>documentation for the current release version</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>also holds documentation for the current release version</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>documentation for the next snapshot version, ie work-in-progress</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>other versions, by version number (eg <code>1.16.2</code>, <code>1.16.1</code>, etc)</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>not checked into git, this is a working directory that contains the results of the latest publication build.
This is an implementation detail actually, so this directory need not be considered further.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The earlier versions of the documentation are (obviously) not recreated when the documentation is published, only the current version is updated.</p>
</div>
<div class="paragraph">
<p>To publish the current version of the documents, switch to the  <code>adocs/documentation</code> directory of the main <code>isis-git.repo</code>.
Then run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sh publish.sh "ISIS-nnnn: a custom commit message"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This does the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>deletes everything under <code>content</code> (except <code>content/versions</code>)</p>
</li>
<li>
<p>generates documentation and copies to <code>content/versions/SNAPSHOT</code></p>
<div class="paragraph">
<p>Including fixing up line endings, standardizing on unix-style LFs.</p>
</div>
</li>
<li>
<p>copies over current home page (<code>index.html</code>)</p>
</li>
<li>
<p>reinstates <code>content/*</code> with the contents of <code>content/versions/current</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In other words, the effect of running <code>publish.sh</code> is in essence to overwrite <code>content/versions/SNAPSHOT</code> and to overwrite <code>index.html</code>, but leave everything else as it is.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The version on the header of each generated document is hard-coded in the <code>adocs/template/document.html.erb</code> file.</p>
</div>
<div class="paragraph">
<p>This should therefore be updated whenever working on a new release.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="new-release"><a class="anchor" href="#new-release"></a>New release</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
TODO: v2 - not yet updated.
Need to figure out how to merge the v1 docs (as an archive) with Antora.
Also, need to use Antora versioning rather than just 'master'
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a new release is published, we therefore need to do a little extra work:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>run <code>publish.sh</code> a first time</p>
<div class="paragraph">
<p>This will update <code>content/versions/SNAPSHOT</code></p>
</div>
</li>
<li>
<p>delete <code>content/versions/current</code></p>
</li>
<li>
<p>rename <code>content/versions/SNAPSHOT</code> to <code>content/versions/current</code></p>
</li>
<li>
<p>run <code>publish.sh</code> a second time.</p>
<div class="paragraph">
<p>This has the effect of "promoting" <code>content/versions/current</code> to <code>content/*</code></p>
</div>
</li>
<li>
<p>(optionally) also copy <code>content/versions/current</code> to <code>content/versions/N.N.N</code></p>
<div class="paragraph">
<p>where <code>N.N.N</code> is the release number</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ensure in doing this that the dropdown for the home page correctly references the versions.</p>
</div>
<div class="paragraph">
<p>When ready, then stage, commit and push the changes (in the <code>isis-site.git</code> directory, of course):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git commit -am "ISIS-nnnn: updating docs"
git push</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2020 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M4.20201204-0422-342a7a85</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
