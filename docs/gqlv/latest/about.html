<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GraphQL API :: causeway</title>
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
<link rel="home" href="../.." title="causeway">
  <link rel="next" href="setup-and-configuration.html" title="Setup and Configuration">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/causeway-logo-no-words-65x48.png"></img>
          </span>
        <span class="navbar-title">causeway</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../docs/latest/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../docs/latest/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Learning &amp; Tutorials</span>
            <a class="navbar-item" href="../../docs/latest/reference/about.html">Reference App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../docs/latest/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../docs/latest/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/latest/about.html">User Guide</a>
            <a class="navbar-item" href="../../refguide/latest/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../testing/latest/about.html">Testing Guide</a>
            <a class="navbar-item" href="../../security/latest/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">For use in apps</span>
            <a class="navbar-item" href="../../valuetypes/latest/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../setupguide/latest/about.html">Setup Guide</a>
            <a class="navbar-item" href="../../conguide/latest/about.html">Contributors' Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/latest/bypass/about.html">Bypass</a>
            <a class="navbar-item" href="../../security/latest/simple/about.html">Simple</a>
            <a class="navbar-item" href="../../security/latest/shiro/about.html">Shiro</a>
            <a class="navbar-item" href="../../security/latest/spring/about.html">Spring</a>
            <a class="navbar-item" href="../../security/latest/keycloak/about.html">Keycloak</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/latest/about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../gqlv/latest/about.html">GraphQL API</a>
            <a class="navbar-item" href="../../vro/latest/about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../pjpa/latest/about.html">JPA (EclipseLink)</a>
            <a class="navbar-item" href="../../pjdo/latest/about.html">JDO (DataNucleus)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Extensions</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/latest/commandlog/about.html">Command Log</a>
            <a class="navbar-item" href="../../userguide/latest/docgen/about.html">Doc Gen</a>
            <a class="navbar-item" href="../../userguide/latest/executionlog/about.html">Execution Log</a>
            <a class="navbar-item" href="../../userguide/latest/executionoutbox/about.html">Execution Outbox</a>
            <a class="navbar-item" href="../../userguide/latest/executionrepublisher/about.html">Execution Republisher</a>
            <a class="navbar-item" href="../../userguide/latest/excel/about.html">Excel</a>
            <a class="navbar-item" href="../../userguide/latest/flyway/about.html">Flyway</a>
            <a class="navbar-item" href="../../userguide/latest/layoutloaders/about.html">Layout Loaders</a>
            <a class="navbar-item" href="../../userguide/latest/titlecache/about.html">Title Cache</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/latest/secman/about.html">Secman</a>
            <a class="navbar-item" href="../../security/latest/audittrail/about.html">Audit Trail</a>
            <a class="navbar-item" href="../../security/latest/spring-oauth2/about.html">Spring OAuth2 Integration</a>
            <a class="navbar-item" href="../../security/latest/shiro-realm-ldap/about.html">LDAP Realm for Shiro</a>
            <a class="navbar-item" href="../../security/latest/sessionlog/about.html">Session Log</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Web UI (Wicket)</span>
            <a class="navbar-item" href="../../vw/latest/fullcalendar/about.html">Full Calendar</a>
            <a class="navbar-item" href="../../vw/latest/pdfjs/about.html">pdf.js</a>
            <a class="navbar-item" href="../../vw/latest/sse/about.html">Server Side Events</a>
            <a class="navbar-item" href="../../vw/latest/tabular/about.html">Tabular Download</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">REST API (Restful Objects)</span>
            <a class="navbar-item" href="../../vro/latest/cors/about.html">CORS</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../docs/latest/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../docs/latest/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/CAUSEWAY">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/causeway">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../docs/latest/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/latest/about.html">Release Notes</a>
            <hr class="navbar-divider"/>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Framework</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Process</span>
            <a class="navbar-item" href="../../comguide/latest/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../tooling/latest/about.html">Tooling</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Automated Analysis</span>
            <a class="navbar-item" href="https://sonarcloud.io/dashboard?id=apache_causeway">SonarCloud.io</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Interim Builds</span>
            <a class="navbar-item" href="../../comguide/latest/nightly-builds.html">Nightly builds</a>
            <a class="navbar-item" href="../../comguide/latest/weekly-builds.html">Weekly builds</a>
            <a class="navbar-item" href="https://apache-causeway-committers.github.io/causeway-nightly">Website Preview (not ASF hosted)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../core/latest/about.html">Internal Design Docs</a>
            <a class="navbar-item" href="../../regressiontests/latest/about.html">Regression Tests</a>
            <a class="navbar-item" href="../../incubator/latest/about.html">Incubator</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Thanks</span>
            <a class="navbar-item" href="../../more-thanks/latest/more-thanks.html">Acknowledgements</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">License</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Causeway.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../docs/latest/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="gqlv" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-search hide-for-print">
  <input id="algolia-search-input" placeholder="Search"></span>
</div>
<div class="nav-panel-pagination">
  <a class="page-previous disabled" rel="prev" href="" title=""><span></span></a>
  <a class="page-next" rel="next"
     href="setup-and-configuration.html" title="Setup and Configuration"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title=""><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">GraphQL Viewer</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="setup-and-configuration.html">Setup and Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testsupport.html">Test Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="spi-services.html">SPI Services</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="i18n.html">i18n Concerns</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">GraphQL Viewer</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version">
          <a href="../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version">
          <a href="../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions</span>
      <ul class="versions">
        <li class="version">
          <a href="../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">GraphQL Viewer</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version">
          <a href="../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version">
          <a href="../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">QueryDSL</span>
      <ul class="versions">
        <li class="version">
          <a href="../../querydsl/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">regressiontests</span>
      <ul class="versions">
        <li class="version">
          <a href="../../regressiontests/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version">
          <a href="../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version">
          <a href="../../tutorials/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">GraphQL Viewer</a></li>
    <li><a href="about.html">GraphQL API</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/causeway/edit/main/viewers/graphql/adoc/modules/ROOT/pages/about.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">GraphQL API</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The GraphQL viewer automatically exposes an Apache Causeway domain object model as a <a href="https://graphql.org/">GraphQL</a> API.
The viewer iterates over the domain services and domain objects, with their actions, properties and collections represented as fields within the graph.
Actions that take parameters are mapped to fields with arguments.</p>
</div>
<div class="paragraph">
<p>The GraphQL viewer is implemented using <a href="https://spring.io/projects/spring-graphql">Spring GraphQL</a> project, which in turn is built on top of <a href="https://www.graphql-java.com/">GraphQL Java</a>.
This also means that it automatically provides the <a href="https://github.com/graphql/graphiql">GraphiQL</a> interactive query tool.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="concepts"><a class="anchor" href="#concepts"></a>Concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="api-variants"><a class="anchor" href="#api-variants"></a>API Variants</h3>
<div class="paragraph">
<p>The GraphQL viewer supports 3 different API variants, controlled by the <a href="../../refguide/latest/config/sections/causeway.viewer.graphql.html#causeway.viewer.graphql.api-variant" class="xref page">causeway.viewer.graphql.api-variant</a> configuration property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>QUERY_ONLY</code></p>
<div class="paragraph">
<p>Exposes only a Query API, of properties, collections and safe (query-onl) actions.
Any actions that mutate the state of the system (in other words are idempotent or non-idempotent are excluded from the API, as is the ability to set properties.</p>
</div>
</li>
<li>
<p><code>QUERY_AND_MUTATIONS</code></p>
<div class="paragraph">
<p>Exposes an API with Query for query/safe separate queries and field access, with mutating (idempotent and non-idempotent) actions and property setters instead surfaced as Mutations, as per the <a href="https://spec.graphql.org/June2018/#sec-Language.Operations">GraphQL spec</a>.</p>
</div>
</li>
<li>
<p><code>QUERY_WITH_MUTATIONS_NON_SPEC_COMPLIANT</code></p>
<div class="paragraph">
<p>This variant exposes an API with both Query and Mutations, but relaxes the constraints for the Query API by also including idempotent and non-idempotent actions and property setters.
The actions <em>are</em> also available through as Mutations (same as with <code>QUERY_AND_MUTATIONS</code> API variant).</p>
</div>
<div class="paragraph">
<p>Examples of using this API variant are provided in the <a href="#queries-that-are-also-mutations">Queries that are also Mutations</a> section, below.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Be aware that the resultant API is not compliant with the rules of the
GraphQL spec; in particular, it violates <a href="https://spec.graphql.org/June2018/#sec-Language.Operations">2.3 Operations</a> which states: "a query [is] a read‐only fetch";
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In summary, the API variant therefore relates to whether and how mutating (non-safe) actions are represented.</p>
</div>
</div>
<div class="sect2">
<h3 id="rich-vs-simple-schemas"><a class="anchor" href="#rich-vs-simple-schemas"></a>Rich vs Simple Schemas</h3>
<div class="paragraph">
<p>The viewer can represent the domain model as either a "rich" GraphQL schema, or a "simple" GraphQL schema; or indeed both can be supported ath the same time.</p>
</div>
<div class="paragraph">
<p>The <strong>rich schema</strong> represents all the behaviour and structure of the Causeway domain model:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hidden, disabled, validate</p>
</li>
<li>
<p>choices, autoComplete, defaults</p>
</li>
<li>
<p>obtain ("get") the value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In other words, it exposes not only the core data/behaviour but also of the supporting methods.</p>
</div>
<div class="paragraph">
<p>The <strong>simple schema</strong> represents just the core data/behaviour, but does not include the supporting method facets.</p>
</div>
<div class="paragraph">
<p>With the rich schema, the application logic and business domain logic remains the concern of the server, with the calling client app responsible only for presentation logic.
In fact, the rich schemas is so rich that one could in theory implement a fully generic UI client.</p>
</div>
<div class="paragraph">
<p>With the simple schema, although the main business domain logic remains the concern of the server, the application logic moves to the client.
For example, if there is a drop-down list box, the client needs to know how to obtain the list of choices.
But the benefit of the simple schema is, well, that it is simpler; in other words more "intuitive" and less "verbose".</p>
</div>
<div class="paragraph">
<p>The <a href="../../refguide/latest/config/sections/causeway.viewer.graphql.html#causeway.viewer.graphql.schema-style" class="xref page">causeway.viewer.graphql.schema-style</a> configuration property specifies which schema (or both) is supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SIMPLE_ONLY</code> - exposes only the "simple" schema</p>
</li>
<li>
<p><code>RICH_ONLY</code> - exposes only the "rich" schema</p>
</li>
<li>
<p><code>SIMPLE_AND_RICH</code> - exposes both the simple and rich schemas, the top-level query for each residing under either the <code>simple</code> or <code>rich</code> field respectively.</p>
<div class="paragraph">
<p>For the top-level mutation, the "simple" schema is used.</p>
</div>
</li>
<li>
<p><code>RICH_AND_SIMPLE</code> - also exposes both the simple and rich schemas, the top-level query for each residing under either the <code>simple</code> or <code>rich</code> field respectively.</p>
<div class="paragraph">
<p>For the top-level mutation, the "rich" schema is used.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If only the simple or the rich schema is enabled (<code>SIMPLE_ONLY</code> or <code>RICH_ONLY</code>), then the set of types defined by each of these schemes is available at the root query.
If both schemas are enabled (<code>SIMPLE_AND_RICH</code> or <code>RICH_AND_SIMPLE</code>), the these each reside under a top-level field, by default "simple" or "rich".
The name of these fields can be configured to something else if required using <a href="../../refguide/latest/config/sections/causeway.viewer.graphql.html#causeway.viewer.graphql.top-level-field-name-for-simple" class="xref page">causeway.viewer.graphql.top-level-field-name-for-simple</a> and <a href="../../refguide/latest/config/sections/causeway.viewer.graphql.html#causeway.viewer.graphql.top-level-field-name-for-rich" class="xref page">causeway.viewer.graphql.top-level-field-name-for-rich</a> configuration properties.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example"><a class="anchor" href="#example"></a>Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>How the viewer works is probably most easily explained by an example.
The diagram below shows a simple domain (in fact, this is the domain used by the GraphQL viewer&#8217;s own tests):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/test-domain.drawio.png" alt="test domain.drawio" width="600">
</div>
</div>
<div class="paragraph">
<p>GraphQL distinguishes queries and mutations, so let&#8217;s look at each.
We&#8217;ll assume here that the <code>SIMPLE_AND_RICH</code> schema style is in use.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
GraphQL also defines the notion of subscriptions; the GraphQL viewer currently has no support for these.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="queries"><a class="anchor" href="#queries"></a>Queries</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Queries most often start at a domain service.
In the example above, these would be <code>Departments</code>, <code>DeptHeadRepository</code>, or <code>Staff</code>.</p>
</div>
<div class="paragraph">
<p>To list all <code>Department</code>s, we can submit this query using either the "rich" schema or "simple" schema:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {                          <i class="conum" data-value="1"></i><b>(1)</b>
    university_dept_Departments { <i class="conum" data-value="2"></i><b>(2)</b>
      findAllDepartments {        <i class="conum" data-value="3"></i><b>(3)</b>
        invoke {                  <i class="conum" data-value="4"></i><b>(4)</b>
          results {               <i class="conum" data-value="5"></i><b>(5)</b>
            name {
              get                 <i class="conum" data-value="6"></i><b>(6)</b>
            }
            staffMembers {
              get {               <i class="conum" data-value="7"></i><b>(7)</b>
                name {
                  get             <i class="conum" data-value="8"></i><b>(8)</b>
                }
                _meta {
                  id              <i class="conum" data-value="9"></i><b>(9)</b>
                  logicalTypeName <i class="conum" data-value="9"></i><b>(9)</b>
                }
              }
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  simple {                        <i class="conum" data-value="1"></i><b>(1)</b>
    university_dept_Departments { <i class="conum" data-value="2"></i><b>(2)</b>
      findAllDepartments {        <i class="conum" data-value="3"></i><b>(3)</b><i class="conum" data-value="4"></i><b>(4)</b><i class="conum" data-value="5"></i><b>(5)</b>
        name                      <i class="conum" data-value="6"></i><b>(6)</b>
        staffMembers {            <i class="conum" data-value="7"></i><b>(7)</b>
          name                    <i class="conum" data-value="8"></i><b>(8)</b>
          _meta {
            id                    <i class="conum" data-value="9"></i><b>(9)</b>
            logicalTypeName       <i class="conum" data-value="9"></i><b>(9)</b>
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>specify schema style</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>domain service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>action name</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>invokes the action</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>returning a list of <code>Department</code>s</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>gets (accesses) the <code>name</code> property of each returned <code>Department</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>also gets (accesses) the <code>staffMembers</code> collection of each returned <code>Department</code>, returning a list of <code>StaffMember</code>s</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>gets the <code>name</code> prperty for each returned <code>StaffMember</code></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>returns the internal id and logicalTypeName of each <code>StaffMember</code>.
Together, these make up the <a href="../../refguide/latest/applib/index/services/bookmark/Bookmark.html" class="xref page">Bookmark <em>(record)</em></a> of the domain object.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Queries can also include parameters.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_Departments {
      findDepartmentByName {
        invoke(name: "Classics") {
          results {
            name {
              get
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  simple {
    university_dept_Departments {
      findDepartmentByName(name: "Classics") {
        name
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The above is an example of invoking an action on a (singleton) domain service, but this works equally well on domain entities/view models once retrieved.
More on this below.</p>
</div>
<div class="sect2">
<h3 id="supporting-metadata"><a class="anchor" href="#supporting-metadata"></a>Supporting Metadata</h3>
<div class="paragraph">
<p>If you use the "rich" schema, then as well as accessing properties and collections and invoking (safe) actions, the GraphQL viewer also allows access to the usual supporting metadata.
For example:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_Departments {
      findAllDepartments {
        disabled          <i class="conum" data-value="1"></i><b>(1)</b>
        invoke {
          results {
            name {
              hidden        <i class="conum" data-value="2"></i><b>(2)</b>
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not supported by simple schema.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>whether this action is disabled</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>whether the property of the resultant object is hidden</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similarly, there are fields for action parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>validate</code> - is the proposed action parameter valid?</p>
</li>
<li>
<p><code>disable</code> - is the action or action parameter disabled?</p>
</li>
<li>
<p><code>choices</code> - for an action parameter, are their choices?</p>
</li>
<li>
<p><code>autoComplete</code> - for an action parameter, is there an auto-complete?</p>
</li>
<li>
<p><code>default</code> - for an action parameter, is there a default value?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are also similar fields for properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>validate</code> - is the proposed value of the property valid?</p>
</li>
<li>
<p><code>disable</code> - is the property disabled?</p>
</li>
<li>
<p><code>choices</code> - for a property, are their choices?</p>
</li>
<li>
<p><code>autoComplete</code> - for a property , is there an auto-complete?</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-meta-fieldtype"><a class="anchor" href="#the-meta-fieldtype"></a>The Meta field/type</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>_meta</code> field provides access to additional information about the domain object.
Its full list of fields are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>logicalTypeName</code> and <code>id</code>; these are equivalent to the <a href="../../refguide/latest/applib/index/services/bookmark/Bookmark.html" class="xref page">Bookmark <em>(record)</em></a> of the domain object</p>
</li>
<li>
<p><code>version</code> (if an entity and available)</p>
</li>
<li>
<p><code>title</code> (as per the <a href="../../userguide/latest/ui-layout-and-hints.html#object-title" class="xref page">title()</a> supporting method)</p>
</li>
<li>
<p><code>icon</code> (as per the <a href="../../userguide/latest/ui-layout-and-hints.html#object-icon" class="xref page">icon</a>, normally the associated <code>.png</code> file) and <code>grid</code> (as per the <a href="../../userguide/latest/ui-layout-and-hints.html" class="xref page">layout</a>, normally the associated <code>.layout.xml</code> file )</p>
<div class="paragraph">
<p>These can only be downloaded if configured, see <a href="#resources-blobs-clobs-layouts-icons">resources</a> section below.</p>
</div>
</li>
<li>
<p><code>cssClass</code> (as per the <a href="../../userguide/latest/ui-layout-and-hints.html#object-css-styling" class="xref page">cssClass()</a> supporting method)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is also one additional field, <code>saveAs</code>; this is discussed in the <a href="testsupport.html" class="xref page">Test Support</a> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="queries-that-lookup-a-domain-object"><a class="anchor" href="#queries-that-lookup-a-domain-object"></a>Queries that lookup a Domain Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most queries will start with a domain service, but it is also possible to define a query that starts with a "lookup" of existing domain object:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_Department(   <i class="conum" data-value="1"></i><b>(1)</b>
      object: {id: "1"}           <i class="conum" data-value="2"></i><b>(2)</b>
    ) {
      name {
        get
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  simple {
    university_dept_Department(   <i class="conum" data-value="1"></i><b>(1)</b>
      object: {id: "1"}) {        <i class="conum" data-value="2"></i><b>(2)</b>
      name
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>logical type name of the domain object</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>identifier of the domain object instance</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next section explains how use mutations to change the state of the system.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mutations"><a class="anchor" href="#mutations"></a>Mutations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Actions that mutate the state of the system (with idempotent or non-idempotent <a href="../../refguide/latest/applib/index/annotation/Action.html#semantics" class="xref page">@Action#semantics</a>) are exposed as mutations.
Editable properties are also exposed as mutations.</p>
</div>
<div class="paragraph">
<p>IF the action is on a domain service, then the target is implicit; but if the action is on a domain object&#8201;&#8212;&#8201;and also for properties&#8201;&#8212;&#8201;then the target domain object must be specified.</p>
</div>
<div class="paragraph">
<p>For example, to invoke a mutating action on a domain service:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">mutation {
  university_dept_Departments__createDepartment(  <i class="conum" data-value="1"></i><b>(1)</b>
      name: "Geophysics",
      deptHead: null
  ) {
    name {
      get
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">mutation {
  university_dept_Departments__createDepartment(
      name: "Geophysics",
      deptHead: null
  ) {
    name
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>derived from the logical type name of the domain service, and the action Id.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, to invoke a mutating action on a domain object</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">mutation {
  university_dept_Department__changeName(     <i class="conum" data-value="1"></i><b>(1)</b>
      _target: {id : "1"},                     <i class="conum" data-value="2"></i><b>(2)</b>
      newName: "Classics and Ancient History"
  ) {
    name {
      get
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">mutation {
  university_dept_Department__changeName(
      _target: {id : "1"},
      newName: "Classics and Ancient History"
  ) {
    name
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>derived from the logical type name of the domain object, and the action Id.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>object</code> argument specifies the target object</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Or, to set a property on a domain object:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">mutation {
  university_dept_StaffMember__name(  <i class="conum" data-value="1"></i><b>(1)</b>
      _target: {id: "1"},             <i class="conum" data-value="2"></i><b>(2)</b>
      name: "Jonathon Gartner"
  ) {
    name {                            <i class="conum" data-value="3"></i><b>(3)</b>
      get
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">mutation {
  university_dept_StaffMember__name(
      _target: {id: "1"},
      name: "Jonathon Gartner"
  ) {
    name
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>derived from the logical type name of the domain object, and the property Id.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <code>_target</code> argument specifies the target object</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>property setters are <code>void</code>, so as a convenience the mutator instead returns the target object.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="queries-that-are-also-mutations"><a class="anchor" href="#queries-that-are-also-mutations"></a>Queries that are also Mutations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>According to the <a href="https://spec.graphql.org/June2018/#sec-Language.Operations">GraphQL specification</a>, queries should be read-only; they must not change the state of the system.</p>
</div>
<div class="paragraph">
<p>Enabling the <code>QUERY_WITH_MUTATIONS_NON_SPEC_COMPLIANT</code> API variant (also mentioned <a href="#api-variants">above</a>) relaxes this rule, allowing actions to be invoked that <em>do</em> change the state of the system, and&#8201;&#8212;&#8201;indeed&#8201;&#8212;&#8201;allowing properties to be modified.
This is done through these additional fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>invokeIdempotent</code> - to invoke an action whose action semantics are idempotent</p>
<div class="paragraph">
<p>As specified by <a href="../../refguide/latest/applib/index/annotation/Action.html#semantics" class="xref page">@Action#semantics</a>.</p>
</div>
</li>
<li>
<p><code>invokeNonIdempotent</code> - to invoke an action whose action semantics are non-idempotent</p>
</li>
<li>
<p><code>set</code> - to modify a property.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, to invoke an action on a domain service:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_Staff {
      createStaffMember {
        invokeNonIdempotent(
          name: "Dr. Georgina McGovern",
          department: { id: "1"}
      ) {
          results {
            name {
              get
            }
            department {
              get {
                name {
                  get
                }
              }
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  simple {
    university_dept_Staff {
      createStaffMember (
          name: "Dr. Georgina McGovern",
          department: { id: "1"}
      ) {
        name
        department {
          name
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Or, to find a domain object and then invoke a mutating action on it:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_DeptHeads {
      findHeadByName {
        invoke(name: "Prof. Dicky Horwich") {
          results {
            changeName {
              invokeIdempotent(newName: "Prof. Richard Horwich") {
                results {
                  name {
                    get
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  simple {
    university_dept_DeptHeads {
      findHeadByName(name: "Prof. Dicky Horwich") {
        changeName(newName: "Prof. Richard Horwich") {
          name
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Or, similarly to find a domain object and then set a property afterwards:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_Staff {
      findStaffMemberByName {
        invoke(name: "Gerry Jones") {
          results {
            name {
              set(name: "Gerald Johns") {
                name {
                  get
                }
              }
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not supported by simple schema</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="resources-blobs-clobs-layouts-icons"><a class="anchor" href="#resources-blobs-clobs-layouts-icons"></a>Resources (Blobs, Clobs, Layouts, Icons)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Rather than returning the values of Blobs and Clobs inline within a response, instead the GraphQL viewer renders these as a URL to a resource controller.
The client can then make a second call to this endpoint using a simple HTTP(s) GET.</p>
</div>
<div class="paragraph">
<p>The same approach is used for both simple and rich schemas.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_Staff {
      findStaffMemberByName {
        invoke(name: "Gerry Jones") {
          results {
            photo {
              get {
                bytes     <i class="conum" data-value="1"></i><b>(1)</b>
              }
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>requests a URL to download bytes</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  simple {
    university_dept_Staff {
      findStaffMemberByName(name: "Gerry Jones") {
        photo {
          bytes           <i class="conum" data-value="1"></i><b>(1)</b>
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>This will result in a response (for the rich schema) such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "data" : {
    "rich" : {
      "university_dept_Staff" : {
        "findStaffMemberByName" : {
          "invoke" : {
            "results" : {
              "photo" : {
                "get" : {
                  "bytes" : "///graphql/object/university.dept.StaffMember:123/photo/blobBytes"
                }
              }
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The simple schema&#8217;s response is very similar.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The viewer does <em>not</em> currently provide any way to update Blobs or Clobs.
One option is to implement a custom controller that the client can post to, analogous to the in-built resource controller.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <a href="#the-meta-fieldtype">meta field</a> mentioned earlier also allows the <code>icon</code> and <code>grid</code> (layout) files to be downloaded in a similar way:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rich schema</th>
<th class="tableblock halign-left valign-top">Simple schema</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  rich {
    university_dept_Staff {
      findStaffMemberByName {
        invoke(name: "Gerry Jones") {
          results {
            _meta {
              icon        <i class="conum" data-value="1"></i><b>(1)</b>
              grid        <i class="conum" data-value="2"></i><b>(2)</b>
            }
          }
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>requests a URL to download bytes</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-graphql hljs" data-lang="graphql">{
  simple {
    university_dept_Staff {
      findStaffMemberByName(name: "Gerry Jones") {
        _meta {
          icon            <i class="conum" data-value="1"></i><b>(1)</b>
          grid            <i class="conum" data-value="2"></i><b>(2)</b>
        }
      }
    }
  }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>URL to download the icon (typically a <code>.png</code> file)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>URL to download the grid layout (typically the <code>.layout.xml</code> file)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Because the resource controller exposes information directly, these fields are suppressed by default.
To enable, use the <a href="../../refguide/latest/config/sections/causeway.viewer.graphql.html#causeway.viewer.graphql.resources.response-type" class="xref page">causeway.viewer.graphql.resources.response-type</a> configuration property.
If you do this, then you should also make sure that the resource controller is made secure in some appropriate fashion.</p>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2024 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Causeway, and the Apache Causeway project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 3.5.0-SNAPSHOT.20251007-0250-e045730d</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="../../_/js/vendor/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'causeway-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
