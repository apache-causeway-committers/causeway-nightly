<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>From v1.8.0 to 1.9.0 :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Apache Isis</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="../../simpleapp/about.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">User Guide</span>
            <a class="navbar-item" href="../../userguide/about.html">Fundamentals &amp; Beyond</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Reference</span>
            <a class="navbar-item" href="../../refguide/about.html">Reference Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/about.html">Security Guide</a>
            <a class="navbar-item" href="../../ext-secman/about.html">SecMan (extension)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Testing</span>
            <a class="navbar-item" href="../../testing/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../odn/about.html">DataNucleus Object Store</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../extensions/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="../../toc/mavendeps/about.html">Maven dependencies</a>
            <a class="navbar-item" href="../../toc/mixins/about.html">Maven mixins</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Mailing Lists</span>
            <a class="navbar-item" href="../../toc/mailing-list/how-to-subscribe.html">How to subscribe</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">ASF JIRA</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="../../mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Internal</span>
            <a class="navbar-item" href="../../toc/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/about.html">Core Framework</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">@ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../toc/about.html">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="toc" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html"> </a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">What is Apache Isis?</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/isis-in-pictures.html">Apache Isis in pictures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/common-use-cases.html">Common Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/screencasts.html">Screencasts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/powered-by.html">Powered By</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Starter Apps</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../helloworld/about.html">HelloWorld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../simpleapp/about.html">SimpleApp</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Demos &amp; Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../demoapp/about.html">Demo App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../userguide/about.html">User Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../refguide/about.html">Reference Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../security/about.html">Security Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../secman/about.html">SecMan (extension)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/about.html">Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../vw/about.html">Wicket UI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../vro/about.html">Restful Objects (REST API)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../odn/about.html">DataNucleus Object Store</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../extensions/about.html">Extensions Catalog</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Support</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../devguide/about.html">Developers' Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mavendeps/about.html">Maven Dependencies</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mixins/about.html">Maven Mixins</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#toc:ROOT:mailing-list.adoc#how-to-subscribe">Mailing Lists</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=87">ASF JIRA</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="https://cwiki.apache.org/confluence/display/ISIS/Index">ASF Wiki</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="https://fisheye.apache.org/browse/~br=master/isis-git/">ASF Fisheye</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="http://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Releases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../downloads/how-to.html">Downloads</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../relnotes/about.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about.html">Migration Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Internal</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../comguide/about.html">Committers' Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../comguide/about.html#cutting-a-release">Cutting a Release</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../comguide/about.html#verifying-releases">Verifying a Release</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/about.html">Core Framework</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../more-thanks/more-thanks.html">Acknowledgements</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title"> </span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../odn/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">SecMan</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../secman/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter App - Hello World</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../helloworld/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter App - SimpleApp</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../simpleapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorial App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html"> </a></li>
    <li><a href="mn-1.8.0-to-1.9.0.html">From v1.8.0 to 1.9.0</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/antora/components/toc/modules/mignotes/pages/mn-1.8.0-to-1.9.0.adoc">Edit this Page</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">From v1.8.0 to 1.9.0</h1>
<div class="sect1">
<h2 id="upgrading-to-datanucleus-4"><a class="anchor" href="#upgrading-to-datanucleus-4"></a>Upgrading to DataNucleus 4</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis 1.9.0 updates to DataNucleus 4.0.0, which requires some changes (simplifications) to the Maven configuration.</p>
</div>
<div class="paragraph">
<p>If you starting a new app then you can start from the <a href="https://isis.apache.org/versions/1.9.0/arch/simpleapp/about.html">SimpleApp archetype</a>; its Maven configuration has been updated.</p>
</div>
<div class="paragraph">
<p>If you have an existing Apache Isis app that you want to upgrade, then you&#8217;ll need to make some changes.</p>
</div>
<div class="sect2">
<h3 id="in-the-parent-pom-xml"><a class="anchor" href="#in-the-parent-pom-xml"></a>In the parent <code>pom.xml</code></h3>
<div class="paragraph">
<p>under the <code>project/properties</code>, remove:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!-- must be consistent with the versions defined by the JDO Objectstore --&gt;
&lt;datanucleus-accessplatform-jdo-rdbms.version&gt;3.3.6&lt;/datanucleus-accessplatform-jdo-rdbms.version&gt;
&lt;datanucleus-maven-plugin.version&gt;3.3.2&lt;/datanucleus-maven-plugin.version&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="in-dompom-xml"><a class="anchor" href="#in-dompom-xml"></a>In <code>dom/pom.xml</code>,</h3>
<div class="paragraph">
<p>under <code>build/plugins</code>, remove:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
    &lt;artifactId&gt;datanucleus-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${datanucleus-maven-plugin.version}&lt;/version&gt;
    &lt;configuration&gt;
        &lt;fork&gt;false&lt;/fork&gt;
        &lt;log4jConfiguration&gt;${basedir}/log4j.properties&lt;/log4jConfiguration&gt;
        &lt;verbose&gt;true&lt;/verbose&gt;
        &lt;props&gt;${basedir}/datanucleus.properties&lt;/props&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;phase&gt;compile&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;enhance&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and (if you have it) under <code>build/pluginManagement/plugins</code>, remove:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.--&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;
    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;configuration&gt;
        &lt;lifecycleMappingMetadata&gt;
            &lt;pluginExecutions&gt;
                &lt;pluginExecution&gt;
                    &lt;pluginExecutionFilter&gt;
                        &lt;groupId&gt;
                            org.datanucleus
                        &lt;/groupId&gt;
                        &lt;artifactId&gt;
                            datanucleus-maven-plugin
                        &lt;/artifactId&gt;
                        &lt;versionRange&gt;
                            [3.2.0-release,)
                        &lt;/versionRange&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;enhance&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/pluginExecutionFilter&gt;
                    &lt;action&gt;
                        &lt;ignore&gt;&lt;/ignore&gt;
                    &lt;/action&gt;
                &lt;/pluginExecution&gt;
            &lt;/pluginExecutions&gt;
        &lt;/lifecycleMappingMetadata&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and instead, under <code>&lt;profiles&gt;</code> add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;profile&gt;
    &lt;id&gt;enhance&lt;/id&gt;
    &lt;activation&gt;
        &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
    &lt;/activation&gt;
    &lt;properties&gt;
        &lt;datanucleus-maven-plugin.version&gt;4.0.1&lt;/datanucleus-maven-plugin.version&gt;
    &lt;/properties&gt;
    &lt;build&gt;
        &lt;pluginManagement&gt;
            &lt;plugins&gt;
                &lt;plugin&gt;
                    &lt;!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.--&gt;
                    &lt;groupId&gt;org.eclipse.m2e&lt;/groupId&gt;
                    &lt;artifactId&gt;lifecycle-mapping&lt;/artifactId&gt;
                    &lt;version&gt;1.0.0&lt;/version&gt;
                    &lt;configuration&gt;
                        &lt;lifecycleMappingMetadata&gt;
                            &lt;pluginExecutions&gt;
                                &lt;pluginExecution&gt;
                                    &lt;pluginExecutionFilter&gt;
                                        &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
                                        &lt;artifactId&gt;datanucleus-maven-plugin&lt;/artifactId&gt;
                                        &lt;versionRange&gt;[${datanucleus-maven-plugin.version},)&lt;/versionRange&gt;
                                        &lt;goals&gt;
                                            &lt;goal&gt;enhance&lt;/goal&gt;
                                        &lt;/goals&gt;
                                    &lt;/pluginExecutionFilter&gt;
                                    &lt;action&gt;
                                        &lt;ignore&gt;&lt;/ignore&gt;
                                    &lt;/action&gt;
                                &lt;/pluginExecution&gt;
                            &lt;/pluginExecutions&gt;
                        &lt;/lifecycleMappingMetadata&gt;
                    &lt;/configuration&gt;
                &lt;/plugin&gt;
            &lt;/plugins&gt;
        &lt;/pluginManagement&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
                &lt;artifactId&gt;datanucleus-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${datanucleus-maven-plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;fork&gt;false&lt;/fork&gt;
                    &lt;log4jConfiguration&gt;${basedir}/log4j.properties&lt;/log4jConfiguration&gt;
                    &lt;verbose&gt;true&lt;/verbose&gt;
                    &lt;props&gt;${basedir}/datanucleus.properties&lt;/props&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;phase&gt;process-classes&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;enhance&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
            &lt;artifactId&gt;datanucleus-core&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
            &lt;artifactId&gt;datanucleus-jodatime&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.datanucleus&lt;/groupId&gt;
            &lt;artifactId&gt;datanucleus-api-jdo&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/profile&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t use Eclipse then you can omit the <code>org.eclipse.m2e</code> plugin in <code>&lt;pluginManagement&gt;</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="in-the-webapps-persistor_datanucleus-properties"><a class="anchor" href="#in-the-webapps-persistor_datanucleus-properties"></a>In the webapp&#8217;s <code>persistor_datanucleus.properties</code></h3>
<div class="paragraph">
<p>in <code>src/main/webapp/WEB-INF/</code>,</p>
</div>
<div class="paragraph">
<p>change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.autoCreateSchema=true
isis.persistor.datanucleus.impl.datanucleus.validateTables=true
isis.persistor.datanucleus.impl.datanucleus.validateConstraints=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.schema.autoCreateAll=true
isis.persistor.datanucleus.impl.datanucleus.schema.validateTables=true
isis.persistor.datanucleus.impl.datanucleus.schema.validateConstraints=true</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Previously Apache Isis would automatically add the auto-create property if they were absent from <code>isis.properties</code>, set to "true".
The framework does still add the property, but now sets it to "false".
This is to prevent the framework from unexpectedly modifying a target database if the application was misconfigured and the auto-create property not defined.</p>
</div>
<div class="paragraph">
<p>The framework will also automatically add the auto-validate property.
Previously this was set to "true" and it is <em>still</em> set to "true"; there is no risk of the target database being modified as a result of this auto-validate property being defaulted by the framework.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Setting <code>autoCreateAll</code> to <code>true</code> is important to do when running with an in-memory database.
If you don&#8217;t do this then the tables will be created lazily anyway by DataNucleus, but in some circumstances this can lead to deadlocks.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In addition, change:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.identifier.case=PreserveCase</code></pre>
</div>
</div>
<div class="paragraph">
<p>to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.impl.datanucleus.identifier.case=MixedCase</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="run-mvn-clean"><a class="anchor" href="#run-mvn-clean"></a>Run <code>mvn clean</code> !</h3>
<div class="paragraph">
<p>Be careful to ensure that your classes are only enhanced by the DataNucleus 4 enhancer, and <em>not</em> by the DataNucleus 3 enhancer.
Or even, be careful that they are not doubly enhanced.
One of our committers had this situation and it led to all sorts of bizarre issues.
The solution, it turned out, was actually just to do a full <code>mvn clean</code>.</p>
</div>
<div class="paragraph">
<p>If you are struggling and suspect you may have misconfigured the enhancer plugin, then you can decompile the bytecode (eg in IntelliJ) and take a look:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A class enhanced with DataNucleus 3 would implement <code>javax.jdo.spi.PersistenceCapable</code> interface</p>
</li>
<li>
<p>A class enhanced with DataNucleus 4 will implement <code>org.datanucleus.enhancer.Persistable</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="specify-all-dom-packages"><a class="anchor" href="#specify-all-dom-packages"></a>Specify all <code>dom</code> packages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis automatically scans for certain classes on the classpath in order to configure itself.  Specifically these are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>searching for classes annotated with <a href="https://isis.apache.org/versions/1.9.0/guides/rgant/rgant.html#_rgant-DomainService"><code>@DomainService</code></a>.</p>
</li>
<li>
<p>searching for classes extending <a href="https://isis.apache.org/versions/1.9.0/guides/rgcms/rgcms.html#_rgcms_classes_super_FixtureScript"><code>FixtureScript</code></a></p>
</li>
<li>
<p>searching for classes annotated with <a href="https://isis.apache.org/versions/1.9.0/guides/rgant/rgant.html#_rgant-PersistenceCapable"><code>@PersistenceCapable</code></a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the last of these we have tightened up the validation, to ensure that each package specified in the <code>isis.persistor.datanucleus.RegisterEntities.packagePrefix</code> key does indeed include at least one annotated entity.  This should include any domain classes for addon modules.</p>
</div>
<div class="paragraph">
<p>For example, the (non-ASF) <a href="http://github.com/isisaddons/isis-app-todoapp">Isis addons' todoapp</a>'s configuration now reads:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.persistor.datanucleus.RegisterEntities.packagePrefix=\
                todoapp.dom.module,\
                org.isisaddons.module.security.dom,\
                org.isisaddons.module.settings.dom,\
                org.isisaddons.module.sessionlogger.dom,\
                org.isisaddons.module.command.dom,\
                org.isisaddons.module.audit.dom,\
                org.isisaddons.module.publishing.dom</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Alternatively, could have just specified <code>org.isisaddons.module</code> instead of enumerating every addon.  This would be a bit slower, but more maintainable.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you fail to do specify all packages things may still work, however DataNucleus will build up its metamodel lazily.  This can call issues: we&#8217;ve seen malformed SQL being submitted when DN wasn&#8217;t aware of subclasses of a superclass, and we&#8217;ve also seen deadlocks when running against HSQLDB as it attempts to perform a DDL statement intermixed with DML statements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading-to-java-8"><a class="anchor" href="#upgrading-to-java-8"></a>Upgrading to Java 8</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis 1.9.0 is the first version to support Java 8.  You can continue to use Java 7, but if you want to move to Java 8 then there are several small changes to be made.</p>
</div>
<div class="sect2">
<h3 id="in-the-parent-pom-xml-2"><a class="anchor" href="#in-the-parent-pom-xml-2"></a>In the parent <code>pom.xml</code></h3>
<div class="paragraph">
<p>under <code>build/pluginManagement/plugins</code>, add (or update) <code>maven-compiler-plugin</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
    &lt;version&gt;3.1&lt;/version&gt;
    &lt;configuration&gt;
        &lt;source&gt;1.8&lt;/source&gt;
        &lt;target&gt;1.8&lt;/target&gt;
        &lt;compilerArgument&gt;-parameters&lt;/compilerArgument&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;source&lt;/id&gt;
            &lt;phase&gt;compile&lt;/phase&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
            &lt;id&gt;test&lt;/id&gt;
            &lt;phase&gt;test-compile&lt;/phase&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>-parameters</code> argument causes the Java compiler to capture the names of method parameters in the <code>.class</code> files.  Apache Isis can be configured to use this, thereby avoiding the requirement to annotate every parameter with <code>@ParameterLayout(named=&#8230;&#8203;)</code>.  The necessary configuration is provided in the (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a>'s paraname8 metamodel extension.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We also recommend that you add the <code>maven-enforcer-plugin</code> (if not used already).  Again, this resides under <code>&lt;build&gt;/&lt;pluginManagement&gt;/&lt;plugins&gt;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.3.1&lt;/version&gt;
    &lt;configuration&gt;
        &lt;rules&gt;
            &lt;requireMavenVersion&gt;
                &lt;version&gt;[3.2.1,)&lt;/version&gt;
            &lt;/requireMavenVersion&gt;
            &lt;requireJavaVersion&gt;
                &lt;version&gt;[1.8.0,)&lt;/version&gt;
            &lt;/requireJavaVersion&gt;
            &lt;requirePluginVersions&gt;
                &lt;message&gt;All plugin versions must be defined!&lt;/message&gt;
                &lt;banLatest&gt;true&lt;/banLatest&gt;
                &lt;banRelease&gt;true&lt;/banRelease&gt;
            &lt;/requirePluginVersions&gt;
            &lt;DependencyConvergence /&gt;
        &lt;/rules&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;validate-enforce&lt;/id&gt;
            &lt;phase&gt;validate&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;enforce&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="exceptionrecognizercompositeforjdoobjectstore"><a class="anchor" href="#exceptionrecognizercompositeforjdoobjectstore"></a><code>ExceptionRecognizerCompositeForJdoObjectStore</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>ExceptionRecognizerCompositeForJdoObjectStore</code> service (an implementation of the <a href="https://isis.apache.org/versions/1.9.0/guides/rgsvc/rgsvc.html#_rgsvc_presentation-layer-spi_ExceptionRecognizer"><code>ExceptionRecognizer</code></a> SPI) recognizes certain expected exceptions thrown by the JDO objectstore (for example, violations of uniqueness) and converts them into meaningful messages for the end-user.</p>
</div>
<div class="paragraph">
<p>Prior to 1.9.0 this implementation was <em>not</em> annotated with <a href="https://isis.apache.org/versions/1.9.0/guides/rgant/rgant.html#_rgant-DomainService"><code>@DomainService</code></a> and thus needed to be explicitly registered in <code>isis.properties</code>.</p>
</div>
<div class="paragraph">
<p>In 1.9.0 the service has been annotated with <code>@DomainService</code> meaning that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it must be removed from <code>isis.services</code> property in <code>isis.properties</code> configuration file</p>
</li>
<li>
<p>in integration tests, if the service is explicitly registered, then it should be removed; for example:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class EstatioIntegTestBuilder extends IsisSystemForTest.Builder {
    public EstatioIntegTestBuilder() {
        ...
        withServices(
        //    new ExceptionRecognizerCompositeForJdoObjectStore()   <i class="conum" data-value="1"></i><b>(1)</b>
        );
    }
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>remove this line (or comment it out, as shown)</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you fail to do this you will get an exception to the effect of duplicate service Ids being registered.</p>
</div>
<div class="paragraph">
<p>Now that the <code>ExceptionRecognizerCompositeForJdoObjectStore</code> no longer needs to be explicitly registered, you might (very rarely) require the opposite situation, namely to disable the service.  As this can&#8217;t be done by just removing it from <code>isis.properties</code>, you instead can set a new <a href="https://isis.apache.org/versions/1.9.0/guides/rgcfg/rgcfg.html#_rgcfg_configuring-core">configuration property</a> <code>isis.services.ExceptionRecognizerCompositeForJdoObjectStore.disable</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">#isis.services.ExceptionRecognizerCompositeForJdoObjectStore.disable=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you did not register this service directly but instead registered a subclass of this service, then you should refactor your code so that your implementation is in a separate service, eg by subclassing <code>ExceptionRecognizerComposite</code>.  You should probably also annotate with <code>@DomainService</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fixturescriptsspecificationprovider"><a class="anchor" href="#fixturescriptsspecificationprovider"></a><code>FixtureScriptsSpecificationProvider</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>FixtureScriptsSpecificationProvider</code> SPI service is an alternative to subclassing the <a href="https://isis.apache.org/versions/1.9.0/guides/rgcms/rgcms.html#_rgcms_classes_super_FixtureScripts"><code>FixtureScripts</code></a> domain service.  The logic that would normally be in the subclass moves to the provider service instead, and the framework instantiates a fallback default instance, <a href="https://isis.apache.org/versions/1.9.0/guides/rgsvc/rgsvc.html#_rgsvc_testing_FixtureScripts"><code>FixtureScriptsDefault</code></a>.</p>
</div>
<div class="paragraph">
<p>This new design is optional; if you continue to provide your own subclass then everything will continue as before.  However the new design is more flexible and involves less code.</p>
</div>
<div class="paragraph">
<p>See <a href="https://isis.apache.org/versions/1.9.0/guides/ugtst/ugtst.html#_ugtst_fixture-scripts_api-and-usage">user guide</a> for further discussion.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="war-packaging"><a class="anchor" href="#war-packaging"></a>War packaging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As discussed in <a href="https://isis.apache.org/versions/1.9.0/arch/simpleapp/about.html">SimpleApp archetype</a> and elsewhere, the <code>org.apache.isis.WebServer</code> provides the ability to run your app from an embedded jetty.
This is great for prototyping.
The class resides in the <code>isis-core-webserver</code> module, which also has the dependency on jetty.</p>
</div>
<div class="paragraph">
<p>In 1.9.0 we have upgraded the jetty dependency to use Jetty 9.2.0 (<code>org.eclipse.jetty.aggregate:jetty-all:9.2.11.v20150529</code>, to be precise).
One consequence of this is that the packaged WAR file will not boot on Tomcat.</p>
</div>
<div class="paragraph">
<p>One fix is to simply remove the <code>isis-core-webserver</code> module as a dependency of your webapp module, however this will prevent you from using our <code>org.apache.isis.WebServer</code> launcher.
That&#8217;s not necessarily a bad thing; you could continue to use <code>jetty:run</code>, say.
But it might be a change to your development workflow that you don&#8217;t want.</p>
</div>
<div class="paragraph">
<p>Alternatively you can change your webapp&#8217;s <code>pom.xml</code> so that when the war is packaged up it excludes the jetty files.
To do this, locate the <code>maven-war-plugin</code> module definition (under <code>&lt;build&gt;/&lt;plugins&gt;</code> and add to its <code>&lt;configuration&gt;</code> section:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        ...
        &lt;packagingExcludes&gt;
            WEB-INF/lib/isis-core-webserver*.jar,
            WEB-INF/lib/javax.servlet-api-*.jar,
            WEB-INF/lib/javax.websocket-api-*.jar,
            WEB-INF/lib/jetty-all-*.jar
        &lt;/packagingExcludes&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For future projects the <a href="https://isis.apache.org/versions/1.9.0/arch/simpleapp/about.html">SimpleApp archetype</a> has been updated with this change.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bootstrapping-using-appmanifest"><a class="anchor" href="#bootstrapping-using-appmanifest"></a>Bootstrapping using <code>AppManifest</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis 1.9.0 provides a simplified programmatic way of bootstrapping the application, that also unifies bootstrapping for integration tests.</p>
</div>
<div class="paragraph">
<p>For now this new bootstrapping mechanism is optional (you don&#8217;t have to change your code), but it may become mandatory in future releases.
The <a href="https://isis.apache.org/versions/1.9.0/arch/simpleapp/about.html">SimpleApp archetype</a> has been updated to use this new mechanism.</p>
</div>
<div class="paragraph">
<p>The instructions below assume that your application is structured as per the simpleapp archetype.  Adjust accordingly.</p>
</div>
<div class="sect2">
<h3 id="myapp-dom-module"><a class="anchor" href="#myapp-dom-module"></a><code>myapp-dom</code> Module</h3>
<div class="paragraph">
<p>In your <code>myapp-dom</code> module (containing definitions of your persistent entities and domain services), create an empty class to represent the module.
This should be at the root package for the domain, eg:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.dom;
public final class MyAppDomainModule {
    private MyAppDomainModule(){}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since there is no requirement to actually instantiate this class (it merely provides the location of the <code>myapp.dom</code> package), we give it a private constructor.</p>
</div>
<div class="paragraph">
<p>If you have any other modules where you have either domain services or entities, similarly create an empty "module" class.</p>
</div>
</div>
<div class="sect2">
<h3 id="myapp-fixture-module"><a class="anchor" href="#myapp-fixture-module"></a><code>myapp-fixture</code> Module</h3>
<div class="paragraph">
<p>Similarly, in your <code>myapp-fixture</code> module (containing fixture scripts used for testing and demos), do likewise:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.fixture;
public class MyAppFixtureModule {
    private MyAppFixtureModule(){}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="myapp-app-maven-module"><a class="anchor" href="#myapp-app-maven-module"></a><code>myapp-app</code> Maven Module</h3>
<div class="paragraph">
<p>Create a new <code>myapp-app</code> Maven module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in its <code>pom.xml</code>, reference <code>myapp-fixture</code><br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;
    &lt;artifactId&gt;myapp-fixture&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since <code>myapp-fixture</code> will reference <code>myapp-dom</code> there&#8217;s no need for a direct reference to <code>myapp-dom</code></p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>also add in dependencies to the core framework:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
    &lt;artifactId&gt;isis-core-wrapper&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
    &lt;artifactId&gt;isis-core-runtime&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>if your application uses any of the (non-ASF) <a href="http://www.isisaddons.org">Isis Addons</a> modules, then add dependencies to these modules in the <code>pom.xml</code>.
You should be able to copy-and-paste the dependencies from the <code>pom.xml</code> of your <code>myapp-webapp</code> module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Create a module class for the <code>myapp</code> module also:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.app;
public final class MyAppAppModule {
    private MyAppAppModule() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, create an <code>AppManifest</code> implementation, eg:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.app;
public class MyAppAppManifest implements AppManifest {
    @Override
    public List&lt;Class&lt;?&gt;&gt; getModules() {                             <i class="conum" data-value="1"></i><b>(1)</b>
        return Arrays.asList(
                MyAppDomainModule.class,
                MyAppFixtureModule.class,
                MyAppAppModule.class
        );
    }
    @Override
    public List&lt;Class&lt;?&gt;&gt; getAdditionalServices() { return null; }  <i class="conum" data-value="2"></i><b>(2)</b>
    @Override
    public String getAuthenticationMechanism() { return null; }
    @Override
    public String getAuthorizationMechanism() { return null; }
    @Override
    public List&lt;Class&lt;? extends FixtureScript&gt;&gt; getFixtures() { return null; }
    @Override
    public Map&lt;String, String&gt; getConfigurationProperties() { return null; }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the module classes, whose packages specify the existence of domain services and/or persistent entities.
If your app uses (non-ASF) <a href="http://www.isisaddons.org">Isis Addons</a> modules, then include the module classes for these addons in <code>getModules()</code>.
For example, the (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a>'s security module provides the <code>org.isisaddons.module.security.SecurityModule</code> class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>any additional services, as per <code>isis.services</code> configuration property.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For details of the usages of the other methods in this interface, see the <a href="https://isis.apache.org/versions/1.9.0/guides/rgcms/rgcms.html#_rgcms_classes_AppManifest-bootstrapping">reference guide</a> documentation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If in your <code>myapp-dom</code> module you have application-level services and view models (services that depend on persistent domain entities but not the other way around), then we recommend that you move this code to the new <code>myapp-app</code> module.
This makes the layering clearer, and avoids circular dependencies between  application-layer vs domain-layer logic.</p>
</div>
</div>
<div class="sect2">
<h3 id="update-parent"><a class="anchor" href="#update-parent"></a>Update parent</h3>
<div class="paragraph">
<p>in the parent <code>pom.xml</code>, declare and reference the new <code>myapp-app</code> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        ...
        &lt;dependency&gt;
            &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;
            &lt;artifactId&gt;myapp-app&lt;/artifactId&gt;
            &lt;version&gt;${project.version}&lt;/version&gt;
        &lt;/dependency&gt;
        ...
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;modules&gt;
    &lt;module&gt;app&lt;/module&gt;
    ...
&lt;/modules&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="update-myapp-integtests"><a class="anchor" href="#update-myapp-integtests"></a>Update <code>myapp-integtests</code></h3>
<div class="paragraph">
<p>In its <code>pom.xml</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add a dependency on <code>myapp-app</code></p>
</li>
<li>
<p>remove dependency on <code>myapp-fixture</code> (and on <code>myapp-dom</code>, if present)</p>
</li>
<li>
<p>remove dependencies on <code>isis-core-wrapper</code> and <code>isis-core-runtime</code> (since now obtained transitively from <code>myapp-app</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also update (simplify) <code>MyAppSystemInitializer</code> to use the new <code>AppManifest</code>, eg:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyAppSystemInitializer {
    public static void initIsft() {
        IsisSystemForTest isft = IsisSystemForTest.getElseNull();
        if(isft == null) {
            isft = new IsisSystemForTest.Builder()
                    .withLoggingAt(org.apache.log4j.Level.INFO)
                    .with(new DomainAppAppManifest())                   <i class="conum" data-value="1"></i><b>(1)</b>
                    .with(new IsisConfigurationForJdoIntegTests())      <i class="conum" data-value="2"></i><b>(2)</b>
                    .build()
                    .setUpSystem();
            IsisSystemForTest.set(isft);
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>bootstrapping using the new <code>AppManifest</code> implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>if your bootstrapping previously explicitly overrode certain configuration properties, this can instead be moved to the <code>getConfigurationProperties()</code> method of your <code>AppManifest</code> implementation.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="update-myapp-webapp"><a class="anchor" href="#update-myapp-webapp"></a>Update <code>myapp-webapp</code></h3>
<div class="paragraph">
<p>In its <code>pom.xml</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add a dependency on <code>myapp-app</code></p>
</li>
<li>
<p>remove dependency on <code>myapp-fixture</code> (and on <code>myapp-dom</code>, if present)</p>
</li>
<li>
<p>remove dependencies on <code>isis-core-wrapper</code> and <code>isis-core-runtime</code> (since now obtained transitively from <code>myapp-app</code>)</p>
</li>
<li>
<p>(if you didn&#8217;t previously), move any dependencies to addons or other services referenced in the <code>AppManifest</code> to the <code>pom.xml</code> of the new <code>myapp-app</code> module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remove configuration properties that are no longer needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in <code>isis.properties</code>:</p>
<div class="ulist">
<ul>
<li>
<p>remove <code>isis.services-installer</code></p>
</li>
<li>
<p>remove <code>isis.services.ServicesInstallerFromAnnotation.packagePrefix</code></p>
</li>
<li>
<p>remove <code>isis.services</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>in <code>persistor_datanucleus.properties</code></p>
<div class="ulist">
<ul>
<li>
<p>remove <code>isis.persistor.datanucleus.RegisterEntities.packagePrefix</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, specify the <code>AppManifest</code> to use to bootstrap the app.  You have a choice here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>either update <code>isis.properties</code>, using the <code>isis.appManifest</code> key to specify the <code>AppManifest</code> implementation, eg:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.appManifest=domainapp.app.DomainAppAppManifest</code></pre>
</div>
</div>
</li>
<li>
<p>alternatively, specify the <code>AppManifest</code> by overriding the <code>IsisWicketApplication#newWicketModule()</code>, eg:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected Module newIsisWicketModule() {
    final Module isisDefaults = super.newIsisWicketModule();
    ...
    final Module overrides = new AbstractModule() {
        @Override
        protected void configure() {
            ...
            bind(AppManifest.class).toInstance(new DomainAppAppManifest());
        }
    };

    return Modules.override(isisDefaults).with(overrides);
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the second (programmatic) approach is used, this overrides the first approach (using <code>isis.properties</code>).</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <h3 class="toc-title">On this page</h3>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright  2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20191119-0906-300c33c4</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hideEffect: "slideUp",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
