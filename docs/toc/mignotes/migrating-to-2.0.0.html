<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migration Notes :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../starters/helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="../../starters/simpleapp/about.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/about.html">User Guide</a>
            <a class="navbar-item" href="../../refguide/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../testing/about.html">Testing Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Libraries</span>
            <a class="navbar-item" href="../../subdomain/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../valuetypes/about.html">Value Types</a>
            <a class="navbar-item" href="../../mappings/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="../../toc/mavendeps/about.html">Maven dependencies</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../odn/about.html">DataNucleus Object Store</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../extensions/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../toc/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../toc/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Releases</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="../../mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">More Libraries</span>
            <a class="navbar-item" href="../../incubator/about.html">Incubator</a>
            <a class="navbar-item" href="../../legacy/about.html">Legacy</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Internal</span>
            <a class="navbar-item" href="../../toc/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../toc/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="toc" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html"> </a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">What is Apache Isis?</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/isis-in-pictures.html">Apache Isis in pictures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/common-use-cases.html">Common Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/screencasts.html">Screencasts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/powered-by.html">Powered By</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Starter Apps</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/apache/isis-app-helloworld">HelloWorld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/apache/isis-app-simpleapp">SimpleApp</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Demos &amp; Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../demoapp/about.html">Demo App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../userguide/about.html">User Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../refguide/about.html">Reference Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../security/about.html">Security Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../security/about.html">SecMan (extension)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/about.html">Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../vw/about.html">Wicket UI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../vro/about.html">Restful Objects (REST API)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../pjdo/about.html">DataNucleus Object Store</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Catalogs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../extensions/about.html">Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../subdomains/about.html">Subdomains</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../valuetypes/about.html">Value Types</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../mappings/about.html">BC Mappings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../incubator/about.html">Incubator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../legacy/about.html">Legacy</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Support</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../support/slack-channel.html">Slack</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../support/mailing-list.html">Mailing Lists</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=87">ASF JIRA</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../devguide/about.html">Developers' Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mavendeps/about.html">Maven Dependencies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Releases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../downloads/how-to.html">Downloads</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../relnotes/about.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about.html">Migration Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Internal</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../comguide/about.html">Committers' Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../comguide/about.html#cutting-a-release">Cutting a Release</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../comguide/about.html#verifying-releases">Verifying a Release</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/about.html">Core Framework</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../more-thanks/more-thanks.html">Acknowledgements</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title"> </span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mappings/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../pjdo/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../incubator/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../legacy/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter Apps</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../starters/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../subdomains/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorial App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../valuetypes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html"> </a></li>
    <li><a href="migrating-to-2.0.0.html">Migration Notes</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/antora/components/toc/modules/mignotes/pages/migrating-to-2.0.0.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Migration Notes</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
this is work-in-progress.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Search also for: "TODO: v2: " in the .adoc documentation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-0-m2-to-2-0-0-m3"><a class="anchor" href="#2-0-0-m2-to-2-0-0-m3"></a>2.0.0-M2 to 2.0.0-M3</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><code>o.a.isis.schema.utils.Xxx</code> in the applib have moved to <code>o.a.isis.applib.util.schema</code></p>
</li>
<li>
<p><code>o.a.isis.schema.utils.jaxbadapters.Xxx</code> in the applib have moved to <code>o.a.isis.applib.jaxbadapters</code></p>
</li>
<li>
<p><code>BackgroundService</code> replaced by the <code>WrapperFactory#async(Object)</code></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="server-sent-event-sse-support-isis-2102"><a class="anchor" href="#server-sent-event-sse-support-isis-2102"></a>Server-Sent-Event (SSE) Support (ISIS-2102)</h3>
<div class="paragraph">
<p>Experimental feature to allow for submission of background-tasks, that themselfes may fire UI-events to update eg. a progress-bar.</p>
</div>
<div class="paragraph">
<p>To make this work we introduce following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A SSE Servlet listening on '/sse' for client requests.</p>
</li>
<li>
<p>Client-Side Javascript that can subscribe 'EventStream&#8217;s to the SSE Servlet</p>
</li>
<li>
<p>An EventStreamSource interface for any designated background task to implement.</p>
</li>
<li>
<p>An EventStreamService, that allows for such EventStreamSource objects to be submitted for execution on a thread-pool.</p>
</li>
<li>
<p>An EventStreamSource is associated with an EventStream on which it may fire update events.</p>
</li>
<li>
<p>These update events are propagated to the SSE Servlet, which informs its listenening clients with the update event&#8217;s payload data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A first prototypical implementation of this mechanism also introduces a programming model extension, which for now only works for 'Markup' properties.</p>
</div>
<div class="sect3">
<h4 id="the-subscribing-viewmodel"><a class="anchor" href="#the-subscribing-viewmodel"></a>The Subscribing ViewModel</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ViewModel
class View {
	@Property(observe = BackgroundTask.class) // &lt;-- client-side subscription to events of this type
	Markup markup; // &lt;-- on ui-event, the markup component is client-side updated by the EventStreamSource.getPayload()
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="the-background-task"><a class="anchor" href="#the-background-task"></a>The Background Task</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">class BackgroundTask implements EventStreamSource {

    int progress = 0;

	@Override
	public void run(EventStream eventStream) {
	    // do something time consuming and eventually fire an update
	    ...
	    ++progress;
	    eventStream.fire(this);
	    ...
	}

	@Override
	public Markup getPayload() {
	    return new Markup("my current progress is " + progress);
	}

}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="the-background-task-submitter"><a class="anchor" href="#the-background-task-submitter"></a>The Background Task Submitter</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DomainService
class Submitter {
    @Inject EventStreamService eventStreamService;

	@Action
	public void startBackgroundTask() {

		eventStreamService.submit(new BackgroundTask());

	}
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="servicesinjectorserviceregistry"><a class="anchor" href="#servicesinjectorserviceregistry"></a>ServicesInjector/ServiceRegistry</h3>
<div class="paragraph">
<p>ServicesInjector was removed. New interface ServiceInjector and ServiceRegistry redefined.</p>
</div>
</div>
<div class="sect2">
<h3 id="builderscripts-simplified"><a class="anchor" href="#builderscripts-simplified"></a>BuilderScripts simplified</h3>
<div class="paragraph">
<p>The number of required type-parameters for 'BuilderScripts' has been reduced:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Accessors(chain = true)
public class SimpleObjectBuilder
extends BuilderScriptAbstract&lt;SimpleObject&gt; { // &lt;= only 1 type param

    @Getter
    private SimpleObject object;

	...
}

@AllArgsConstructor
public enum SimpleObject_persona
implements PersonaWithBuilderScript&lt;SimpleObjectBuilder&gt; /* &lt;= only 1 type param */ ... {

    FOO("Foo"),
    BAR("Bar"),

	...

    public SimpleObjectBuilder builder() {
        return new SimpleObjectBuilder().setName(name);
    }

    public static class PersistAll
    extends PersonaEnumPersistAll&lt;SimpleObject_persona, SimpleObject&gt; /* &lt;= only 2 type params */ {
		...
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-0-0-m1-to-2-0-0-m2"><a class="anchor" href="#2-0-0-m1-to-2-0-0-m2"></a>2.0.0-M1 to 2.0.0-M2</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="appconfig-isis-2039"><a class="anchor" href="#appconfig-isis-2039"></a>AppConfig (ISIS-2039)</h3>
<div class="paragraph">
<p><code>AppConfig</code> is a new interface that is located through a variety of mechanisms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>CDI if available, else</p>
</li>
<li>
<p>Java 7&#8217;s ServiceLoader mechanism (<code>META-INF/services/org.apache.isis.config.AppConfig</code> file to be present), else</p>
</li>
<li>
<p>fallback to reading (peeking into) <code>isis.properties</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Its API is simply:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@FunctionalInterface
public interface AppConfig {

    IsisConfiguration isisConfiguration();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The expected idiom is for the application&#8217;s <code>AppManifest</code> to also implement this, eg:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@javax.ejb.Singleton                                                <i class="conum" data-value="1"></i><b>(1)</b>
public class HelloWorldAppManifest extends AppManifestAbstract
            implements AppConfig {                                  <i class="conum" data-value="2"></i><b>(2)</b>

    ...

    @Override
    public IsisConfiguration isisConfiguration () {
        return IsisConfiguration.buildFromAppManifest(this);
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>only required if the <code>AppConfig</code> is to be picked up using CDI</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>So, we have the <code>AppManifest</code> instantiated by CDI etc, and then the <code>IsisConfiguration</code> is built in turn from the <code>AppManifest</code>.
Once the <code>IsisConfiguration</code> is created, it is immutable.
And, following the above idiom, the <code>IsisConfiguration</code> also makes the <code>AppManifest</code> available:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface IsisConfiguration {
    ...
    AppManifest getAppManifest();
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="table-tree-viewer-isis-898"><a class="anchor" href="#table-tree-viewer-isis-898"></a>Table Tree Viewer (ISIS-898)</h3>
<div class="paragraph">
<p>also: ISIS-1943,ISIS-1944,ISIS-1947</p>
</div>
<div class="paragraph">
<p>Note: Currently does not implement a Table Tree View but just a Tree View.</p>
</div>
<div class="paragraph">
<p>public API is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>TreeAdapter</code> (provides the parent/child relationship information between pojos to derive a tree-structure)</p>
</li>
<li>
<p><code>TreeNode</code> (with <code>LazyTreeNode</code> as the default implementation)</p>
</li>
<li>
<p><code>TreePath</code> (represents a coordinate-system to navigate any tree-structure)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface TreeAdapter&lt;T&gt; {

    Optional&lt;T&gt; parentOf(T value); // parent tree-node (pojo) of given value tree-node

    int childCountOf(T value); // number of child tree-nodes of given value tree-node

    Stream&lt;T&gt; childrenOf(T value); // stream of child tree-nodes of given value tree-node

}

// creating a tree starting at a given tree-node, where MyTreeAdapter implements TreeAdapter&lt;T&gt;

T root = ... // the tree's root (a pojo)
TreeNode&lt;T&gt; tree = TreeNode.lazy(root, MyTreeAdapter.class); // creates a tree-node with given 'root' as the tree's root

// expand a certain tree-node by specifying it's coordinates (TreePath) within the tree-structure

tree.expand(TreePath.of(0)); // expand the root node
tree.expand(TreePath.of(0, 1)); // expand the second child of the root node</code></pre>
</div>
</div>
<div class="paragraph">
<p>A full example is showcased in the <a href="https://github.com/andi-huber/isis-2-demo/tree/master/src/main/java/domainapp/dom/tree">isis-2-demo</a> &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Implementation of <code>TreeAdapter</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class FileSystemTreeAdapter implements TreeAdapter&lt;FileNode&gt; {

	@Override
	public Optional&lt;FileNode&gt; parentOf(FileNode value) {
		if(value.getType()==FileNode.Type.FileSystemRoot) {
			return Optional.empty();
		}
		val parentFolderIfAny = value.asFile().getParentFile();
		if(parentFolderIfAny==null) {
			return Optional.empty(); // unexpected code reach, but just in case
		}
		return Optional.ofNullable(parentFolderIfAny)
				.map(FileNodeFactory::toFileNode);
	}

	@Override
	public int childCountOf(FileNode value) {
		return (int) streamChildFiles(value).count();
	}

	@Override
	public Stream&lt;FileNode&gt; childrenOf(FileNode value) {
		return streamChildFiles(value)
				.map(FileNodeFactory::toFileNode);
	}

	// -- HELPER
	private static Stream&lt;File&gt; streamChildFiles(FileNode value){
		val file = value.asFile();
		val childFiles = file.listFiles();
		if(childFiles==null) {
			return Stream.empty();
		}
		return Stream.of(childFiles)
				.filter(f-&gt;!f.isHidden());
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>FileNode</code> doesn&#8217;t, actually, need to implement <code>TreeNode</code>, it&#8217;s just a regular view model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@XmlRootElement(name="FileNode")
@DomainObject(nature=Nature.VIEW_MODEL)
@ToString
public class FileNode {

	public static enum Type {
		FileSystemRoot,
		Folder,
		File
	}

	@Getter @Setter protected String path;
	@Getter @Setter protected Type type;

	public String title() {
		if(path==null) {
			return null;
		}
		val file = asFile();
		return file.getName().length()!=0 ? file.getName() : file.toString();
	}

	public String iconName() {
		return type!=null ? type.name() : "";
	}

	// -- BREADCRUMB SUPPORT

	@PropertyLayout(navigable=Navigable.PARENT, hidden=Where.EVERYWHERE)
	public FileNode getParent() {
	    val parentFile = asFile().getParentFile();
	    return parentFile!=null ? FileNodeFactory.toFileNode(parentFile) : null;
	}

	// -- INIT

	void init(File file) {
		this.path = file.getAbsolutePath();
		if(file.isDirectory()) {
			type = isRoot(file) ? Type.FileSystemRoot : Type.Folder;
		} else {
			type = Type.File;
		}
	}

	// -- HELPER

	File asFile() {
		return new File(path);
	}

	private static boolean isRoot(File file) {
		return file.getParent()==null;
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And finally the ViewModel that provides the tree for rendering:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ViewModel
public class TreeDemo extends DemoStub {

	/**
	 * @return the demo tree view model as a property
	 */
	public TreeNode&lt;FileNode&gt; getFileSystemTree() {
    		val root = FileNodeFactory.defaultRoot();
    		val tree = TreeNode.lazy(root, FileSystemTreeAdapter.class);
    		tree.expand(TreePath.of(0)); // expand the root node
    		return tree;
	}

    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="isis-core-wrapper-removed-isis-18381839"><a class="anchor" href="#isis-core-wrapper-removed-isis-18381839"></a>isis-core-wrapper removed (ISIS-1838/1839)</h3>

</div>
<div class="sect2">
<h3 id="guice-removed-from-applib-and-core-isis-1892"><a class="anchor" href="#guice-removed-from-applib-and-core-isis-1892"></a>guice removed from applib and core (ISIS-1892)</h3>

</div>
<div class="sect2">
<h3 id="web-xml-now-much-simpler-isis-1895"><a class="anchor" href="#web-xml-now-much-simpler-isis-1895"></a>web.xml now much simpler (ISIS-1895)</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
see 'Servlet Context' below
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="membergrouplayout-was-removed"><a class="anchor" href="#membergrouplayout-was-removed"></a>@MemberGroupLayout was removed</h3>

</div>
<div class="sect2">
<h3 id="axon-eventbus-plugin"><a class="anchor" href="#axon-eventbus-plugin"></a>Axon Eventbus Plugin</h3>
<div class="paragraph">
<p>switching from axon 2.x to 3.x which involves that axon&#8217;s <strong>EventHandler</strong> annotation has moved: org.axonframework.eventhandling.annotation.EventHandler &#8594; org.axonframework.eventhandling.EventHandler</p>
</div>
</div>
<div class="sect2">
<h3 id="api-changes"><a class="anchor" href="#api-changes"></a>API Changes</h3>
<div class="ulist">
<ul>
<li>
<p><em>IsisMatchers</em> is no longer part of the 'core' API, but still available within test-scope.</p>
</li>
<li>
<p><em>Ensure</em> as part of the 'core' API now accepts Java Predicates instead of hamcrest Matchers</p>
</li>
<li>
<p>deployment types SERVER_EXPLORATION, UNIT_TESTING have been removed</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="environment"><a class="anchor" href="#environment"></a>Environment</h3>
<div class="paragraph">
<p>Some ways of setting the DeploymentType (using web.xml or WebServer cmd-line flags -t or --type) have been removed. Instead running in PROTOTYPING (exemplified with Jetty) can be done in following ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java"> export PROTOTYPING=true ; mvn jetty:run
 mvn -DPROTOTYPING=true jetty:run
 mvn -Disis.deploymentType=PROTOTYPING jetty:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>We also introduced a SPI to customize this behavior. This issue is tracked by <a href="https://issues.apache.org/jira/browse/ISIS-1991" class="bare">https://issues.apache.org/jira/browse/ISIS-1991</a></p>
</div>
</div>
<div class="sect2">
<h3 id="servlet-context"><a class="anchor" href="#servlet-context"></a>Servlet Context</h3>
<div class="ulist">
<ul>
<li>
<p>web.xml: no longer required to install listeners, filters and servlets; but is still required to configure the welcome page; <em>org.apache.isis.core.webapp.IsisWebAppContextListener</em> acts as the single application entry-point to setup the dynamic part of the ServletContext.</p>
<div class="ulist">
<ul>
<li>
<p>ResourceCachingFilter is now configured via annotations (Servlet 3.0 spec), no longer needed to be declared in web.xml</p>
</li>
<li>
<p>ResourceServlet is now configured via annotations (Servlet 3.0 spec), no longer needed to be declared in web.xml</p>
</li>
<li>
<p>IsisTransactionFilterForRestfulObjects is now configured via annotations (Servlet 3.0 spec), no longer needed to be declared in web.xml</p>
</li>
<li>
<p>webjars Servlet was removed, no longer needed to be declared in web.xml</p>
</li>
<li>
<p>Shiro Environment, no longer needs to be declared in web.xml</p>
</li>
<li>
<p>Wicket Environment, no longer needs to be declared in web.xml</p>
</li>
<li>
<p>RestEasy Environment, no longer needs to be declared in web.xml</p>
</li>
<li>
<p>IsisSessionFilter is now part of the RestEasy WebModule, no longer needs to be declared in web.xml</p>
</li>
<li>
<p>LogOnExceptionLogger, no longer needs to be declared in web.xml</p>
</li>
</ul>
</div>
</li>
<li>
<p>web.xml apart from the new WebContextListener we introduce new web-specific (optional) config values, nothing else needs to configured here:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns="http://xmlns.jcp.org/xml/ns/javaee"
	xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
	id="WebApp_ID" version="3.1"&gt;
	&lt;display-name&gt;My App&lt;/display-name&gt;

	&lt;welcome-file-list&gt;
		&lt;welcome-file&gt;about/index.html&lt;/welcome-file&gt;
	&lt;/welcome-file-list&gt;

	&lt;!-- unique bootstrapping entry-point for web-applications --&gt;
        &lt;listener&gt;
		&lt;listener-class&gt;org.apache.isis.core.webapp.IsisWebAppContextListener&lt;/listener-class&gt;
	&lt;/listener&gt;

	&lt;!-- optional for overriding default 'wicket' --&gt;
	&lt;context-param&gt;
		&lt;param-name&gt;isis.viewer.wicket.basePath&lt;/param-name&gt;
		&lt;param-value&gt;my-wicket&lt;/param-value&gt;
	&lt;/context-param&gt;

	&lt;!-- optional for overriding default 'org.apache.isis.viewer.wicket.viewer.IsisWicketApplication' --&gt;
	&lt;context-param&gt;
		&lt;param-name&gt;isis.viewer.wicket.app&lt;/param-name&gt;
		&lt;param-value&gt;domainapp.webapp.MyDomainApplication&lt;/param-value&gt;
	&lt;/context-param&gt;

	&lt;!-- optional for overriding default 'restful' --&gt;
	&lt;context-param&gt;
		&lt;param-name&gt;isis.viewer.restfulobjects.basePath&lt;/param-name&gt;
		&lt;param-value&gt;my-restful&lt;/param-value&gt;
	&lt;/context-param&gt;

&lt;/web-app&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="module-shiro"><a class="anchor" href="#module-shiro"></a>Module Shiro</h3>
<div class="paragraph">
<p>module 'shiro' moved from <code>/core</code> to <code>/core/plugins</code> and its maven artifactId changed, to be in line with the other core-plugins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
	&lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
	&lt;artifactId&gt;isis-core-plugins-security-shiro&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="objectadapter"><a class="anchor" href="#objectadapter"></a>ObjectAdapter</h3>
<div class="paragraph">
<p>ObjectAdapter is no longer holding a reference to an ObjectSpecification for the element type of collections. ObjectAdapter#getElementSpecification() moved to ObjectSpecification#getElementSpecification().</p>
</div>
</div>
<div class="sect2">
<h3 id="jaxb-xmladapters-isis-1972"><a class="anchor" href="#jaxb-xmladapters-isis-1972"></a>JAXB XmlAdapters (ISIS-1972)</h3>
<div class="paragraph">
<p>We do now provide JAXB XmlAdapters for Java built-in temporal types in 'applib': org.apache.isis.applib.adapters.JaxbAdapters</p>
</div>
</div>
<div class="sect2">
<h3 id="wicket-viewer"><a class="anchor" href="#wicket-viewer"></a>Wicket-Viewer</h3>
<div class="paragraph">
<p>Instead of browser built-in tooltip rendering, the framework now provides tooltips using Javascript and CSS, currently with following stylesheet defaults:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.ui-tooltip {
    max-width: 300px;
    color: rgb(70, 69, 69);
    background-color: WhiteSmoke;
    text-align: center;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    box-shadow: 0 0 7px black;

    position: absolute;
    z-index: 9999;
}

span.isis-component-with-tooltip,
label.isis-component-with-tooltip,
.isis-component-with-tooltip label,
strong.isis-component-with-tooltip  {
   text-decoration: underline dashed;
}

.ui-helper-hidden-accessible { display:none; } /* accessibility support disabled */</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rest-viewer"><a class="anchor" href="#rest-viewer"></a>REST Viewer</h3>
<div class="paragraph">
<p>The content negotiation parameter 'suppress' does now allow more control on which '$$..' properties one wants to suppress. New options are</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static enum SuppressionType {
    /** suppress '$$RO', RO Spec representation*/
    RO,

    /** suppress '$$href', hyperlink to the representation*/
    HREF,

    /** suppress '$$instanceId', instance id of the domain object*/
    ID,

    /** suppress '$$domainType', object spec of the domain object */
    DOMAIN_TYPE,

    /** suppress '$$title', title of the domain object*/
    TITLE,

    /** suppress all '$$...' entries*/
    ALL
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where these are case-insensitive and may be combined to a comma-separated set.
 Eg. to suppress title and href one could simply request</p>
</div>
<div class="listingblock">
<div class="content">
<pre>application/json;profile=urn:org.apache.isis/v1;suppress=title,href</pre>
</div>
</div>
<div class="paragraph">
<p>We do not break the previous behavior with 'suppress=true' being equivalent to 'suppress=ro'</p>
</div>
</div>
<div class="sect2">
<h3 id="new-restfulclient"><a class="anchor" href="#new-restfulclient"></a>new RestfulClient</h3>
<div class="paragraph">
<p>Adds a new JAX-RS 2.0 compliant RestfulClient to core-applib:</p>
</div>
<div class="paragraph">
<p>Client-Side Setup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
	&lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
	&lt;artifactId&gt;isis-core-applib&lt;/artifactId&gt;
	&lt;version&gt;2.0.0-M2-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
	&lt;groupId&gt;javax.ws.rs&lt;/groupId&gt;
	&lt;artifactId&gt;javax.ws.rs-api&lt;/artifactId&gt;
	&lt;version&gt;2.1.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;
	&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;
	&lt;version&gt;2.25.1&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
	&lt;groupId&gt;org.eclipse.persistence&lt;/groupId&gt;
	&lt;artifactId&gt;org.eclipse.persistence.moxy&lt;/artifactId&gt;
	&lt;version&gt;2.6.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Synchronous example with Basic-Auth:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">RestfulClientConfig clientConfig = new RestfulClientConfig();
clientConfig.setRestfulBase("http://localhost:8080/helloworld/restful/");
// setup basic-auth
clientConfig.setUseBasicAuth(true);
clientConfig.setRestfulAuthUser("sven");
clientConfig.setRestfulAuthPassword("pass");

RestfulClient client = RestfulClient.ofConfig(clientConfig);

Builder request = client.request(
				"services/myService/actions/lookupMyObjectById/invoke",
				SuppressionType.setOf(SuppressionType.RO));

Entity&lt;String&gt; args = client.arguments()
		.addActionParameter("id", "12345")
		.build();

Response response = request.post(args);

ResponseDigest&lt;MyObject&gt; digest = client.digest(response, MyObject.class);

if(digest.isSuccess()) {
	System.out.println("result: "+ digest.get().get$$instanceId());
} else {
	digest.getFailureCause().printStackTrace();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Asynchronous example with Basic-Auth:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">RestfulClientConfig clientConfig = new RestfulClientConfig();
clientConfig.setRestfulBase("http://localhost:8080/helloworld/restful/");
// setup basic-auth
clientConfig.setUseBasicAuth(true);
clientConfig.setRestfulAuthUser("sven");
clientConfig.setRestfulAuthPassword("pass");

RestfulClient client = RestfulClient.ofConfig(clientConfig);

Builder request = client.request(
                "services/myService/actions/lookupMyObjectById/invoke",
                SuppressionType.setOf(SuppressionType.RO));

Entity&lt;String&gt; args = client.arguments()
        .addActionParameter("id", "12345")
        .build();

Future&lt;Response&gt; asyncResponse = request
        .async()
        .post(args);

CompletableFuture&lt;ResponseDigest&lt;MyObject&gt;&gt; digestFuture =
                client.digest(asyncResponse, MyObject.class);

ResponseDigest&lt;MyObject&gt; digest = digestFuture.get(); // blocking

if(digest.isSuccess()) {
    System.out.println("result: "+ digest.get().get$$instanceId());
} else {
    digest.getFailureCause().printStackTrace();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="concurrent-computation"><a class="anchor" href="#concurrent-computation"></a>Concurrent Computation</h3>
<div class="paragraph">
<p>Support for concurrent computation within an open session utilizing a ForkJoinPool</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Supplier&lt;T&gt; computation = ()-&gt;doSomeComputation();
CompletableFuture&lt;T&gt; completableFuture = IsisContext.compute(computation);

T result = completableFuture.get(); // blocking call</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configurationservice"><a class="anchor" href="#configurationservice"></a>ConfigurationService</h3>
<div class="paragraph">
<p>ConfigurationService and its internal implementation(s) were removed, instead use IsisConfiguration, which can be retrieved either via injection or static method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Inject IsisConfiguration configuration;
// or
IsisConfiguration configuration = IsisContext.getConfiguration();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-menu"><a class="anchor" href="#configuration-menu"></a>Configuration Menu</h3>
<div class="paragraph">
<p>The Configuration Menu within the UI now uses its own (and completely separated) interface, that handles masking of sensitive values (eg. passwords):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.apache.isis.applib.services.confview;

public interface ConfigurationViewService {
    /**
     * Returns all properties, each as an instance of {@link ConfigurationProperty} (a view model).
     * Mask sensitive values if required.
     */
    Set&lt;ConfigurationProperty&gt; allProperties();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="postconstuct"><a class="anchor" href="#postconstuct"></a>@PostConstuct</h3>
<div class="paragraph">
<p><em>@PostConstuct</em> methods declared with domain objects no longer get passed over the IsisConfiguration. For now only zero-arg initializers are supported. (We might re-add parameter support, this is work in progress)</p>
</div>
</div>
<div class="sect2">
<h3 id="wicket-viewer-2"><a class="anchor" href="#wicket-viewer-2"></a>Wicket-Viewer</h3>
<div class="sect3">
<h4 id="custom-theme-providers-isis-2047"><a class="anchor" href="#custom-theme-providers-isis-2047"></a>custom theme providers (ISIS-2047)</h4>
<div class="paragraph">
<p>Customize the ThemeChooser by providing your own implementation of IsisWicketThemeSupport</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface IsisWicketThemeSupport {
    ThemeProvider getThemeProvider();
    List&lt;String&gt; getEnabledThemeNames();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>to be configured using</p>
</div>
<div class="listingblock">
<div class="content">
<pre>isis.viewer.wicket.themes.provider=org.my.IsisWicketThemeSupport</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="removed-o-a-i-webserver-isis-2067"><a class="anchor" href="#removed-o-a-i-webserver-isis-2067"></a>Removed o.a.i.WebServer (ISIS-2067)</h3>
<div class="paragraph">
<p>might need to reinstate, or long-term will have SpringBoot etc do the bootstrapping.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="1-x-to-2-0-0-m1"><a class="anchor" href="#1-x-to-2-0-0-m1"></a>1.x to 2.0.0-M1</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="java-time-support-isis-1636"><a class="anchor" href="#java-time-support-isis-1636"></a>java.time support (ISIS-1636)</h3>
<div class="paragraph">
<p>The framework supports following temporal values from the Java Time API (and Joda):</p>
</div>
<div class="sect3">
<h4 id="date-only"><a class="anchor" href="#date-only"></a>Date only</h4>
<div class="ulist">
<ul>
<li>
<p>java.sql.Date</p>
</li>
<li>
<p>java.time.LocalDate (since 2.0.0-M1)</p>
</li>
<li>
<p>org.joda.time.LocalDate</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="date-and-time"><a class="anchor" href="#date-and-time"></a>Date and Time</h4>
<div class="ulist">
<ul>
<li>
<p>java.util.Date</p>
</li>
<li>
<p>java.sql.Timestamp</p>
</li>
<li>
<p>java.time.LocalDateTime (since 2.0.0-M1)</p>
</li>
<li>
<p>java.time.OffsetDateTime (since 2.0.0-M1)</p>
</li>
<li>
<p>org.joda.time.DateTime</p>
</li>
<li>
<p>org.joda.time.LocalDateTime</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="view-model-example"><a class="anchor" href="#view-model-example"></a>View Model Example</h4>
<div class="paragraph">
<p>If used with JAXB View Models, you need to specify specific XmlAdapters as provided by org.apache.isis.applib.util.JaxbAdapters.*. See this JAXB Viewmodel example using lombok:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@XmlRootElement(name = "Demo")
@XmlType
@XmlAccessorType(XmlAccessType.FIELD)
@DomainObject(nature=Nature.VIEW_MODEL)
public class TemporalDemo {

    // -- DATE ONLY (LOCAL TIME)

    @XmlElement @XmlJavaTypeAdapter(SqlDateAdapter.class)
    @Getter @Setter private java.sql.Date javaSqlDate;

    @XmlElement @XmlJavaTypeAdapter(LocalDateAdapter.class)
    @Getter @Setter private LocalDate javaLocalDate;

    // -- DATE AND TIME (LOCAL TIME)

    @XmlElement @XmlJavaTypeAdapter(DateAdapter.class)
    @Getter @Setter private Date javaUtilDate;

    @XmlElement @XmlJavaTypeAdapter(SqlTimestampAdapter.class)
    @Getter @Setter private java.sql.Timestamp javaSqlTimestamp;

    @XmlElement @XmlJavaTypeAdapter(LocalDateTimeAdapter.class)
    @Getter @Setter private LocalDateTime javaLocalDateTime;

    // -- DATE AND TIME (WITH TIMEZONE OFFSET)

    @XmlElement @XmlJavaTypeAdapter(OffsetDateTimeAdapter.class)
    @Getter @Setter private OffsetDateTime javaOffsetDateTime;

    // --

    public void initDefaults() {

        log.info("TemporalDemo::initDefaults");

        javaUtilDate = new Date();
        javaSqlDate = new java.sql.Date(System.currentTimeMillis());
        javaSqlTimestamp = new java.sql.Timestamp(System.currentTimeMillis());

        javaLocalDate = LocalDate.now();
        javaLocalDateTime = LocalDateTime.now();
        javaOffsetDateTime = OffsetDateTime.now();
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="web-docker-isis-1969"><a class="anchor" href="#web-docker-isis-1969"></a>web-docker (ISIS-1969)</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
TODO - To document, in particular how to use in the helloworld/simpleapp archetypes.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>NB: ISIS-1969: the Docker image isn&#8217;t yet being released, pending <a href="https://issues.apache.org/jira/browse/INFRA-17518">INFRA-17518</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="plugin-architecture-isis-1753-and-others"><a class="anchor" href="#plugin-architecture-isis-1753-and-others"></a>Plugin architecture (ISIS-1753 and others)</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
TODO &#8230;&#8203;
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>describe the plugin architecture in general, use of ServiceLoader etc</p>
</li>
<li>
<p>describe in particular the event bus plugin architecture (ISIS-1753)</p>
</li>
<li>
<p>describe in particular the other plugins (objectstore, security, resteasy, bytecode enhancement, &#8230;&#8203;)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="ticket-for-errorreportingservice-is-now-an-interface-not-a-class-isis-1955"><a class="anchor" href="#ticket-for-errorreportingservice-is-now-an-interface-not-a-class-isis-1955"></a>Ticket (for ErrorReportingService) is now an interface, not a class (ISIS-1955)</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
TODO - &#8230;&#8203; and so any concrete implementations will need to be changed
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="override-hsqldb-for-integtests-isis-1958"><a class="anchor" href="#override-hsqldb-for-integtests-isis-1958"></a>Override hsqldb for integtests (ISIS-1958)</h3>
<div class="paragraph">
<p>sample usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class MyIntegTestAbstract extends IntegrationTestJupiter {

  public MyIntegTestAbstract() {
    super(new MyModule()
      .withAdditionalModules( /* ... */)
      // ...
      .withConfigurationProperties(databaseConfigForTest())
    );
  }

  private static Map&lt;String, String&gt; databaseConfigForTest() {
    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();

    // for refernce see AppManifest.Util.withJavaxJdoRunInMemoryProperties(map)

    map.put(AppManifest.Util.ISIS_PERSISTOR_DATANUCLEUS_IMPL + "javax.jdo.option.ConnectionURL", "jdbc:mariadb://127.0.0.1/demo");
    map.put(AppManifest.Util.ISIS_PERSISTOR_DATANUCLEUS_IMPL + "javax.jdo.option.ConnectionDriverName", "org.mariadb.jdbc.MariaDbDataSource");
    map.put(AppManifest.Util.ISIS_PERSISTOR_DATANUCLEUS_IMPL + "javax.jdo.option.ConnectionUserName", "sven");
    map.put(AppManifest.Util.ISIS_PERSISTOR_DATANUCLEUS_IMPL + "javax.jdo.option.ConnectionPassword", "pass");

    return map;
  }
  ...

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reworked-o-a-i-webserver-isis-1067"><a class="anchor" href="#reworked-o-a-i-webserver-isis-1067"></a>Reworked o.a.i.WebServer (ISIS-1067)</h3>
<div class="paragraph">
<p>Changed parameter flags:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-m</code>, <code>--manifest</code>, <code>--appManifest</code></p>
</li>
<li>
<p><code>-d</code>, <code>--dev</code>, <code>--prototype</code></p>
</li>
<li>
<p><code>-p</code>, <code>--port</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Not other flags supported.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright  2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20200112-0400-26d48ff7</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hideEffect: "slideUp",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
