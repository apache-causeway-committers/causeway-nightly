<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>From v1.12.x to 1.13.0 :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../starters/helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="../../starters/simpleapp/about.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">User</span>
            <a class="navbar-item" href="../../userguide/about.html">User Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Reference</span>
            <a class="navbar-item" href="../../refguide/about.html">Reference Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Testing</span>
            <a class="navbar-item" href="../../testing/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../odn/about.html">DataNucleus Object Store</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Catalogs</span>
            <a class="navbar-item" href="../../extensions/about.html">Extensions Catalog</a>
            <a class="navbar-item" href="../../incubator/about.html">Incubator Catalog</a>
            <a class="navbar-item" href="../../legacy/about.html">Legacy Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../toc/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../toc/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="../../toc/mavendeps/about.html">Maven dependencies</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Releases</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="../../mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Internal</span>
            <a class="navbar-item" href="../../toc/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/about.html">Core Framework</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../toc/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="toc" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html"> </a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">What is Apache Isis?</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/isis-in-pictures.html">Apache Isis in pictures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/common-use-cases.html">Common Use Cases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/screencasts.html">Screencasts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../what-is-apache-isis/powered-by.html">Powered By</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Starter Apps</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/apache/isis-app-helloworld">HelloWorld</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://github.com/apache/isis-app-simpleapp">SimpleApp</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Demos &amp; Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../demoapp/about.html">Demo App</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../userguide/about.html">User Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../refguide/about.html">Reference Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../security/about.html">Security Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../secman/about.html">SecMan (extension)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../testing/about.html">Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Components</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../vw/about.html">Wicket UI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../vro/about.html">Restful Objects (REST API)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../pjdo/about.html">DataNucleus Object Store</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Catalogs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../extensions/about.html">Extensions Catalog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../incubator/about.html">Incubator Catalog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../legacy/about.html">Legacy Catalog</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Support</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../support/slack-channel.html">Slack</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../support/mailing-list.html">Mailing Lists</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="https://issues.apache.org/jira/secure/RapidBoard.jspa?rapidView=87">ASF JIRA</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../devguide/about.html">Developers' Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../mavendeps/about.html">Maven Dependencies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="http://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Releases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../downloads/how-to.html">Downloads</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../relnotes/about.html">Release Notes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about.html">Migration Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Internal</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../comguide/about.html">Committers' Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../comguide/about.html#cutting-a-release">Cutting a Release</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../comguide/about.html#verifying-releases">Verifying a Release</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/about.html">Core Framework</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../more-thanks/more-thanks.html">Acknowledgements</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title"> </span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../pjdo/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../incubator/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../legacy/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">SecMan</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../secman/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter Apps</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../starters/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorial App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html"> </a></li>
    <li><a href="mn-1.12.0-to-1.13.0.html">From v1.12.x to 1.13.0</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/antora/components/toc/modules/mignotes/pages/mn-1.12.0-to-1.13.0.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">From v1.12.x to 1.13.0</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Most applications written against v1.12.x should run against v1.13.0 with few if any changes.
That said, this release has removed a small number of features that were dependent on internal APIs, and some configuration properties are
now removed/unsupported.
We therefore do recommend that you read and keep in mind these notes when you upgrade your app.</p>
</div>
<div class="paragraph">
<p>If you <strong>do</strong> encounter any difficulties then let us know via the <a href="https://isis.apache.org/versions/1.13.0/support.html#">users mailing list</a>, so we can
support you and document issues here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-changes"><a class="anchor" href="#command-changes"></a>Command changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main feature in <code>1.13.0</code> is the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#<em>rgsvc_application-layer-api_InteractionContext"><code>InteractionContext</code></a> domain service to represent an action invocation/property edit, with the re-positioning of <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-api_CommandContext"><code>CommandContext</code></a> to represent the _intention</em> to invoke an action/edit a property.
You can read more about this design in the reference guide on domain services, in the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#__rgsvc_intro_commands-and-events">commands and events</a> section.</p>
</div>
<div class="paragraph">
<p>This refactoring completely overhauls the structure of the XML mementos passed to <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-spi_CommandService"><code>CommandService</code></a> (to persist) and to <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-spi_BackgroundCommandService"><code>BackgroundCommandService</code></a> (to invoke persisted commands in the background).
If you are using these services then ensure that there are no pending commands at the point at which you cut-over.
If you have any code that makes assumptions on the format of the XML, it will also need to be rewritten.
Note that the XML which is persisted henceforth is well-defined and any future changes to it will be backward compatible; see <a href="https://isis.apache.org/versions/1.13.0/guides/rgcms/rgcms.html#_rgcms_schema">schema reference guide</a>.
In fact, there are three schema: for commands (<code>cmd.xsd</code>), inteactions (<code>ixn.xsd</code>) and for changes (<code>chg.xsd</code>).
These replace the earlier <code>aim.xsd</code> schema (which was an amalgam of <code>cmd.xsd</code> and <code>ixn.xsd</code>).</p>
</div>
<div class="paragraph">
<p>The reworked <code>CommandService</code> now properly supports property edits in the exact same way as action invocations.</p>
</div>
<div class="paragraph">
<p>As a side-effect of this work, note also that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>CommandService#startTransaction(&#8230;&#8203;)</code> SPI is <strong>NO LONGER CALLED</strong> by the framework.</p>
</li>
<li>
<p>the <code>BackgroundService#asActionInvocationMemento(&#8230;&#8203;)</code> (not formally part of the API) is also no longer called by the framework; moreover the default implementation now throws an exception to this effect.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="auditing"><a class="anchor" href="#auditing"></a>Auditing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditingService"><code>AuditingService</code></a> SPI service has been deprecated, instead replaced by the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditerService"><code>AuditerService</code></a>.</p>
</div>
<div class="paragraph">
<p>There can be more than one implementation of this new SPI, and a framework-provided implementation (<code>AuditerServiceLogging</code>) will log to a file.
The (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a>'s audit module also implements the new SPI.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publishing"><a class="anchor" href="#publishing"></a>Publishing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublishingService"><code>PublishingService</code></a> SPI service and its supporting <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_EventSerializer"><code>EventSerializer</code></a> domain service, have both deprecated, instead replaced by the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublisherService"><code>PublisherService</code></a>.</p>
</div>
<div class="paragraph">
<p>There can be more than one implementation of this new SPI, and a framework-provided implementation (<code>PublisherServiceLogging</code>) will log to a file.
The (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a>'s publishmq module also implements the new SPI.</p>
</div>
<div class="paragraph">
<p>The new service also supports the notion of published property edits; the new <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Property_publishing"><code>@Property#publishing()</code></a> annotation attribute can be used to specify.
The ` isis.services.publish.properties` configuration property can be used to specify a fallback default for properties where the attribute is not set explicitly.</p>
</div>
<div class="paragraph">
<p>Conversely, neither the <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Action_publishingPayloadFactory"><code>@Action#publishingPayloadFactory()</code></a> nor the <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-DomainObject_publishingPayloadFactory"><code>@DomainObject#publishingPayloadFactory()</code></a> are supported by <code>PublisherService</code>; instead the consumers of the events are expected to callback for any additional information, eg using <a href="https://isis.apache.org/versions/1.13.0/guides/ugvro/ugvro.html#">Resful Objects</a> viewer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="auto-logout"><a class="anchor" href="#auto-logout"></a>Auto-logout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The new configuration property <code>isis.authentication.shiro.autoLogoutIfAlreadyAuthenticated</code> (documented more fully in the  <a href="https://isis.apache.org/versions/1.13.0/guides/ugsec/ugsec.html#_ugsec_configuring-isis-to-use-shiro">security guide</a>) is by default set to false, thereby disabling auto-logout behaviour that is believed to be the root cause of some exceptions thrown by the <a href="https://isis.apache.org/versions/1.13.0/guides/ugvro/ugvro.html#">Restful Objects viewer</a> during a race condition.
The <strong>previous behaviour can be re-enabled</strong> by setting to <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="safe-rememberme-cookies"><a class="anchor" href="#safe-rememberme-cookies"></a>Safe 'rememberMe' cookies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis leverages <a href="http://wicket.apache.org">Apache Wicket</a>'s rememberMe support which holds remembered user/passwords in an encrypted cookie.</p>
</div>
<div class="paragraph">
<p>If a hard-coded and publicly known value were to be used (as was the case prior to <code>1.13.0</code>), then it would be possible for rememberMe user/password to be intercepted and decrypted, possibly compromising access.
The <code>isis.viewer.wicket.rememberMe.encryptionKey</code> configuration property therefore allows a private key to be specified, baked into the application.</p>
</div>
<div class="paragraph">
<p>If no value is set then (for safety) a random UUID will be used as the encryption key.
(The net effect of this fallback behaviour is that 'rememberMe' will work, but only until the webapp is restarted (after which the end-user will have to log in again).</p>
</div>
<div class="paragraph">
<p>Related, the <code>isis.viewer.wicket.suppressRememberMe</code> configuration property has been replaced by <code>isis.viewer.wicket.rememberMe.suppress</code> (though the old configuration property is still supported).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom-programming-models"><a class="anchor" href="#custom-programming-models"></a>Custom programming models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In previous releases the <code>isis.reflector.facets</code> configuration property could be used to specify a new implementation
of the (internal) <code>ProgrammingModel</code> API.  This configuration property is no longer supported.  See the
<a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_programming-model_finetuning">beyond the basics</a> guide for an alternative broadly equivalent
approach.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="injectxxx-no-longer-supported"><a class="anchor" href="#injectxxx-no-longer-supported"></a>injectXxx() no longer supported</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis automatically injects domain services into other domain objects, supporting the
<a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Inject"><code>@Inject</code></a> annotation, also injection to <code>set&#8230;&#8203;()</code> setter methods and finally injection
into <code>inject&#8230;&#8203;()</code> methods.  This last method is now no longer supported by default.  It can be re-enabled if necessary
using the <code>isis.services.injector.injectPrefix</code> configuration property.</p>
</div>
<div class="paragraph">
<p>It is also possible to disable injection to <code>set&#8230;&#8203;()</code> methods (using the <code>isis.services.injector.setPrefix</code>
configuration property), though this is enabled by default.</p>
</div>
<div class="paragraph">
<p>Disabling auto-wiring has a positive impact on bootstrap times, as well as standarding Apache Isis' conventions to be
more in line with JEE.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="optionally-ignore-deprecated-facets"><a class="anchor" href="#optionally-ignore-deprecated-facets"></a>Optionally ignore deprecated facets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>isis.reflector.facets.ignoreDeprecated</code> configuration property indicates whether to continue to honour or to simply
ignore any deprecated annotations and other semantics that make up the programming model.</p>
</div>
<div class="paragraph">
<p>This is disabled by default, in other words deprecated facets continue to be recognized.  Be aware that enabling this
setting could substantially alter the semantics of your application.  To be safe, we recommend that you first run the
application using <code>isis.reflector.validator.allowDeprecated</code> set to <code>false</code>; if any deprecated annotations etc. are
in use, then the app will fail-fast and refuse to start.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="applicationfeaturerepository"><a class="anchor" href="#applicationfeaturerepository"></a>ApplicationFeatureRepository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>isis.services.applicationFeatures.init</code> configuration property is used to control whether the
<a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_metadata-api_ApplicationFeatureRepository"><code>ApplicationFeatureRepository</code></a> domain service lazily or
eagerly initializes itself based on the framework&#8217;s internal metamodel.</p>
</div>
<div class="paragraph">
<p>Previously this service eagerly initialized itself, causing the framework to have to traverse the domain object
model graph for all types, noticeably increasing the bootstrap time.  For <code>1.13.0</code> this service now initializes itself
lazily.  The previous behaviour (of eager initialization) can be re-enabled by setting this property to <code>eager</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integration-testing"><a class="anchor" href="#integration-testing"></a>Integration testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two sets of changes relating to integration tests.</p>
</div>
<div class="sect2">
<h3 id="builder"><a class="anchor" href="#builder"></a>Builder</h3>
<div class="paragraph">
<p>The <code>IsisSystemForTest.Builder</code> class is used to <a href="https://isis.apache.org/versions/1.13.0/guides/ugtst/ugtst.html#_ugtst_integ-test-support_bootstrapping">bootstrap integration tests</a>.</p>
</div>
<div class="paragraph">
<p>A number of the clauses within this class have been removed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>with(PersistenceMechanismInstaller persistenceMechanismInstaller)</code><br></p>
<div class="paragraph">
<p>Apache Isis has for many releases only supported a single implementation of persistence mechanism (JDO/DataNucleus),
so this builder method is redundant.</p>
</div>
</li>
<li>
<p><code>with(ProgrammingModel programmingModel)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getConfiguration()</code> to <a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_programming-model_finetuning">include/exclude facets</a></p>
</div>
</li>
<li>
<p><code>with(MetaModelValidator metaModelValidator)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getConfiguration()</code> to specify a <a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_programming-model_custom-validator">custom validator</a>.</p>
</div>
</li>
<li>
<p><code>withServicesIn(String&#8230;&#8203; packagePrefixes)</code> and <code>withServices(Object&#8230;&#8203; services)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getAdditionalServices()</code></p>
</div>
</li>
<li>
<p><code>withFixtures(InstallableFixture&#8230;&#8203; fixtures)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getFixtures()</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="centralizing-configuration"><a class="anchor" href="#centralizing-configuration"></a>Centralizing configuration</h3>
<div class="paragraph">
<p>Previously when bootstrapping the integration tests, the <code>IsisConfigurationForJdoIntegTests</code> was provided as a custom
implementation of <code>IsisConfiguration</code>, providing a number of configuration settings specifically for running
integration tests (eg run using an in-memory database).  This design split the responsiblity of providing the
configuration properties between that class and <code>AppManifest</code>.</p>
</div>
<div class="paragraph">
<p>A new <code>AppManifest.Util</code> helper class now allows these responsibilities to belong exlusively to the <code>AppManifest</code>.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DomainAppSystemInitializer {
    public static void initIsft() {
        IsisSystemForTest isft = IsisSystemForTest.getElseNull();
        if(isft == null) {
            isft = new IsisSystemForTest.Builder()
                    .withLoggingAt(org.apache.log4j.Level.INFO)
                    .with(new DomainAppAppManifest() {
                        @Override
                        public Map&lt;String, String&gt; getConfigurationProperties() {
                            final Map&lt;String, String&gt; map = Maps.newHashMap();
                            Util.withJavaxJdoRunInMemoryProperties(map);
                            Util.withDataNucleusProperties(map);
                            Util.withIsisIntegTestProperties(map);
                            return map;
                        }
                    })
                    .build();
            isft.setUpSystem();
            IsisSystemForTest.set(isft);
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web-xml"><a class="anchor" href="#web-xml"></a>web.xml</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the <a href="../../userguide/btb/web-xml.html" class="page">web.xml</a>, the "isis.viewers" context-param is now ignored.
Instead the <code>viewer_wicket.properties</code> and <code>viewer_restfulobjects.properties</code> will both be loaded if present (but neither need be present).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hastransactionid-mixin"><a class="anchor" href="#hastransactionid-mixin"></a><code>HasTransactionId</code> mixin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgcms/rgcms.html#_rgcms_classes_mixins_HasTransactionId"><code>HasTransactionId</code></a> mixin interface has subtly changed its meaning (and is now somewhat mis-named).  Prior to <code>1.13.0</code>, this identifier was the GUID of the Isis transaction in which the object was created.  As of <code>1.13.0</code>, this identifier actually is for the request/interaction (as per the new <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-api_InteractionContext"><code>InteractionContext</code></a> service) in which the object was created.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="notable-new-features"><a class="anchor" href="#notable-new-features"></a>Notable new features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are new features so do not impact in themselves impact any migration effort, but you may wish to start taking advantage of once you have upgraded.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Nullable</code> annotation</p>
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Nullable"><code>@Nullable</code></a> annotation can now be used to specify the optionality of properties and parameters.</p>
</div>
</li>
<li>
<p><code>ActionDomainEvent</code> for mixins</p>
<div class="paragraph">
<p>Previously it was not possible to discover the mixed-in domain object when an <code>ActionDomainEvent</code> was raised by a mixin action.
This is now possible, through the <a href="https://isis.apache.org/versions/1.13.0/guides/rgcms/rgcms.html#_rgcms_classes_domainevent_ActionDomainEvent"><code>mixedIn()</code></a> method.</p>
</div>
</li>
<li>
<p><code>Blob</code> and <code>Clob</code> file types</p>
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Property_fileAccept"><code>@Property#fileAccept()</code></a> and <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Parameter-fileAccept"><code>@Parameter#fileAccept()</code></a> annotation attributes can be used to hint at the file type to upload for a blob or clob.</p>
</div>
</li>
<li>
<p>Live reloading</p>
<div class="paragraph">
<p>The <code>isis.viewer.wicket.liveReloadUrl</code> configuration property allows live reloading of objects if the layout is updated, reducing feedback times.
Further guidance on setting this up can be found <a href="https://isis.apache.org/versions/1.13.0/guides/dg/dg.html#__dg_ide_intellij_advanced_gradle-liveReload">here</a>.</p>
</div>
</li>
<li>
<p>Docker support</p>
<div class="paragraph">
<p>The <code>overrides.properties</code> configuration file, if present, is loaded last as the configuration property file, with its contents overriding any previously defined configuration properties.
This simple idea makes it easy to create Docker container images; see <a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_deployment_docker">here</a> for further discussion.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20191228-0402-2cf6d152</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hideEffect: "slideUp",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
