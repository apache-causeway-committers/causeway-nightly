<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>From v1.12.x to 1.13.0 :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
<link rel="home" href="../../../.." title="Apache Isis">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">
          <span class="icon">
            <img src="../../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../../docs/latest/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../../docs/latest/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../../docs/latest/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../../docs/latest/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../../docs/latest/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../../setupguide/latest/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../../userguide/latest/about.html">User Guide</a>
            <a class="navbar-item" href="../../../../refguide/latest/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../../testing/latest/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../../subdomains/latest/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../../../valuetypes/latest/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../../../mappings/latest/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../../../incubator/latest/about.html">Incubator</a>
            <a class="navbar-item" href="../../../../legacy/latest/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../../vw/latest/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../../../vro/latest/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../../security/latest/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../../pjdo/latest/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../../../extensions/latest/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../../docs/latest/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../../docs/latest/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../../docs/latest/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../../relnotes/latest/about.html">Release Notes</a>
            <a class="navbar-item" href="../../../../docs/latest/archive/1-x.html">Archive (1.x)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../../../conguide/latest/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../../../comguide/latest/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../../core/latest/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../../docs/latest/about.html">
          <span class="icon">
            <img src="../../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="relnotes" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous disabled" rel="prev" href="" title=""><span></span></a>
  <a class="page-next disabled" rel="next"
     href="" title=""><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title=""><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../about.html">Release Notes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2019</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2019/2.0.0-M2/relnotes.html">2.0.0-M2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2019/1.17.0/relnotes.html">1.17.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2018</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/2.0.0-M1/relnotes.html">2.0.0-M1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/1.16.2/relnotes.html">1.16.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/1.16.1/relnotes.html">1.16.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2018/1.16.0/relnotes.html">1.16.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2017</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2017/1.15.1/relnotes.html">1.15.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2017/1.15.0/relnotes.html">1.15.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2017/1.14.0/relnotes.html">1.14.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2017/1.13.2.1/relnotes.html">1.13.2.1</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2016</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../1.13.2/relnotes.html">1.13.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../1.13.1/relnotes.html">1.13.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="relnotes.html">1.13.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../1.12.2/relnotes.html">1.12.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../1.12.1/relnotes.html">1.12.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../1.12.0/relnotes.html">1.12.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../1.11.1/relnotes.html">1.11.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../1.11.0/relnotes.html">1.11.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2015</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2015/1.10.0/relnotes.html">1.10.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2015/1.9.0/relnotes.html">1.9.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#relnotes:ROOT:2014/1.8.0/relnotes.adoc">1.8.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2014</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2014/1.7.0/relnotes.html">1.7.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2014/1.6.0/relnotes.html">1.6.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2014/1.5.0/relnotes.html">1.5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2014/1.4.1/relnotes.html">1.4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2014/1.4.0/relnotes.html">1.4.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2013</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2013/1.3.1/relnotes.html">1.3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2013/1.3.0/relnotes.html">1.3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2013/1.2.0/relnotes.html">1.2.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2013/1.1.0/relnotes.html">1.1.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2013/1.0.1/relnotes.html">1.0.1</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2012</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../2012/1.0.0/relnotes.html">1.0.0</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Release Notes</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../mappings/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../legacy/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../subdomains/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../userguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../about.html">Release Notes</a></li>
    <li><a href="mignotes.html">From v1.12.x to 1.13.0</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/antora/components/relnotes/modules/ROOT/pages/2016/1.13.0/mignotes.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">From v1.12.x to 1.13.0</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Most applications written against v1.12.x should run against v1.13.0 with few if any changes.
That said, this release has removed a small number of features that were dependent on internal APIs, and some configuration properties are
now removed/unsupported.
We therefore do recommend that you read and keep in mind these notes when you upgrade your app.</p>
</div>
<div class="paragraph">
<p>If you <strong>do</strong> encounter any difficulties then let us know via the <a href="https://isis.apache.org/versions/1.13.0/support.html#">users mailing list</a>, so we can
support you and document issues here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-changes"><a class="anchor" href="#command-changes"></a>Command changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main feature in <code>1.13.0</code> is the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#<em>rgsvc_application-layer-api_InteractionContext"><code>InteractionContext</code></a> domain service to represent an action invocation/property edit, with the re-positioning of <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-api_CommandContext"><code>CommandContext</code></a> to represent the _intention</em> to invoke an action/edit a property.
You can read more about this design in the reference guide on domain services, in the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#__rgsvc_intro_commands-and-events">commands and events</a> section.</p>
</div>
<div class="paragraph">
<p>This refactoring completely overhauls the structure of the XML mementos passed to <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-spi_CommandService"><code>CommandService</code></a> (to persist) and to <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-spi_BackgroundCommandService"><code>BackgroundCommandService</code></a> (to invoke persisted commands in the background).
If you are using these services then ensure that there are no pending commands at the point at which you cut-over.
If you have any code that makes assumptions on the format of the XML, it will also need to be rewritten.
Note that the XML which is persisted henceforth is well-defined and any future changes to it will be backward compatible; see <a href="https://isis.apache.org/versions/1.13.0/guides/rgcms/rgcms.html#_rgcms_schema">schema reference guide</a>.
In fact, there are three schema: for commands (<code>cmd.xsd</code>), inteactions (<code>ixn.xsd</code>) and for changes (<code>chg.xsd</code>).
These replace the earlier <code>aim.xsd</code> schema (which was an amalgam of <code>cmd.xsd</code> and <code>ixn.xsd</code>).</p>
</div>
<div class="paragraph">
<p>The reworked <code>CommandService</code> now properly supports property edits in the exact same way as action invocations.</p>
</div>
<div class="paragraph">
<p>As a side-effect of this work, note also that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>CommandService#startTransaction(&#8230;&#8203;)</code> SPI is <strong>NO LONGER CALLED</strong> by the framework.</p>
</li>
<li>
<p>the <code>BackgroundService#asActionInvocationMemento(&#8230;&#8203;)</code> (not formally part of the API) is also no longer called by the framework; moreover the default implementation now throws an exception to this effect.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="auditing"><a class="anchor" href="#auditing"></a>Auditing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditingService"><code>AuditingService</code></a> SPI service has been deprecated, instead replaced by the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_AuditerService"><code>AuditerService</code></a>.</p>
</div>
<div class="paragraph">
<p>There can be more than one implementation of this new SPI, and a framework-provided implementation (<code>AuditerServiceLogging</code>) will log to a file.
The (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a>'s audit module also implements the new SPI.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publishing"><a class="anchor" href="#publishing"></a>Publishing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublishingService"><code>PublishingService</code></a> SPI service and its supporting <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_EventSerializer"><code>EventSerializer</code></a> domain service, have both deprecated, instead replaced by the <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_persistence-layer-spi_PublisherService"><code>PublisherService</code></a>.</p>
</div>
<div class="paragraph">
<p>There can be more than one implementation of this new SPI, and a framework-provided implementation (<code>PublisherServiceLogging</code>) will log to a file.
The (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a>'s publishmq module also implements the new SPI.</p>
</div>
<div class="paragraph">
<p>The new service also supports the notion of published property edits; the new <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Property_publishing"><code>@Property#publishing()</code></a> annotation attribute can be used to specify.
The ` isis.services.publish.properties` configuration property can be used to specify a fallback default for properties where the attribute is not set explicitly.</p>
</div>
<div class="paragraph">
<p>Conversely, neither the <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Action_publishingPayloadFactory"><code>@Action#publishingPayloadFactory()</code></a> nor the <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-DomainObject_publishingPayloadFactory"><code>@DomainObject#publishingPayloadFactory()</code></a> are supported by <code>PublisherService</code>; instead the consumers of the events are expected to callback for any additional information, eg using <a href="https://isis.apache.org/versions/1.13.0/guides/ugvro/ugvro.html#">Resful Objects</a> viewer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="auto-logout"><a class="anchor" href="#auto-logout"></a>Auto-logout</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The new configuration property <code>isis.authentication.shiro.autoLogoutIfAlreadyAuthenticated</code> (documented more fully in the  <a href="https://isis.apache.org/versions/1.13.0/guides/ugsec/ugsec.html#_ugsec_configuring-isis-to-use-shiro">security guide</a>) is by default set to false, thereby disabling auto-logout behaviour that is believed to be the root cause of some exceptions thrown by the <a href="https://isis.apache.org/versions/1.13.0/guides/ugvro/ugvro.html#">Restful Objects viewer</a> during a race condition.
The <strong>previous behaviour can be re-enabled</strong> by setting to <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="safe-rememberme-cookies"><a class="anchor" href="#safe-rememberme-cookies"></a>Safe 'rememberMe' cookies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis leverages <a href="http://wicket.apache.org">Apache Wicket</a>'s rememberMe support which holds remembered user/passwords in an encrypted cookie.</p>
</div>
<div class="paragraph">
<p>If a hard-coded and publicly known value were to be used (as was the case prior to <code>1.13.0</code>), then it would be possible for rememberMe user/password to be intercepted and decrypted, possibly compromising access.
The <code>isis.viewer.wicket.rememberMe.encryptionKey</code> configuration property therefore allows a private key to be specified, baked into the application.</p>
</div>
<div class="paragraph">
<p>If no value is set then (for safety) a random UUID will be used as the encryption key.
(The net effect of this fallback behaviour is that 'rememberMe' will work, but only until the webapp is restarted (after which the end-user will have to log in again).</p>
</div>
<div class="paragraph">
<p>Related, the <code>isis.viewer.wicket.suppressRememberMe</code> configuration property has been replaced by <code>isis.viewer.wicket.rememberMe.suppress</code> (though the old configuration property is still supported).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom-programming-models"><a class="anchor" href="#custom-programming-models"></a>Custom programming models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In previous releases the <code>isis.reflector.facets</code> configuration property could be used to specify a new implementation
of the (internal) <code>ProgrammingModel</code> API.  This configuration property is no longer supported.  See the
<a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_programming-model_finetuning">beyond the basics</a> guide for an alternative broadly equivalent
approach.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="injectxxx-no-longer-supported"><a class="anchor" href="#injectxxx-no-longer-supported"></a>injectXxx() no longer supported</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis automatically injects domain services into other domain objects, supporting the
<a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Inject"><code>@Inject</code></a> annotation, also injection to <code>set&#8230;&#8203;()</code> setter methods and finally injection
into <code>inject&#8230;&#8203;()</code> methods.  This last method is now no longer supported by default.  It can be re-enabled if necessary
using the <code>isis.services.injector.injectPrefix</code> configuration property.</p>
</div>
<div class="paragraph">
<p>It is also possible to disable injection to <code>set&#8230;&#8203;()</code> methods (using the <code>isis.services.injector.setPrefix</code>
configuration property), though this is enabled by default.</p>
</div>
<div class="paragraph">
<p>Disabling auto-wiring has a positive impact on bootstrap times, as well as standarding Apache Isis' conventions to be
more in line with JEE.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="optionally-ignore-deprecated-facets"><a class="anchor" href="#optionally-ignore-deprecated-facets"></a>Optionally ignore deprecated facets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>isis.reflector.facets.ignoreDeprecated</code> configuration property indicates whether to continue to honour or to simply
ignore any deprecated annotations and other semantics that make up the programming model.</p>
</div>
<div class="paragraph">
<p>This is disabled by default, in other words deprecated facets continue to be recognized.  Be aware that enabling this
setting could substantially alter the semantics of your application.  To be safe, we recommend that you first run the
application using <code>isis.reflector.validator.allowDeprecated</code> set to <code>false</code>; if any deprecated annotations etc. are
in use, then the app will fail-fast and refuse to start.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="applicationfeaturerepository"><a class="anchor" href="#applicationfeaturerepository"></a>ApplicationFeatureRepository</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>isis.services.applicationFeatures.init</code> configuration property is used to control whether the
<a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_metadata-api_ApplicationFeatureRepository"><code>ApplicationFeatureRepository</code></a> domain service lazily or
eagerly initializes itself based on the framework&#8217;s internal metamodel.</p>
</div>
<div class="paragraph">
<p>Previously this service eagerly initialized itself, causing the framework to have to traverse the domain object
model graph for all types, noticeably increasing the bootstrap time.  For <code>1.13.0</code> this service now initializes itself
lazily.  The previous behaviour (of eager initialization) can be re-enabled by setting this property to <code>eager</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integration-testing"><a class="anchor" href="#integration-testing"></a>Integration testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two sets of changes relating to integration tests.</p>
</div>
<div class="sect2">
<h3 id="builder"><a class="anchor" href="#builder"></a>Builder</h3>
<div class="paragraph">
<p>The <code>IsisSystemForTest.Builder</code> class is used to bootstrap integration tests.</p>
</div>
<div class="paragraph">
<p>A number of the clauses within this class have been removed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>with(PersistenceMechanismInstaller persistenceMechanismInstaller)</code><br></p>
<div class="paragraph">
<p>Apache Isis has for many releases only supported a single implementation of persistence mechanism (JDO/DataNucleus),
so this builder method is redundant.</p>
</div>
</li>
<li>
<p><code>with(ProgrammingModel programmingModel)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getConfiguration()</code> to <a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_programming-model_finetuning">include/exclude facets</a></p>
</div>
</li>
<li>
<p><code>with(MetaModelValidator metaModelValidator)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getConfiguration()</code> to specify a <a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_programming-model_custom-validator">custom validator</a>.</p>
</div>
</li>
<li>
<p><code>withServicesIn(String&#8230;&#8203; packagePrefixes)</code> and <code>withServices(Object&#8230;&#8203; services)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getAdditionalServices()</code></p>
</div>
</li>
<li>
<p><code>withFixtures(InstallableFixture&#8230;&#8203; fixtures)</code><br></p>
<div class="paragraph">
<p>Instead, use <code>AppManifest#getFixtures()</code></p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="centralizing-configuration"><a class="anchor" href="#centralizing-configuration"></a>Centralizing configuration</h3>
<div class="paragraph">
<p>Previously when bootstrapping the integration tests, the <code>IsisConfigurationForJdoIntegTests</code> was provided as a custom
implementation of <code>IsisConfiguration</code>, providing a number of configuration settings specifically for running
integration tests (eg run using an in-memory database).  This design split the responsiblity of providing the
configuration properties between that class and <code>AppManifest</code>.</p>
</div>
<div class="paragraph">
<p>A new <code>AppManifest.Util</code> helper class now allows these responsibilities to belong exlusively to the <code>AppManifest</code>.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class DomainAppSystemInitializer {
    public static void initIsft() {
        IsisSystemForTest isft = IsisSystemForTest.getElseNull();
        if(isft == null) {
            isft = new IsisSystemForTest.Builder()
                    .withLoggingAt(org.apache.log4j.Level.INFO)
                    .with(new DomainAppAppManifest() {
                        @Override
                        public Map&lt;String, String&gt; getConfigurationProperties() {
                            final Map&lt;String, String&gt; map = Maps.newHashMap();
                            Util.withJavaxJdoRunInMemoryProperties(map);
                            Util.withDataNucleusProperties(map);
                            Util.withIsisIntegTestProperties(map);
                            return map;
                        }
                    })
                    .build();
            isft.setUpSystem();
            IsisSystemForTest.set(isft);
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web-xml"><a class="anchor" href="#web-xml"></a>web.xml</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the <a href="../../../../userguide/latest/btb/web-xml.html" class="page">web.xml</a>, the "isis.viewers" context-param is now ignored.
Instead the <code>viewer_wicket.properties</code> and <code>viewer_restfulobjects.properties</code> will both be loaded if present (but neither need be present).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hastransactionid-mixin"><a class="anchor" href="#hastransactionid-mixin"></a><code>HasTransactionId</code> mixin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgcms/rgcms.html#_rgcms_classes_mixins_HasTransactionId"><code>HasTransactionId</code></a> mixin interface has subtly changed its meaning (and is now somewhat mis-named).  Prior to <code>1.13.0</code>, this identifier was the GUID of the Isis transaction in which the object was created.  As of <code>1.13.0</code>, this identifier actually is for the request/interaction (as per the new <a href="https://isis.apache.org/versions/1.13.0/guides/rgsvc/rgsvc.html#_rgsvc_application-layer-api_InteractionContext"><code>InteractionContext</code></a> service) in which the object was created.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="notable-new-features"><a class="anchor" href="#notable-new-features"></a>Notable new features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following are new features so do not impact in themselves impact any migration effort, but you may wish to start taking advantage of once you have upgraded.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Nullable</code> annotation</p>
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Nullable"><code>@Nullable</code></a> annotation can now be used to specify the optionality of properties and parameters.</p>
</div>
</li>
<li>
<p><code>ActionDomainEvent</code> for mixins</p>
<div class="paragraph">
<p>Previously it was not possible to discover the mixed-in domain object when an <code>ActionDomainEvent</code> was raised by a mixin action.
This is now possible, through the <a href="https://isis.apache.org/versions/1.13.0/guides/rgcms/rgcms.html#_rgcms_classes_domainevent_ActionDomainEvent"><code>mixedIn()</code></a> method.</p>
</div>
</li>
<li>
<p><code>Blob</code> and <code>Clob</code> file types</p>
<div class="paragraph">
<p>The <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Property_fileAccept"><code>@Property#fileAccept()</code></a> and <a href="https://isis.apache.org/versions/1.13.0/guides/rgant/rgant.html#_rgant-Parameter-fileAccept"><code>@Parameter#fileAccept()</code></a> annotation attributes can be used to hint at the file type to upload for a blob or clob.</p>
</div>
</li>
<li>
<p>Live reloading</p>
<div class="paragraph">
<p>The <code>isis.viewer.wicket.liveReloadUrl</code> configuration property allows live reloading of objects if the layout is updated, reducing feedback times.
Further guidance on setting this up can be found <a href="https://isis.apache.org/versions/1.13.0/guides/dg/dg.html#__dg_ide_intellij_advanced_gradle-liveReload">here</a>.</p>
</div>
</li>
<li>
<p>Docker support</p>
<div class="paragraph">
<p>The <code>overrides.properties</code> configuration file, if present, is loaded last as the configuration property file, with its contents overriding any previously defined configuration properties.
This simple idea makes it easy to create Docker container images; see <a href="https://isis.apache.org/versions/1.13.0/guides/ugbtb/ugbtb.html#_ugbtb_deployment_docker">here</a> for further discussion.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2020 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20200319-0401-26723423</p>
        </div>
    </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
