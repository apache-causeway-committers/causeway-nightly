<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Bootstrapping using AppManifest :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <link rel="stylesheet" href="../../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">
          <span class="icon">
            <img src="../../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../../docs/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../../docs/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../../docs/demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../../docs/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../../docs/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../../docs/setupguide/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../../userguide/about.html">User Guide</a>
            <a class="navbar-item" href="../../../../refguide/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../../testing/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../../subdomain/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../../../valuetypes/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../../../mappings/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../../../incubator/about.html">Incubator</a>
            <a class="navbar-item" href="../../../../legacy/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../../../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../../security/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../../odn/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../../../extensions/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../../docs/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../../docs/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../../docs/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../../relnotes/about.html">Release Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../../../docs/conguide/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../../../docs/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../../core/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../../docs/about.html">
          <span class="icon">
            <img src="../../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="relnotes" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../../about.html">Release Notes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2019</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2019/2.0.0-M2/relnotes.html">2.0.0-M2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2019/1.17.0/relnotes.html">1.17.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2018</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2018/2.0.0-M1/relnotes.html">2.0.0-M1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2018/1.16.2/relnotes.html">1.16.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2018/1.16.1/relnotes.html">1.16.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2018/1.16.0/relnotes.html">1.16.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2017</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2017/1.15.1/relnotes.html">1.15.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2017/1.15.0/relnotes.html">1.15.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2017/1.14.0/relnotes.html">1.14.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2017/1.13.2.1/relnotes.html">1.13.2.1</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2016</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.13.2/relnotes.html">1.13.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.13.1/relnotes.html">1.13.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.13.0/relnotes.html">1.13.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.12.2/relnotes.html">1.12.2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.12.1/relnotes.html">1.12.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.12.0/relnotes.html">1.12.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.11.1/relnotes.html">1.11.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2016/1.11.0/relnotes.html">1.11.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2015</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../1.10.0/relnotes.html">1.10.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../relnotes.html">1.9.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#relnotes:ROOT:2014/1.8.0/relnotes.adoc">1.8.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2014</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2014/1.7.0/relnotes.html">1.7.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2014/1.6.0/relnotes.html">1.6.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2014/1.5.0/relnotes.html">1.5.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2014/1.4.1/relnotes.html">1.4.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2014/1.4.0/relnotes.html">1.4.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2013</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2013/1.3.1/relnotes.html">1.3.1</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2013/1.3.0/relnotes.html">1.3.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2013/1.2.0/relnotes.html">1.2.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2013/1.1.0/relnotes.html">1.1.0</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2013/1.0.1/relnotes.html">1.0.1</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">2012</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../2012/1.0.0/relnotes.html">1.0.0</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Release Notes</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../docs/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../mappings/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../comguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../conguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../incubator/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../pjdo/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../legacy/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../setupguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../subdomains/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../valuetypes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../../docs/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../../about.html">Release Notes</a></li>
    <li><a href="bootstrapping-using-AppManifest.html">Bootstrapping using <code>AppManifest</code></a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/antora/components/relnotes/modules/ROOT/pages/2015/1.9.0/mignotes/bootstrapping-using-AppManifest.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Bootstrapping using <code>AppManifest</code></h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis 1.9.0 provides a simplified programmatic way of bootstrapping the application, that also unifies bootstrapping for integration tests.</p>
</div>
<div class="paragraph">
<p>For now this new bootstrapping mechanism is optional (you don&#8217;t have to change your code), but it may become mandatory in future releases.
The <a href="https://isis.apache.org/versions/1.9.0/arch/simpleapp/about.html">SimpleApp archetype</a> has been updated to use this new mechanism.</p>
</div>
<div class="paragraph">
<p>The instructions below assume that your application is structured as per the simpleapp archetype.  Adjust accordingly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="myapp-dom-module"><a class="anchor" href="#myapp-dom-module"></a><code>myapp-dom</code> Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In your <code>myapp-dom</code> module (containing definitions of your persistent entities and domain services), create an empty class to represent the module.
This should be at the root package for the domain, eg:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.dom;
public final class MyAppDomainModule {
    private MyAppDomainModule(){}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since there is no requirement to actually instantiate this class (it merely provides the location of the <code>myapp.dom</code> package), we give it a private constructor.</p>
</div>
<div class="paragraph">
<p>If you have any other modules where you have either domain services or entities, similarly create an empty "module" class.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="myapp-fixture-module"><a class="anchor" href="#myapp-fixture-module"></a><code>myapp-fixture</code> Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Similarly, in your <code>myapp-fixture</code> module (containing fixture scripts used for testing and demos), do likewise:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.fixture;
public class MyAppFixtureModule {
    private MyAppFixtureModule(){}
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="myapp-app-maven-module"><a class="anchor" href="#myapp-app-maven-module"></a><code>myapp-app</code> Maven Module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a new <code>myapp-app</code> Maven module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in its <code>pom.xml</code>, reference <code>myapp-fixture</code><br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;
    &lt;artifactId&gt;myapp-fixture&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Since <code>myapp-fixture</code> will reference <code>myapp-dom</code> there&#8217;s no need for a direct reference to <code>myapp-dom</code></p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>also add in dependencies to the core framework:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
    &lt;artifactId&gt;isis-core-wrapper&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
    &lt;artifactId&gt;isis-core-runtime&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>if your application uses any of the (non-ASF) <a href="http://www.isisaddons.org">Isis Addons</a> modules, then add dependencies to these modules in the <code>pom.xml</code>.
You should be able to copy-and-paste the dependencies from the <code>pom.xml</code> of your <code>myapp-webapp</code> module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Create a module class for the <code>myapp</code> module also:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.app;
public final class MyAppAppModule {
    private MyAppAppModule() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, create an <code>AppManifest</code> implementation, eg:<br></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package myapp.app;
public class MyAppAppManifest implements AppManifest {
    @Override
    public List&lt;Class&lt;?&gt;&gt; getModules() {                             <i class="conum" data-value="1"></i><b>(1)</b>
        return Arrays.asList(
                MyAppDomainModule.class,
                MyAppFixtureModule.class,
                MyAppAppModule.class
        );
    }
    @Override
    public List&lt;Class&lt;?&gt;&gt; getAdditionalServices() { return null; }  <i class="conum" data-value="2"></i><b>(2)</b>
    @Override
    public String getAuthenticationMechanism() { return null; }
    @Override
    public String getAuthorizationMechanism() { return null; }
    @Override
    public List&lt;Class&lt;? extends FixtureScript&gt;&gt; getFixtures() { return null; }
    @Override
    public Map&lt;String, String&gt; getConfigurationProperties() { return null; }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the module classes, whose packages specify the existence of domain services and/or persistent entities.
If your app uses (non-ASF) <a href="http://www.isisaddons.org">Isis Addons</a> modules, then include the module classes for these addons in <code>getModules()</code>.
For example, the (non-ASF) <a href="https://platform.incode.org" target="_blank" rel="noopener">Incode Platform</a>'s security module provides the <code>org.isisaddons.module.security.SecurityModule</code> class.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>any additional services, as per <code>isis.services</code> configuration property.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For details of the usages of the other methods in this interface, see the <a href="https://isis.apache.org/versions/1.9.0/guides/rgcms/rgcms.html#_rgcms_classes_AppManifest-bootstrapping">reference guide</a> documentation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If in your <code>myapp-dom</code> module you have application-level services and view models (services that depend on persistent domain entities but not the other way around), then we recommend that you move this code to the new <code>myapp-app</code> module.
This makes the layering clearer, and avoids circular dependencies between  application-layer vs domain-layer logic.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="update-parent"><a class="anchor" href="#update-parent"></a>Update parent</h2>
<div class="sectionbody">
<div class="paragraph">
<p>in the parent <code>pom.xml</code>, declare and reference the new <code>myapp-app</code> module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        ...
        &lt;dependency&gt;
            &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;
            &lt;artifactId&gt;myapp-app&lt;/artifactId&gt;
            &lt;version&gt;${project.version}&lt;/version&gt;
        &lt;/dependency&gt;
        ...
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;modules&gt;
    &lt;module&gt;app&lt;/module&gt;
    ...
&lt;/modules&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="update-myapp-integtests"><a class="anchor" href="#update-myapp-integtests"></a>Update <code>myapp-integtests</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In its <code>pom.xml</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add a dependency on <code>myapp-app</code></p>
</li>
<li>
<p>remove dependency on <code>myapp-fixture</code> (and on <code>myapp-dom</code>, if present)</p>
</li>
<li>
<p>remove dependencies on <code>isis-core-wrapper</code> and <code>isis-core-runtime</code> (since now obtained transitively from <code>myapp-app</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Also update (simplify) <code>MyAppSystemInitializer</code> to use the new <code>AppManifest</code>, eg:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyAppSystemInitializer {
    public static void initIsft() {
        IsisSystemForTest isft = IsisSystemForTest.getElseNull();
        if(isft == null) {
            isft = new IsisSystemForTest.Builder()
                    .withLoggingAt(org.apache.log4j.Level.INFO)
                    .with(new DomainAppAppManifest())                   <i class="conum" data-value="1"></i><b>(1)</b>
                    .with(new IsisConfigurationForJdoIntegTests())      <i class="conum" data-value="2"></i><b>(2)</b>
                    .build()
                    .setUpSystem();
            IsisSystemForTest.set(isft);
        }
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>bootstrapping using the new <code>AppManifest</code> implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>if your bootstrapping previously explicitly overrode certain configuration properties, this can instead be moved to the <code>getConfigurationProperties()</code> method of your <code>AppManifest</code> implementation.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="update-myapp-webapp"><a class="anchor" href="#update-myapp-webapp"></a>Update <code>myapp-webapp</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In its <code>pom.xml</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add a dependency on <code>myapp-app</code></p>
</li>
<li>
<p>remove dependency on <code>myapp-fixture</code> (and on <code>myapp-dom</code>, if present)</p>
</li>
<li>
<p>remove dependencies on <code>isis-core-wrapper</code> and <code>isis-core-runtime</code> (since now obtained transitively from <code>myapp-app</code>)</p>
</li>
<li>
<p>(if you didn&#8217;t previously), move any dependencies to addons or other services referenced in the <code>AppManifest</code> to the <code>pom.xml</code> of the new <code>myapp-app</code> module.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remove configuration properties that are no longer needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in <code>isis.properties</code>:</p>
<div class="ulist">
<ul>
<li>
<p>remove <code>isis.services-installer</code></p>
</li>
<li>
<p>remove <code>isis.services.ServicesInstallerFromAnnotation.packagePrefix</code></p>
</li>
<li>
<p>remove <code>isis.services</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>in <code>persistor_datanucleus.properties</code></p>
<div class="ulist">
<ul>
<li>
<p>remove <code>isis.persistor.datanucleus.RegisterEntities.packagePrefix</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, specify the <code>AppManifest</code> to use to bootstrap the app.  You have a choice here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>either update <code>isis.properties</code>, using the <code>isis.appManifest</code> key to specify the <code>AppManifest</code> implementation, eg:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.appManifest=domainapp.app.DomainAppAppManifest</code></pre>
</div>
</div>
</li>
<li>
<p>alternatively, specify the <code>AppManifest</code> by overriding the <code>IsisWicketApplication#newWicketModule()</code>, eg:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Override
protected Module newIsisWicketModule() {
    final Module isisDefaults = super.newIsisWicketModule();
    ...
    final Module overrides = new AbstractModule() {
        @Override
        protected void configure() {
            ...
            bind(AppManifest.class).toInstance(new DomainAppAppManifest());
        }
    };

    return Modules.override(isisDefaults).with(overrides);
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the second (programmatic) approach is used, this overrides the first approach (using <code>isis.properties</code>).</p>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright Â© 2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20200214-0401-a3a7d3eb</p>
        </div>
    </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
