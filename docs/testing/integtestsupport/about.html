<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integration Test Support :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../starters/helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="../../starters/simpleapp/about.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/about.html">User Guide</a>
            <a class="navbar-item" href="../../refguide/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../testing/about.html">Testing Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Libraries</span>
            <a class="navbar-item" href="../../subdomain/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../valuetypes/about.html">Value Types</a>
            <a class="navbar-item" href="../../mappings/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="../../toc/mavendeps/about.html">Maven dependencies</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../odn/about.html">DataNucleus Object Store</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../extensions/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../toc/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../toc/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Releases</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="../../mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">More Libraries</span>
            <a class="navbar-item" href="../../incubator/about.html">Incubator</a>
            <a class="navbar-item" href="../../legacy/about.html">Legacy</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Internal</span>
            <a class="navbar-item" href="../../toc/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../toc/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="testing" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">Testing Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../unittestsupport/about.html">Unit Test Support</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="about.html">Integ Test Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../specsupport/about.html">BDD Spec Support (extension)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fixtures/about.html">Fixture Scripts (extension)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../fakedata/about.html">Fakedata (extension)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../h2console/about.html">H2 Console</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../hsqldbmgr/about.html">HSQLDB Manager</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Testing Guide</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../toc/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mappings/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../pjdo/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../incubator/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../legacy/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter Apps</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../starters/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../subdomains/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorial App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../userguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../valuetypes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../toc/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">Testing Guide</a></li>
    <li><a href="about.html">Integ Test Support</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/testing/integtestsupport/src/main/doc/modules/integtestsupport/pages/about.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Integration Test Support</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As discussed in the introductory overview of this chapter, Apache Isis allows you to integration test your domain objects from within JUnit.  There are several parts to this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>configuring the Apache Isis runtime so it can be bootstrapped (mostly boilerplate)</p>
</li>
<li>
<p>defining a base class to perform said bootstrapping</p>
</li>
<li>
<p>using fixture scripts to set up the app</p>
</li>
<li>
<p>using <code>WrapperFactory</code> so that the UI can be simulated.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We&#8217;ll get to all that shortly, but let&#8217;s start by taking a look at what a typical integration test looks like.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="typical-usage"><a class="anchor" href="#typical-usage"></a>Typical Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This example adapted from the <a href="http://github.com/isisaddons/isis-app-todoapp">Isis addons' todoapp</a> (non-ASF).  The code we want to test (simplified) is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem ... {

    private boolean complete;
    @Property( editing = Editing.DISABLED )
    public boolean isComplete() {
        return complete;
    }
    public void setComplete(final boolean complete) {
        this.complete = complete;
    }

    @Action()
    public ToDoItem completed() {
        setComplete(true);
        ...
        return this;
    }
    public String disableCompleted() {
        return isComplete() ? "Already completed" : null;
    }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We typically put the bootstrapping of Apache Isis into a superclass (<code>AbstractToDoIntegTest</code> below), then subclass as required.</p>
</div>
<div class="paragraph">
<p>For this test (of the "completed()" action) we need an instance of a <code>ToDoItem</code> that is not yet complete.  Here&#8217;s the setup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItemIntegTest extends AbstractToDoIntegTest {

    @Inject
    FixtureScripts fixtureScripts;                              <i class="conum" data-value="1"></i><b>(1)</b>
    @Inject
    ToDoItems toDoItems;                                        <i class="conum" data-value="2"></i><b>(2)</b>
    ToDoItem toDoItem;                                          <i class="conum" data-value="3"></i><b>(3)</b>

    @Before
    public void setUp() throws Exception {
        RecreateToDoItemsForCurrentUser fixtureScript =         <i class="conum" data-value="4"></i><b>(4)</b>
            new RecreateToDoItemsForCurrentUser();
        fixtureScripts.runFixtureScript(fixtureScript, null);
        final List&lt;ToDoItem&gt; all = toDoItems.notYetComplete();  <i class="conum" data-value="5"></i><b>(5)</b>
        toDoItem = wrap(all.get(0));                            <i class="conum" data-value="6"></i><b>(6)</b>
    }
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the <a href="../../refguide/applib-cm/classes/super.html#FixtureScripts" class="page"><code>FixtureScripts</code></a> domain service is injected, providing us with the ability to run fixture scripts</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>likewise, an instance of the <code>ToDoItems</code> domain service is injected.  We&#8217;ll use this to lookup&#8230;&#8203;</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>the object under test, held as a field</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>the fixture script for this test; it deletes all existing todo items (for the current user only) and then recreates them</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>we lookup one of the just-created todo items&#8230;&#8203;</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>and then wrap it so that our interactions with it are as if through the UI</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following code tests the happy case, that a not-yet-completed <code>ToDoItem</code> can be completed by invoking the <code>completed()</code> action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItemIntegTest ... {
    ...
    public static class Completed extends ToDoItemIntegTest { <i class="conum" data-value="1"></i><b>(1)</b>
        @Test
        public void happyCase() throws Exception {
            // given
            assertThat(toDoItem.isComplete()).isFalse();      <i class="conum" data-value="2"></i><b>(2)</b>
            // when
            toDoItem.completed();
            // then
            assertThat(toDoItem.isComplete()).isTrue();
        }
        ...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the idiom we follow is to use nested static classes to identify the class responsibility being tested</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the <a href="http://github.com/isisaddons/isis-app-todoapp">todoapp</a> uses <a href="http://joel-costigliola.github.io/assertj">AssertJ</a>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>What about when a todo item is already completed?  The <code>disableCompleted()</code> method in the class says that it shouldn&#8217;t be allowed (the action would be greyed out in the UI with an appropriate tooltip).  The following test verifies this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        @Test
        public void cannotCompleteIfAlreadyCompleted() throws Exception {
            // given
            unwrap(toDoItem).setComplete(true);                     <i class="conum" data-value="1"></i><b>(1)</b>
            // expect
            expectedExceptions.expectMessage("Already completed");  <i class="conum" data-value="2"></i><b>(2)</b>
            // when
            toDoItem.completed();
        }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>we unwrap the domain object in order to set its state directly</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the expectedExceptions <a href="http://junit.org/junit4/javadoc/latest/org/junit/rules/ExpectedException.html">JUnit rule</a> (defined by a superclass) verifies that the appropiate exception is indeed thrown (in the "when")</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And what about the fact that the underlying "complete" property is annotated as being disabled?
If the <code>ToDoItem</code> is put into edit mode in the UI, the complete checkbox should remain read-only.
Here&#8217;s a verify similar test that verifies this also:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">        @Test
        public void cannotSetPropertyDirectly() throws Exception {
            // expect
            expectedExceptions.expectMessage("Always disabled");  <i class="conum" data-value="1"></i><b>(1)</b>
            // when
            toDoItem.setComplete(true);
        }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>again we use the exceptedExceptions rule.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bootstrapping"><a class="anchor" href="#bootstrapping"></a>Bootstrapping</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Integration tests instantiate an Apache Isis "runtime" (as a singleton) within a JUnit test.
Because (depending on the size of your app) it takes a little time to bootstrap Apache Isis, the framework caches the runtime on a thread-local from one test to the next.</p>
</div>
<div class="paragraph">
<p>The recommended way to bootstrapping of integration tests is done using a <a href="../../refguide/applib-cm/classes/AppManifest2-bootstrapping.html" class="page"><code>Module</code></a> implementation, along with the <code>IntegrationTestAbstract3</code> superclass.</p>
</div>
<div class="paragraph">
<p>For example, the <a href="https://github.com/apache/isis-app-simpleapp">SimpleApp archetype</a>'s integration tests all inherit from this class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class DomainAppIntegTestAbstract extends IntegrationTestAbstract3 {

    public DomainAppIntegTestAbstract() {
        super(new DomainAppApplicationModule());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>DomainAppApplicationModule</code> in turn declares all the dependencies that make up the application.</p>
</div>
<div class="paragraph">
<p>If required, the <code>Module</code> can be customised first using the various <code>withXxx(&#8230;&#8203;)</code> methods to specify addition modules, domain services and configuration properties.</p>
</div>
<div class="sect2">
<h3 id="faster-bootstrapping"><a class="anchor" href="#faster-bootstrapping"></a>Faster Bootstrapping</h3>
<div class="paragraph">
<p>The <code>IntegrationTestAbstract3</code> superclass also allows the introspection mode to be specified, which can reduce the time to bootstrap the test.</p>
</div>
<div class="paragraph">
<p>By default integration tests are run in "production" deployment mode, so with the <code>isis.reflector.introspection.mode</code> set to its default of "lazy_unless_production" this will actually result in full introspection of the Apache Isis metamodel.
The <em>does</em> have the benefit that the metamodel will be validated, but - as mentioned - with the corresponding downside of taking longer to bootstrap.</p>
</div>
<div class="paragraph">
<p>To bootstrap lazily, override as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class DomainAppIntegTestAbstract extends IntegrationTestAbstract3 {

    public DomainAppIntegTestAbstract() {
        super(new DomainAppApplicationModule(), IntrospectionMode.LAZY);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="abstract-class"><a class="anchor" href="#abstract-class"></a>Abstract class</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When writing integration tests, it&#8217;s easiest to inherit from the <code>IntegrationTestAbstract3</code> base class.</p>
</div>
<div class="paragraph">
<p>This base class <a href="#bootstrapping">bootstraps</a> the framework (caching the framework on a thread-local), and provides various utility methods and framework-provided services for use by your application&#8217;s subclass tests.</p>
</div>
<div class="sect2">
<h3 id="integrationtestabstract3"><a class="anchor" href="#integrationtestabstract3"></a><code>IntegrationTestAbstract3</code></h3>
<div class="paragraph">
<p>We recommend that your integration tests inherit from Apache Isis' <code>IntegrationTestAbstract3</code> class.
The primary benefit over its predecessor, <code>IntegrationTestAbstract2</code> (discussed <a href="#IntegrationTestAbstract2">below</a> is that it allows the test to be bootstrapped by passing in a <code>Module</code> rather than an <code>AppManifest</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public abstract class DomainAppIntegTest
                        extends IntegrationTestAbstract3 {

    public DomainAppIntegTestAbstract() {
        super(new DomainAppApplicationModule());
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>IntegrationTestAbstract3</code> class also allows the module to be specified externally, using either the <code>isis.integTest.module</code> or the (more general) <code>isis.headless.module</code> system property, eg by updating the <code>pom.xml</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;properties&gt;
    &lt;isis.integTest.module&gt;
        org.estatio.module.application.EstatioApplicationModule
    &lt;/isis.integTest.module&gt;
&lt;/properties&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is required when the codebase is organised as multiple "logical" modules within a single Maven "physical" module (ie <code>src/main/java</code> compilation unit).
The integration testing framework will bootstrap the module specified by the system property and cache for all tests discovered within the physical module.</p>
</div>
<div class="paragraph">
<p>This test class provides a number of helper/convenience methods and JUnit rules:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Rule
public IsisTransactionRule isisTransactionRule =                         <i class="conum" data-value="1"></i><b>(1)</b>
    new IsisTransactionRule();
@Rule
public JUnitRuleMockery2 context =                                       <i class="conum" data-value="2"></i><b>(2)</b>
    JUnitRuleMockery2.createFor(Mode.INTERFACES_AND_CLASSES);
@Rule
public ExpectedException expectedExceptions =                            <i class="conum" data-value="3"></i><b>(3)</b>
    ExpectedException.none();
@Rule
public ExceptionRecognizerTranslate exceptionRecognizerTranslations =    <i class="conum" data-value="4"></i><b>(4)</b>
    ExceptionRecognizerTranslate.create();</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ensures an Apache Isis session/transaction running for each test</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>sets up a JMock context (using Apache Isis' extension to JMock as described in <a href="../unittestsupport/about.html#jmock-extensions" class="page">JMock Extensions</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>standard JUnit rule for writing tests that throw exceptions</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>to capture messages that require translation, as described in <a href="../../userguide/btb/i18n.html" class="page">i18 support</a>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All of these rules could be inlined in your own base class; as we say, they are a convenience.</p>
</div>
<div class="paragraph">
<p>The class also provides a number of injected domain services,  notably
<a href="../../refguide/applib-svc/persistence-layer-api/RepositoryService.html" class="page"><code>RepositoryService</code></a>, <a href="../../refguide/applib-svc/core-domain-api/FactoryService.html" class="page"><code>FactoryService</code></a>, <a href="../../refguide/applib-svc/metadata-api/ServiceRegistry.html" class="page"><code>ServiceRegistry2</code></a>, <a href="../../refguide/applib-svc/application-layer-api/WrapperFactory.html" class="page"><code>WrapperFactory</code></a> (to wrap objects simulating interaction through the user interface), <a href="../../refguide/applib-svc/application-layer-api/TransactionService.html" class="page"><code>TransactionService</code></a> (most commonly used to commit changes after the fixture setup) and <a href="../../refguide/applib-svc/application-layer-api/SessionManagementService.html" class="page"><code>SessionManagementService</code></a> (for tests that check interactions over multiple separate sessions).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-properties"><a class="anchor" href="#configuration-properties"></a>Configuration Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The recommended way to run integration tests is against an HSQLDB in-memory database.
This can be done using the application&#8217;s usual <a href="../../refguide/applib-cm/classes/AppManifest-bootstrapping.html" class="page"><code>AppManifest</code></a>, and then overriding JDBC URL and similar.</p>
</div>
<div class="paragraph">
<p>If inheriting from `IntegrationTestAbstract3&#8217;s then these configuration properties are set up automatically:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Default Configuration Properties for Integration Tests</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 16.6666%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>javax.jdo.option.ConnectionURL</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:hsqldb:mem:test</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JDBC URL</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>javax.jdo.option.ConnectionDriverName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.hsqldb.jdbcDriver</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>JDBC Driver</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>javax.jdo.option.ConnectionUserName</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">sa</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Username</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>javax.jdo.option.ConnectionPassword</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;empty string&gt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Password, possibly encrypted (see <code>datanucleus.ConnectionPasswordEncrypter</code>, below).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>datanucleus.ConnectionPasswordEncrypter</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;empty string&gt;</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Specify the <code>datanucleus.ConnectionPasswordDecrypter</code> implementation used to decrypt the password.</p>
</div>
<div class="paragraph">
<p>See the <a href="http://www.datanucleus.org/products/accessplatform_4_1/persistence_properties.html#ConnectionPasswordDecrypter">DataNucleus documentation</a> for further details.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>datanucleus.schema.autoCreateAll</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Recreate DB for each test run (an in-memory database)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>datanucleus.schema.validateAll</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Disable validations (minimize bootstrap time)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>datanucleus.persistenceByReachabilityAtCommit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>As per WEB-INF/persistor_datanucleus.properties</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>datanucleus.identifier.case</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MixedCase</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>As per WEB-INF/persistor_datanucleus.properties</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>datanucleus.cache.level2.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>As per WEB-INF/persistor_datanucleus.properties</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.impl.</code><br>
<code>datanucleus.cache.level2.mode</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ENABLE_SELECTIVE</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>As per WEB-INF/persistor_datanucleus.properties</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.datanucleus.</code><br>
<code>install-fixtures</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Automatically install any fixtures that might have been registered</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.persistor.</code><br>
<code>enforceSafeSemantics</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>isis.deploymentType</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">server_prototype</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="wrapper-factory"><a class="anchor" href="#wrapper-factory"></a>Wrapper Factory</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="../../refguide/applib-svc/application-layer-api/WrapperFactory.html" class="page"><code>WrapperFactory</code></a> service is responsible for wrapping a domain object in a dynamic proxy, of the same type as the object being proxied.
And the role of this wrapper is to simulate the UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><code>WrapperFactory</code> uses <a href="http://www.javassist.org">javassist</a> to perform its magic; this is the same technology that ORMs such as <a href="http://hibernate.org/">Hibernate</a> use to manage lazy loading/dirty tracking (DataNucleus uses a different mechanism).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It does this by allowing through method invocations that would be allowed if the user were interacting with the domain object through one of the viewers, but throwing an exception if the user attempts to interact with the domain object in a way that would not be possible if using the UI.</p>
</div>
<div class="paragraph">
<p>The mechanics are as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the integration test calls the <code>WrapperFactory</code> to obtain a wrapper for the domain object under test.
This is usually done in the test&#8217;s <code>setUp()</code> method.</p>
</li>
<li>
<p>the test calls the methods on the wrapper rather than the domain object itself</p>
</li>
<li>
<p>the wrapper performs a reverse lookup from the method invoked (a regular <code>java.lang.reflect.Method</code> instance) into the Apache Isis metamodel</p>
</li>
<li>
<p>(like a viewer), the wrapper then performs the "see it/use it/do it" checks, checking that the member is visible, that it is enabled and (if there are arguments) that the arguments are valid</p>
</li>
<li>
<p>if the business rule checks pass, then the underlying member is invoked.
Otherwise an exception is thrown.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The type of exception depends upon what sort of check failed.
It&#8217;s straightforward enough: if the member is invisible then a <code>HiddenException</code> is thrown; if it&#8217;s not usable then you&#8217;ll get a <code>DisabledException</code>, if the args are not valid then catch an <code>InvalidException</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/wrapper-factory.png"><img src="_images/wrapper-factory.png" alt="wrapper factory" width="600px"></a>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s look in a bit more detail at what the test can do with the wrapper.</p>
</div>
<div class="sect2">
<h3 id="wrapping-and-unwrapping"><a class="anchor" href="#wrapping-and-unwrapping"></a>Wrapping and Unwrapping</h3>
<div class="paragraph">
<p>Wrapping a domain object is very straightforward; simply call <code>WrapperFactory#wrap(&#8230;&#8203;)</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Customer customer = ...;
Customer wrappedCustomer = wrapperFactory.wrap(wrappedCustomer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Going the other way&#8201;&#8212;&#8201;getting hold of the underlying (wrapped) domain object&#8201;&#8212;&#8201;is just as easy; just call <code>WrapperFactory#unwrap(&#8230;&#8203;)</code>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Customer wrappedCustomer = ...;
Customer customer = wrapperFactory.unwrap(wrappedCustomer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer, you also can get the underlying object from the wrapper itself, by downcasting to <code>WrappingObject</code> and calling <code>__isis_wrapped()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Customer wrappedCustomer = ...;
Customer customer = (Customer)((WrappingObject)wrappedCustomer).__isis_wrapped());</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;re not sure that&#8217;s any easier (in fact we&#8217;re certain it looks rather obscure).  Stick with calling <code>unwrap(&#8230;&#8203;)</code>!</p>
</div>
</div>
<div class="sect2">
<h3 id="using-the-wrapper"><a class="anchor" href="#using-the-wrapper"></a>Using the wrapper</h3>
<div class="paragraph">
<p>As the wrapper is intended to simulate the UI, only those methods that correspond to the "primary" methods of the domain object&#8217;s members are allowed to be called.
That means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for <strong><em>object properties</em></strong> the test can call the getter or setter method</p>
</li>
<li>
<p>for <strong><em>object collections</em></strong> the test can call the getter.</p>
<div class="paragraph">
<p>If there is a supporting <code>addTo&#8230;&#8203;()</code> or <code>removeFrom&#8230;&#8203;()</code> method, then these can be called.
It can also call <code>add(&#8230;&#8203;)</code> or <code>remove(&#8230;&#8203;)</code> on the collection (returned by the gettter) itself.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In this respect the wrapper is more functional than the <a href="../../vw/about.html" class="page">Wicket viewer</a> (which does not expose the ability to mutate collections directly).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>for <strong><em>object actions</em></strong> the test can call the action method itself.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a convenience, we also allow the test to call any <code>default&#8230;&#8203;()</code>,<code>choices&#8230;&#8203;()</code> or <code>autoComplete&#8230;&#8203;()</code> method.
These are often useful for obtaining a valid value to use.</p>
</div>
<div class="paragraph">
<p>What the test can&#8217;t call is any of the remaining supporting methods, such as <code>hide&#8230;&#8203;()</code>, <code>disable&#8230;&#8203;()</code> or <code>validate&#8230;&#8203;()</code>.
That&#8217;s because their value is implied by the exception being thrown.</p>
</div>
<div class="paragraph">
<p>The wrapper <em>does</em> also allow the object&#8217;s <code>title()</code> method or its  <code>toString()</code> , however this is little use for objects whose title is built up using the <code>@Title</code> annotation.
Instead, we recommend that your test verifies an object&#8217;s title by calling <code>TitleService#titleOf(&#8230;&#8203;)</code> method.</p>
</div>
</div>
<div class="sect2">
<h3 id="firing-domain-events"><a class="anchor" href="#firing-domain-events"></a>Firing Domain Events</h3>
<div class="paragraph">
<p>As well as enforcing business rules, the wrapper has another important feature, namely that it will cause domain events to be fired.</p>
</div>
<div class="paragraph">
<p>For example, if we have an action annotated with <code>@Action(domainEvent=&#8230;&#8203;</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class ToDoItem ... {
    @Action(
            domainEvent =CompletedEvent.class
    )
    public ToDoItem completed() { /* ... */ }
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>then invoking the action through the proxy will cause the event (<code>CompletedEvent</code> above) to be fired to any subscribers.
A test might therefore look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SomeIntegratTest /* ... */ {
    @Inject
    private EventBusService eventBusService;                                       <i class="conum" data-value="1"></i><b>(1)</b>

    @Test
    public void subscriberReceivesEvents() {

        // given
        final ToDoItem.CompletedEvent[] evHolder = new ToDoItem.CompletedEvent[1]; <i class="conum" data-value="2"></i><b>(2)</b>
        eventBusService.register(new Object() {
            @org.springframework.context.event.EventListener(ToDoItem.CompletedEvent.class)
            public void on(final ToDoItem.CompletedEvent ev) {                     <i class="conum" data-value="3"></i><b>(3)</b>
                evHolder[0] = ev;
            }
        });

        // when
        toDoItem.completed();                                                      <i class="conum" data-value="4"></i><b>(4)</b>

        // then
        then(evHolder[0].getSource()).isEqualTo(unwrap(toDoItem));                 <i class="conum" data-value="5"></i><b>(5)</b>
        then(evHolder[0].getIdentifier().getMemberName()).isEqualTo("completed");
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>inject <a href="../../refguide/applib-svc/core-domain-api/EventBusService.html" class="page"><code>EventBusService</code></a> into this test</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>holder for subscriber to capture event to</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>subscriber&#8217;s callback, using Spring events</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>invoking the domain object using the wrapper</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>assert that the event was populated</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The wrapper will also fire domain events for properties (if annotated with <code>@Property(domainEvent=&#8230;&#8203;)</code>) or collections (if annotated with <code>@Collection(domainEvent=&#8230;&#8203;)</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It isn&#8217;t possible to use the <code>WrapperFactory</code> in a unit test, because there needs to be a running instance of Apache Isis that holds the metamodel.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="maven-configuration"><a class="anchor" href="#maven-configuration"></a>Maven Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis' integration test support is automatically configured if you use the <a href="https://github.com/apache/isis-app-simpleapp">SimpleApp starter app</a>.
To set it up manually, update the <code>pom.xml</code> of your domain object model module:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
    &lt;artifactId&gt;isis-core-integtestsupport&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.apache.isis.core&lt;/groupId&gt;
    &lt;artifactId&gt;isis-core-wrapper&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This can also be done by adding a dependency to <code>org.apache.isis.mavendeps:isis-mavendeps-testing</code> module; see the <a href="https://github.com/apache/isis-app-simpleapp">SimpleApp starter app</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We also recommend that you configure the <code>maven-surefire-plugin</code> to pick up the following class patterns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
    &lt;version&gt;2.10&lt;/version&gt;
    &lt;configuration&gt;
        &lt;includes&gt;
            &lt;include&gt;**/*Test.java&lt;/include&gt;
            &lt;include&gt;**/*Test_*.java&lt;/include&gt;
            &lt;include&gt;**/*Spec*.java&lt;/include&gt;
        &lt;/includes&gt;
        &lt;excludes&gt;
            &lt;exclude&gt;**/Test*.java&lt;/exclude&gt;
            &lt;exclude&gt;**/*ForTesting.java&lt;/exclude&gt;
            &lt;exclude&gt;**/*Abstract*.java&lt;/exclude&gt;
        &lt;/excludes&gt;
        &lt;useFile&gt;true&lt;/useFile&gt;
        &lt;printSummary&gt;true&lt;/printSummary&gt;
        &lt;outputDirectory&gt;${project.build.directory}/surefire-reports&lt;/outputDirectory&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This can also be done using mavenmixins; see the <a href="https://github.com/apache/isis-app-simpleapp">SimpleApp starter app</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20200111-1854-24213546</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hideEffect: "slideUp",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
