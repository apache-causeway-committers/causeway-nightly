<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mixins :: Apache Isis</title>
    <meta name="generator" content="Antora 2.3.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../../.." title="Apache Isis">
  <link rel="next" href="modules.html" title="Modules">
  <link rel="prev" href="view-models.html" title="View Models">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">
          <span class="icon">
            <img src="../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../setupguide/2.0.0-M5/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide/2.0.0-M5/about.html">User Guide</a>
            <a class="navbar-item" href="../../../refguide/2.0.0-M5/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../testing/2.0.0-M5/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../subdomains/2.0.0-M5/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../../valuetypes/2.0.0-M5/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../../mappings/2.0.0-M5/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../../incubator/2.0.0-M5/about.html">Incubator</a>
            <a class="navbar-item" href="../../../legacy/2.0.0-M5/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../vw/2.0.0-M5/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../../vro/2.0.0-M5/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security/2.0.0-M5/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../pjdo/2.0.0-M5/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../../extensions/2.0.0-M5/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../relnotes/2.0.0-M5/about.html">Release Notes</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M5/archive/1-x.html">Archive (1.x)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../../conguide/2.0.0-M5/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../../comguide/2.0.0-M5/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../core/2.0.0-M5/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../docs/2.0.0-M5/about.html">
          <span class="icon">
            <img src="../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="view-models.html" title="View Models"><span></span></a>
  <a class="page-next" rel="next"
     href="modules.html" title="Modules"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title="View Models"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="concepts-patterns.html">Concepts &amp; Patterns</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="domain-entities-and-services.html">Domain Entities &amp; Services</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="object-members.html">Object Members</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ui.html">UI Layout &amp; Hints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drop-downs-and-defaults.html">Drop downs and Defaults</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="meta-annotations.html">Meta-annotations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="view-models.html">View Models</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="mixins.html">Mixins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../btb/about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/i18n.html">i18n</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/programming-model.html">Programming Model</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../flyway/about.html">Flyway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../quartz/about.html">Quartz</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../mappings/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../legacy/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../subdomains/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">System Overview</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../system/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">User Guide</a></li>
    <li><a href="mixins.html">Mixins</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/api/adoc/userguide/modules/fun/pages/mixins.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Mixins</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As described in the <a href="overview.html#mixins" class="page">overview</a>, a mixin acts like a trait or extension method, allowing one module to contribute behaviour or derived state to another object.</p>
</div>
<div class="paragraph">
<p>Under the covers, all mixins are basically actions that use the mixee as one of their arguments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the mixin action takes some arguments (apart from the mixee), then it will only ever be rendered as an action</p>
</li>
<li>
<p>if the mixin action is not query-only, then again it will only ever be rendered as an action</p>
</li>
<li>
<p>if the mixin action is query-only and takes no arguments, then it can either be rendered as an action or as some derived state</p>
<div class="ulist">
<ul>
<li>
<p>if as an action, then it&#8217;s basically a query to find and return some related info (eg "most recent order", "last 5 orders")</p>
</li>
<li>
<p>if as derived state, then it will be rendered as a property (if it returns a scalar), or as a collection (if it returns a vector).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Accordingly, a mixin can be defined using the <a href="../../../refguide/latest/applib-ant/Action.html" class="page"><code>@Action</code></a>, <a href="../../../refguide/latest/applib-ant/Property.html" class="page"><code>@Property</code></a> or <a href="../../../refguide/latest/applib-ant/Collection.html" class="page"><code>@Collection</code></a> annotations, but defined at the domain class level rather than at the method level.</p>
</div>
<div class="paragraph">
<p>The older way of declaring a mixin is to use defined using the <a href="../../../refguide/latest/applib-ant/Mixin.html" class="page"><code>@Mixin</code></a> annotation for the domain class (in fact, <code>@Action</code> et al are meta-annotated with <code>@Mixin</code>).
Equivalently, it can be defined using <a href="../../../refguide/latest/applib-ant/DomainObject.html#nature" class="page"><code>@DomainObject#nature</code></a> attribute (specifying a nature of <code>Nature.MIXIN</code>).</p>
</div>
<div class="paragraph">
<p>When the mixin follows the naming convention <code>SomeType_mixinName</code> then the method name can be abbreviated, and the name of the member being contributed is inferred from the name of the class itself, being everything after the last '_'.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributed-collection"><a class="anchor" href="#contributed-collection"></a>Contributed Collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The example below shows how to contribute a collection, using <a href="../../../refguide/latest/applib-ant/Collection.html" class="page"><code>@Collection</code></a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Collection                                                     <i class="conum" data-value="1"></i><b>(1)</b>
public class DocumentHolder_documents {

    private final DocumentHolder holder;
    public DocumentHolderDocuments(DocumentHolder holder) {     <i class="conum" data-value="2"></i><b>(2)</b>
        this.holder = holder;
    }

    public List&lt;Document&gt; coll() {                              <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    public boolean hideColl() { /* ... */ }                     <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a collection mixin.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>method (which must be called "coll") must accept no arguments, be query-only, and return a collection.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="page">business rules</a>) follow the usual naming conventions.<br>
(Because the collection is derived/read-only, the only supporting method that is relevant is <code>hideColl()</code>).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The above will result in a contributed collection "documents" for all types that implement/extend from <code>DocumentHolder</code>.</p>
</div>
<div class="paragraph">
<p>The following does the same thing, but using the (more flexible but more verbose) <a href="../../../refguide/latest/applib-ant/Mixin.html" class="page"><code>@Mixin</code></a> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mixin(method="coll")                                           <i class="conum" data-value="1"></i><b>(1)</b>
public class DocumentHolder_documents {

    private final DocumentHolder holder;
    public DocumentHolderDocuments(DocumentHolder holder) {     <i class="conum" data-value="2"></i><b>(2)</b>
        this.holder = holder;
    }

    @Action(semantics=SemanticsOf.SAFE)                         <i class="conum" data-value="3"></i><b>(3)</b>
    @ActionLayout(contributed = Contributed.AS_ASSOCIATION)     <i class="conum" data-value="4"></i><b>(4)</b>
    @CollectionLayout(defaultView="table")
    public List&lt;Document&gt; coll() {                              <i class="conum" data-value="5"></i><b>(5)</b>
        ...
    }
    public boolean hideColl() { /* ... */ }                     <i class="conum" data-value="6"></i><b>(6)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a mixin, and in this case nominates the method name.
The recommended name for collections is "coll" (if none is specified the default name is "$$").</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>required; actions that have side-effects cannot be contributed as collections</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>required; otherwise the mixin will default to being rendered as an action</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>method (which must match <code>@Mixin#method</code> above), must accept no arguments.
The mixin is a collection rather than a property because the return type is a collection, not a scalar.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="page">business rules</a>) follow the usual naming conventions.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributed-property"><a class="anchor" href="#contributed-property"></a>Contributed Property</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Contributed properties can likewise be defined using <a href="../../../refguide/latest/applib-ant/Property.html" class="page"><code>@Property</code></a>; this implies a method called "prop":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Property                                                       <i class="conum" data-value="1"></i><b>(1)</b>
public class DocumentHolder_mostRecentDocument {

    private final DocumentHolder holder;
    public DocumentHolderDocuments(DocumentHolder holder) {     <i class="conum" data-value="2"></i><b>(2)</b>
        this.holder = holder;
    }

    public Document prop() {                                    <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    public boolean hiderProp() { /* ... */ }                    <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a property mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>method (which must be called "prop") must accept no arguments, be query-only, and return a scalar value.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="page">business rules</a>) follow the usual naming conventions.<br>
(Because the property is derived/read-only, the only supporting method that is relevant is <code>hideProp()</code>).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This contributes a property called "mostRecentDocument".</p>
</div>
<div class="paragraph">
<p>The following does the same thing, but using the (more flexible but more verbose) <a href="../../../refguide/latest/applib-ant/Mixin.html" class="page"><code>@Mixin</code></a> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mixin(method="prop")                                           <i class="conum" data-value="1"></i><b>(1)</b>
public class DocumentHolder_mostRecentDocument {

    private final DocumentHolder holder;
    public DocumentHolderDocuments(DocumentHolder holder) {     <i class="conum" data-value="1"></i><b>(1)</b>
        this.holder = holder;
    }

    @Action(semantics=SemanticsOf.SAFE)                         <i class="conum" data-value="2"></i><b>(2)</b>
    @ActionLayout(contributed = Contributed.AS_ASSOCIATION)     <i class="conum" data-value="3"></i><b>(3)</b>
    public Document prop() {                                    <i class="conum" data-value="4"></i><b>(4)</b>
        ...
    }
    public boolean hiderProp() { /* ... */ }                    <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a mixin, and in this case nominates the method name.<br>
The recommended name for properties is "prop" (if none is specified the default name is "$$").</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>action has no side-effects, and must match <code>@Mixin#method</code> above and accept no arguments</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>and should be rendered as an association.
The mixin is a property rather than a collection because the return type is a scalar.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="page">business rules</a>) follow the usual naming conventions.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributed-action"><a class="anchor" href="#contributed-action"></a>Contributed Action</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Contributed properties can likewise be defined using <a href="../../../refguide/latest/applib-ant/Property.html" class="page"><code>@Property</code></a>; this implies a method called "prop":</p>
</div>
<div class="paragraph">
<p>Contributed actions are defined similarly, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action                                                         <i class="conum" data-value="1"></i><b>(1)</b>
public class DocumentHolder_addDocument {

    private final DocumentHolder holder;
    public DocumentHolderDocuments(DocumentHolder holder) {     <i class="conum" data-value="2"></i><b>(2)</b>
        this.holder = holder;
    }

    public Document&gt; act(Document doc) {                        <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    public boolean hideAct() { /* ... */ }                      <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is an action mixin.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>method must be called "act".<br>
Unlike contributed properties and collections, contributed actions can accept parameters, and have any semantics.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><a href="business-rules.html" class="page">supporting methods</a> follow the usual naming conventions.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This contributes an action called "addDocument".</p>
</div>
<div class="paragraph">
<p>The following does the same thing, but using the (more flexible but more verbose) <a href="../../../refguide/latest/applib-ant/Mixin.html" class="page"><code>@Mixin</code></a> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Mixin(method="act")                                            <i class="conum" data-value="1"></i><b>(1)</b>
public class DocumentHolder_addDocument {

    private final DocumentHolder holder;
    public DocumentHolderDocuments(DocumentHolder holder) {     <i class="conum" data-value="2"></i><b>(2)</b>
        this.holder = holder;
    }

    @Action()
    @ActionLayout(contributed = Contributed.AS_ACTION)          <i class="conum" data-value="3"></i><b>(3)</b>
    public Document&gt; act(Document doc) {                        <i class="conum" data-value="4"></i><b>(4)</b>
        ...
    }
    public boolean hideAct() { /* ... */ }                      <i class="conum" data-value="5"></i><b>(5)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a mixin, and in this case nominates the method name.<br>
The recommended name for properties is "prop" (if none is specified the default name is "$$").</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>recommended</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>method must match <code>@Mixin#method</code> above.
Unlike contributed properties and collections, contributed actions can accept parameters.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><a href="business-rules.html" class="page">supporting methods</a> follow the usual naming conventions.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mixins-as-nested-classes"><a class="anchor" href="#mixins-as-nested-classes"></a>As Nested Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While mixins primary use case is as a means of allowing contributions from one module to the types of another module, they are also a convenient mechanism for grouping functionality/behaviour against a concrete type.
All the methods and <a href="business-rules.html" class="page">supporting methods</a> end up in a single construct, and the dependency between that functionality and the rest of the object is made more explicit.</p>
</div>
<div class="paragraph">
<p>We might therefore want to use a mixin within the same module as the mixee; indeed even within the same package or class as the mixee.
In other words, we could define the mixin as nested static class of the mixee it contributes to.</p>
</div>
<div class="paragraph">
<p>In the previous examples the "_" is used as a separator between the mixin type and mixin name.
However, to support mixins as nested classes, the character "$" is also recognized as a separator.</p>
</div>
<div class="paragraph">
<p>For example, the following refactors the "updateName" action&#8201;&#8212;&#8201;of the <code>SimpleObject</code> class in <a href="../../../docs/latest/starters/simpleapp.html" class="page">SimpleApp</a> start app&#8201;&#8212;&#8201;into a nested mixin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SimpleObject /* ... */ {

    // ...
    public static class UpdateNameActionDomainEvent extends
            SimpleModule.ActionDomainEvent&lt;SimpleObject.updateName&gt; {}  <i class="conum" data-value="1"></i><b>(1)</b>

    @Action(semantics = IDEMPOTENT,
            command = CommandReification.ENABLED,
            publishing = Publishing.ENABLED,
            associateWith = "name",
            domainEvent = UpdateNameActionDomainEvent.class)
    public class updateName {                                           <i class="conum" data-value="2"></i><b>(2)</b>
        public SimpleObject act(@Name final String name) {
            setName(name);                                              <i class="conum" data-value="3"></i><b>(3)</b>
            return SimpleObject.this;
        }
        public String default0Act() {                                   <i class="conum" data-value="4"></i><b>(4)</b>
            return getName();                                           <i class="conum" data-value="5"></i><b>(5)</b>
        }
    }
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Domain event is genericised on the mixin, not on the mixee</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Not static.
Can be camelCase or PascalCase, either will work.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Acts on the owning instance.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><a href="business-rules.html" class="page">Supporting methods</a> follow the same naming convention.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Acts on the owning instance.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programmatic-usage"><a class="anchor" href="#programmatic-usage"></a>Programmatic usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a domain object is rendered, the framework will automatically instantiate all required mixins and delegate to them dynamically.
If writing integration tests or fixtures, or (sometimes) just regular domain logic, then you may need to instantiate mixins directly.</p>
</div>
<div class="paragraph">
<p>For this you can use the <a href="../../../refguide/latest/applib-svc/FactoryService.html" class="page"><code>FactoryService#mixin(&#8230;&#8203;)</code></a> method.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DocumentHolder_documents mixin =
    factoryService.mixin(DocumentHolder_documents.class, customer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use <a href="../../../refguide/latest/applib-svc/ServiceInjector.html" class="page"><code>ServiceInjector</code></a> to inject domain services after the mixin has been instantiated.
You&#8217;ll need to use this method if using nested non-static mixins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SimpleObject.updateName mixin =
    serviceInjector.injectServicesInto( simpleObject.new updateName() );</code></pre>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright Â© 2010~2020 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M4.20201030-1151-99e099c2</p>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
