<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mixins :: Apache Causeway</title>
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../../.." title="Apache Causeway">
  <link rel="next" href="modules.html" title="Modules">
  <link rel="prev" href="view-models.html" title="View Models">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">
          <span class="icon">
            <img src="../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Causeway</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../docs//starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../docs//starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../docs//demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../docs//resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../docs//resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide//about.html">User Guide</a>
            <a class="navbar-item" href="../../../refguide//about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../testing//about.html">Testing Guide</a>
            <a class="navbar-item" href="../../../security//about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../setupguide//about.html">Setup Guide</a>
            <a class="navbar-item" href="../../../conguide//about.html">Contributors' Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../vw//about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../../vro//about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../pjpa//about.html">JPA (EclipseLink)</a>
            <a class="navbar-item" href="../../../pjdo//about.html">JDO (DataNucleus)</a>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security//bypass/about.html">Bypass (Authenticator & Authorizor)</a>
            <a class="navbar-item" href="../../../security//shiro/about.html">Shiro (Authenticator & Authorizor)</a>
            <a class="navbar-item" href="../../../security//spring/about.html">Spring (Authenticator only)</a>
            <a class="navbar-item" href="../../../security//keycloak/about.html">Keycloak (Authenticator only)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Catalogs</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../valuetypes//about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extending the framework itself</span>
            <a class="navbar-item" href="../../../extensions//about.html">Extensions</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../docs//support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../docs//support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../docs//downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../relnotes//about.html">Release Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Nightly Builds</span>
            <a class="navbar-item" href="https://github.com/apache/isis">Packages (ASF hosted)</a>
            <a class="navbar-item" href="https://github.com/apache-isis-committers/isis-nightly">Packages (not ASF hosted)</a>
            <a class="navbar-item" href="https://apache-isis-committers.github.io/isis-nightly">Website Preview (not ASF hosted)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Framework</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Process</span>
            <a class="navbar-item" href="../../../comguide//about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../tooling//about.html">Tooling</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Automated Analysis</span>
            <a class="navbar-item" href="https://sonarcloud.io/dashboard?id=apache_isis">SonarCloud.io</a>
            <a class="navbar-item" href="https://fisheye.apache.org/browse/~br=master/isis-git/">ASF Fisheye</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../core//about.html">Internal Design Docs</a>
            <a class="navbar-item" href="../../../regressiontests//about.html">Regression Tests</a>
            <a class="navbar-item" href="../../../incubator//about.html">Incubator</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Thanks</span>
            <a class="navbar-item" href="../../../more-thanks//more-thanks.html">Acknowledgements</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../docs//about.html">
          <span class="icon">
            <img src="../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="view-models.html" title="View Models"><span></span></a>
  <a class="page-next" rel="next"
     href="modules.html" title="Modules"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent" rel="prev" href="about.html" title="View Models"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="about.html">Fundamentals</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="concepts-patterns.html">Concepts &amp; Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="domain-entities-and-services.html">Domain Entities &amp; Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="object-members.html">Properties, Collections &amp; Actions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ui.html">UI Layout &amp; Hints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="drop-downs-and-defaults.html">Drop downs and Defaults</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="meta-annotations.html">Meta-annotations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="view-models.html">View Models</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="mixins.html">Mixins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="modules.html">Modules</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../btb/about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/i18n.html">i18n</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/programming-model.html">Programming Model</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commandlog/about.html">Command Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../excel/about.html">Excel Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executionlog/about.html">Execution Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executionoutbox/about.html">Execution Outbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executionrepublisher/about.html">Execution Republisher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../flyway/about.html">Flyway</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version">
          <a href="../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">regressiontests</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../regressiontests/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tooling</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../tooling/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../tutorials/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">User Guide</a></li>
    <li><a href="about.html">Fundamentals</a></li>
    <li><a href="mixins.html">Mixins</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/master/antora/components/userguide/modules/fun/pages/mixins.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Mixins</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>As described in the <a href="overview.html#mixins" class="xref page">overview</a>, a mixin acts like a trait or extension method, allowing one module to contribute behaviour or derived state to another object.
This is a <strong>very powerful feature</strong>, but at the same time is  easy to use.</p>
</div>
<div class="paragraph">
<p>Under the covers, all mixins are basically actions that use the mixee as one of their arguments.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if the mixin action takes some arguments (apart from the mixee), then it will only ever be rendered as an action</p>
</li>
<li>
<p>if the mixin action is not query-only, then again it will only ever be rendered as an action</p>
</li>
<li>
<p>if the mixin action is query-only and takes no arguments, then it can either be rendered as an action or as some derived state</p>
<div class="ulist">
<ul>
<li>
<p>if as an action, then it&#8217;s basically a query to find and return some related info (eg "most recent order", "last 5 orders")</p>
</li>
<li>
<p>if as derived state, then it will be rendered as a property (if it returns a scalar), or as a collection (if it returns a vector).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Accordingly, a mixin can be defined using the <a href="../../../refguide/latest/applib/index/annotation/Action.html" class="xref page">@Action</a>, <a href="../../../refguide/latest/applib/index/annotation/Property.html" class="xref page">@Property</a> or <a href="../../../refguide/latest/applib/index/annotation/Collection.html" class="xref page">@Collection</a> annotations, but defined at the domain class level rather than at the method level.</p>
</div>
<div class="paragraph">
<p>The mixin is expected to follow the naming convention <code>SomeType_mixinName</code>, with the name of the contributed member being contributed is inferred from the name of the class itself, being everything after the last '_'.
For example, if the mixin is called <code>DocumentHolder_documents</code>, then the mixee is <code>DocumentHolder</code> interface, and <code>documents</code> is the name of the contributed collection.</p>
</div>
<div class="paragraph">
<p>This example also hints at why mixins are so powerful: the mixee&#8217;s type is usually an interface, not a concrete class.
Thus, any class that implements <code>DocumentHolder</code>, eg <code>Customer</code> or <code>Order</code>, will be contributed to.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributed-collection"><a class="anchor" href="#contributed-collection"></a>Contributed Collection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The example below shows in more detail how to contribute a collection, using <a href="../../../refguide/latest/applib/index/annotation/Collection.html" class="xref page">@Collection</a>.
The method is expected to be called "coll":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Collection                                     <i class="conum" data-value="1"></i><b>(1)</b>
@RequiredArgsConstructor                        <i class="conum" data-value="2"></i><b>(2)</b>
public class DocumentHolder_documents {

    private final DocumentHolder holder;

    public List&lt;Document&gt; coll() { /* ... */ }  <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    public boolean hideColl() { /* ... */ }     <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a collection mixin (that contributes its method as an association) with method name 'coll'</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>method (which must be called "coll") must accept no arguments, be query-only, and return a collection</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="xref page">business rules</a>) follow the usual naming conventions
(Because the collection is derived/read-only, the only supporting method that is relevant is <code>hideColl()</code>).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The above will result in a contributed collection "documents" for all types that implement/extend from <code>DocumentHolder</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributed-property"><a class="anchor" href="#contributed-property"></a>Contributed Property</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Contributed properties can likewise be defined using <a href="../../../refguide/latest/applib/index/annotation/Property.html" class="xref page">@Property</a>; this implies a method called "prop":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Property                                                       <i class="conum" data-value="1"></i><b>(1)</b>
@RequiredArgsConstructor                                        <i class="conum" data-value="2"></i><b>(2)</b>
public class DocumentHolder_mostRecentDocument {

    private final DocumentHolder holder;

    public Document prop() {                                    <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    public boolean hiderProp() { /* ... */ }                    <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a property mixin (that contributes its method as an association) with method name 'prop'</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>method (which must be called "prop") must accept no arguments, be query-only, and return a scalar value</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="xref page">business rules</a>) follow the usual naming conventions
(Because the property is derived/read-only, the only supporting method that is relevant is <code>hideProp()</code>).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This contributes a property called "mostRecentDocument".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributed-action"><a class="anchor" href="#contributed-action"></a>Contributed Action</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Contributed actions are defined similarly, using <a href="../../../refguide/latest/applib/index/annotation/Action.html" class="xref page">@Action</a>; this implies a method called "act".
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action                                                         <i class="conum" data-value="1"></i><b>(1)</b>
@RequiredArgsConstructor                                        <i class="conum" data-value="2"></i><b>(2)</b>
public class DocumentHolder_addDocument {

    private final DocumentHolder holder;

    public Document&gt; act(Document doc) {                        <i class="conum" data-value="3"></i><b>(3)</b>
        ...
    }
    public boolean hideAct() { /* ... */ }                      <i class="conum" data-value="4"></i><b>(4)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is an action mixin (that contributes its method as an action) with method name 'act'</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mixee is injected into the mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>method must be called "act"
Unlike contributed properties and collections, contributed actions can accept parameters, and have any semantics.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><a href="business-rules.html" class="xref page">supporting methods</a> follow the usual naming conventions</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This contributes an action called "addDocument".</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mixins-as-nested-classes"><a class="anchor" href="#mixins-as-nested-classes"></a>As Nested Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While mixins primary use case is as a means of allowing contributions from one module to the types of another module, they are also a convenient mechanism for grouping functionality/behaviour against a concrete type.
All the methods and <a href="business-rules.html" class="xref page">supporting methods</a> end up in a single construct, and the dependency between that functionality and the rest of the object is made more explicit.</p>
</div>
<div class="paragraph">
<p>We might therefore want to use a mixin within the same module as the mixee; indeed even within the same package or class as the mixee.
In other words, we could define the mixin as nested static class of the mixee it contributes to.</p>
</div>
<div class="paragraph">
<p>In the previous examples the "_" is used as a separator between the mixin type and mixin name.
However, to support mixins as nested classes, the character "$" is also recognized as a separator.</p>
</div>
<div class="paragraph">
<p>For example, the following refactors the "updateName" action&#8201;&#8212;&#8201;of the <code>SimpleObject</code> class in <a href="../../../docs/latest/starters/simpleapp.html" class="xref page">SimpleApp</a> start app&#8201;&#8212;&#8201;into a nested mixin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SimpleObject /* ... */ {

    // ...

    @Action(semantics = IDEMPOTENT,
            commandPublishing = Publishing.ENABLED,
            executionPublishing = Publishing.ENABLED,
            associateWith = "name",
            domainEvent = updateName.DomainEvent.class)                 <i class="conum" data-value="2"></i><b>(2)</b>
    public class updateName {                                           <i class="conum" data-value="1"></i><b>(1)</b>

        public class DomainEvent extends
            SimpleModule.ActionDomainEvent&lt;SimpleObject.updateName&gt; {}  <i class="conum" data-value="2"></i><b>(2)</b>

        public SimpleObject act(@Name final String name) {
            setName(name);                                              <i class="conum" data-value="3"></i><b>(3)</b>
            return SimpleObject.this;
        }
        public String default0Act() {                                   <i class="conum" data-value="4"></i><b>(4)</b>
            return getName();                                           <i class="conum" data-value="5"></i><b>(5)</b>
        }
    }
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Mixin class is not <code>static</code>, so that the containing object is implicitly available.
<div class="paragraph">
<p>Its name can be either "camelCase" or "PascalCase", either will work.</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Domain event can be declared within the mixin, again, not <code>static</code>.
<div class="paragraph">
<p>Note that it is genericised on the mixin, not on the mixee</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Acts on the owning instance.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><a href="business-rules.html" class="xref page">Supporting methods</a> follow the same naming convention.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Acts on the owning instance.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programmatic-usage"><a class="anchor" href="#programmatic-usage"></a>Programmatic usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a domain object is rendered, the framework will automatically instantiate all required mixins and delegate to them dynamically.
If writing integration tests or fixtures, or (sometimes) just regular domain logic, then you may need to instantiate mixins directly.</p>
</div>
<div class="paragraph">
<p>For this you can use the <a href="../../../refguide/latest/applib/index/services/factory/FactoryService.html" class="xref page">FactoryService#mixin(&#8230;&#8203;)</a> method.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DocumentHolder_documents mixin =
    factoryService.mixin(DocumentHolder_documents.class, customer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use <a href="../../../refguide/latest/applib/index/services/inject/ServiceInjector.html" class="xref page">ServiceInjector</a> to inject domain services after the mixin has been instantiated.
You&#8217;ll need to use this method if using nested non-<code>static</code> mixins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SimpleObject.updateName mixin =
    serviceInjector.injectServicesInto( simpleObject.new updateName() );</code></pre>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright Â© 2010~2021 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M9.20221112-0328-18ebf089</p>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
