<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Core Concepts :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../../.." title="Apache Isis">
  <link rel="next" href="overview.html" title="Overview">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">
          <span class="icon">
            <img src="../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../setupguide/2.0.0-M4/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide/2.0.0-M4/about.html">User Guide</a>
            <a class="navbar-item" href="../../../refguide/2.0.0-M4/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../testing/2.0.0-M4/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../subdomains/2.0.0-M4/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../../valuetypes/2.0.0-M4/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../../mappings/2.0.0-M4/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../../incubator/2.0.0-M4/about.html">Incubator</a>
            <a class="navbar-item" href="../../../legacy/2.0.0-M4/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../vw/2.0.0-M4/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../../vro/2.0.0-M4/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security/2.0.0-M4/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../pjdo/2.0.0-M4/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../../extensions/2.0.0-M4/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../relnotes/2.0.0-M4/about.html">Release Notes</a>
            <a class="navbar-item" href="../../../docs/2.0.0-M4/archive/1-x.html">Archive (1.x)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../../conguide/2.0.0-M4/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../../comguide/2.0.0-M4/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../core/2.0.0-M4/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../docs/2.0.0-M4/about.html">
          <span class="icon">
            <img src="../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous disabled" rel="prev" href="" title=""><span></span></a>
  <a class="page-next" rel="next"
     href="overview.html" title="Overview"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title=""><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="concepts-patterns.html">Concepts &amp; Patterns</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="domain-entities-and-services.html">Domain Entities &amp; Services</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="object-members.html">Object Members</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ui.html">UI Layout &amp; Hints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drop-downs-and-defaults.html">Drop downs and Defaults</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="meta-annotations.html">Meta-annotations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="view-models.html">View Models</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mixins.html">Mixins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../btb/about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/i18n.html">i18n</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/programming-model.html">Programming Model</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../flyway/about.html">Flyway</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../mappings/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../legacy/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../subdomains/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">User Guide</a></li>
    <li><a href="concepts-patterns.html">Concepts &amp; Patterns</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/api/adoc/userguide/modules/fun/pages/concepts-patterns.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Core Concepts</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This introductory chapter should give you a good about what Apache Isis actually <strong>is</strong>: the ideas and principles that it builds upon, what its core values are, its architecture, how it compares to other architectural approaches other frameworks, and how it can be deployed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="domain-driven-design"><a class="anchor" href="#domain-driven-design"></a>Domain-Driven Design</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There&#8217;s no doubt that we developers love the challenge of understanding and deploying complex technologies.
But understanding the nuances and subtleties of the business domain itself is just as great a challenge, perhaps more so.
If we devoted our efforts to understanding and addressing those subtleties, we could build better, cleaner, and more maintainable software that did a better job for our stakeholders.
And there&#8217;s no doubt that our stakeholders would thank us for it.</p>
</div>
<div class="paragraph">
<p>A couple of years back Eric Evans wrote his book <a href="http://www.amazon.co.uk/Domain-driven-Design-Tackling-Complexity-Software/dp/0321125215">Domain-Driven Design</a>, judged by many to being a seminal work.
In fact, most if not all of the ideas in Evans' book have been expressed before, but what he did was pull those ideas together to show how predominantly object-oriented techniques can be used to develop rich, deep, insightful, and ultimately useful business applications.</p>
</div>
<div class="paragraph">
<p>There are two central ideas at the heart of domain-driven design.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <strong><em>ubiquitous language</em></strong> is about getting the whole team (both domain experts and developers) to communicate more transparently using a domain model.</p>
</li>
<li>
<p>Meanwhile, <strong><em>model-driven design</em></strong> is about capturing that model in a very straightforward manner in code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let&#8217;s look at each in turn.</p>
</div>
<div class="sect2">
<h3 id="ubiquitous-language"><a class="anchor" href="#ubiquitous-language"></a>Ubiquitous Language</h3>
<div class="paragraph">
<p>It&#8217;s no secret that the IT industry is plagued by project failures.
Too often systems take longer than intended to implement, and when finally implemented, they don&#8217;t address the real requirements anyway.</p>
</div>
<div class="paragraph">
<p>Over the years we in IT have tried various approaches to address this failing.
Using waterfall methodologies, we&#8217;ve asked for requirements to be fully and precisely written down before starting on anything else.
Or, using agile methodologies, we&#8217;ve realized that requirements are likely to change anyway and have sought to deliver systems incrementally using feedback loops to refine the implementation.</p>
</div>
<div class="paragraph">
<p>But let&#8217;s not get distracted talking about methodologies.
At the end of the day what really matters is communication between the domain experts (that is, the business) who need the system and the techies actually implementing it.
If the two don&#8217;t have and cannot evolve a shared understanding of what is required, then the chance of delivering a useful system will be next to nothing.</p>
</div>
<div class="paragraph">
<p>Bridging this gap is traditionally what business analysts are for; they act as interpreters between the domain experts and the developers.
However, this still means there are two (or more) languages in use, making it difficult to verify that the system being built is correct.
If the analyst mistranslates a requirement, then neither the domain expert nor the application developer will discover this until (at best) the application is first demonstrated or (much worse) an end user sounds the alarm once the application has been deployed into production.</p>
</div>
<div class="paragraph">
<p>Rather than trying to translate between a business language and a technical language, with <em>DDD</em> we aim to have the business and developers using the same terms for the same concepts in order to create a single <strong><em>domain model</em></strong>.
This domain model identifies the relevant concepts of the domain, how they relate, and ultimately where the responsibilities are.
This single domain model provides the vocabulary for the ubiquitous language for our system.</p>
</div>
<div class="sidebarblock float-left">
<div class="content">
<div class="title">Ubiquitous Language</div>
<div class="paragraph">
<p>Build a common language between the domain experts and developers by using the concepts of the domain model as the primary means of communication.
Use the terms in speech, in diagrams, in writing, and when presenting.</p>
</div>
<div class="paragraph">
<p>If an idea cannot be expressed using this set of concepts, then go back and extend the model.
Look for and remove ambiguities and inconsistencies.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Creating a ubiquitous language calls upon everyone involved in the system&#8217;s development to express what they are doing through the vocabulary provided by the model.
If this can&#8217;t be done, then our model is incomplete.
Finding the missing words deepens our understanding of the domain being modeled.</p>
</div>
<div class="paragraph">
<p>This might sound like nothing more than me insisting that the developers shouldn&#8217;t use jargon when talking to the business.
Well, that&#8217;s true enough, but it&#8217;s not a one-way street.
A <strong>ubiquitous language</strong> demands that the developers work hard to understand the problem domain, but it also demands that the business works hard in being <strong>precise</strong> in its naming and descriptions of those concepts.
After all, ultimately the developers will have to express those concepts in a computer programming language.</p>
</div>
<div class="paragraph">
<p>Also, although here I&#8217;m talking about the "domain experts" as being a homogeneous group of people, often they may come from different branches of the business.
Even if we weren&#8217;t building a computer system, there&#8217;s a lot of value in helping the domain experts standardize their own terminology.
Is the marketing department&#8217;s "prospect" the same as sales' "customer," and is that the same as an after-sales "contract"?</p>
</div>
<div class="paragraph">
<p>The need for precision within the ubiquitous language also helps us scope the system.
Most business processes evolve piecemeal and are often quite ill-defined.
If the domain experts have a very good idea of what the business process should be, then that&#8217;s a good candidate for automation, that is, including it in the scope of the system.
But if the domain experts find it hard to agree, then it&#8217;s probably best to leave it out.
After all, human beings are rather more capable of dealing with fuzzy situations than computers.</p>
</div>
<div class="paragraph">
<p>So, if the development team (business and developers together) continually searches to build their ubiquitous language, then the domain model naturally becomes richer as the nuances of the domain are uncovered.
At the same time, the knowledge of the business domain experts also deepens as edge conditions and contradictions that have previously been overlooked are explored.</p>
</div>
<div class="paragraph">
<p>We use the ubiquitous language to build up a domain model.
But what do we do <strong>with</strong> that model?
The answer to that is the second of our central ideas.</p>
</div>
</div>
<div class="sect2">
<h3 id="model-driven-design"><a class="anchor" href="#model-driven-design"></a>Model-Driven Design</h3>
<div class="paragraph">
<p>Of the various methodologies that the IT industry has tried, many advocate the production of separate analysis models and implementation models.
One example (from the mid 2000s) was that of the <em>OMG</em>'s Model-Driven Architecture ( <em>MDA</em>) initiative, with its platform-independent model (the <em>PIM</em>) and a platform-specific model (the <em>PSM</em>).</p>
</div>
<div class="paragraph">
<p>Bah and humbug!
If we use our ubiquitous language just to build up a high-level analysis model, then we will re-create the communication divide.
The domain experts and business analysts will look only to the analysis model, and the developers will look only to the implementation model.
Unless the mapping between the two is completely mechanical, inevitably the two will diverge.</p>
</div>
<div class="paragraph">
<p>What do we mean by <strong>model</strong> anyway?
For some, the term will bring to mind UML class or sequence diagrams and the like.
But this isn&#8217;t a model; it&#8217;s a visual <strong>representation</strong> of some aspect of a model.
No, a domain model is a group of related concepts, identifying them, naming them, and defining how they relate.
What is in the model depends on what our objective is.
We&#8217;re not looking to simply model everything that&#8217;s out there in the real world.
Instead, we want to take a relevant abstraction or simplification of it and then make it do something useful for us.
A model is neither right nor wrong, just more or less useful.</p>
</div>
<div class="paragraph">
<p>For our ubiquitous language to have value, the domain model that encodes it must have a straightforward, literal representation to the design of the software, specifically to the implementation.
Our software&#8217;s design should be driven by this model; we should have a model-driven design.</p>
</div>
<div class="sidebarblock float-left">
<div class="content">
<div class="title">Model-Driven Design</div>
<div class="paragraph">
<p>There must be a straightforward and very literal way to represent the domain model in terms of software.
The model should balance these two requirements: form the ubiquitous language of the development team and be representable in code.</p>
</div>
<div class="paragraph">
<p>Changing the code means changing the model; refining the model requires a change to the code.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Here also the word <strong>design</strong> might mislead; some might be thinking of design documents and design diagrams, or perhaps of user interface (UX) design.
But by <strong>design</strong> we mean a way of organizing the domain concepts, which in turn leads to the way in which we organize their representation in code.</p>
</div>
<div class="paragraph">
<p>Luckily, using <strong><em>object-oriented</em></strong> (<em>OO</em>) languages such as Java, this is relatively easy to do; <em>OO</em> is based on a modeling paradigm anyway.
We can express domain concepts using classes and interfaces, and we can express the relationships between those concepts using associations.</p>
</div>
<div class="paragraph">
<p>So far so good.
Or maybe, so far so much motherhood and apple pie.
Understanding the <em>DDD</em> concepts isn&#8217;t the same as being able to apply them, and some of the <em>DDD</em> ideas can be difficult to put into practice.
Time to discuss the naked objects pattern and how it eases that path by applying these central ideas of <em>DDD</em> in a very concrete way.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="naked-objects-pattern"><a class="anchor" href="#naked-objects-pattern"></a>Naked Objects Pattern</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis implements the naked objects pattern, originally formulated by Richard Pawson.
So who better than Richard to explain the origination of the idea:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Naked Objects pattern arose, at least in part, from my own frustration at the lack of success of the domain-driven approach.
Good examples were hard to find&#8201;&#8212;&#8201;as they are still.</p>
</div>
<div class="paragraph">
<p>A common complaint from <em>DDD</em> practitioners was that it was hard to gain enough commitment from business stakeholders, or even to engage them at all.
My own experience suggested that it was nearly impossible to engage business managers with UML diagrams.
It was much easier to engage them in rapid prototyping&#8201;&#8212;&#8201;where they could see and interact with the results&#8201;&#8212;&#8201;but most forms of rapid prototyping concentrate on the presentation layer, often at the expense of the underlying model and certainly at the expense of abstract thinking.</p>
</div>
<div class="paragraph">
<p>Even if you could engage the business sponsors sufficiently to design a domain model, by the time you&#8217;d finished developing the system on top of the domain model, most of its benefits had disappeared.
It&#8217;s all very well creating an agile domain object model, but if any change to that model also dictates the modification of one or more layers underneath it (dealing with persistence) and multiple layers on top (dealing with presentation), then that agility is practically worthless.</p>
</div>
<div class="paragraph">
<p>The other concern that gave rise to the birth of Naked Objects was how to make user interfaces of mainstream business systems more "expressive"&#8201;&#8212;&#8201;how to make them feel more like using a drawing program or <em>CAD</em> system.
Most business systems are not at all expressive; they treat the user merely as a dumb <strong>process-follower</strong>, rather than as an empowered <strong>problem-solver</strong>.
Even the so-called usability experts had little to say on the subject: try finding the word "empowerment" or any synonym thereof in the index of any book on usability.
Research had demonstrated that the best way to achieve expressiveness was to create an object-oriented user interface (<em>OOUI</em>).
In practice, though, <em>OOUI</em>s were notoriously hard to develop.</p>
</div>
<div class="paragraph">
<p>Sometime in the late 1990s, it dawned on me that if the domain model really did represent the "ubiquitous language" of the business and those domain objects were behaviorally rich (that is, business logic is encapsulated as methods on the domain objects rather than in procedural scripts on top of them), then the <em>UI</em> could be nothing more than a reflection of the user interface.
This would solve both of my concerns.
It would make it easier to do domain-driven design, because one could instantly translate evolving domain modeling ideas into a working prototype.
And it would deliver an expressive, object-oriented user interface for free.
Thus was born the idea of Naked Objects.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>You can learn much more about the pattern in the book, <a href="http://www.amazon.com/exec/obidos/ISBN=0470844205/">Naked Objects</a>, also freely available to <a href="http://www.nakedobjects.org/book/">read online</a>.
Richard co-wrote the book with one of Apache Isis' committers, Robert Matthews, who was in turn the author of the Naked Objects Framework for Java (the original codebase of Apache Isis).</p>
</div>
<div class="paragraph">
<p>You might also want to read Richard&#8217;s <a href="_attachments/core-concepts/Pawson-Naked-Objects-thesis.pdf">PhD on the subject</a>.</p>
</div>
<div class="sect2">
<h3 id="object-interface-mapping"><a class="anchor" href="#object-interface-mapping"></a>Object Interface Mapping</h3>
<div class="paragraph">
<p>Another&#8201;&#8212;&#8201;more technical&#8201;&#8212;&#8201;way to think about the naked objects pattern is as an <em>object interface mapper</em>, or <code>OIM</code>.
Just as an ORM (such as <a href="http://datanucleus.org">DataNucleus</a> or <a href="http://hibernate.org">Hibernate</a>) maps domain entities to a database, you can think of the naked objects pattern as representing the concept of mapping domain objects to a user interface.
We sometimes use this idea to explain naked objects to a developer audience.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="core-values"><a class="anchor" href="#core-values"></a>Core Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the core values that the the Apache Isis framework tries to uphold.</p>
</div>
<div class="sect2">
<h3 id="aligned-with-the-business"><a class="anchor" href="#aligned-with-the-business"></a>Aligned with the Business</h3>
<div class="paragraph">
<p>Apache Isis is primarily aimed at custom-built "enterprise" applications, with a UI provided by the <a href="../../../vw/latest/about.html" class="page">Wicket viewer</a> is intended to be usable by domain experts, typically end-users within the organization.</p>
</div>
<div class="paragraph">
<p>But why should an organisation build software, when it could just buy it?</p>
</div>
<div class="paragraph">
<p>To be clear, buying packaged software <em>does</em> make sense in many cases: for statutory requirements, such as payroll or general ledger, or document management/retrieval.
But (we argue) it makes much less sense to buy packaged software for the systems that support the core business: <strong>the software should fit the business, not the other way around</strong>.</p>
</div>
<div class="paragraph">
<p>Packaged software suffers from the problem of both having doing "too much" and "not enough":</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it does "too much" because it will have features that are not required by your business.
These extra unnecessary features make the system difficult to learn and use.;</p>
</li>
<li>
<p>but it may also do "too little" because there may be crucial functionality not supported by the software.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The diagram below illustrates the dichotomy:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/core-concepts/philosophy/build-vs-buy.png"><img src="_images/core-concepts/philosophy/build-vs-buy.png" alt="build vs buy" width="550px"></a>
</div>
<div class="title">Figure 1. build-vs-buy</div>
</div>
<div class="paragraph">
<p>What happens in this case is that end-users&#8201;&#8212;&#8201;needing some sort of solution for their particular business problem&#8201;&#8212;&#8201;will end up using unused fields to store the information they need.
We end up with no correlation between the fields definitions and the values stored therein, sometimes with the datatypes not even matching.
Any business rules pertaining to this extra data have to be enforced manually by the users, rather than by the system.
The end result is a system even more complicated to learn and use, with the quality of the data held within it degrading as end users inevitably make mistakes in using it.</p>
</div>
<div class="paragraph">
<p>There are other benefits too for building rather than buying.
Packaged software is almost always sold with a support package, the cover of which can vary enormously.
At one end of the spectrum the support package ("bronze", say) will amount to little more than the ability to raise bug reports and to receive maintenance patches.
At the other end (let&#8217;s call it "platinum"), the support package might provide the ability to influence the direction of the development of the product, perhaps specific features missing by the business.</p>
</div>
<div class="paragraph">
<p>Even so, the more widely used is the software package, the less chance of getting it changed.
Does anyone reading this think they could get a new feature added (or removed) from Microsoft Word, for example?</p>
</div>
<div class="paragraph">
<p>Here&#8217;s another reason why you should build, and not buy, the software supporting your core business domain.
Although most packaged software is customisable to a degree, there is always a limit to what can be customised.
The consequence is that the business is forced to operate according to the way in which the software requires.</p>
</div>
<div class="paragraph">
<p>This might be something as relatively innocuous as imposing its own terminology onto the business, meaning that the end-users must mentally translate concepts in order to use the software.
But it might impose larger constraints on the business; some packaged software (we carefully mention no names) is quite notorious for this</p>
</div>
<div class="paragraph">
<p>If your business is using the same software as your competitor, then obviously there&#8217;s no competitive advantage to be gained.
And if your competitor has well-crafted custom software, then your business will be at a competitive <em>dis</em>advantage.</p>
</div>
<div class="paragraph">
<p>So, our philosophy is that custom software&#8201;&#8212;&#8201;for your core business domain&#8201;&#8212;&#8201;is the way to go.</p>
</div>
</div>
<div class="sect2">
<h3 id="modular"><a class="anchor" href="#modular"></a>Modular</h3>
<div class="paragraph">
<p>Enterprise applications tend to stick around a long time; a business' core domains don&#8217;t tend to change all that often.
What this means in turn is that the application needs to be maintainable, so that it is as easy to modify and extend when it&#8217;s 10 years old as when it was first written.</p>
</div>
<div class="paragraph">
<p>That&#8217;s a tall order for any application to meet, and realistically it <em>can</em> only be met if the application is modular.
Any application that lacks a coherent internal structure will ultimately degrade into an unmaintable "big ball of mud", and the development team&#8217;s velocity/capacity to make changes will reduce accordingly.</p>
</div>
<div class="paragraph">
<p>Apache Isis' architecture allows the internal structure to be maintained in two distinct ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first, the naked objects pattern acts as a "firewall", ensuring that any business logic in the domain layer doesn&#8217;t leak out into the presentation layer (it can&#8217;t, because the developer doesn&#8217;t write any controllers/views).</p>
</li>
<li>
<p>second, the framework&#8217;s provides various features (discussed in more detail below) to allow the different modules <em>within</em> the domain layer to interact with each in a decoupled fashion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The diagram below illustrates this:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/core-concepts/philosophy/decoupled-applications.png"><img src="_images/core-concepts/philosophy/decoupled-applications.png" alt="decoupled applications" width="800px"></a>
</div>
<div class="title">Figure 2. decoupled applications</div>
</div>
<div class="paragraph">
<p>Here, the presentation layer (<a href="../../../vw/latest/about.html" class="page">Wicket UI</a> or <a href="../../../vro/latest/about.html" class="page">REST API</a>) is handled by the framework, while the developer focusses on just the domain layer.
The framework encourages splitting this functionality into modules; each such module has its counterpart (typically tables within a given RDBMS database schema) within the persistence layer.</p>
</div>
<div class="paragraph">
<p>This architecture means that it&#8217;s impossible for business logic to leach out into the adjacent presentation layer because the developer doesn&#8217;t (can&#8217;t) write any code for presentation layer.
We in effect have a "firewall" between the two layers.</p>
</div>
<div class="paragraph">
<p>To support the business domain being split into separate modules, the framework provides various features, the most important of which are the dependency injection of <a href="overview.html#domain-services" class="page">domain services</a>, <a href="overview.html#mixins" class="page">mixins</a>, and in-memory <a href="overview.html#events" class="page">events</a>.</p>
</div>
<div class="paragraph">
<p>For those cases where a module needs to interact with other modules but does not know about their implementations, the module can either define its own <a href="https://en.wikipedia.org/wiki/Service_provider_interface">SPI</a> domain services or it can define custom domain events and fire them.
This technique is also used extensively by the framework itself.
For example, the <a href="../../../refguide/latest/applib-svc/AuditerService.html" class="page"><code>AuditerService</code></a> SPI enables custom auditing, and the <a href="../../../refguide/latest/applib-svc/PublisherService.html" class="page"><code>PublisherService</code></a> SPI enables custom publishing.</p>
</div>
<div class="paragraph">
<p>When building a modular application, it&#8217;s important to consider the logical layering of the modules: we don&#8217;t need every module to be completely decoupled from every other.
The most important requirement is that there are no cyclic dependencies, because otherwise we run the risk of the application degrading into a <a href="https://en.wikipedia.org/wiki/Big_ball_of_mud">"big ball of mud"</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For further discussion on modular monoliths, check out Dan Haywood&#8217;s article on InfoQ, "In Defence of the Monolith" (<a href="https://www.infoq.com/articles/monolith-defense-part-1">part 1</a>, <a href="https://www.infoq.com/articles/monolith-defense-part-2">part 2</a>).</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="easing-the-road-to-ddd"><a class="anchor" href="#easing-the-road-to-ddd"></a>Easing the road to DDD</h3>
<div class="paragraph">
<p>The case for <a href="#domain-driven-design">domain driven design</a>  might be compelling, but that doesn&#8217;t necessarily make it easy to do.
Let&#8217;s take a look at some of the challenges that <em>DDD</em> throws up and see how Apache Isis (and its implementation of the naked objects pattern) helps address them.</p>
</div>
<div class="sect3">
<h4 id="ddd-takes-a-conscious-effort"><a class="anchor" href="#ddd-takes-a-conscious-effort"></a>DDD takes a conscious effort</h4>
<div class="paragraph">
<p>Here&#8217;s what Eric Evans says about ubiquitous language:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>With a conscious effort by the [development] team the domain model can provide the backbone for [the] common [ubiquitous] language&#8230;&#8203;connecting team communication to the software implementation.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The word to pick up on here is <strong>conscious</strong>.
It takes a <em>conscious</em> effort by the entire team to develop the ubiquitous language.
Everyone in the team must challenge the use of new or unfamiliar terms, must clarify concepts when used in a new context, and in general must be on the lookout for sloppy thinking.
This takes willingness on the part of all involved, not to mention some practice.</p>
</div>
<div class="paragraph">
<p>With Apache Isis, though, the ubiquitous language evolves with scarcely any effort at all.
For the business experts, the Apache Isis viewers show the domain concepts they identify and the relationships between those concepts in a straightforward fashion.
Meanwhile, the developers can devote themselves to encoding those domain concepts directly as domain classes.
There&#8217;s no technology to get distracted by; there is literally nothing else for the developers to be working on.</p>
</div>
</div>
<div class="sect3">
<h4 id="ddd-must-be-grounded"><a class="anchor" href="#ddd-must-be-grounded"></a>DDD must be grounded</h4>
<div class="paragraph">
<p>Employing a model-driven design isn&#8217;t necessarily straightforward, and the development processes used by some organizations positively hinder it.
It&#8217;s not sufficient for the business analysts or architects to come up with some idealized representation of the business domain and then chuck it over the wall for the programmers to do their best with.</p>
</div>
<div class="paragraph">
<p>Instead, the concepts in the model must have a very literal representation in code.
If we fail to do this, then we open up the communication divide, and our ubiquitous language is lost.
There is literally no point having a domain model that cannot be represented in code.
We cannot invent our ubiquitous language in a vacuum, and the developers must ensure that the model remains grounded in the doable.</p>
</div>
<div class="paragraph">
<p>In Apache Isis, we have a very pure one-to-one correspondence between the domain concepts and its implementation.
Domain concepts are represented as classes and interfaces, easily demonstrated back to the business.
If the model is clumsy, then the application will be clumsy too, and so the team can work together to find a better implementable model.</p>
</div>
</div>
<div class="sect3">
<h4 id="model-must-be-understandable"><a class="anchor" href="#model-must-be-understandable"></a>Model must be understandable</h4>
<div class="paragraph">
<p>If we are using code as the primary means of expressing the model, then we need to find a way to make this model understandable to the business.</p>
</div>
<div class="paragraph">
<p>We could generate UML diagrams and the like from code.
That will work for some members of the business community, but not for everyone.
Or we could generate a PDF document from Javadoc comments, but comments aren&#8217;t code and so the document may be inaccurate.
Anyway, even if we do create such a document, not everyone will read it.</p>
</div>
<div class="paragraph">
<p>A better way to represent the model is to show it in action as a working prototype.
As we show with the <a href="../../../docs/latest/starters/helloworld.html" class="page">starter apps</a>, Apache Isis enables this with ease.
Such prototypes bring the domain model to life, engaging the audience in a way that a piece of paper never can.</p>
</div>
<div class="paragraph">
<p>Moreover, with Apache Isis prototypes, the domain model will come shining through.
If there are mistakes or misunderstandings in the domain model (inevitable when building any complex system), they will be obvious to all.</p>
</div>
</div>
<div class="sect3">
<h4 id="architecture-must-be-robust"><a class="anchor" href="#architecture-must-be-robust"></a>Architecture must be robust</h4>
<div class="paragraph">
<p><em>DDD</em> rightly requires that the domain model lives in its own layer within the architecture.
The other layers of the application (usually presentation, application, and persistence) have their own responsibilities, and are completely separate.</p>
</div>
<div class="paragraph">
<p>However, there are two immediate issues.
The first is rather obvious: custom coding each of those other layers is an expensive proposition.
Picking up on the previous point, this in itself can put the kibosh on using prototyping to represent the model, even if we wanted to do so.</p>
</div>
<div class="paragraph">
<p>The second issue is more subtle.
It takes real skill to ensure the correct separation of concerns between these layers, if indeed you can get an agreement as to what those concerns actually are.
Even with the best intentions, it&#8217;s all too easy for custom-written layers to blur the boundaries and put (for example) validation in the user interface layer when it should belong to the domain layer.
At the other extreme, it&#8217;s quite possible for custom layers to distort or completely subvert the underlying domain model.</p>
</div>
<div class="paragraph">
<p>Because of Apache Isis' generic <em>OOUI</em>s, there&#8217;s no need to write the other layers of the architecture.
Of course, this reduces the development cost.
But more than that, there will be no leakage of concerns outside the domain model.
All the validation logic <strong>must</strong> be in the domain model because there is nowhere else to put it.</p>
</div>
<div class="paragraph">
<p>Moreover, although Apache Isis does provide a complete runtime framework, there is no direct coupling of your domain model to the framework.
That means it is very possible to take your domain model prototyped in Apache Isis and then deploy it on some other <em>J(2)EE</em> architecture, with a custom <em>UI</em> if you want.
This is discussed later on, in <a href="#deployment-options">deployment options</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="extending-the-reach-of-ddd"><a class="anchor" href="#extending-the-reach-of-ddd"></a>Extending the reach of DDD</h4>
<div class="paragraph">
<p>Domain-driven design is often positioned as being applicable only to complex domains; indeed, the subtitle of Evans book is "Tackling Complexity in the Heart of Software".
The corollary is that DDD is overkill for simpler domains.
The trouble is that we immediately have to make a choice: is the domain complex enough to warrant a domain-driven approach?</p>
</div>
<div class="paragraph">
<p>This goes back to the previous point, building and maintaining a layered architecture.
It doesn&#8217;t seem cost effective to go to all the effort of a DDD approach if the underlying domain model is simple.</p>
</div>
<div class="paragraph">
<p>However, with Apache Isis, we don&#8217;t write these other layers, so we don&#8217;t have to make a call on how complex our domain is.
We can start working solely on our domain, even if we suspect it will be simple.
If it is indeed a simple domain, then there&#8217;s no hardship, but if unexpected subtleties arise, then we&#8217;re in a good position to handle them.</p>
</div>
<div class="paragraph">
<p>If you&#8217;re just starting out writing domain-driven applications, then Apache Isis should significantly ease your journey into applying <em>DDD</em>.
And if you <em>have</em> used <em>DDD</em> for a while, then you should find the framework a very useful new tool in your arsenal.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture"><a class="anchor" href="#architecture"></a>Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes some of the architectural patterns upon which Apache Isis builds.</p>
</div>
<div class="sect2">
<h3 id="hexagonal-architecture"><a class="anchor" href="#hexagonal-architecture"></a>Hexagonal Architecture</h3>
<div class="paragraph">
<p>One of the patterns that Evans discusses in his book is that of a <strong>layered architecture</strong>.
In it he describes why the domain model lives in its own layer within the architecture.
The other layers of the application (usually presentation, application, and persistence) have their own responsibilities, and are completely separate.
Each layer is cohesive and depending only on the layers below.
In particular, we have a layer dedicated to the domain model.
The code in this layer is unencumbered with the (mostly technical) responsibilities of the other layers and so can evolve to tackle complex domains as well as simple ones.</p>
</div>
<div class="paragraph">
<p>This is a well-established pattern, almost de-facto; there&#8217;s very little debate that these responsibilities should be kept separate from each other.
With Apache Isis the responsibility for presentation is a framework concern, the responsibility for the domain logic is implemented by your application code.</p>
</div>
<div class="paragraph">
<p>A few years ago Alistair Cockburn reworked the traditional layered architecture diagram and came up with the <strong><em>hexagonal architecture</em></strong> (also known as/very similar to the <a href="http://jeffreypalermo.com/blog/the-onion-architecture-part-1/">Onion</a> architecture):</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/core-concepts/philosophy/hexagonal-architecture.png"><img src="_images/core-concepts/philosophy/hexagonal-architecture.png" alt="hexagonal architecture" width="700px"></a>
</div>
<div class="title">Figure 3. The hexagonal architecture emphasizes multiple implementations of the different layers.</div>
</div>
<div class="paragraph">
<p>What Cockburn emphasizes is that there&#8217;s usually more than one way <strong>into</strong> an application (what he called the <strong><em>user-side' ports</em></strong>) and more than one way <strong>out of</strong> an application too (the <strong><em>data-side ports</em></strong>).
This is very similar to the concept of primary and secondary actors in use cases: a primary actor (often a human user but not always) is active and initiates an interaction, while a secondary actor (almost always an external system) is passive and waits to be interacted with.</p>
</div>
<div class="paragraph">
<p>Associated with each port can be an <strong><em>adapter</em></strong> (in fact, Cockburn&#8217;s alternative name for this architecture is <a href="http://c2.com/cgi/wiki?PortsAndAdaptersArchitecture">ports and adapters</a>).
An adapter is a device (piece of software) that talks in the protocol (or <em>API</em>) of the port.
Each port could have several adapters.</p>
</div>
<div class="paragraph">
<p>Apache Isis maps very nicely onto the hexagonal architecture.
Apache Isis' viewers act as user-side adapters and use the Apache Isis metamodel API as a port into the domain objects.
For the data side, we are mostly concerned with persisting domain objects to some sort of object store.
Here Apache Isis delegates most of the heavy lifting to an ORM (DataNucleus or similar).</p>
</div>
</div>
<div class="sect2">
<h3 id="aop"><a class="anchor" href="#aop"></a>Aspect Oriented</h3>
<div class="paragraph">
<p>Although not a book about object modelling, Evans' "Domain Driven Design" does use object orientation as its primary modelling tool; while <a href="#naked-objects-pattern">naked objects pattern</a> very much comes from an OO background (it even has 'object' in its name).</p>
</div>
<div class="paragraph">
<p>It&#8217;s certainly true that to develop an Apache Isis application you will reasonably good object oriented modelling skills.
But given that all the mainstream languages for developing business systems are object oriented (Java, C#, Ruby), that&#8217;s not such a stretch.</p>
</div>
<div class="paragraph">
<p>However, what you&#8217;ll also discover is that in some ways an Apache Isis application is more aspect-oriented than it is object oriented.
Given that aspect-orientation&#8201;&#8212;&#8201;as a programming paradigm at least&#8201;&#8212;&#8201;hasn&#8217;t caught on, that statement probably needs unpacking a little.</p>
</div>
<div class="sect3">
<h4 id="aop-concepts"><a class="anchor" href="#aop-concepts"></a>AOP Concepts</h4>
<div class="paragraph">
<p>Aspect-orientation, then, is a different way of decomposing your application, by treating <em>cross-cutting concerns</em> as a first-class citizen.
The canonical (also rather boring) example of a cross-cutting concern is that of logging (or tracing) all method calls.
An aspect can be written that will weave in some code (a logging statement) at specified points in the code).</p>
</div>
<div class="paragraph">
<p>This idea sounds rather abstract, but what it really amounts to is the idea of interceptors.
When one method calls another the AOP code is called in first.
This is actually then one bit of AOP that is quite mainstream; DI containers such as Spring provide aspect orientation in supporting annotations such as <code>@Transactional</code> or <code>@Secured</code> to java beans.</p>
</div>
<div class="paragraph">
<p>Another aspect (so to speak!) of aspect-oriented programming has found its way into other programming languages, that of a mix-in or trait.
In languages such as Scala these mix-ins are specified statically as part of the inheritance hierarchy, whereas with AOP the binding of a trait to some other class/type is done without the class "knowing" that additional behaviour is being mixed-in to it.</p>
</div>
</div>
<div class="sect3">
<h4 id="realization-within-apache-isis"><a class="anchor" href="#realization-within-apache-isis"></a>Realization within Apache Isis</h4>
<div class="paragraph">
<p>What does all this have to do with Apache Isis?</p>
</div>
<div class="paragraph">
<p>Well, a different way to think of the naked objects pattern is that the visualization of a domain object within a UI is a cross-cutting concern.
By following certain very standard programming conventions that represent the <em>Apache Isis Programming Model</em> (POJOs plus annotations), the framework is able to build a metamodel and from this can render your domain objects in a standard generic fashion.
That&#8217;s a rather more interesting cross-cutting concern than boring old logging!</p>
</div>
<div class="paragraph">
<p>Apache Isis also draws heavily on the AOP concept of interceptors.
Whenever an object is rendered in the UI, it is filtered with respect to the user&#8217;s permissions.
That is, if a user is not authorized to either view or perhaps modify an object, then this is applied transparently by the framework.
The <a href="../../../security/latest/about.html" class="page">SecMan extension</a> provides a rich user/role/permissions subdomain to use out of the box; but you can integrate with a different security mechanism if you have one already.</p>
</div>
<div class="paragraph">
<p>Another example of interceptors are the <a href="../../../extensions/latest/command-log/about.html" class="page">Command Log</a> and <a href="../../../security/latest/audit-trail/about.html" class="page">Auditer</a> modules.
The <em>Command Log</em> module captures every user interaction that modifies the state of the system (the "cause" of a change) while the <em>Auditer</em> module captures every change to every object (the "effect" of a change).
Again, this is all transparent to the user.</p>
</div>
<div class="paragraph">
<p>Apache Isis also leverages the Spring framework&#8217;s event bus.
A domain event is fired whenever an object is interacted with, and this allows any subscribers to influence the operation (or even veto it).
This is a key mechanism in ensuring that Apache Isis applications are maintainable, by decoupling logic into separate modules.
But fundamentally its relying on this AOP concept of interceptors, with event subscribers in one module potentially influencing or responding to interaction triggered in another.</p>
</div>
<div class="paragraph">
<p>Finally, Apache Isis also a feature that is akin to AOP traits.
A "contributed action" is one that is implemented by a mixin class but that appears to be a behaviour of rendered domain object.
Mixins can also contribute read-only properties or collections: effectively the result of running a query that returns a scalar or a vector.
In other words, we can dissociate behaviour from data.</p>
</div>
<div class="paragraph">
<p>That&#8217;s not always the right thing to do of course.
In Richard Pawson&#8217;s description of the <a href="#naked-objects-pattern">naked objects pattern</a> he talks about "behaviourally rich" objects, in other words where the business functionality encapsulates the data.
But on the other hand sometimes the behaviour and data structures change at different rates.
The <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">single responsibility principle</a> says we should only lump code together that changes at the same rate.
Apache Isis' support for contributions (not only contributed actions, but also contributed properties and contributed collections) enables this.
And again, to loop back to the topic of this section, it&#8217;s an AOP concept that being implemented by the framework.</p>
</div>
<div class="paragraph">
<p>The nice thing about aspect orientation is that for the most part you can ignore these cross-cutting concerns and - at least initially - just focus on implementing your domain object.
Later when your app starts to grow and you start to break it out into smaller modules, you can leverage Apache Isis' AOP support for <a href="overview.html#mixins" class="page">mixins</a> and interceptors (using the <a href="../../../refguide/latest/applib-svc/EventBusService.html" class="page">event bus</a>) to ensure that your codebase remains maintainable.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metamodel"><a class="anchor" href="#metamodel"></a>A MetaModel</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At its core, Apache Isis is a metamodel that is built at runtime from the domain classes (eg <code>Customer.java</code>), along with optional supporting metadata (eg <code>Customer.layout.xml</code>).</p>
</div>
<div class="paragraph">
<p>The contents of this metamodel are the entities and supporting services, as well the members of those classes.
These are all meta-annotated with <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/stereotype/Component.html"><code>@Component</code></a> and are either registered explicitly (framework services) or dynamically discovered (entities and user-defined services) by Spring Boot on the classpath via <a href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/annotation/ComponentScan.html"><code>@ComponentScan</code></a>.</p>
</div>
<div class="paragraph">
<p>The detail of the metamodel is generally explicit, usually represented by Java annotations such as <code>@Title</code> or <code>@Action</code>, though this is configurable.
Notably the metamodel is <a href="../btb/programming-model.html" class="page">extensible</a>; it is possible to teach Apache Isis new programming conventions/rules (and conversely to remove those that are built in).</p>
</div>
<div class="paragraph">
<p>Most of the annotations recognized by the framework are defined by the Apache Isis framework itself.
For example the <code>@Title</code> annotation&#8201;&#8212;&#8201;which identifies how the framework should derive a human-readable label for each rendered domain object&#8201;&#8212;&#8201;is part of the <code>org.apache.isis.applib.annotations</code> package.
However the framework also recognizes certain other JEE annotations such as <code>@javax.inject.Inject</code> (used for dependency injection).</p>
</div>
<div class="paragraph">
<p>The framework integrates an ORM for persistence, specifically DataNucleus and the JDO API (there is a roadmap to also support JPA with other persistence implementations).
Both JDO and JPA can map to both relational databases and also to various NoSQL objectstores such as MongoDB or Neo4J.
Apache Isis recognizes a number of these persistence-specific annotations, for example <code>@javax.jdo.annotations.Column(allowsNull=&#8230;&#8203;)</code>.</p>
</div>
<div class="paragraph">
<p>In addition, the framework builds up the metamodel for each domain object using <a href="ui.html#object-layout" class="page">layout hints</a>, such as <code>Customer.layout.xml</code>.
These provide metadata such as grouping elements of the UI together, using multi-column layouts, and so on.
The layout file can be modified while the application is still running, and are picked up automatically; a useful way to speed up feedback.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="apache-isis-vs-cqrses"><a class="anchor" href="#apache-isis-vs-cqrses"></a>Apache Isis vs CQRS/ES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CQRS and Event Sourcing (ES) are two architectural patterns often used (and often used together) to implement domain driven design systems.
This section explores the similarities and differences that Apache Isis has with these other architectural approaches.</p>
</div>
<div class="sect2">
<h3 id="cqrs"><a class="anchor" href="#cqrs"></a>CQRS</h3>
<div class="paragraph">
<p>The <a href="https://martinfowler.com/bliki/CQRS.html">CQRS architectural pattern</a> (it stands for "Command Query Responsibility Separation") is the idea that the domain objects that mutate the state of the system - to which commands are sent and which then execute - should be separated from the mechanism by which the state of the system is queried (rendered).
The former are sometimes called the "write (domain) model", the latter the "read model".</p>
</div>
<div class="paragraph">
<p>In CQRS the commands correspond to the business logic that mutates the system.
Whether this logic is part of the command class (<code>PlaceOrderCommand</code>) or whether that command delegates to methods on the domain object is an implementation detail; but it certainly is common for the business logic to be wholly within the command object and for the domain object to be merely a data holder of the data within the command/write datastore.</p>
</div>
<div class="paragraph">
<p>Most CQRS implementations have separate datastores.
The commands act upon a command/write datastore.
The data in this datastore is then replicated in some way into the query/read datastore, usually denormalized into a projection such that it is easy to query.</p>
</div>
<div class="paragraph">
<p>CQRS advocates recommend using very simple (almost naive) technology for the query/read model; it should be a simple projection of the query datastore.
Complexity instead lives elsewhere: business logic in the command/write model, and in the transformation logic betweeen the command/write and read/query datastores.
In particular, there is no requirement for the two datastores to use the same technology: one might be an RDBMS while the other a NoSQL datastore or even datawarehouse.</p>
</div>
<div class="paragraph">
<p>In most implementations the command and query datastores are <em>not</em> updated in the same transaction; instead there is some sort of replication mechanism.
This also means that the query datastore is eventually consistent rather than always consistent; there could be a lag of a few seconds before it is updated.
This means in turn that CQRS implementations require mechanisms to cater for offline query datastores; usually some sort of event bus.</p>
</div>
<div class="paragraph">
<p>The CQRS architecture&#8217;s extreme separation of responsibilities can result in a lot of boilerplate.
Any given domain concept, eg <code>Customer</code>, must be represented both in the command/write model and also in the query/read model.
Each business operation upon the command model is reified as a command object, for example <code>PlaceOrderCommand</code>.
When invoked, this emits a corresponding <code>OrderPlacedEvent</code>.
It is this event that is used to maintain the read model projection.</p>
</div>
<div class="paragraph">
<p>Comparing CQRS to Apache Isis, the most obvious difference is that Apache Isis does not require that the command/write model is separated from the query/read model; there is usually just a single datastore.
But then again, having a separate read model just so that the querying is very straightforward is pointless with Apache Isis because, of course, Isis provides the UI "for free".</p>
</div>
<div class="paragraph">
<p>It is possible though to use Apache Isis in a CQRS style.
The entities would have no behaviour in and of themselves to modify their state, they would just be data structures.
The behaviour (commands) would instead be implemented as <a href="mixins.html" class="page">mixins</a> that act upon those commands.
In the UI (surfaced by the <a href="../../../vw/latest/about.html" class="page">Wicket viewer</a>) or in the REST API (surfaced by the <a href="../../../vro/latest/about.html" class="page">RestfulObjects viewer</a>) the behaviour appears to reside on the domain object; however the behaviour actually resides on separate classes and is mixed in (like a trait), only at runtime.
However, this wouldn&#8217;t be true CQRS because those mixins would modify those entities which would then be flushed back to the single database.</p>
</div>
<div class="paragraph">
<p>Apache Isis' cross-cutting design does allow for denormalized data stores to be implemented.
For example, there are community implementations of <a href="https://github.com/erikdehair/isis-module-elasticsearch">Elastic Search database</a> to enable a free-text search (this is likely to be incorporated into the Apache Isis framework in the future, if it hasn&#8217;t already).</p>
</div>
<div class="paragraph">
<p>There are other reasons why a separate read model might make sense, such as to precompute particular queries, or against denormalized data.
In these cases Apache Isis can often provide a reasonable alternative, namely to map domain entities against RDBMS views, either materialized views or dynamic.
In such cases there is still only a single physical datastore, and so transactional integrity is retained.</p>
</div>
<div class="paragraph">
<p>If you want to go all-in with CQRS with separate databases for the write and read model, then this could still be implemented with Apache Isis without pulling the framework apart too much.
Here, Apache Isis would be used to provide the UI for the <em>read</em> model, with the entities being truly immutable.
Mixins would decorate these entities, but would act upon a write model whose persistence is handled outside of Apache Isis, probably using Spring Boot directly to provide a datasource.
To synchronise the write- and read- model, the events emitted by <a href="../../../refguide/latest/applib-svc/PublisherService.html" class="page"><code>PublisherService</code></a> could be used.</p>
</div>
<div class="paragraph">
<p>With respect to commands, Apache Isis provides the <a href="../../../refguide/latest/applib-svc/CommandService.html" class="page"><code>CommandService</code></a> which allows each business action to be reified into a <code>Command</code>.
However, names are misleading here: Apache Isis' commands are relatively passive, merely recording the intent of the user to invoke some operation.
In a CQRS architecture, commands take a more active role, locating and acting upon the domain objects.
More significantly, in CQRS each command has its own class, such as <code>PlaceOrderCommand</code>, instantiated by the client and then executed.
With Apache Isis, though, the end-user merely invokes the <code>placeOrder(&#8230;&#8203;)</code> action upon the domain object; the framework itself creates the <code>Command</code> as a side-effect of this.</p>
</div>
</div>
<div class="sect2">
<h3 id="event-sourcing"><a class="anchor" href="#event-sourcing"></a>Event Sourcing</h3>
<div class="paragraph">
<p>The <a href="#cqrs">CQRS architecture</a> is often combined with <em>Event Sourcing</em> pattern, though they are separate ideas.</p>
</div>
<div class="paragraph">
<p>With event sourcing, each business operation emits a domain event (or possibly events) that allow other objects in the system to act accordingly.
For example, if a customer places an order then this might emit the <code>OrderPlacedEvent</code>.
Most significantly, the subscribers to these events can include the datastore itself; the state of the system is in effect a transaction log of every event that has occurred since "the beginning of time": it is sometimes called an event store.
With CQRS, this event datastore corresponds to the command/write datastore (the query/read datastore is of course derived from the command datastore).</p>
</div>
<div class="paragraph">
<p>Although it might seem counter-intuitive to be able store persistent state in this way (as some kind of souped-up "transaction log"), the reality is that with modern compute capabilities make it quite feasible to replay many 10s or 100s of thousands of events in a second.
And the architecture supports some interesting use cases; for example it becomes quite trivial to rewind the system back to some previous point in time.</p>
</div>
<div class="paragraph">
<p>When combined with CQRS we see a command that triggers a business operation, and an event that results from it.
So, a <code>PlaceOrderCommand</code> command can result in an <code>OrderPlacedEvent</code> event.
A subscriber to this event might then generate a further command to act upon some other system (eg to dispatch the system).
Note that the event might be dispatched and consumed in-process or alternatively this might occur out-of-process.
If the latter, then the subscriber will operate within a separate transaction, meaning the usual eventual consistency concerns and also compensating actions if a rollback is required.
CQRS/event sourcing advocates point out&#8201;&#8212;&#8201;correctly&#8201;&#8212;&#8201;that this is just how things are in the "real world" too.</p>
</div>
<div class="paragraph">
<p>Comparing event sourcing with Apache Isis, in many ways they are orthogonal and so could in theory be combined.
An event sourced entity "rehydrate" the domain object from persistence differently than an ORM, but once that is done, the domain object is in memory to be interacted with.
To use Apache Isis with event sourcing would require disregarding the inbuild support for persistence though an ORM, but instead implement some other event sourced persistence mechanism to rehydrate the object.
Because Apache Isis runs on top of Spring Boot, such an integration ought to be comparatively easy to do.
But in any case the roadmap is to support JPA as well as JDO, indeed as you read this the framework may already support this, and so in the future there are likely be additional SPIs to enable this trivially).</p>
</div>
<div class="paragraph">
<p>As with a CQRS architecture, Apache <a href="mixins.html" class="page">mixins</a> would be the obvious way to associate behaviour with an event sourced entity.
These mixins would most likely delegate to an event sourcing framework such as <a href="https://axoniq.io/">Axon</a> to do the work.
Also, in Apache Isis every business action (and indeed, property and collection) emits domain events through the <a href="../../../refguide/latest/applib-svc/EventBusService.html" class="page"><code>EventBusService</code></a>, and can optionally also be published through the <a href="../../../refguide/latest/applib-svc/PublisherService.html" class="page"><code>PublisherService</code></a>.
These features could also have a role to play in an event sourced system.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deployment-options"><a class="anchor" href="#deployment-options"></a>Deployment Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis is a mature platform suitable for production deployment, with its "sweet spot" being line-of-business enterprise applications.
So if you&#8217;re looking to develop that sort of application, we certainly hope you&#8217;ll seriously evaluate it.</p>
</div>
<div class="paragraph">
<p>But there are other ways that you can make Apache Isis work for you; in this section we explore a few of them.</p>
</div>
<div class="sect2">
<h3 id="prototyping"><a class="anchor" href="#prototyping"></a>Prototyping</h3>
<div class="paragraph">
<p>Apache Isis is great for rapid prototyping, because all you need to write in order to get an application up-and-running is the domain model objects.</p>
</div>
<div class="paragraph">
<p>By focusing just on the domain, you&#8217;ll also find that you start to develop a ubiquitous language - a set of terms and concepts that the entire team (business and technologists alike) have a shared understanding.</p>
</div>
<div class="paragraph">
<p>If you wish, you could combine this with BDD - the framework integrates with <a href="../../../testing/latest/specsupport/about.html" class="page">Cucumber</a>.</p>
</div>
<div class="paragraph">
<p>Once you&#8217;ve sketched out your domain model, you can then either start-over using your preferred framework, or you might choose to take the domain model forward into more formal specification and testing.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploy-with-a-generic-ui"><a class="anchor" href="#deploy-with-a-generic-ui"></a>Deploy with a generic UI</h3>
<div class="paragraph">
<p>One of the original motivations for Apache Isis itself was to be able automatically generate a user interface for a domain object model.</p>
</div>
<div class="paragraph">
<p>Apache Isis' has a pluggable architecture allowing different user interface technologies.
 The principal implementation is the <a href="../../../vw/latest/about.html" class="page">Wicket viewer</a>.</p>
</div>
<div class="paragraph">
<p>This provides an appealing default user interface, with the ability to customize the user interface by writing new <a href="http://wicket.apache.org">Apache Wicket</a> components.
The framework provides a number of <a href="../../../extensions/latest/about.html" class="page">Extensions</a>.</p>
</div>
<div class="paragraph">
<p>Deploying on Apache Isis means that the framework also manages object persistence.
Again this is pluggable, but the principal implementation is the <a href="../../../pjdo/latest/about.html" class="page">JDO/DataNucleus object store</a>.
Because JDO supports both SQL and NoSQL databases, you can then deploy on a variety of platforms, normally relational but also databases such as <a href="http://neo4j.com/">Neo4J</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploy-as-a-rest-api"><a class="anchor" href="#deploy-as-a-rest-api"></a>Deploy as a REST API</h3>
<div class="paragraph">
<p>REST (Representation State Transfer) is an architectural style for building highly scalable distributed systems, using the same principles as the World Wide Web.
Many commercial web APIs (twitter, facebook, Amazon) are implemented as either pure REST APIs or some approximation therein.</p>
</div>
<div class="paragraph">
<p>The <a href="http://restfulobjects.org">Restful Objects specification</a> defines a means by which a domain object model can be exposed as RESTful resources using JSON representations over HTTP.</p>
</div>
<div class="paragraph">
<p>Apache Isis' <a href="../../../vro/latest/about.html" class="page">RestfulObjects viewer</a> is an implementation of that spec, making any Apache Isis domain object automatically available via REST.
The set of domain objects can also be optionally restricted to exclude domain entities (thereby avoiding leaking implementation details).</p>
</div>
<div class="paragraph">
<p>There are three main use cases for deploying Apache Isis as a RESTful web service are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to allow a custom UI to be built against the RESTful API</p>
<div class="paragraph">
<p>For example, using a Javascript framework such as Angular/Ionic/ReactJs/Vue etc, or JavaFX</p>
</div>
</li>
<li>
<p>to enable integration between systems</p>
<div class="paragraph">
<p>REST is designed to be machine-readable, and so is an excellent choice for synchronous data interchange scenarios.</p>
</div>
<div class="paragraph">
<p>The framework provides <a href="../../../refguide/latest/applib-svc/ContentMappingService.html" class="page">SPI</a>s to allow custom repreentations to be returned as required.</p>
</div>
</li>
<li>
<p>as the basis for a generic UI.</p>
<div class="paragraph">
<p>At the time of writing there are a couple being developed, <a href="https://github.com/joerg-rade/kroviz">Kroviz</a> (using Kotlin/JS), and <a href="https://github.com/sebastianslutzky/rob">Rob</a> (using <a href="https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor">Microsoft&#8217;s Blazor</a>).</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Another framework that implements the RO spec is the <a href="https://github.com/NakedObjectsGroup/NakedObjectsFramework">Naked Objects Framework</a> (on .NET).
It provides a complete generic UI tested against its own RO implementation.</p>
</div>
<div class="paragraph">
<p>As for the human-usable generic UI discussed  <a href="#deploy-with-a-generic-ui">above</a>, the framework manages object persistence, for example using the JDO/DataNucleus objectstore.
It is perfectly possible to deploy the RESTful API alongside an auto-generated webapp; both work from the same domain object model.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploy-on-your-own-platform"><a class="anchor" href="#deploy-on-your-own-platform"></a>Deploy on your own platform</h3>
<div class="paragraph">
<p>The programming model defined by Apache Isis deliberately minimizes the dependencies on the rest of the framework.
In fact, the only hard dependency that the domain model classes have on Apache Isis is through the <code>org.apache.isis.applib</code> classes, mostly to pick up annotations such as <a href="../../../refguide/latest/applib-ant/Action.html" class="page"><code>@Action</code></a> and <a href="../../../refguide/latest/applib-ant/Property.html" class="page"><code>@Property</code></a>.
It&#8217;s therefore relatively easy to take a domain object prototyped and/or tested using Apache Isis, but to deploy on some other framework&#8217;s runtime.</p>
</div>
<div class="paragraph">
<p>If you are interested in taking this approach, then you will need to provide your own implementations of any framework-provided services used by your code.</p>
</div>
<div class="paragraph">
<p>Under the covers, Apache Isis itself runs on top of <a href="https://spring.io/projects/spring-boot">Spring Boot</a>.
So an alternative option is to develop a custom UI using one of the regular Spring technologies and run that alongside Apache Isis.
In other words, Apache Isis continues to manage the object lifecycle and persistence as a thin layer on top of Spring, but your custom UI renders the domain objects as you require.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2020 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20200728-0401-4774bff2</p>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
