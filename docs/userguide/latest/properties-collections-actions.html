<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Properties, Collections &amp; Actions :: causeway</title>
    <meta name="generator" content="Antora 3.1.5">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../.." title="causeway">
  <link rel="next" href="ui-layout-and-hints.html" title="UI Layout &amp;amp; Hints">
  <link rel="prev" href="domain-services.html" title="Domain Services">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/causeway-logo-no-words-65x48.png"></img>
          </span>
        <span class="navbar-title">causeway</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../docs/latest/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../docs/latest/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Learning &amp; Tutorials</span>
            <a class="navbar-item" href="../../docs/latest/reference/about.html">Reference App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../docs/latest/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../docs/latest/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/latest/about.html">User Guide</a>
            <a class="navbar-item" href="../../refguide/latest/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../testing/latest/about.html">Testing Guide</a>
            <a class="navbar-item" href="../../security/latest/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">For use in apps</span>
            <a class="navbar-item" href="../../valuetypes/latest/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../setupguide/latest/about.html">Setup Guide</a>
            <a class="navbar-item" href="../../conguide/latest/about.html">Contributors' Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/latest/bypass/about.html">Bypass</a>
            <a class="navbar-item" href="../../security/latest/shiro/about.html">Shiro</a>
            <a class="navbar-item" href="../../security/latest/spring/about.html">Spring</a>
            <a class="navbar-item" href="../../security/latest/keycloak/about.html">Keycloak</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/latest/about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../vro/latest/about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../pjpa/latest/about.html">JPA (EclipseLink)</a>
            <a class="navbar-item" href="../../pjdo/latest/about.html">JDO (DataNucleus)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Extensions</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/latest/commandlog/about.html">Command Log</a>
            <a class="navbar-item" href="../../userguide/latest/docgen/about.html">Doc Gen</a>
            <a class="navbar-item" href="../../userguide/latest/executionlog/about.html">Execution Log</a>
            <a class="navbar-item" href="../../userguide/latest/executionoutbox/about.html">Execution Outbox</a>
            <a class="navbar-item" href="../../userguide/latest/executionrepublisher/about.html">Execution Republisher</a>
            <a class="navbar-item" href="../../userguide/latest/excel/about.html">Excel</a>
            <a class="navbar-item" href="../../userguide/latest/flyway/about.html">Flyway</a>
            <a class="navbar-item" href="../../userguide/latest/layoutloaders/about.html">Layout Loaders</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/latest/secman/about.html">Secman</a>
            <a class="navbar-item" href="../../security/latest/audittrail/about.html">Audit Trail</a>
            <a class="navbar-item" href="../../security/latest/spring-oauth2/about.html">Spring OAuth2 Integration</a>
            <a class="navbar-item" href="../../security/latest/shiro-realm-ldap/about.html">LDAP Realm for Shiro</a>
            <a class="navbar-item" href="../../security/latest/sessionlog/about.html">Session Log</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Web UI (Wicket)</span>
            <a class="navbar-item" href="../../vw/latest/fullcalendar/about.html">Full Calendar</a>
            <a class="navbar-item" href="../../vw/latest/pdfjs/about.html">pdf.js</a>
            <a class="navbar-item" href="../../vw/latest/sse/about.html">Server Side Events</a>
            <a class="navbar-item" href="../../vw/latest/tabular/about.html">Tabular Download</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">REST API (Restful Objects)</span>
            <a class="navbar-item" href="../../vro/latest/cors/about.html">CORS</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../docs/latest/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../docs/latest/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/CAUSEWAY">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/causeway">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../docs/latest/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/latest/about.html">Release Notes</a>
            <hr class="navbar-divider"/>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Framework</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Process</span>
            <a class="navbar-item" href="../../comguide/latest/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../tooling/latest/about.html">Tooling</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Automated Analysis</span>
            <a class="navbar-item" href="https://sonarcloud.io/dashboard?id=apache_isis">SonarCloud.io</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Interim Builds</span>
            <a class="navbar-item" href="../../comguide/latest/nightly-builds.html">Nightly builds</a>
            <a class="navbar-item" href="../../comguide/latest/weekly-builds.html">Weekly builds</a>
            <a class="navbar-item" href="https://apache-causeway-committers.github.io/causeway-nightly">Website Preview (not ASF hosted)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../core/latest/about.html">Internal Design Docs</a>
            <a class="navbar-item" href="../../regressiontests/latest/about.html">Regression Tests</a>
            <a class="navbar-item" href="../../incubator/latest/about.html">Incubator</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Thanks</span>
            <a class="navbar-item" href="../../more-thanks/latest/more-thanks.html">Acknowledgements</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Causeway.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../docs/latest/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-search hide-for-print">
  <input id="algolia-search-input" placeholder="Search"></span>
</div>
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="domain-services.html" title="Domain Services"><span></span></a>
  <a class="page-next" rel="next"
     href="ui-layout-and-hints.html" title="UI Layout &amp;amp; Hints"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title="Domain Services"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview.html">10,000ft overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="domain-entities.html">Domain Entities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="domain-services.html">Domain Services</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="properties-collections-actions.html">Properties, Collections &amp; Actions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ui-layout-and-hints.html">UI Layout &amp; Hints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drop-downs-and-defaults.html">Drop downs &amp; Defaults</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="view-models.html">View Models</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="mixins.html">Mixins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="events.html">Events</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="value-types.html">Value types</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="meta-annotations.html">Meta-annotations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="background-context-and-theory.html">Background, Context &amp; Theory</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="btb/about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/programming-model.html">Programming Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/i18n.html">Internationalization (i18n)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="commandlog/about.html">Command Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="docgen/about.html">DocGen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="executionlog/about.html">Execution Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="executionoutbox/about.html">Execution Outbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="executionrepublisher/about.html">Execution Republisher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="excel/about.html">Excel Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="flyway/about.html">Flyway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="layoutloaders/about.html">Layout Loaders</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version">
          <a href="../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version">
          <a href="../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions</span>
      <ul class="versions">
        <li class="version">
          <a href="../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version">
          <a href="../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version">
          <a href="../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">regressiontests</span>
      <ul class="versions">
        <li class="version">
          <a href="../../regressiontests/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version">
          <a href="../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tooling</span>
      <ul class="versions">
        <li class="version">
          <a href="../../tooling/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version">
          <a href="../../tutorials/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">User Guide</a></li>
    <li><a href="properties-collections-actions.html">Properties, Collections &amp; Actions</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/causeway/edit/master/antora/components/userguide/modules/ROOT/pages/properties-collections-actions.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Properties, Collections &amp; Actions</h1>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="domain-entities.html" class="xref page">Domain entities</a> and <a href="view-models.html" class="xref page">view models</a> hold state in terms of <strong>properties</strong> and <strong>collections</strong>; both of these and also <a href="domain-services.html" class="xref page">domain services</a> define behaviour in terms of <strong>actions</strong>.</p>
</div>
<div class="sect2">
<h3 id="properties-and-collections"><a class="anchor" href="#properties-and-collections"></a>Properties and Collections</h3>
<div class="paragraph">
<p>Both properties and collections are defined by getters, the difference being that the return type for properties is a scalar while for collections it is a collection of elements.
Additionally, the scalar property can be a value object (such as int, date or String), or could be a reference to another entity or perhaps view model, whereas for a collection the element types may only be reference types, not value types.</p>
</div>
<div class="paragraph">
<p>Regarding mutability: if a property is modifiable then there will also be a setter; collections however are always immutable and so there should be no setter.</p>
</div>
<div class="paragraph">
<p>So for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Customer {

    @Property                                           <i class="conum" data-value="1"></i><b>(1)</b>
    @PropertyLayout                                     <i class="conum" data-value="2"></i><b>(2)</b>
    @Getter @Setter                                     <i class="conum" data-value="3"></i><b>(3)</b>
    private String lastName;

    @Collection                                         <i class="conum" data-value="4"></i><b>(4)</b>
    @CollectionLayout                                   <i class="conum" data-value="5"></i><b>(5)</b>
    @Getter                                             <i class="conum" data-value="6"></i><b>(6)</b>
    private SortedSet&lt;Order&gt; orders = new TreeSet&lt;&gt;;    <i class="conum" data-value="7"></i><b>(7)</b>
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Depending on configuration settings, the <a href="../../refguide/latest/applib/index/annotation/Property.html" class="xref page">@Property</a> annotation may or may not be required; its role is to define additional domain-layer semantics</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <a href="../../refguide/latest/applib/index/annotation/PropertyLayout.html" class="xref page">@PropertyLayout</a> annotation defines additional presentation-layer hints; alternatively this metadata can be provided using the <a href="ui-layout-and-hints.html#object-layout" class="xref page">layout.xml</a> file.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>It&#8217;s commonplace to use <a href="https://projectlombok.org/features/GetterSetter">Project Lombok</a> to remove boilerplate.
As there is a <code>@Setter</code>, this property may also editable (though this does also depend on configuration settings).</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Depending on configuration settings, the <a href="../../refguide/latest/applib/index/annotation/Collection.html" class="xref page">@Collection</a> annotation may or may not be required; its role is to define additional domain-layer semantics</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The <a href="../../refguide/latest/applib/index/annotation/CollectionLayout.html" class="xref page">@CollectionLayout</a> annotation defines additional presentation-layer hints; alternatively this metadata can be provided using the <a href="ui-layout-and-hints.html#object-layout" class="xref page">layout.xml</a> file.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Collections are immutable, so no setter is required.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Typically entities implement <code>Comparable</code>, so <code>SortedSet</code> is typical.
(For entities, the actual implementation will be replaced by the ORM).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From this the framework infers the <code>Customer</code> domain entity, which in turn has a <code>lastName</code> string <em>property</em> and an <code>orders</code> <em>collection</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="actions"><a class="anchor" href="#actions"></a>Actions</h3>
<div class="paragraph">
<p>While <a href="#properties">properties</a> and <a href="#collections">collections</a> define the state held by a domain object (its "know what" responsibilities), actions define the object&#8217;s behaviour (its "know how-to" responsibilities).</p>
</div>
<div class="paragraph">
<p>An application that consists only of domain entities with just "know-what" responsibilities is pretty dumb: it requires that the end-user know the business rules and doesn&#8217;t modify the state of the domain objects such that they are invalid (for example, an "end date" being before a "start date").
Such applications are often called CRUD applications (create/read/update/delete).</p>
</div>
<div class="paragraph">
<p>In more complex domains, it&#8217;s not realistic/feasible to expect the end-user to have to remember all the different business rules that govern the valid states for each domain object.
Actions allow those business rules to be encoded programmatically.
Those actions can either be defined in the domain class itself, or can be contributed by way of a <a href="mixins.html" class="xref page">mixin</a>.</p>
</div>
<div class="paragraph">
<p>The general philosophy for an Apache Causeway (naked objects) application is <em>not</em> to constrain the end-user in how they interact with the UI: it doesn&#8217;t attempt to define a rigid business process.
However, it <em>does</em> aim to ensure that business rule invariants are maintained, that is that domain objects aren&#8217;t allowed to enter into an invalid state.</p>
</div>
<div class="paragraph">
<p>For simple domain applications, you may want to start prototyping only with properties, and only later introduce actions (representing the most common business operations).
But an alternative approach, recommended for more complex applications, is actually to start the application with all properties non-editable.
Then, as the end-user requires the ability to modify some state, there is a context in which to ask the question "why does this state need to change?" and "are their any side-effects?" (ie, other state that changes at the same time, or other behaviour that should occur).
If the state change is simple, for example just being able to correct an invalid address, or adding a note or comment, then that can probably be modelled as a simple editable property.
But if the state change is more complex, then most likely an action should be used instead.</p>
</div>
<div class="paragraph">
<p>Broadly speaking, actions are those <code>public</code> methods that do not represent properties or collections.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Customer {

    @Action                       <i class="conum" data-value="1"></i><b>(1)</b>
    @ActionLayout                 <i class="conum" data-value="2"></i><b>(2)</b>
    public Customer placeOrder(
        @Parameter                <i class="conum" data-value="3"></i><b>(3)</b>
        @ParameterLayout          <i class="conum" data-value="4"></i><b>(4)</b>
        Product p,
        @Parameter
        @ParameterLayout
        int quantity) {
        /* ... */
    }

    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Depending on configuration settings, the <a href="../../refguide/latest/applib/index/annotation/Action.html" class="xref page">@Action</a> annotation may or may not be required; its role is to define additional domain-layer semantics</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <a href="../../refguide/latest/applib/index/annotation/ActionLayout.html" class="xref page">@ActionLayout</a> annotation defines additional presentation-layer hints; alternatively this metadata can be provided using the <a href="ui-layout-and-hints.html#object-layout" class="xref page">layout.xml</a> file.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <a href="../../refguide/latest/applib/index/annotation/Parameter.html" class="xref page">@Parameter</a> annotation defines additional domain-layer semantics.
This is optional though often required.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The <a href="../../refguide/latest/applib/index/annotation/ParameterLayout.html" class="xref page">@ParameterLayout</a> annotation defines additional presentation-layer hints</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From this the framework infers a the <code>placeOrder</code> <em>action</em> for object.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Using meta-annotations</div>
<div class="paragraph">
<p>Often the action parameters correspond to properties of the domain object.
For example, an action to change a customer&#8217;s <code>lastName</code> property would likely define a <code>newLastName</code> parameter whose type and semantics would correspond to that of the property.</p>
</div>
<div class="paragraph">
<p>Defining a <code>@LastName</code> <a href="meta-annotations.html" class="xref page">meta-annotation</a> can be one way to place both the <code>@Property</code>/<code>@Parameter</code> and <code>@PropertyLayout</code>/@ParameterLayout` side-by-side; both the <code>lastName</code> property and <code>newLastName</code> parameter would then be annotated with <code>@LastName</code>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="properties"><a class="anchor" href="#properties"></a>Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A property is an instance variable of a domain object, of a scalar type, that holds some state in either a <a href="domain-services.html#domain-entities" class="xref page">domain entity</a> or a <a href="view-models.html" class="xref page">view model</a>.</p>
</div>
<div class="paragraph">
<p>For example, a <code>Customer</code>'s <code>firstName</code> would be a property, as would their <code>accountCreationDate</code> that they created their account.
All properties have at least a "getter" method, and most properties have also a "setter" method (meaning that they are mutable).
Properties that do <em>not</em> have a setter method are derived properties, and so are not persisted.</p>
</div>
<div class="paragraph">
<p>Formally speaking, a property is simply a regular JavaBean getter, returning a scalar value recognized by the framework.
Most properties (those that are editable/modifiable) will also have a setter and, if persisted, a backing instance field.
And most properties will also have a number of annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache Causeway defines its own <a href="../../refguide/latest/applib/index/annotation/Property.html" class="xref page">@Property</a> annotation for capturing domain semantics.
It also provides a <a href="../../refguide/latest/applib/index/annotation/PropertyLayout.html" class="xref page">@PropertyLayout</a> for UI hints (though the information in this annotation may instead be provided by a supplementary <a href="ui-layout-and-hints.html#object-layout" class="xref page">.layout.xml</a> file)</p>
</li>
<li>
<p>the properties of domain entities are usually also annotated with ORM annotation(s).</p>
<div class="paragraph">
<p>For <a href="../../pjpa/latest/about.html" class="xref page">JPA/EclipseLink</a> this would be <a href="https://www.objectdb.com/api/java/jpa/Column">javax.persistence.Column</a>, for <a href="../../pjdo/latest/about.html" class="xref page">JDO/DataNucleus</a> it is <a href="http://www.datanucleus.org/products/datanucleus/jdo/annotations.html#Column">@javax.jdo.annotations.Column</a> annotation.
For property references, there may be other annotations to indicate whether the reference is bidirectional.
It&#8217;s also possible (using annotations) to define a link table to hold foreign key columns.</p>
</div>
</li>
<li>
<p>for the properties of view models, then JAXB annotations such as  <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/XmlElement.html">@XmlElement</a> may be present</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Apache Causeway recognises some of these annotations from the persistence layer and infers some domain semantics from them (for example, the maximum allowable length of a string property).</p>
</div>
<div class="paragraph">
<p>Since writing getter and setter methods adds quite a bit of boilerplate, it&#8217;s common to use <a href="https://projectlombok.org/">Project Lombok</a> to code generate these methods at compile time (using Java&#8217;s annotation processor) simply by adding the <code>@lombok.Getter</code> and <code>@lombok.Setter</code> annotations to the field.
The <a href="../../docs/latest/starters/simpleapp.html" class="xref page">SimpleApp</a> starter app uses this approach.</p>
</div>
<div class="sect2">
<h3 id="value-vs-reference-types"><a class="anchor" href="#value-vs-reference-types"></a>Value vs Reference Types</h3>
<div class="paragraph">
<p>Properties can be either a value type (strings, int, date and so on) or be a reference to another object (for example, an <code>Order</code> referencing the <code>Customer</code> that placed it).</p>
</div>
<div class="paragraph">
<p>For example, to map a string value type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Getter;
import lombok.Setter;

@Getter @Setter        <i class="conum" data-value="1"></i><b>(1)</b>
private String notes;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>using <a href="https://projectlombok.org/">Project Lombok</a> annotations to reduce boilerplate</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You could also add the <code>@Property</code> annotation if you wished:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Getter;
import lombok.Setter;

@Property
@Getter @Setter
private String notes;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although in this case it is not required (none of its attributes have been set).</p>
</div>
<div class="paragraph">
<p>Or to map a reference type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Getter;
import lombok.Setter;

@Property
@Getter @Setter
private Customer customer;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s ok for a <a href="view-models.html" class="xref page">view model</a> to reference other view models and also to reference domain entities.
However, it <em>isn&#8217;t</em> valid for a domain entity to hold a reference to view model, because the ORM will not know how to persist the view model object.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For further details on mapping associations using <a href="../../pjdo/latest/about.html" class="xref page">JDO/DataNucleus</a>, see their <a href="http://www.datanucleus.org:15080/products/accessplatform_5_2/jdo/mapping.html">mapping guide</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="optional-properties"><a class="anchor" href="#optional-properties"></a>Optional Properties</h3>
<div class="paragraph">
<p>(For domain entities) JDO/DataNucleus' default is that a property is assumed to be mandatory if it is a primitive type (eg <code>int</code>, <code>boolean</code>), but optional if a reference type (eg <code>String</code>, <code>BigDecimal</code> etc).
To override optionality in JDO/DataNucleus the <code>@Column(allowsNull="&#8230;&#8203;")</code> annotations is used.</p>
</div>
<div class="paragraph">
<p>Apache Causeway on the other hand assumes that all properties (and action parameters, for that matter) are mandatory, not optional.
These defaults can also be overridden using Apache Causeway' own annotations, specifically <code>@Property(optionality=&#8230;&#8203;)</code>, or (because it&#8217;s much less verbose) using <code>@javax.annotation.Nullable</code>.</p>
</div>
<div class="paragraph">
<p>These different defaults can lead to incompatibilities between the two frameworks.
To counteract that, Apache Causeway also recognizes and honours JDO&#8217;s <code>@Column(allowsNull=&#8230;&#8203;)</code>.</p>
</div>
<div class="paragraph">
<p>For example, you can write:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

@Column(allowsNull="true")
@Property
@Getter @Setter
private LocalDate date;</code></pre>
</div>
</div>
<div class="paragraph">
<p>rather than the more verbose:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

@Column(allowsNull="true")
@Property(optionality=Optionality.OPTIONAL)
@Getter @Setter
private LocalDate date;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The framework will search for any incompatibilities in optionality (whether specified explicitly or defaulted implicitly) between Apache Causeway' defaults and DataNucleus, and will refuse to boot if any are found.</p>
</div>
</div>
<div class="sect2">
<h3 id="editable-properties"><a class="anchor" href="#editable-properties"></a>Editable Properties</h3>
<div class="paragraph">
<p>Apache Causeway provides the capability to allow individual properties to be modified.
This is specified using the <code>@Property(editing=&#8230;&#8203;)</code> attribute.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Getter;
import lombok.Setter;

@Property(editing = Editing.ENABLED)
@Getter @Setter
private String notes;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If this is omitted then whether editing is enabled or disabled is inherited from the domain object level, <a href="../../refguide/latest/applib/index/annotation/DomainObject.html#editing" class="xref page">@DomainObject#editing()</a>.</p>
</div>
<div class="paragraph">
<p>If that isn&#8217;t specified (or is set to "AS_CONFIGURED"), then the configuration is taken from the <code>application.properties</code> configuration file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../../refguide/latest/config/sections/causeway.applib.html#causeway.applib.annotation.domain-object.editing" class="xref page">causeway.applib.annotation.domain-object.editing</a></p>
<div class="paragraph">
<p>for all properties in the domain object.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>And, finally, if there is no configuration property set at all, then the default is for editing to be DISABLED.</p>
</div>
<div class="paragraph">
<p>For entities, editable properties are not necessarily persistable.
In such a case the setter would not write to a field, but would (presumably) mutate the object in some other way.
In such a case you will need a getter and a setter, but the property annotated for the ORM as non-persistent.
(If using JDO/DataNucleus, this is done using <code>@NotPersistent</code>).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.inject.Inject;
import javax.jdo.annotations.Column
import javax.jdo.annotations.NotPersistent;
import lombok.Getter;
import lombok.Setter;

@javax.jdo.annotations.NotPersistent
@Property(editing=Editing.ENABLED)
public String getAddress() {
    return addressService.toAddress( getLatLong() );                <i class="conum" data-value="1"></i><b>(1)</b>
}
public void setAddress(String address) {
    setLatLong(addressService.toLatLong(address));
}

@Column
@Programmatic
@Getter @Setter
private String latLong;                                             <i class="conum" data-value="2"></i><b>(2)</b>

@Inject
AddressService addressService;                                      <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>the representation of the address, in human readable form, eg "10 Downing Street, London, UK"</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the lat/long representation of the address, eg "51.503363;-0.127625".
Excluded from the Apache Causeway metamodel.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>an injected service that can convert to/from address and latLong.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="ignoring-properties"><a class="anchor" href="#ignoring-properties"></a>Ignoring Properties</h3>
<div class="paragraph">
<p>By default Apache Causeway will automatically render all properties in the <a href="../../vw/latest/about.html" class="xref page">Wicket UI</a> or in the <a href="../../vro/latest/about.html" class="xref page">REST API</a>.
To get Apache Causeway to ignore a property (exclude it from its metamodel), annotate the getter using <a href="../../refguide/latest/applib/index/annotation/Programmatic.html" class="xref page">@Programmatic</a>.</p>
</div>
<div class="paragraph">
<p>Similarly, for the JDO/DataNucleus ORM, ignore a property using the <code>@javax.jdo.annotations.NotPersistent</code> annotation.
This is independent of Apache Causeway; in other words that property will still be rendered in the UI (unless also annotated with <code>@Programmatic</code>).</p>
</div>
<div class="paragraph">
<p>For view models, you can tell JAXB to ignore a property using the <code>@javax.xml.bind.annotation.XmlTransient</code> annotation.
Again, this is independent of Apache Causeway.</p>
</div>
<div class="paragraph">
<p>You can also suppress a property from the UI using <a href="../../refguide/latest/applib/index/annotation/Property.html#hidden" class="xref page">@Property#hidden()</a> or indeed <a href="../../refguide/latest/applib/index/annotation/PropertyLayout.html#hidden" class="xref page">@PropertyLayout#hidden()</a>.
However, this doesn&#8217;t exclude the property from the metamodel.</p>
</div>
</div>
<div class="sect2">
<h3 id="derived-properties"><a class="anchor" href="#derived-properties"></a>Derived Properties</h3>
<div class="paragraph">
<p>Derived properties are those with a getter but no setter.
These will still be rendered in the UI, but they will be read-only (not editable).</p>
</div>
<div class="paragraph">
<p>For entities these may or may not be persisted; that depends on whether the ORM annotations are specified on the field or on the property.</p>
</div>
</div>
<div class="sect2">
<h3 id="data-types-orm-considerations"><a class="anchor" href="#data-types-orm-considerations"></a>Data types (ORM considerations)</h3>
<div class="paragraph">
<p>This section shows specific considerations for various datatypes, in particular how to annotate them for the ORM.</p>
</div>
<div class="paragraph">
<p>This section covers the <a href="../../pjdo/latest/about.html" class="xref page">JDO/DataNucleus</a> object store.</p>
</div>
<div class="sect3">
<h4 id="strings-length"><a class="anchor" href="#strings-length"></a><code>String</code>s (Length)</h4>
<div class="paragraph">
<p>By default JDO/DataNucleus will map string properties to a <code>VARCHAR(255)</code>.
To limit the length, use the <code>@Column(length=&#8230;&#8203;)</code> annotation.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

@Column(length=50)
@Property
@Getter @Setter
private String firstName</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a good example of a case where Apache Causeway infers domain semantics from the JDO annotation.</p>
</div>
</div>
<div class="sect3">
<h4 id="joda-dates"><a class="anchor" href="#joda-dates"></a>JODA Dates</h4>
<div class="paragraph">
<p>Apache Causeway' bundles DataNucleus' <a href="http://www.datanucleus.org/documentation/products/plugins.html">built-in support</a> for Joda <code>LocalDate</code> and <code>LocalDateTime</code> datatypes, meaning that entity properties of these types will be persisted as appropriate data types in the database tables.</p>
</div>
<div class="paragraph">
<p>It is, however, necessary to annotate your properties with <code>@javax.jdo.annotations.Persistent</code>, otherwise the data won&#8217;t actually be persisted.
See the <a href="http://db.apache.org/jdo/field_types.html">JDO docs</a> for more details on this.</p>
</div>
<div class="paragraph">
<p>Moreover, these datatypes are <em>not</em> in the default fetch group, meaning that JDO/DataNucleus will perform an additional <code>SELECT</code> query for each attribute.
To avoid this extra query, the annotation should indicate that the property is in the default fetch group.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Persistent;
import javax.jdo.annotations.Column;
import org.joda.time.LocalDate;

@Persistent(defaultFetchGroup="true")
@Column(allowsNull="true")
@Property
@Getter @Setter
private LocalDate dueBy;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="bigdecimals-precision"><a class="anchor" href="#bigdecimals-precision"></a><code>BigDecimal</code>s (Precision)</h4>
<div class="paragraph">
<p>Working with <code>java.math.BigDecimal</code> properties takes a little care due to scale/precision issues.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import lombok.Getter;
import lombok.Setter;

@Property
@Getter @Setter
private BigDecimal impact;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Without any constraints, the length of the corresponding column is database specific.
For example, with HSQL JDO/DataNucleus maps to a column NUMERIC(19);
no decimal digits are admitted.
(Further details <a href="http://hsqldb.org/doc/2.0/guide/sqlgeneral-chapt.html#sgc_numeric_types">here</a>).</p>
</div>
<div class="paragraph">
<p>What this implies is that, when a record is inserted, a log entry similar to this one appears:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">INSERT INTO ENTITY(..., IMPACT, ....) VALUES (...., 0.5, ....)</code></pre>
</div>
</div>
<div class="paragraph">
<p>But when that same record is retrieved, the log will show that a value of "0" is returned, instead of 0.5.</p>
</div>
<div class="paragraph">
<p>The solution is to explicitly add the scale to the field like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

@Column(scale=2)
@Getter @Setter
private BigDecimal impact;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition, you should also set the scale of the <code>BigDecimal</code>, using <code>setScale(scale, roundingMode)</code>.</p>
</div>
<div class="paragraph">
<p>More information can be found <a href="http://www.opentaps.org/docs/index.php/How_to_Use_Java_BigDecimal:_A_Tutorial">here</a> and <a href="http://www.tutorialspoint.com/java/math/bigdecimal_setscale_rm_roundingmode.htm">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="blobs"><a class="anchor" href="#blobs"></a><code>Blob</code>s</h4>
<div class="paragraph">
<p>Apache Causeway configures JDO/DataNucleus so that the properties of type <code>org.apache.causeway.applib.value.Blob</code> and <code>org.apache.causeway.applib.value.Clob</code> can also be persisted.</p>
</div>
<div class="paragraph">
<p>As for Joda dates, this requires the <code>@javax.jdo.annotations.Persistent</code> annotation.
However, whereas for dates one would always expect this value to be retrieved eagerly, for blobs and clobs it is not so clear cut.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import javax.jdo.annotations.Persistent;
import lombok.Getter;
import lombok.Setter;

@Persistent(defaultFetchGroup="false", columns = {
    @Column(name = "attachment_name"),
    @Column(name = "attachment_mimetype"),
    @Column(name = "attachment_bytes",
            jdbcType="BLOB", sqlType = "LONGVARBINARY")
})
@Property(optionality = Optionality.OPTIONAL)
@Getter @Setter
private Blob attachment;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The three <code>@Column</code> annotations are required because the mapping classes that Apache Causeway provides (<a href="https://github.com/apache/causeway/blob/causeway-1.4.0/component/objectstore/jdo/jdo-datanucleus/src/main/java/org/apache/causeway/objectstore/jdo/datanucleus/valuetypes/CausewayBlobMapping.java#L59">CausewayBlobMapping</a> and <a href="https://github.com/apache/causeway/blob/causeway-1.4.0/component/objectstore/jdo/jdo-datanucleus/src/main/java/org/apache/causeway/objectstore/jdo/datanucleus/valuetypes/CausewayClobMapping.java#L59">CausewayClobMapping</a>) map to 3 columns.
(It is not an error to omit these <code>@Column</code> annotations, but without them the names of the table columns are simply suffixed <code>_0</code>, <code>_1</code>, <code>_2</code> etc.</p>
</div>
<div class="paragraph">
<p>If the <code>Blob</code> is mandatory, then use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import javax.jdo.annotations.Persistent;
import lombok.Getter;
import lombok.Setter;

@Persistent(defaultFetchGroup="false", columns = {
    @Column(name = "attachment_name", allowsNull="false"),
    @Column(name = "attachment_mimetype", allowsNull="false"),
    @Column(name = "attachment_bytes",
            jdbcType="BLOB", sqlType = "LONGVARBINARY", allowsNull="false")
})
@Property(optionality = Optionality.MANDATORY )
@Getter @Setter
private Blob attachment;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If specifying a <code>sqlType</code> of "LONGVARBINARY" does not work, try instead "BLOB".
There can be differences in behaviour between JDBC drivers.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="clobs"><a class="anchor" href="#clobs"></a><code>Clob</code>s</h4>
<div class="paragraph">
<p>Mapping <code>Clob</code>s works in a very similar way to <code>Blob</code>s, but the <code>jdbcType</code> and <code>sqlType</code> attributes will, respectively, be <code>CLOB</code> and <code>LONGVARCHAR</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import javax.jdo.annotations.Persistent;
import lombok.Getter;
import lombok.Setter;

@Persistent(defaultFetchGroup="false", columns = {
    @Column(name = "attachment_name"),
    @Column(name = "attachment_mimetype"),
    @Column(name = "attachment_chars",
            jdbcType="CLOB", sqlType = "LONGVARCHAR")
})
@Property( optionality = Optionality.OPTIONAL )
@Getter @Setter
private Clob doc;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If specifying a <code>sqlType</code> of "LONGVARCHAR" does not work, try instead "CLOB".
There can be differences in behaviour between JDBC drivers.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="mapping-to-varbinary-or-varchar"><a class="anchor" href="#mapping-to-varbinary-or-varchar"></a>Mapping to VARBINARY or VARCHAR</h4>
<div class="paragraph">
<p>Instead of mapping to a sqlType of <code>LONGVARBINARY</code> (or perhaps <code>BLOB</code>), you might instead decide to map to a <code>VARBINARY</code>.
The difference is whether the binary data is held "on-row" or as a pointer "off-row"; with a <code>VARBINARY</code> the data is held on-row and so you will need to specify a length.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

@Column(
        name = "attachment_bytes",
        jdbcTypr="BLOB", sqlType = "VARBINARY", length=2048
)
@Getter @Setter
private Blob image;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same argument applies to <code>LONGVARCHAR</code> (or <code>CLOB</code>); you could instead map to a regular <code>VARCHAR</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

@Column(
        name = "attachment_chars",
        sqlType = "VARCHAR", length=2048
)
@Getter @Setter
private Clob letter;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Support and maximum allowed length will vary by database vendor.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="collections"><a class="anchor" href="#collections"></a>Collections</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A collection is an instance variable of a domain object, of a collection type that holds references to other domain objects.
For example, a <code>Customer</code> may have a collection of <code>Order</code>s).</p>
</div>
<div class="paragraph">
<p>It&#8217;s ok for a <a href="view-models.html" class="xref page">view model</a> to reference both view model and domain entities.
However, it <em>isn&#8217;t</em> valid for a domain entity to hold a reference to view model, because the ORM will not know how to persist the view model object.</p>
</div>
<div class="paragraph">
<p>Formally speaking, a collection is simply a regular JavaBean getter, returning a collection type (subtype of <code>java.util.Collection</code>).
Most collections (those that are modifiable) will also have a setter and, if persisted, a backing instance field.
And collections properties will also have a number of annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apache Causeway defines its own xref <a href="../../refguide/latest/applib/index/annotation/Collection.html" class="xref page">@Collection</a> annotation for capturing domain semantics.
It also provides a <a href="../../refguide/latest/applib/index/annotation/CollectionLayout.html" class="xref page">@CollectionLayout</a> for UI hints (though the information in this annotation may instead be provided by a supplementary <a href="ui-layout-and-hints.html#object-layout" class="xref page">.layout.xml</a> file)</p>
</li>
<li>
<p>the collections of domain entities are often annotated with ORM annotation(s).
In the case of JDO/DataNucleus annotations this is most notably <code>javax.jdo.annotations.Persistent</code>.
Other annotations can be used to specify if the association is bidirectional, and whether to define a link table or not to hold foreign key columns.</p>
</li>
<li>
<p>for the collections of view models, then JAXB annotations such as <a href="https://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElementWrapper.html">@javax.xml.bind.annotation.XmlElementWrapper</a> and <a href="https://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlElement.html">@javax.xml.bind.annotation.XmlElement</a> will be present</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Apache Causeway may recognise some of these annotations from the persistence layer infers some domain semantics from them.</p>
</div>
<div class="paragraph">
<p>Unlike <a href="#properties">properties</a>, the framework does not allow collections to be "edited".
Instead, <a href="#actions">action</a>s can be written that will modify the contents of the collection as a side-effect.
For example, a <code>placeOrder(&#8230;&#8203;)</code> action will likely add an <code>Order</code> to the <code>Customer#orders</code> collection.</p>
</div>
<div class="paragraph">
<p>Since writing getter and setter methods adds quite a bit of boilerplate, it&#8217;s common to use <a href="https://projectlombok.org/">Project Lombok</a> to code generate these methods at compile time (using Java&#8217;s annotation processor) simply by adding the <code>@lombok.Getter</code> and <code>@lombok.Setter</code> annotations to the field.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
see the DataNucleus <a href="http://www.datanucleus.org:15080/products/accessplatform_5_0/jdo/mapping.html">Mapping Guide</a> for more in-depth coverage of this topic.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="mapping-bidir-1m"><a class="anchor" href="#mapping-bidir-1m"></a>Mapping bidir 1:m</h3>
<div class="paragraph">
<p>Bidirectional one-to-many collections are one of the most common types of associations between two entities:</p>
</div>
<div class="imageblock kroki">
<div class="content">
<object type="image/svg+xml" data="_images/diag-f34a477a8b176974b1ddfe70a43ebfd1901e7f47.svg"><span class="alt">Parent has many Children, each Child has one Parent.</span></object>
</div>
<div class="title">Figure 1. Parent has many Children, each Child has one Parent.</div>
</div>
<div class="paragraph">
<p>In the parent object, the collection can be defined as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Persistent;
import lombok.Getter;
import lombok.Setter;

public class ParentObject
        implements Comparable&lt;ParentObject&gt;{

    @Persistent(
        mappedBy = "parent",                                               <i class="conum" data-value="1"></i><b>(1)</b>
        dependentElement = "false"                                         <i class="conum" data-value="2"></i><b>(2)</b>
    )
    @Collection                                                            <i class="conum" data-value="3"></i><b>(3)</b>
    @Getter @Setter
    private SortedSet&lt;ChildObject&gt; children = new TreeSet&lt;ChildObject&gt;();  <i class="conum" data-value="4"></i><b>(4)</b>

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates a bidirectional association; the foreign key pointing back to the <code>Parent</code> will be in the table for <code>ChildObject</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>disables cascade delete</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>(not actually required in this case, because no attributes are set, but acts as a useful reminder that this collection will be rendered in the UI by Apache Causeway)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>uses a <code>SortedSet</code> (as opposed to some other collection type; discussion below)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>while in the child object you will have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

public class ChildObject
        implements Comparable&lt;ChildObject&gt; {    <i class="conum" data-value="1"></i><b>(1)</b>

    @Column(allowsNull = "false")               <i class="conum" data-value="2"></i><b>(2)</b>
    @Property(editing = Editing.DISABLED)       <i class="conum" data-value="3"></i><b>(3)</b>
    @Getter @Setter
    private ParentObject parent;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>implements <code>Comparable</code> because is mapped using a <code>SortedSet</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>mandatory; every child must reference its parent</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>cannot be edited directly</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Generally speaking you should use <code>SortedSet</code> for collection types (as opposed to <code>Set</code>, <code>List</code> or <code>Collection</code>).
JDO/Datanucleus does support the mapping of these other types, but RDBMS are set-oriented, so using this type introduces the least friction.</p>
</div>
</div>
<div class="sect2">
<h3 id="maps"><a class="anchor" href="#maps"></a>Maps</h3>
<div class="paragraph">
<p>While ORMs support <code>java.util.Map</code> as a collection type, maps are not supported by Apache Causeway.</p>
</div>
<div class="paragraph">
<p>If you do wish to use this collection type, then annotate the getter with <a href="../../refguide/latest/applib/index/annotation/Programmatic.html" class="xref page">@Programmatic</a> so that it is ignored by the Apache Causeway framework.</p>
</div>
</div>
<div class="sect2">
<h3 id="value-vs-reference-types-2"><a class="anchor" href="#value-vs-reference-types-2"></a>Value vs Reference Types</h3>
<div class="paragraph">
<p>While ORMs support collections/arrays of value types, such collections are not supported by Apache Causeway.
Apache Causeway can (currently) only provide a UI for collections of references.</p>
</div>
<div class="paragraph">
<p>If you do wish to use collections of this type, then annotate the getter with <a href="../../refguide/latest/applib/index/annotation/Programmatic.html" class="xref page">@Programmatic</a> so that it is ignored by the Apache Causeway framework.</p>
</div>
<div class="paragraph">
<p>As a workaround, if you want to visualize an array of value types in Apache Causeway, then one option is to wrap the value in a view model.</p>
</div>
</div>
<div class="sect2">
<h3 id="derived-collections"><a class="anchor" href="#derived-collections"></a>Derived Collections</h3>
<div class="paragraph">
<p>A derived collection is simply a getter (no setter) that returns a <code>java.util.Collection</code> (or subtype).</p>
</div>
<div class="paragraph">
<p>While derived properties and derived collections typically "walk the graph" to associated objects, there is nothing to prevent the returned value being the result of invoking a repository (domain service) action.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Customer {
    ...
    public List&lt;Order&gt; getMostRecentOrders() {
        return orderRepo.findMostRecentOrders(this, 5);
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="actions"><a class="anchor" href="#actions"></a>Actions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An action is a public method that is presented as a prompt form, and invoked upon a target object (or on a <a href="mixins.html" class="xref page">mixin</a> contributing to the target object).</p>
</div>
<div class="paragraph">
<p>They allow the user to perform complex interactions with the domain object, and so raise the level of abstraction compared to requiring the user than simple CRUD-style operations.</p>
</div>
<div class="paragraph">
<p>For example, imagine a lease management system, where a lease is extended by creating a sibling lease term that starts on the same date that the original lease term ended.
There are three operations here: set the end date of the original lease term, create the new lease term with relevant details copied over from the original lease term, and set the start date of the lease term correctly.</p>
</div>
<div class="paragraph">
<p>Instead, all of these operations can be combined into a single action, "renew".
Through such means the <a href="background-context-and-theory.html#ubiquitous-language" class="xref page">ubiquitous language</a> grows.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This is the reason why Apache Causeway' default is <a href="#editable-properties">non-editable properties</a>: to encourage this sort of "knowledge crunching".
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can find further discussion on when and why you should write actions <a href="overview.html#actions" class="xref page">earlier</a>.</p>
</div>
<div class="sect2">
<h3 id="defining-actions"><a class="anchor" href="#defining-actions"></a>Defining actions</h3>
<div class="paragraph">
<p>If the <a href="../../refguide/latest/config/sections/causeway.core.meta-model.introspector.html#causeway.core.meta-model.introspector.policy" class="xref page">causeway.core.meta-model.introspector.policy</a> configuration property is set to <a href="../../refguide/latest/applib/index/annotation/Introspection.html#ANNOTATION_OPTIONAL" class="xref page">ANNOTATION_OPTIONAL</a> or is left unset (the default), then any "left-over" <code>public</code> methods will be considered to be actions.
These are methods that do not represent properties or collections, and that are not recognised as <a href="business-rules.html" class="xref page">supporting methods</a> (such as <code>hideXxx()</code> or <code>disableXxx()</code>).</p>
</div>
<div class="paragraph">
<p>If the policy is set to <a href="../../refguide/latest/applib/index/annotation/Introspection.html#ANNOTATION_REQUIRED" class="xref page">ANNOTATION_REQUIRED</a>, then the <a href="../../refguide/latest/applib/index/annotation/Action.html" class="xref page">@Action</a> annotation must be applied for the method to be treated as an action.
The <code>@Action</code> annotation is also used to specify additional domain semantics, for example regarding idempotency.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action(semantics=SemanticsOf.IDEMPOTENT)       <i class="conum" data-value="1"></i><b>(1)</b>
public ShoppingBasket addToBasket(
        Product product,
        int quantity
        ) {
    ...
    return this;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>@Action</code> annotation indicates that this public method is an action..</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the code is compiled (<code>javac</code>) using the <code>-parameters</code> flag, then the name of the parameter in the metamodel uses the name of the parameter variable.</p>
</div>
<div class="paragraph">
<p>Otherwise, the type of the parameter is used.
For the <code>product</code> parameter this is reasonable, but not so for the <code>quantity</code> parameter (which would by default show up with a name of "int".
In such a case the <a href="../../refguide/latest/applib/index/annotation/ParameterLayout.html" class="xref page">@ParameterLayout</a> annotation can be used to provide the UI hint.</p>
</div>
<div class="paragraph">
<p>The policy can also be set to <a href="../../refguide/latest/applib/index/annotation/Introspection.html#ENCAPSULATION_ENABLED" class="xref page">ENCAPSULATION_ENABLED</a>.
This is similar to <a href="../../refguide/latest/applib/index/annotation/Introspection.html#ANNOTATION_REQUIRED" class="xref page">ANNOTATION_REQUIRED</a>, but methods can have any visibility, including <code>private</code>.
Supporting methods (<code>hideXxx()</code> and the like)) must be annotated with <a href="../../refguide/latest/applib/index/annotation/MemberSupport.html" class="xref page">MemberSupport</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="reference-parameter-types"><a class="anchor" href="#reference-parameter-types"></a>(Reference) Parameter types</h3>
<div class="paragraph">
<p>Parameter types can be value types or reference types.
In the case of primitive types, the end-user can just enter the value directly through the parameter field.
In the case of reference types however (such as <code>Product</code>), a drop-down must be provided from which the end-user to select.
This is done using either a supporting <a href="../../refguide/latest/applib-methods/prefixes.html#choices" class="xref page">choices</a> or <a href="../../refguide/latest/applib-methods/prefixes.html#autoComplete" class="xref page">autoComplete</a> method.
The "choices" is used when there is a limited set of options, while "autoComplete" is used when there are large set of options such that the end-user must provide some characters to use for a search.</p>
</div>
<div class="paragraph">
<p>For example, the <code>addToBasket(&#8230;&#8203;)</code> action shown above might well have an autocomplete supporting method :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action(semantics=SemanticsOf.IDEMPOTENT)
public ShoppingBasket addToBasket(
        Product product,
        @ParameterLayout(named="Quantity")
        int quantity
        ) {
    ...
    return this;
}
public List&lt;Product&gt; autoComplete0AddToBasket(              <i class="conum" data-value="1"></i><b>(1)</b>
    @MinLength(3)                                           <i class="conum" data-value="2"></i><b>(2)</b>
    String searchTerm) {
    return productRepository.find(searchTerm);              <i class="conum" data-value="3"></i><b>(3)</b>
}
@javax.inject.Inject
ProductRepository productRepository;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Supporting <code>autoComplete</code> method.<br>
The "0" in the name means that this corresponds to parameter 0 of the "addToBasket" action (ie <code>Product</code>).
It is also required to return a Collection of that type.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <a href="../../refguide/latest/applib/index/annotation/MinLength.html" class="xref page">@MinLength</a> annotation defines how many characters the end-user must enter before performing a search.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The implementation delegates to an injected repository service.  This is typical.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that it is also valid to define "choices" and "autoComplete" for value types (such as <code>quantity</code>, above); it just isn&#8217;t as common to do so.</p>
</div>
<div class="sect3">
<h4 id="removing-boilerplate-with-autocompleterepository"><a class="anchor" href="#removing-boilerplate-with-autocompleterepository"></a>Removing boilerplate with autoCompleteRepository</h4>
<div class="paragraph">
<p>To save having to define an <code>autoCompleteNXxx(&#8230;&#8203;)</code> method everywhere that a reference to a particular type (such as <code>Product</code>) appears as an action parameter, it is also possible to use the <code>@DomainObject</code> annotation on <code>Product</code> itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DomainObject(
    autoCompleteRepository=ProductRepository.class          <i class="conum" data-value="1"></i><b>(1)</b>
    autoCompleteMethod="find"                               <i class="conum" data-value="2"></i><b>(2)</b>
)
public class Product ... {
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Whenever an action parameter requiring a <code>Product</code> is defined, provide an autoComplete drop-down automatically</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the "find" method of <code>ProductRepository</code> (rather than the default name of "autoComplete").
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The referenced method can be <a href="../../refguide/latest/applib/index/annotation/Programmatic.html" class="xref page">@Programmatic</a> - it doesn&#8217;t actually need to be an action in the metamodel.
</td>
</tr>
</table>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="removing-boilerplate-with-choices"><a class="anchor" href="#removing-boilerplate-with-choices"></a>Removing boilerplate with choices</h4>
<div class="paragraph">
<p>If the number of available instances of the reference type is a small number (in other words, all of which could comfortably be shown in a drop-down) then instead the <code>choicesNXxx()</code> supporting method can be used.
This too can be avoided by annotating the referenced class.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have an action to specify the <code>PaymentMethodType</code>, where there are only 10 or so such (Visa, Mastercard, Amex, Paypal etc).
We could define this as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action
public Order payUsing(PaymentMethodType type) {
    ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>PaymentMethodType</code> would be annotated using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DomainObject(
    bounded=true                            <i class="conum" data-value="1"></i><b>(1)</b>
)
public class PaymentMethodType ... {
    ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>only a small (ie "bounded") number of instances available, meaning that the framework should render all in a drop-down.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="collection-parameter-types"><a class="anchor" href="#collection-parameter-types"></a>Collection Parameter types</h3>
<div class="paragraph">
<p>Action parameters can also be collections of values (for example <code>List&lt;String&gt;</code>), or can be collections of references (such as <code>List&lt;Customer&gt;</code>).</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action(semantics=SemanticsOf.IDEMPOTENT)
public ShoppingBasket addToBasket(
        List&lt;Product&gt; products,
        int quantity
        ) {
    // ...
    return this;
}
public List&lt;Product&gt; autoComplete0AddToBasket(              <i class="conum" data-value="1"></i><b>(1)</b>
                        @MinLength(3) String searchTerm) {
    return ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As the example suggests, any collection parameter type must provide a way to select items, either by way of a "choices" or "autoComplete" supporting method or alternatively defined globally using <a href="../../refguide/latest/applib/index/annotation/DomainObject.html" class="xref page">@DomainObject</a> on the referenced type (described <a href="#reference-parameter-types">above</a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="optional-parameters"><a class="anchor" href="#optional-parameters"></a>Optional Parameters</h3>
<div class="paragraph">
<p>Either the <a href="../../refguide/latest/applib-ant/Nullable.html" class="xref page">@Nullable</a> annotation or the <a href="../../refguide/latest/applib/index/annotation/Parameter.html#optionality" class="xref page">@Parameter#optionality</a>  annotation/attribute can be used to indicate that a parameter can be left blank.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;
import org.joda.time.LocalDate;

@Action(semantics=SemanticsOf.IDEMPOTENT)
public Order invoice(
                PaymentMethodType paymentMethodType,
                @Nullable                                      <i class="conum" data-value="1"></i><b>(1)</b>
                @ParameterLayout(named="Ship no later than")
                LocalDate shipBy) {
    ...
    setShipBy(shipBy)
    return this;
}

@Column(allowsNull="true")                                     <i class="conum" data-value="2"></i><b>(2)</b>
@Property
@Getter @Setter
private LocalDate shipBy;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies the parameter is optional.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the corresponding property is optional.
<div class="paragraph">
<p>Note that this uses an ORM-specific mechanism to specify the same semantics (in this case, using JDO/DataNucleus' <code>@Column#allowsNull()</code>.)</p>
</div></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See also <a href="meta-annotations.html#properties-vs-parameters" class="xref page">properties vs parameters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="string-parameters-length"><a class="anchor" href="#string-parameters-length"></a><code>String</code> Parameters (Length)</h3>
<div class="paragraph">
<p>The <a href="../../refguide/latest/applib/index/annotation/Parameter.html#maxLength" class="xref page">@Parameter#maxLength</a> annotation/attribute is used to specify the maximum number of characters allowed for a string parameter.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

public Customer updateName(
                @Parameter(maxLength=50)                <i class="conum" data-value="1"></i><b>(1)</b>
                @ParameterLayout(named="First name")
                String firstName,
                @Parameter(maxLength=50)
                @ParameterLayout(named="Last name")
                String lastName) {
    setFirstName(firstName);
    setLastName(lastName);
    return this;
}

@Column(length=50)                                      <i class="conum" data-value="2"></i><b>(2)</b>
@Getter @Setter
private String firstName;

@Column(length=50)
@Getter @Setter
private String lastName;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies the parameter length using <a href="../../refguide/latest/applib/index/annotation/Parameter.html#maxLength" class="xref page">@Parameter#maxLength</a> annotation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the length of a corresponding property.
<div class="paragraph">
<p>Note that this uses an ORM-specific annotation (in this case, <a href="../../refguide/latest/applib-ant/Column.html#length-for-strings" class="xref page">@Column#length()</a> annotation</p>
</div></td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Incidentally, note in the above example that the new value is assigned to the properties using the setter methods; the action does not simply set the instance field directly.</p>
</div>
<div class="paragraph">
<p>This is important, because it allows the ORM to keep track that this instance variable is "dirty" and so needs writing to the database table before the transaction completes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See also <a href="meta-annotations.html#properties-vs-parameters" class="xref page">properties vs parameters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="bigdecimals-precision-2"><a class="anchor" href="#bigdecimals-precision-2"></a><code>BigDecimal</code>s (Precision)</h3>
<div class="paragraph">
<p>The <a href="../../refguide/latest/applib-ant/Digits.html" class="xref page">@javax.validation.constraints.Digits#fraction</a> annotation/attribute is used to specify the scale/precision of decimals.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">import javax.jdo.annotations.Column;
import lombok.Getter;
import lombok.Setter;

public Order updateDiscount(
                @javax.validation.constraints.Digits(fraction=2)    <i class="conum" data-value="1"></i><b>(1)</b>
                @ParameterLayout(named="Discount rate")
                String discountRate) {
    setDiscountRate(discountRate);
    return this;
}

@Column(scale=2)                                                    <i class="conum" data-value="2"></i><b>(2)</b>
@Getter @Setter
private BigDecimal discountRate;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Specifies the parameter precision using <a href="../../refguide/latest/applib-ant/Digits.html" class="xref page">@Digits#fraction</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Specifies the corresponding property precision.
<div class="paragraph">
<p>Note that this uses an ORM-specific annotation (in this case,  <a href="../../refguide/latest/applib-ant/Column.html#lengthscale-for-bigdecimals" class="xref page">@Column#scale</a></p>
</div></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See also <a href="meta-annotations.html#properties-vs-parameters" class="xref page">properties vs parameters</a>.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2023 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Causeway, and the Apache Causeway project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-RC3.20231130-0222-987710d4</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'causeway-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
