<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Execution Outbox :: Apache Causeway</title>
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/>
<link rel="home" href="../../.." title="Apache Causeway">
  <link rel="next" href="../executionrepublisher/about.html" title="Execution Republisher">
  <link rel="prev" href="../executionlog/about.html" title="Execution Log">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">
          <span class="icon">
            <img src="../../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Causeway</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item hide-for-print">
          <span>
            <input id="algolia-search-input" placeholder="Search"></span>
          </span>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../../docs//starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../../docs//starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../../docs//demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../../docs//resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../../docs//resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../../userguide//about.html">User Guide</a>
            <a class="navbar-item" href="../../../refguide//about.html">Reference Guide</a>
            <a class="navbar-item" href="../../../testing//about.html">Testing Guide</a>
            <a class="navbar-item" href="../../../security//about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../setupguide//about.html">Setup Guide</a>
            <a class="navbar-item" href="../../../conguide//about.html">Contributors' Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../../vw//about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../../vro//about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../../pjpa//about.html">JPA (EclipseLink)</a>
            <a class="navbar-item" href="../../../pjdo//about.html">JDO (DataNucleus)</a>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../../security//bypass/about.html">Bypass (Authenticator & Authorizor)</a>
            <a class="navbar-item" href="../../../security//shiro/about.html">Shiro (Authenticator & Authorizor)</a>
            <a class="navbar-item" href="../../../security//spring/about.html">Spring (Authenticator only)</a>
            <a class="navbar-item" href="../../../security//keycloak/about.html">Keycloak (Authenticator only)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Catalogs</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../../valuetypes//about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extending the framework itself</span>
            <a class="navbar-item" href="../../../extensions//about.html">Extensions</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../../docs//support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../../docs//support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../../docs//downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../../relnotes//about.html">Release Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Nightly Builds</span>
            <a class="navbar-item" href="https://github.com/apache/isis">Packages (ASF hosted)</a>
            <a class="navbar-item" href="https://github.com/apache-isis-committers/isis-nightly">Packages (not ASF hosted)</a>
            <a class="navbar-item" href="https://apache-isis-committers.github.io/isis-nightly">Website Preview (not ASF hosted)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Framework</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Process</span>
            <a class="navbar-item" href="../../../comguide//about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../../tooling//about.html">Tooling</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Automated Analysis</span>
            <a class="navbar-item" href="https://sonarcloud.io/dashboard?id=apache_isis">SonarCloud.io</a>
            <a class="navbar-item" href="https://fisheye.apache.org/browse/~br=master/isis-git/">ASF Fisheye</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../../core//about.html">Internal Design Docs</a>
            <a class="navbar-item" href="../../../regressiontests//about.html">Regression Tests</a>
            <a class="navbar-item" href="../../../incubator//about.html">Incubator</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Thanks</span>
            <a class="navbar-item" href="../../../more-thanks//more-thanks.html">Acknowledgements</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../../docs//about.html">
          <span class="icon">
            <img src="../../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="../executionlog/about.html" title="Execution Log"><span></span></a>
  <a class="page-next" rel="next"
     href="../executionrepublisher/about.html" title="Execution Republisher"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title="Execution Log"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fun/about.html">Fundamentals</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/concepts-patterns.html">Concepts &amp; Patterns</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/domain-entities-and-services.html">Domain Entities &amp; Services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/object-members.html">Properties, Collections &amp; Actions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/ui.html">UI Layout &amp; Hints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/drop-downs-and-defaults.html">Drop downs and Defaults</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/meta-annotations.html">Meta-annotations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/view-models.html">View Models</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/mixins.html">Mixins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/modules.html">Modules</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../btb/about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/i18n.html">i18n</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/programming-model.html">Programming Model</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commandlog/about.html">Command Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../excel/about.html">Excel Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executionlog/about.html">Execution Log</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="about.html">Execution Outbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../executionrepublisher/about.html">Execution Republisher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../flyway/about.html">Flyway</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version">
          <a href="../../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../pjdo/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">regressiontests</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../regressiontests/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tooling</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../tooling/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../tutorials/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">User Guide</a></li>
    <li>Extensions</li>
    <li><a href="about.html">Execution Outbox</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/master/extensions/core/executionoutbox/adoc/modules/executionoutbox/pages/about.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Execution Outbox</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The <em>Execution Outbox</em> module provides an implementation of <a href="../../../refguide/latest/applib/index/services/publishing/spi/ExecutionSubscriber.html" class="xref page">ExecutionSubscriber</a> that persists <a href="../../../refguide/latest/applib/index/services/iactn/Execution.html" class="xref page">Execution</a>s into an "outbox" (using either the <a href="../../../pjpa/latest/about.html" class="xref page">JPA/EclipseLink</a> or <a href="../../../pjdo/latest/about.html" class="xref page">JDO/DataNucleus</a> object store).
The purpose of the "outbox" is to act as a temporary store of executions to be propogated to other "downstream" systems.</p>
</div>
<div class="paragraph">
<p>The module also provides a REST API, a rest client and DTOs to represent the payloads between these two services.
The client polls the outbox through the REST API (for example every 15 seconds), and uses it to download any new executions.
Once processed (eg published to a message bus), the client then uses the same REST API to delete the executions.
The usage REST client is described <a href="#outbox-rest-client">below</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setup"><a class="anchor" href="#setup"></a>Setup</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="dependency-management"><a class="anchor" href="#dependency-management"></a>Dependency Management</h3>
<div class="paragraph">
<p>Add a section for <em>Execution Outbox</em>'s own BOM:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.causeway.extensions&lt;/groupId&gt;
            &lt;artifactId&gt;causeway-extensions-executionoutbox&lt;/artifactId&gt;
            &lt;scope&gt;import&lt;/scope&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;version&gt;2.0.0-RC1&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dependencies"><a class="anchor" href="#dependencies"></a>Dependencies</h3>
<div class="paragraph">
<p>In the webapp module of your application, add the following dependency:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.causeway.extensions&lt;/groupId&gt;
        &lt;artifactId&gt;causeway-extensions-executionoutbox-persistence-XXX&lt;/artifactId&gt;    <i class="conum" data-value="1"></i><b>(1)</b>
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>specify either <code>causeway-extensions-executionoutbox-persistence-jpa</code> or <code>causeway-extensions-executionoutbox-persistence-jdo</code>, as required</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_update-appmanifest"><a class="anchor" href="#_update-appmanifest"></a>Update AppManifest</h3>
<div class="paragraph">
<p>In your application&#8217;s <code>AppManifest</code> (top-level Spring <code>@Configuration</code> used to bootstrap the app), import the <em>ExecutionOutbox</em> modules.</p>
</div>
<div class="listingblock">
<div class="title">AppManifest.java</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Configuration
@Import({
        ...
        CausewayModuleExtExecutionOutboxPersistenceXxx.class,        <i class="conum" data-value="1"></i><b>(1)</b>
        ...
})
public class AppManifest {
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>specify either <code>CausewayModuleExtExecutionOutboxPersistenceJdo</code> or <code>CausewayModuleExtExecutionOutboxPersistenceJpa</code>, as required</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If using <a href="../../../security/latest/secman/about.html" class="xref page">SecMan</a>, you will also need to import the <a href="../../../testing/latest/fixtures/about.html" class="xref page">Fixture</a> module; SecMan uses fixture scripts to seed its entities.</p>
</div>
</div>
<div class="sect2">
<h3 id="configure-properties"><a class="anchor" href="#configure-properties"></a>Configuration Properties</h3>
<div class="paragraph">
<p>Add the database schema used by the <em>Execution Outbox</em> entities to the configuration file:</p>
</div>
<div class="listingblock">
<div class="title">application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">causeway:
  persistence:
    schema:
      auto-create-schemas: causewayExtExecutionOutbox</code></pre>
</div>
</div>
<div class="paragraph">
<p>Optionally, modify the configuration properties for the <em>Execution Outbox</em> module itself:</p>
</div>
<div class="listingblock">
<div class="title">application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">causeway:
  extensions:
    execution-outbox:
      rest-api:
        max-pending: 100</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="menubar-layout-xml"><a class="anchor" href="#menubar-layout-xml"></a>menubar.layout.xml</h3>
<div class="paragraph">
<p>Once configured, the extension provides a number of menu actions.
You can use <code>menubars.layout.xml</code> to arrange these as you see fit.
To get you started, the following fragment adds all of the actions to an "Activity" secondary menu:</p>
</div>
<div class="listingblock">
<div class="title">menubars.layout.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;mb3:secondary&gt;
    ...
    &lt;mb3:menu&gt;
        &lt;mb3:named&gt;Activity&lt;/mb3:named&gt;
        ...
        &lt;mb3:section&gt;
            &lt;mb3:named&gt;Execution Outbox&lt;/mb3:named&gt;
            &lt;mb3:serviceAction id="findOldest" objectType="isis.ext.executionOutbox.ExecutionOutboxMenu"/&gt;
            &lt;mb3:serviceAction id="findAll" objectType="isis.ext.executionOutbox.ExecutionOutboxMenu"/&gt;
        &lt;/mb3:section&gt;
        ...
    &lt;/mb3:menu&gt;
&lt;/mb3:secondary&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="secman-security-roles"><a class="anchor" href="#secman-security-roles"></a>SecMan Security Roles</h3>
<div class="paragraph">
<p>If <a href="../../../security/latest/secman/about.html" class="xref page">SecMan</a> extension is configured, then permissions must be granted to access the menu actions.</p>
</div>
<div class="paragraph">
<p>This can be done by granting the role set up by the <a href="../../../refguide/latest/extensions/index/secman/applib/role/seed/CausewayExtExecutionOutboxRoleAndPermissions.html" class="xref page">CausewayExtExecutionOutboxRoleAndPermissions</a> seed fixture script (see its <code>ROLE_NAME</code> constant).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-interface"><a class="anchor" href="#user-interface"></a>User Interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The extension provides a number of menu actions, as listed in <a href="#menubar-layout-xml">menubar.layout.xml</a>, above.
They allow the administrator to query the persisted commands.
Typically access to these actions would be restricted, see <a href="#secman-security-roles">security roles</a> above.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="outbox-rest-client"><a class="anchor" href="#outbox-rest-client"></a>Outbox REST Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once an execution has been persisted into the outbox, it will stay there until it has been processed and removed by another process.
Typically that other process will be a microservice that forwards on the message to an event bus.</p>
</div>
<div class="paragraph">
<p>This is shown below.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/outbox.png" alt="outbox" width="600px">
</div>
<div class="title">Figure 1. processing messages from the outbox</div>
</div>
<div class="paragraph">
<p>The module provides a REST service, along with a rest client, <a href="../../../refguide/latest/extensions/index/executionoutbox/restclient/api/OutboxClient.html" class="xref page">OutboxClient</a>.
The <code>OutboxClient</code> is used by the <em>message processor</em> shown in the above diagram.</p>
</div>
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h3>
<div class="paragraph">
<p>To setup the message processor:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in <code>dependencyManagement</code> section, add an entry for <em>Execution Outbox</em>'s own BOM:</p>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.causeway.extensions&lt;/groupId&gt;
            &lt;artifactId&gt;causeway-extensions-executionoutbox&lt;/artifactId&gt;
            &lt;scope&gt;import&lt;/scope&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;version&gt;{page-causewayrel}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>In the <code>dependencies</code> section, add the following dependency:</p>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.causeway.extensions&lt;/groupId&gt;
        &lt;artifactId&gt;causeway-extensions-executionoutbox-restclient&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="usage"><a class="anchor" href="#usage"></a>Usage</h3>
<div class="paragraph">
<p>To instantiate the <code>OutboxClient</code>, specify the URL, user and password.
The URL will be something like: <code><a href="http://localhost:8080/restful/" class="bare">http://localhost:8080/restful/</a></code>, where the last part is the default path obtainable from the <code>resteasy.jaxrs.defaultPath</code> configuration property of the Causeway app.</p>
</div>
<div class="paragraph">
<p>The <code>OutboxClient</code> API consists of three methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to retrieve any pending interactions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">List&lt;InteractionDto&gt; pending = outboxClient.pending();</code></pre>
</div>
</div>
</li>
<li>
<p>to delete a single interaction:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">val first = pending.get(0);
val interactionId = first.getInteractionId();
val sequence      = first.getExecution().getSequence();

outboxClient.delete(interactionId, sequence);</code></pre>
</div>
</div>
</li>
<li>
<p>to delete many interactions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">outboxClient.deleteMany(pending);</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The maximum number of interactions that will be returned is configurable, see <a href="#configure-properties">above</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="../../../refguide/latest/applib/index/services/publishing/spi/ExecutionSubscriber.html" class="xref page">ExecutionSubscriber</a> SPI</p>
</li>
<li>
<p><a href="../executionlog/about.html" class="xref page">Execution Log</a> extension</p>
</li>
</ul>
</div>
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2021 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M9.20221111-0339-10c1a26c</p>
        </div>
    </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'isis-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
