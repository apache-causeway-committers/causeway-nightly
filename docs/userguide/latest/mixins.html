<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mixins :: causeway</title>
    <link rel="canonical" href="https://apache-causeway-committers.github.io/causeway-nightly/userguide/latest/mixins.html">
    <meta name="generator" content="Antora 3.1.14">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
<link rel="home" href="https://apache-causeway-committers.github.io/causeway-nightly" title="causeway">
  <link rel="next" href="events.html" title="Events">
  <link rel="prev" href="view-models.html" title="View Models">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://apache-causeway-committers.github.io/causeway-nightly">
          <span class="icon">
            <img src="../../_/img/causeway-logo-no-words-65x48.png"></img>
          </span>
        <span class="navbar-title">causeway</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../docs/latest/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../docs/latest/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Learning &amp; Tutorials</span>
            <a class="navbar-item" href="../../docs/latest/reference/about.html">Reference App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../docs/latest/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../docs/latest/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/latest/about.html">User Guide</a>
            <a class="navbar-item" href="../../refguide/latest/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../testing/latest/about.html">Testing Guide</a>
            <a class="navbar-item" href="../../security/latest/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">For use in apps</span>
            <a class="navbar-item" href="../../valuetypes/latest/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../setupguide/latest/about.html">Setup Guide</a>
            <a class="navbar-item" href="../../conguide/latest/about.html">Contributors' Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/latest/bypass/about.html">Bypass</a>
            <a class="navbar-item" href="../../security/latest/simple/about.html">Simple</a>
            <a class="navbar-item" href="../../security/latest/spring/about.html">Spring</a>
            <a class="navbar-item" href="../../security/latest/keycloak/about.html">Keycloak</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/latest/about.html">Web UI (Wicket)</a>
            <a class="navbar-item" href="../../gqlv/latest/about.html">GraphQL API</a>
            <a class="navbar-item" href="../../vro/latest/about.html">REST API (Restful Objects)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../pjpa/latest/about.html">JPA (EclipseLink)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Extensions</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/latest/commandlog/about.html">Command Log</a>
            <a class="navbar-item" href="../../userguide/latest/docgen/about.html">Doc Gen</a>
            <a class="navbar-item" href="../../userguide/latest/executionlog/about.html">Execution Log</a>
            <a class="navbar-item" href="../../userguide/latest/executionoutbox/about.html">Execution Outbox</a>
            <a class="navbar-item" href="../../userguide/latest/executionrepublisher/about.html">Execution Republisher</a>
            <a class="navbar-item" href="../../userguide/latest/excel/about.html">Excel</a>
            <a class="navbar-item" href="../../userguide/latest/flyway/about.html">Flyway</a>
            <a class="navbar-item" href="../../userguide/latest/layoutloaders/about.html">Layout Loaders</a>
            <a class="navbar-item" href="../../userguide/latest/titlecache/about.html">Title Cache</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/latest/secman/about.html">Secman</a>
            <a class="navbar-item" href="../../security/latest/audittrail/about.html">Audit Trail</a>
            <a class="navbar-item" href="../../security/latest/spring-oauth2/about.html">Spring OAuth2 Integration</a>
            <a class="navbar-item" href="../../security/latest/sessionlog/about.html">Session Log</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Web UI (Wicket)</span>
            <a class="navbar-item" href="../../vw/latest/fullcalendar/about.html">Full Calendar</a>
            <a class="navbar-item" href="../../vw/latest/pdfjs/about.html">pdf.js</a>
            <a class="navbar-item" href="../../vw/latest/sse/about.html">Server Side Events</a>
            <a class="navbar-item" href="../../vw/latest/tabular/about.html">Tabular Download</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">REST API (Restful Objects)</span>
            <a class="navbar-item" href="../../vro/latest/cors/about.html">CORS</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../querydsl/latest/about.html">QueryDSL</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../docs/latest/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../docs/latest/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/CAUSEWAY">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/causeway">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../docs/latest/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/latest/about.html">Release Notes</a>
            <hr class="navbar-divider"/>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Framework</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Process</span>
            <a class="navbar-item" href="../../comguide/latest/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../tooling/latest/about.html">Tooling</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Automated Analysis</span>
            <a class="navbar-item" href="https://sonarcloud.io/dashboard?id=apache_causeway">SonarCloud.io</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Interim Builds</span>
            <a class="navbar-item" href="../../comguide/latest/nightly-builds.html">Nightly builds</a>
            <a class="navbar-item" href="../../comguide/latest/weekly-builds.html">Weekly builds</a>
            <a class="navbar-item" href="https://apache-causeway-committers.github.io/causeway-nightly">Website Preview (not ASF hosted)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../core/latest/about.html">Internal Design Docs</a>
            <a class="navbar-item" href="../../regressiontests/latest/about.html">Regression Tests</a>
            <a class="navbar-item" href="../../incubator/latest/about.html">Incubator</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Thanks</span>
            <a class="navbar-item" href="../../more-thanks/latest/more-thanks.html">Acknowledgements</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">License</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Causeway.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../docs/latest/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="latest">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-search hide-for-print">
  <input id="algolia-search-input" placeholder="Search"></span>
</div>
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="view-models.html" title="View Models"><span></span></a>
  <a class="page-next" rel="next"
     href="events.html" title="Events"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent disabled" rel="prev" href="" title="View Models"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overview.html">10,000ft overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="domain-entities.html">Domain Entities</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="domain-services.html">Domain Services</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="properties-collections-actions.html">Properties, Collections &amp; Actions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ui-layout-and-hints.html">UI Layout &amp; Hints</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="drop-downs-and-defaults.html">Drop downs &amp; Defaults</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="view-models.html">View Models</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="mixins.html">Mixins</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="events.html">Events</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="modules.html">Modules</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="value-types.html">Value types</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="meta-annotations.html">Meta-annotations</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="background-context-and-theory.html">Background, Context &amp; Theory</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="btb/about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/programming-model.html">Programming Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/troubleshooting-visibility-and-usability.html">Troubleshooting Visibility and Usability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="btb/i18n.html">Internationalization (i18n)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="commandlog/about.html">Command Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="docgen/about.html">DocGen</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="executionlog/about.html">Execution Log</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="executionoutbox/about.html">Execution Outbox</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="executionrepublisher/about.html">Execution Republisher</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="excel/about.html">Excel Library</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="flyway/about.html">Flyway</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="layoutloaders/about.html">Layout Loaders</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="titlecache/about.html">Title Cache</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">latest</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version">
          <a href="../../docs/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../comguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../conguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Design Docs</span>
      <ul class="versions">
        <li class="version">
          <a href="../../core/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions</span>
      <ul class="versions">
        <li class="version">
          <a href="../../extensions/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">GraphQL Viewer</span>
      <ul class="versions">
        <li class="version">
          <a href="../../gqlv/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../incubator/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JPA</span>
      <ul class="versions">
        <li class="version">
          <a href="../../pjpa/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">QueryDSL</span>
      <ul class="versions">
        <li class="version">
          <a href="../../querydsl/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../refguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">regressiontests</span>
      <ul class="versions">
        <li class="version">
          <a href="../../regressiontests/latest/index.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version">
          <a href="../../relnotes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">REST API (Restful Objects Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../vro/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../security/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../setupguide/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version">
          <a href="../../testing/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorials</span>
      <ul class="versions">
        <li class="version">
          <a href="../../tutorials/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version">
          <a href="../../valuetypes/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Web UI (Wicket Viewer)</span>
      <ul class="versions">
        <li class="version">
          <a href="../../vw/latest/about.html">latest</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs/latest/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="about.html">User Guide</a></li>
    <li><a href="mixins.html">Mixins</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/causeway/edit/main/antora/components/userguide/modules/ROOT/pages/mixins.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Mixins</h1>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A mixin acts like a trait or extension method, allowing one module to contribute behaviour or derived state to another object.
The mixin class is an implementation of behaviour - an action, a property or a collection - that and is contributed to another class, either a domain entity or view model.</p>
</div>
<div class="paragraph">
<p>Or rather, the domain object <em>appears</em> in the UI to have the behaviour, but the underlying domain class being contributed to does not "know" this is happening.
In this way what the end-user sees is the domain object&#8217;s actual behaviour along with all of its contributions from other modules.
This makes for a very powerful feature in terms of decoupling, but at the same time is easy to implement for the developer.</p>
</div>
<div class="paragraph">
<p>In fact, the mixin class is bound to the contributee (or mixee) through a Java type, which could be a concrete class, an abstract class, an interface or even <code>java.lang.Object</code>.
This is therefore a key technique to allow the app to stay decoupled, so that it doesn&#8217;t degrade into the proverbial <a href="http://www.laputan.org/mud/mud.html#BigBallOfMud">"big ball of mud"</a>.
There&#8217;s a lot more discussion on this topic in <a href="#modularity">modularity</a> section below and also on the <a href="modules.html" class="xref page">modules</a> page.</p>
</div>
<div class="paragraph">
<p>Mixins are also a convenient mechanism for grouping functionality even for a concrete type, helping to rationalize about the dependency between the data and the behaviour.
Each mixin is in effect a single behavioural "responsibility" of the domain object.</p>
</div>
<div class="sect2">
<h3 id="inside-out-vs-outside-in"><a class="anchor" href="#inside-out-vs-outside-in"></a>Inside-out vs outside-in</h3>
<div class="paragraph">
<p>We find mixins nicely balance inside-out vs outside-in ways of thinking about a system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>inside-out tends to focus on the structure, the nouns that make up the domain.</p>
<div class="paragraph">
<p>For Apache Causeway, these would typically be entities.</p>
</div>
</li>
<li>
<p>outside-in tends to focus on the behaviour, that is the functionality that the system provides to automate the business processes; the verbs, in other words.</p>
<div class="paragraph">
<p>For Apache Causeway, these would typically be actions.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>So-called "behaviourally complete" objects have actions implemented by the entities &#8230;&#8203; in other words, good ole-fashioned object-orientation, as your Mother taught you.
That&#8217;s suitable in lots of cases, though the contract between the behaviour in the action vs the data structure is not explicit &#8230;&#8203; the method has access to all the object&#8217;s state through the <code>this</code> keyword.</p>
</div>
<div class="paragraph">
<p>With mixins, though, make the contract between the behaviour and the structure explicit by moving the behaviour into its own class.
If you do this for all of the behaviour, then the entity might be simply a data container, immutable in and of itself.
In practice, you might not do this completely, but rather have a set of methods on the entity (not actions) that enforce some basic integrity rules (eg ensure that a <code>startDate</code> &lt;= <code>endDate</code>, but don&#8217;t do much more than that).
The mixin for its part exposes behaviour to the end-user as an action, and then manipulates the state of the mixee only by way of the interface exposed to it.</p>
</div>
<div class="paragraph">
<p>We&#8217;ve also found that mixins fit nicely with an agile development methodology.
Often when there&#8217;s a new user story/feature to be implemented, then that new feature may correspond to a new mixin to be implemented.</p>
</div>
</div>
<div class="sect2">
<h3 id="dci-architecture"><a class="anchor" href="#dci-architecture"></a>DCI Architecture</h3>
<div class="paragraph">
<p>DCI stands for Data-Context-Interaction and is presented as an evolution of object-oriented programming, but one where behaviour is bound to objects dynamically rather than statically in some context or other.</p>
</div>
<div class="paragraph">
<p>The idea  was described in the <a href="http://www.artima.com/articles/dci_vision.html">DCI architecture</a>, as formulated and described by <a href="https://en.wikipedia.org/wiki/Trygve_Reenskaug">Trygve Reenskaug</a> and <a href="https://en.wikipedia.org/wiki/Jim_Coplien">Jim Coplien</a>.
Reenskaug is credited as the inventor of the widely-known MVC pattern (he was also the external examiner for Richard Pawson&#8217;s <a href="https://causeway.apache.org/docs/2.0.0-RC1/_attachments/Pawson-Naked-Objects-thesis.pdf">PhD thesis</a> on Naked Objects), while Coplien has a long history in object-orientation, C++ and patterns.</p>
</div>
<div class="paragraph">
<p>The mixin pattern is Apache Causeway' take on the same basic concept.
The contributee&#8217;s type defines an internal API between the mixin behaviour and the internal <em>data</em> structure, while the contributee&#8217;s behaviour enables the <em>interaction</em> by the end-user.
The simplification is that the <em>context</em> isn&#8217;t dynamic, instead the mixin and its contributee are associated statically by way of the contributee type.</p>
</div>
</div>
<div class="sect2">
<h3 id="leveraging-hot-reloading"><a class="anchor" href="#leveraging-hot-reloading"></a>Leveraging hot reloading</h3>
<div class="paragraph">
<p>There are also practical reasons for moving behaviour out of entities even within the same module, because structuring your application this way helps support hot-reloading of Java classes (so that you can modify and recompile your application without having to restart it).
This can provide substantial productivity gains.</p>
</div>
<div class="paragraph">
<p>The Hotspot JVM has limited support for hot reloading; generally you can change method implementations but you cannot introduce new methods.
However, the <a href="https://dcevm.github.io/">DCEVM</a> open source project will patch the JVM to support much more complete hot reloading support.
There are also commercial products such as JRebel.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programming-model"><a class="anchor" href="#programming-model"></a>Programming Model</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mixins are implemented as classes that have a single argument constructor and, depending on the behaviour they contribute, are annotated using either <a href="../../refguide/latest/applib/index/annotation/Action.html" class="xref page">@Action</a>, a <a href="../../refguide/latest/applib/index/annotation/Collection.html" class="xref page">@Collection</a> or a <a href="../../refguide/latest/applib/index/annotation/Property.html" class="xref page">@Property</a>.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="paragraph">
<p>These classes have a single method which implements the behaviour; the name of this method is determined by whether it is an action, collection or property.</p>
</div>
<div class="paragraph">
<p>In addition, mixin classes also must define a <code>public</code> single-arg constructor.
It is this argument&#8217;s parameter type which determines the domain class being contributed to.</p>
</div>
<div class="paragraph">
<p>The sections below provide complete examples of collection, property or action mixins, with contributions through a <code>DocumentHolder</code> interface.</p>
</div>
<div class="sect2">
<h3 id="contributed-action"><a class="anchor" href="#contributed-action"></a>Contributed Action</h3>
<div class="paragraph">
<p>A mixin that contributes an action is defined as a class annotated <a href="../../refguide/latest/applib/index/annotation/Action.html" class="xref page">@Action</a>, with the action&#8217;s behaviour implemented in a method called "act".</p>
</div>
<div class="paragraph">
<p>For example, the following contributes an "addDocument" action to classes that implement/extend <code>DocumentHolder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action                                             <i class="conum" data-value="1"></i><b>(1)</b>
@RequiredArgsConstructor                            <i class="conum" data-value="2"></i><b>(2)</b>
public class DocumentHolder_addDocument {           <i class="conum" data-value="3"></i><b>(3)</b>

    private final DocumentHolder holder;            <i class="conum" data-value="4"></i><b>(4)</b>

    public Document act(Document doc) {             <i class="conum" data-value="5"></i><b>(5)</b>
        /// ...
    }
    public boolean hideAct() { /* ... */ }          <i class="conum" data-value="6"></i><b>(6)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this class is an action mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>It&#8217;s common to use Lombok to automatically create the constructor.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The action Id is "addDocument", ie everything after the "_".
By convention, the prefix before the "_" is the mixee&#8217;s type name.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Mixee is injected into the mixin as a field through the constructor.
Most mixins will interact with their mixee in some way.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>method must be called "act"</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><a href="business-rules.html" class="xref page">supporting methods</a> follow the usual naming conventions.
However, mixins also support <a href="#action-parameters">alternative conventions</a> that you may prefer.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Contributed actions can accept parameters, and have any semantics.
(This is not true for contributed collections, or properties; see below).</p>
</div>
</div>
<div class="sect2">
<h3 id="contributed-collection"><a class="anchor" href="#contributed-collection"></a>Contributed Collection</h3>
<div class="paragraph">
<p>A mixin that contributes a collection is defined as a class annotated <a href="../../refguide/latest/applib/index/annotation/Collection.html" class="xref page">@Collection</a>, with the collection implemented in a method called "coll".</p>
</div>
<div class="paragraph">
<p>For example, the following contributes a "documents" collection to classes that implement/extend <code>DocumentHolder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Collection                                     <i class="conum" data-value="1"></i><b>(1)</b>
@RequiredArgsConstructor
public class DocumentHolder_documents {

    private final DocumentHolder holder;

    public List&lt;Document&gt; coll() { /* ... */ }  <i class="conum" data-value="2"></i><b>(2)</b>
        ...
    }
    public boolean hideColl() { /* ... */ }     <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates that this class is a collection mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>method (which must be called "coll") must accept no arguments, and return a collection</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="xref page">business rules</a>) follow the usual naming conventions
(Because the collection is derived/read-only, the only supporting method that is relevant is <code>hideColl()</code>).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Contributed collections are derived, which means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the "coll" method must take no-arguments.</p>
</li>
<li>
<p>the method should have no side-effects; otherwise the very act of rendering the domain object would change state.</p>
</li>
<li>
<p>it should (of course) return a <code>java.util.Collection</code> (or <code>List</code>, or <code>Set</code>, or <code>SortedSet</code>); however <code>java.util.Map</code>s are _not supported.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="contributed-property"><a class="anchor" href="#contributed-property"></a>Contributed Property</h3>
<div class="paragraph">
<p>A mixin that contributes a property is defined as a class annotated <a href="../../refguide/latest/applib/index/annotation/Property.html" class="xref page">@Property</a>, with the property implemented in a method called "prop".</p>
</div>
<div class="paragraph">
<p>For example, the following contributes a "mostRecentDocument" collection to classes that implement/extend <code>DocumentHolder</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Property                                           <i class="conum" data-value="1"></i><b>(1)</b>
@RequiredArgsConstructor
public class DocumentHolder_mostRecentDocument {

    private final DocumentHolder holder;

    public Document prop() {                        <i class="conum" data-value="2"></i><b>(2)</b>
        ...
    }
    public boolean hideProp() { /* ... */ }         <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>indicates this is a property mixin</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>method (which must be called "prop") must accept no arguments, be query-only, and return a scalar value</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>supporting methods (discussed in <a href="business-rules.html" class="xref page">business rules</a>) follow the usual naming conventions
(Because the property is derived/read-only, the only supporting method that is relevant is <code>hideProp()</code>).</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Like collections, contributed properties are derived, which means:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the "prop" method must take no-arguments.</p>
</li>
<li>
<p>the method should have no side-effects; otherwise the very act of rendering the domain object would change state.</p>
</li>
<li>
<p>it should return a scalar value.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="action-parameters"><a class="anchor" href="#action-parameters"></a>Action Parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have defined an action as a mixin, then the name of the method is "act" and so supporting methods (which match on the name) are easier to write.
For example, the supporting method to hide the action will always be called "hideAct".
However, it can still be tricky to match the supporting methods for individual parameters are matched by number, eg "validate0Act" to validate the 0-th argument.</p>
</div>
<div class="paragraph">
<p>If using mixins, there are two refinements to the programming model that can make your code easier to maintain.</p>
</div>
<div class="paragraph">
<p>By way of example, consider this mixin implemented the usual way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action
@RequiredArgsConstructor
public class ShoppingCart_addItem {

    private final ShoppingCart shoppingCart;

    public ShoppingCart_addItem act(                                <i class="conum" data-value="1"></i><b>(1)</b>
            @Parameter final Product selected,
            @Parameter final int quantity) {
        // ...
    }

    public boolean hideAct() {                                      <i class="conum" data-value="2"></i><b>(2)</b>
        return shoppingCart.isCheckedOutAlready();
    }

    public List&lt;Product&gt; autoComplete0Act(String codeOrName) {      <i class="conum" data-value="3"></i><b>(3)</b>
        return productService.findMatching(codeOrName);
    }

    public String validate0Act(Product selected) {                   <i class="conum" data-value="4"></i><b>(4)</b>
        return selected.isInStock() ? null : "The selected product isn't in stock";
    }

    public String validate1Act(Product selected, int quantity) {     <i class="conum" data-value="5"></i><b>(5)</b>
        if (productService.isInHighDemand(select) &amp;&amp; quantity &gt; 5) {
            return "Sorry, you may not purchase more than 5 items for products that are in high-demand";
        }
        if (quantity &lt;= 0) {
            return "Sorry, can only add a positive number of items to the cart";
        }
        return null;
    }

    @Inject ProductService productService;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>act(&#8230;&#8203;)</code> is the action implementation</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>hideAct(&#8230;&#8203;)</code> hides the action if required</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>autoComplete0Act(&#8230;&#8203;)</code> returns a list for the 0-th parameter (Product)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>validate0Act(&#8230;&#8203;)</code> validates the 0-th parameter (Product)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>validate1Act(&#8230;&#8203;)</code> validates the 0-th parameter (Product)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The sections below describes refactor this mixin using the refined syntax.</p>
</div>
<div class="sect2">
<h3 id="using-the-parameter-name"><a class="anchor" href="#using-the-parameter-name"></a>Using the parameter name</h3>
<div class="paragraph">
<p>In the first alternative, we use the parameter <em>name</em> (rather than its position) to match the supporting methods to the action parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action
@RequiredArgsConstructor
public class ShoppingCart_addItem {

    private final ShoppingCart shoppingCart;

    public ShoppingCart_addItem act(
            @Parameter final Product selected,
            @Parameter final int quantity) {
        // ...
    }

    public boolean hideAct() {
        // ...
    }

    public List&lt;Product&gt; autoCompleteSelected(String codeOrName) {      <i class="conum" data-value="1"></i><b>(1)</b>
        // ...
    }

    public String validateSelected(Product selected) {                  <i class="conum" data-value="2"></i><b>(2)</b>
        // ...
    }

    public String validateQuantity(Product selected, int quantity) {    <i class="conum" data-value="3"></i><b>(3)</b>
        // ...
    }

    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The autoComplete method for the 0-th parameter name now uses its name "Selected", instead</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The validate method for the 0-th parameter name uses the name "Selected"</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The validate method for the 1-th parameter name uses the name "Quantity"</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that the supporting methods no longer include the method name of the action itself (ie "act").
For this reason, it isn&#8217;t possible to use matching-by-name for non-mixin actions.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-a-parameters-class"><a class="anchor" href="#using-a-parameters-class"></a>Using a "parameters" class</h3>
<div class="paragraph">
<p>In the previous section we made the names of the supporting methods more obvious.
Even so, for actions that take many parameters, it can still be problematic to ensure that the supporting methods parameter types are correct, and in the correct order.</p>
</div>
<div class="paragraph">
<p>In the second refinement, we create a data class to hold the parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Action
@RequiredArgsConstructor
public class ShoppingCart_addItem {

    private final ShoppingCart shoppingCart;

    public ShoppingCart_addItem act(
            @Parameter final Product selected,
            @Parameter final int quantity) {
        // ...
    }

    @Value @Accessors(fluent = true)
    static class Parameters {               <i class="conum" data-value="1"></i><b>(1)</b>
        final Product selected;             <i class="conum" data-value="2"></i><b>(2)</b>
        final int quantity;
    }

    public boolean hideAct() {
        // ...
    }

    public List&lt;Product&gt; autoCompleteSelected(String codeOrName) {
        // ...
    }

    public String validateSelected(Parameters parameters) {             <i class="conum" data-value="3"></i><b>(3)</b>
        // ...
    }

    public String validateQuantity(Parameters parameters) {             <i class="conum" data-value="2"></i><b>(2)</b>
        // ...
    }

    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>define a class using Lombok, but could also be a record:
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">record Parameters (Product selected, int quantity);</code></pre>
</div>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>list of fields matches the parameters of the action method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>All the supporting methods for the various parameters just take a <code>Parameters</code> object</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mixins-as-nested-classes"><a class="anchor" href="#mixins-as-nested-classes"></a>As Nested Classes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While mixins primary use case is as a means of allowing contributions from one module to the types of another module, they are also a convenient mechanism for grouping functionality/behaviour against a concrete type.
All the methods and <a href="business-rules.html" class="xref page">supporting methods</a> end up in a single construct, and the dependency between that functionality and the rest of the object is made more explicit.</p>
</div>
<div class="paragraph">
<p>We might therefore want to use a mixin within the same module as the mixee; indeed even within the same package or class as the mixee.
In other words, we could define the mixin as nested static class of the mixee it contributes to.</p>
</div>
<div class="paragraph">
<p>In the previous examples the "_" is used as a separator between the mixin type and mixin name.
However, to support mixins as nested classes, the character "$" is also recognized as a separator.</p>
</div>
<div class="paragraph">
<p>For example, the following refactors the "updateName" action&#8201;&#8212;&#8201;of the <code>SimpleObject</code> class in <a href="../../docs/latest/starters/simpleapp.html" class="xref page">SimpleApp</a> start app&#8201;&#8212;&#8201;into a nested mixin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class SimpleObject /* ... */ {

    @Action(semantics = IDEMPOTENT,
            commandPublishing = Publishing.ENABLED,
            executionPublishing = Publishing.ENABLED,
            associateWith = "name",
            domainEvent = updateName.DomainEvent.class)                 <i class="conum" data-value="2"></i><b>(2)</b>
    public class updateName {                                           <i class="conum" data-value="1"></i><b>(1)</b>

        public class DomainEvent extends
            SimpleModule.ActionDomainEvent&lt;SimpleObject.updateName&gt; {}  <i class="conum" data-value="2"></i><b>(2)</b>

        public SimpleObject act(@Name final String name) {
            setName(name);                                              <i class="conum" data-value="3"></i><b>(3)</b>
            return SimpleObject.this;
        }
        public String defaultName() {                                   <i class="conum" data-value="4"></i><b>(4)</b>
            return getName();
        }
    }
    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Mixin class is not <code>static</code>, so that the containing object is implicitly available.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Domain event can be declared within the mixin, again, not <code>static</code>.
<div class="paragraph">
<p>Note that it is genericised on the mixin, not on the mixee</p>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Acts on the owning instance.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Uses the <a href="#using-the-parameter-name">alternate programming model</a> matching the parameter by its name, not number</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The mixin class name can be either "camelCase" or "PascalCase", as you prefer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modularity"><a class="anchor" href="#modularity"></a>Modularity</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Mixins separate behaviour away from the underlying mixee, with the mixee operating <em>upon</em> the mixee.
The mixee itself knows nothing about its caller.
This simple fact becomes very powerful in that the mixin could even be in a different module than the mixee, <a href="modules.html" class="xref page">modularity</a> being an important concern of maintainability.</p>
</div>
<div class="sect2">
<h3 id="contributing-to-a-class"><a class="anchor" href="#contributing-to-a-class"></a>Contributing to a class</h3>
<div class="paragraph">
<p>The simple case is for the mixin to contribute directly to a mixee&#8217;s concrete class.</p>
</div>
<div class="paragraph">
<p>For example, suppose we have an <code>orders</code> module and a <code>customers</code> module.
The <code>orders</code> module could provide a mixin that (so far as the end-user is concerned in the UI) would allow a customer to place an order:</p>
</div>
<div class="listingblock kroki-error">
<div class="title"><code>orders</code> module contributes to <code>customers</code></div>
<div class="content">
<pre>hide empty members

skinparam class {
    BackgroundColor&lt;&lt;desc&gt;&gt; Cyan
    BackgroundColor&lt;&lt;ppt&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;mi&gt;&gt; LightPink
    BackgroundColor&lt;&lt;role&gt;&gt; LightYellow
    BackgroundColor&lt;&lt;strategy&gt;&gt; White
    BackgroundColor&lt;&lt;api&gt;&gt; White
    BackgroundColor&lt;&lt;spi&gt;&gt; White
    BackgroundColor&lt;&lt;internal&gt;&gt; LightGrey
    BackgroundColor&lt;&lt;value&gt;&gt; White

    BackgroundColor&lt;&lt;entity&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;viewmodel&gt;&gt; LightPink
    BackgroundColor&lt;&lt;mixin&gt;&gt; LightYellow
}

package orders {
    class Customer_placeOrder &lt;&lt;mixin&gt;&gt;
}

package customers {
    class Customer &lt;&lt;ppt&gt;&gt;
}
Customer_placeOrder -.r-&gt; Customer: "contributes to"</pre>
</div>
</div>
<div class="paragraph">
<p>In terms of code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.orders;                   <i class="conum" data-value="1"></i><b>(1)</b>

import domainapp.customers.Customer;        <i class="conum" data-value="2"></i><b>(2)</b>

@Action
@RequiredArgsConstructor
public class Customer_placeOrder {

    private final Customer customer;

    // ...
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>defined in the <code>orders</code> module</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>acts upon objects in the <code>customers</code> module</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="contributing-to-an-interface"><a class="anchor" href="#contributing-to-an-interface"></a>Contributing to an interface</h3>
<div class="paragraph">
<p>In the previous section the <code>Customer</code> did not know that it was being contributed to; and the mixee had access to the entire (<code>public</code>) interface defined by the <code>Customer</code> type.
A variation though is for the mixee to contribute by way of a (Java) <code>interface</code>.</p>
</div>
<div class="paragraph">
<p>This interface needs to be in a module that both the mixee and mixin has access to, and so there are three options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>interface is defined the mixin&#8217;s module</p>
</li>
<li>
<p>interface is defined the mixee&#8217;s module</p>
</li>
<li>
<p>interface is defined in some common/base module</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The sections below explore each of these alternatives.</p>
</div>
<div class="sect3">
<h4 id="interface-defined-in-mixins-module"><a class="anchor" href="#interface-defined-in-mixins-module"></a>Interface defined in mixin&#8217;s module</h4>
<div class="paragraph">
<p>For example, suppose that the <code>docmgmt</code> module provides document management capabilities, provided to any <code>DocumentHolder</code>.
The <code>Customer</code> class might then take advantage of this, saying in effect:  "yes, I want to hold some documents, please manage that concern for me".</p>
</div>
<div class="listingblock kroki-error">
<div class="title"><code>Customer</code> elects to have contributions made to it by <code>docmgmt</code> module</div>
<div class="content">
<pre>hide empty members

skinparam class {
    BackgroundColor&lt;&lt;desc&gt;&gt; Cyan
    BackgroundColor&lt;&lt;ppt&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;mi&gt;&gt; LightPink
    BackgroundColor&lt;&lt;role&gt;&gt; LightYellow
    BackgroundColor&lt;&lt;strategy&gt;&gt; White
    BackgroundColor&lt;&lt;api&gt;&gt; White
    BackgroundColor&lt;&lt;spi&gt;&gt; White
    BackgroundColor&lt;&lt;internal&gt;&gt; LightGrey
    BackgroundColor&lt;&lt;value&gt;&gt; White

    BackgroundColor&lt;&lt;entity&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;viewmodel&gt;&gt; LightPink
    BackgroundColor&lt;&lt;mixin&gt;&gt; LightYellow
}

package docmgmt {
    class DocumentHolder_documents &lt;&lt;mixin&gt;&gt;
    interface DocumentHolder
}

package customers {
    class Customer &lt;&lt;ppt&gt;&gt;
}
DocumentHolder_documents -.r-&gt; DocumentHolder: "contributes to"
Customer -u-^ DocumentHolder</pre>
</div>
</div>
<div class="paragraph">
<p>Therefore <code>customer</code> (mixee) --- [depends upon]&#8594; <code>docmgmt</code> (mixin).</p>
</div>
<div class="paragraph">
<p>In terms of code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in the <code>docmgmt</code> module:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.docmgmt;

public interface DocumentHolder { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.docmgmt;

@Collection
@RequiredArgsConstructor
public class DocumentHolder_documents {

    private final DocumentHolder documentHolder;

    // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>in the <code>customers</code> module:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.customer;

import domainapp.docmgmt.DocumentHolder;

public class Customer implements DocumentHolder {
    // ...
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="interface-defined-in-mixees-module"><a class="anchor" href="#interface-defined-in-mixees-module"></a>Interface defined in mixee&#8217;s module</h4>
<div class="paragraph">
<p>Alternatively, the interface could be in the mixees&#8217;s module.</p>
</div>
<div class="paragraph">
<p>For example, suppose the <code>customer</code> module defines <code>HasAddress</code>, also implemented by <code>Customer</code>.
The <code>mailmerge</code> module provides the ability to send out mailshots, but it only needs the information exposed through <code>HasAddress</code>, not all of <code>Customer</code>.</p>
</div>
<div class="listingblock kroki-error">
<div class="title"><code>mailmerge</code> module contributes to <code>customers</code></div>
<div class="content">
<pre>hide empty members

skinparam class {
    BackgroundColor&lt;&lt;desc&gt;&gt; Cyan
    BackgroundColor&lt;&lt;ppt&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;mi&gt;&gt; LightPink
    BackgroundColor&lt;&lt;role&gt;&gt; LightYellow
    BackgroundColor&lt;&lt;strategy&gt;&gt; White
    BackgroundColor&lt;&lt;api&gt;&gt; White
    BackgroundColor&lt;&lt;spi&gt;&gt; White
    BackgroundColor&lt;&lt;internal&gt;&gt; LightGrey
    BackgroundColor&lt;&lt;value&gt;&gt; White

    BackgroundColor&lt;&lt;entity&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;viewmodel&gt;&gt; LightPink
    BackgroundColor&lt;&lt;mixin&gt;&gt; LightYellow
}

package mailmerge {
    class HasAddress_mailshot &lt;&lt;mixin&gt;&gt;
}

package customers {
    interface HasAddress
    class Customer &lt;&lt;ppt&gt;&gt;
}
HasAddress_mailshot -.r-&gt; HasAddress: "contributes to"
Customer -u-^ HasAddress</pre>
</div>
</div>
<div class="paragraph">
<p>Therefore <code>mailmerge</code> (mixin) --- [depends upon]&#8594; <code>customer</code> (mixee).</p>
</div>
<div class="paragraph">
<p>In terms of code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in the <code>customers</code> module:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.customer;

public interface HasAddress {
    // ...
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.customer;

public class Customer implements HasAddress {
    // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>and in the <code>mailmerge</code> module:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.mailmerge;

@Action
public class HasAddress_mailshot {
    private final HasAddress hasAddress;
    // ...
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="interface-defined-in-a-common-module"><a class="anchor" href="#interface-defined-in-a-common-module"></a>Interface defined in a common module</h4>
<div class="paragraph">
<p>With this design in the previous section, there&#8217;s nothing to prevent our "mailmerge" module from accessing the rest of <code>Customer</code>.
We can fix this by moving the interface to some common location:</p>
</div>
<div class="listingblock kroki-error">
<div class="title"><code>mailmerge</code> module contributes to <code>customers</code></div>
<div class="content">
<pre>hide empty members

skinparam class {
    BackgroundColor&lt;&lt;desc&gt;&gt; Cyan
    BackgroundColor&lt;&lt;ppt&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;mi&gt;&gt; LightPink
    BackgroundColor&lt;&lt;role&gt;&gt; LightYellow
    BackgroundColor&lt;&lt;strategy&gt;&gt; White
    BackgroundColor&lt;&lt;api&gt;&gt; White
    BackgroundColor&lt;&lt;spi&gt;&gt; White
    BackgroundColor&lt;&lt;internal&gt;&gt; LightGrey
    BackgroundColor&lt;&lt;value&gt;&gt; White

    BackgroundColor&lt;&lt;entity&gt;&gt; LightGreen
    BackgroundColor&lt;&lt;viewmodel&gt;&gt; LightPink
    BackgroundColor&lt;&lt;mixin&gt;&gt; LightYellow
}

package mailmerge {
    class HasAddress_mailshot &lt;&lt;mixin&gt;&gt;
}

package address {
    interface HasAddress
}

package customers {
    class Customer &lt;&lt;ppt&gt;&gt;
}
HasAddress_mailshot -.r-&gt; HasAddress: "contributes to"
Customer -u-^ HasAddress</pre>
</div>
</div>
<div class="paragraph">
<p>Therefore neither <code>mailmerge</code> (mixin) nor <code>customer</code> (mixee) depend upon each other; instead both depend upon <code>address</code>.</p>
</div>
<div class="paragraph">
<p>In terms of code:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>in the <code>address</code> module:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.address;

@Action
public interface HasAddress {
    private final HasAddress hasAddress;
    // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>in the <code>customers</code> module:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.customer;

import domainapp.address.HasAddress;

@Action
public class Customer implements HasAddress {
    // ...
}</code></pre>
</div>
</div>
</li>
<li>
<p>in the <code>mailmerge</code> module:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package domainapp.mailmerge;

@Action
public class HasAddress_mailshot {
    private final HasAddress hasAddress;
    // ...
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Taking this idea to its logical conclusion, that common type could even be <code>java.lang.Object</code>.
And indeed, the framework itself defines a handful of mixins that do exactly this.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="micro-frontends"><a class="anchor" href="#micro-frontends"></a>Micro-frontends</h3>
<div class="paragraph">
<p>A <a href="https://micro-frontends.org/">micro-frontend</a> is an extension of the microservices idea, but for the user interface.
Rather than having a monolithic front-end UI that calls to multiple backends, instead the user interface that is composed of vertical slices of functionality, each slice calling its corresponding backend microservice.
UI infrastructure pulls all of these fragments together into a coherent user interface.</p>
</div>
<div class="paragraph">
<p>Microservices are (of course) just one means to implement modularity and enable product ownership.
In the context of an Apache Causeway app, we are more likely to use individual Maven modules as our, well, as our modules.
Each such module provides a set of mixins, and these mixins in effect show up to the end-user as slices of functionality.
The framework itself brings all this together, acting as the UI infrastructure.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programmatic-usage"><a class="anchor" href="#programmatic-usage"></a>Programmatic usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a domain object is rendered, the framework will automatically instantiate all required mixins and delegate to them dynamically.
If writing integration tests or fixtures, or (sometimes) just regular domain logic, then you may need to instantiate mixins directly.</p>
</div>
<div class="paragraph">
<p>For this you can use the <a href="../../refguide/latest/applib/index/services/factory/FactoryService.html" class="xref page">FactoryService#mixin(&#8230;&#8203;)</a> method.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DocumentHolder_documents mixin =
    factoryService.mixin(DocumentHolder_documents.class, customer);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use <a href="../../refguide/latest/applib/index/services/inject/ServiceInjector.html" class="xref page">ServiceInjector</a> to inject domain services after the mixin has been instantiated.
You&#8217;ll need to use this method if using nested non-<code>static</code> mixins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SimpleObject.updateName mixin =
    serviceInjector.injectServicesInto( simpleObject.new updateName() );</code></pre>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Mixin classes are also required to be annotated with  <a href="../../refguide/latest/applib/index/annotation/DomainObject.html" class="xref page">@DomainObject</a><a href="../../refguide/latest/applib/index/annotation/Nature.html#MIXIN" class="xref page">(nature=MIXIN)</a>. The <code>@Action</code>, <code>@Collection</code> and <code>@Property</code> are in fact meta-annotations that satisfy this requirement for us.
</div>
</div>
</article>
<aside class="article-aside toc hide-for-print" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright  2010~2024 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Causeway, and the Apache Causeway project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 4.0.0-SNAPSHOT.20251121-0303-999ad6fc</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>

<script src="../../_/js/vendor/docsearch.min.js"></script>
<script>
  function focusSearchInput () { document.querySelector('#algolia-search-input').focus() }
  var search = docsearch({
    appId: '5ISP5TFAEN',
    apiKey: '0fc51c28b4ad46e7318e96d4e97fab7c',
    indexName: 'causeway-apache-org',
    inputSelector: '#algolia-search-input',
    autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
    debug: false,
  }).autocomplete
  search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
  focusSearchInput()
  window.addEventListener('load', focusSearchInput);
</script>

<!--
  docsearch options:
  https://docsearch.algolia.com/docs/behavior/
-->
<!--
  https://www.algolia.com/doc/api-reference/api-parameters/
  algoliaOptions: { hitsPerPage: 6 },
-->
  </body>
</html>
