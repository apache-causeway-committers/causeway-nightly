<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Business Rules :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Raleway:300,400,500,700,800|Montserrat:300,400,700" rel="stylesheet">
<link rel="home" href="../.." title="Apache Isis">
  <link rel="next" href="drop-downs-and-defaults.html" title="Drop downs and Defaults">
  <link rel="prev" href="crud.html" title="CRUD">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        <span>Apache Isis</span>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <a class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../docs/latest/starters/helloworld.html">Hello World</a>
            <a class="navbar-item" href="../../docs/latest/starters/simpleapp.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../docs/latest/demo/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../docs/latest/resources/cheatsheet.html">Cheatsheet</a>
            <a class="navbar-item" href="../../docs/latest/resources/icons.html">Icons</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Development</span>
            <a class="navbar-item" href="../../setupguide/latest/about.html">Setup Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Core</span>
            <a class="navbar-item" href="../../userguide/latest/about.html">User Guide</a>
            <a class="navbar-item" href="../../refguide/latest/about.html">Reference Guide</a>
            <a class="navbar-item" href="../../testing/latest/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Libraries</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">For Use in Apps</span>
            <a class="navbar-item" href="../../subdomains/latest/about.html">Subdomain Libraries</a>
            <a class="navbar-item" href="../../valuetypes/latest/about.html">Value Types</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Integrate between Apps</span>
            <a class="navbar-item" href="../../mappings/latest/about.html">Bounded Context Mapping Libraries</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Other</span>
            <a class="navbar-item" href="../../incubator/latest/about.html">Incubator</a>
            <a class="navbar-item" href="../../legacy/latest/about.html">Legacy</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/latest/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/latest/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/latest/about.html">Security Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../pjdo/latest/about.html">DataNucleus (JDO)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../extensions/latest/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Contact</span>
            <a class="navbar-item" href="../../docs/latest/support/slack-channel.html">Slack</a>
            <a class="navbar-item" href="../../docs/latest/support/mailing-list.html">Mailing Lists</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">JIRA</a>
            <a class="navbar-item" href="https://stackoverflow.com/questions/tagged/isis">Stack Overflow</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../docs/latest/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/latest/about.html">Release Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Framework</span>
            <a class="navbar-item" href="../../conguide/latest/about.html">Contributors' Guide</a>
            <a class="navbar-item" href="../../comguide/latest/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/latest/about.html">Core Design</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Archive</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">v1.x Docs</span>
            <a class="navbar-item" href="../../versions/1.17.0/documentation.html">1.17.0</a>
            <a class="navbar-item" href="../../versions/1.16.2/documentation.html">1.16.2</a>
            <a class="navbar-item" href="../../versions/1.16.1/documentation.html">1.16.1</a>
            <a class="navbar-item" href="../../versions/1.16.0/documentation.html">1.16.0</a>
            <a class="navbar-item" href="../../versions/1.15.1/documentation.html">1.15.1</a>
            <a class="navbar-item" href="../../versions/1.15.0/documentation.html">1.15.0</a>
            <a class="navbar-item" href="../../versions/1.14.0/documentation.html">1.14.0</a>
            <a class="navbar-item" href="../../versions/1.13.2.1/documentation.html">1.13.2.1</a>
            <a class="navbar-item" href="../../versions/1.13.2/documentation.html">1.13.2</a>
            <a class="navbar-item" href="../../versions/1.13.1/documentation.html">1.13.1</a>
            <a class="navbar-item" href="../../versions/1.13.0/documentation.html">1.13.0</a>
            <a class="navbar-item" href="../../versions/1.12.2/documentation.html">1.12.2</a>
            <a class="navbar-item" href="../../versions/1.12.1/documentation.html">1.12.1</a>
            <a class="navbar-item" href="../../versions/1.12.0/documentation.html">1.12.0</a>
            <a class="navbar-item" href="../../versions/1.11.1/documentation.html">1.11.1</a>
            <a class="navbar-item" href="../../versions/1.11.0/documentation.html">1.11.0</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../docs/latest/about.html">
          <span class="icon">
            <img src="../../_/img/home.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-pagination">
  <a class="page-previous" rel="prev" href="crud.html" title="CRUD"><span></span></a>
  <a class="page-next" rel="next"
     href="drop-downs-and-defaults.html" title="Drop downs and Defaults"><span></span></a>
<!--
page.parent doesn't seem to be set...
  <a class="page-parent" rel="prev" href="about.html" title="CRUD"><span></span></a>
-->
</div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="about.html">Fundamentals</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="core-concepts.html">Core Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="building-blocks.html">Building Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="programming-model.html">Programming Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ui-hints.html">UI Hints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="crud.html">CRUD</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="drop-downs-and-defaults.html">Drop downs and Defaults</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="available-domain-services.html">Available Domain Services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../btb/about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/i18n.html">i18n</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/programming-model.html">Programming Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/deployment.html">Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../btb/web-xml.html">web.xml</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Extensions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../flyway/about.html">Flyway</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../docs/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">BC Mappings Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mappings/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Committers' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../comguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Contributors' Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../conguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Incubator Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../incubator/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">JDO/DataNucleus</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../pjdo/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Legacy Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../legacy/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Release Notes</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../relnotes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Setup Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../setupguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Subdomains Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../subdomains/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Value Types Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../valuetypes/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../docs/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">User Guide</a></li>
    <li><a href="about.html">Fundamentals</a></li>
    <li><a href="business-rules.html">Business Rules</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/api/adoc/userguide/modules/fun/pages/business-rules.adoc">Edit</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page">Business Rules</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>When a domain object is rendered in the UI or the end-user interacts with the domain object through the UI, the framework applies a series of precondition business rules to each object member (property, collection or action).</p>
</div>
<div class="paragraph">
<p>When the object is being rendered, the framework checks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is the object member visible?<br></p>
<div class="paragraph">
<p>Members that are not visible are simply omitted from the page.
If all the members in a fieldset (property group) are hidden, then the fieldset is not shown.
If all the members in a tab are hidden, then the tab is not shown.
If all the members of the object are hidden, then a "404" style message ("no such object") is returned to the user.</p>
</div>
</li>
<li>
<p>if the object member is visible, is the object member enabled?<br></p>
<div class="paragraph">
<p>An enabled property can be edited (otherwise it is read-only), and an enabled action can be invoked (otherwise it&#8217;s button is "greyed-out").
Note that collections are always read-only.</p>
</div>
</li>
<li>
<p>for enabled object members, if the user then interacts with that member, are the supplied values valid (can the user "do it").<br></p>
<div class="paragraph">
<p>For an editable property this means validating the proposed new value of the property.
For an invokable action this means validating that arguments being used to invoke the action.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>One way to remember this is: <strong>"see it, use it, do it"</strong></p>
</div>
<div class="paragraph">
<p>The framework provides a multitude of ways to implement these business rules.
One decoupled approach is using <a href="building-blocks.html#domain-events" class="page">domain events</a>; the checks above correspond to the phases of the domain event.
A simpler approach is to just implement the business rules imperatively in the domain object, or in a mixin for the object.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="visibility"><a class="anchor" href="#visibility"></a>Visibility ("see it")</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="property-or-collection"><a class="anchor" href="#property-or-collection"></a>Property or Collection</h3>
<div class="paragraph">
<p>To hide a property or collection:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String getStatus() { /* ... */ }
public void setStatus(String status) { /* ... */ }

public boolean hideStatus() { /* ... */ }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="object-action"><a class="anchor" href="#object-action"></a>Object Action</h3>
<div class="paragraph">
<p>An object action can be hidden similarly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Customer placeOrder(Product p, int quantity) { /* ... */ }
public boolean hidePlaceOrder() { /* ... */ }</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>hideXxx</code> method returns <code>true</code> then the action is hidden.
Note that the supporting method takes no parameters.</p>
</div>
</div>
<div class="sect2">
<h3 id="action-parameter"><a class="anchor" href="#action-parameter"></a>Action Parameter</h3>
<div class="paragraph">
<p>It is also possible to hide an action parameter, based on the value of some other earlier parameter:
Each <code>hideNXxx()</code> method can declare parameters for the previous N-1 parameters, though it need not declare them all.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Order {
    public Order shipTo(
            boolean sameAsBillingAddress,
            String addressLine1,
            String addressLine2,
            String addressCity,
            String addressPostalCode,
            String addressCountry
    ) { /* ... */ }
    public boolean hide1ShipTo(boolean sameAsBillingAddress) { return sameAsBillingAddress; }
    public boolean hide2ShipTo(boolean sameAsBillingAddress) { return sameAsBillingAddress; }
    public boolean hide3ShipTo(boolean sameAsBillingAddress) { return sameAsBillingAddress; }
    public boolean hide4ShipTo(boolean sameAsBillingAddress) { return sameAsBillingAddress; }
    public boolean hide5ShipTo(boolean sameAsBillingAddress) { return sameAsBillingAddress; }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the user can use the <code>shipTo(&#8230;&#8203;)</code> action to specify where to ship the <code>Order</code> to.
However, if they check the first boolean parameter (ie, to ship the <code>Order</code> to the billing address already held on file), then the remaining parameters will all be hidden.</p>
</div>
</div>
<div class="sect2">
<h3 id="for-more-information"><a class="anchor" href="#for-more-information"></a>For more information</h3>
<div class="paragraph">
<p>For more information, see the <a href="../../refguide/applib-cm/methods.html#hide" class="page"><code>hide&#8230;&#8203;()</code></a> section in the appropriate reference guide.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usability"><a class="anchor" href="#usability"></a>Usability ("use it")</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="property"><a class="anchor" href="#property"></a>Property</h3>
<div class="paragraph">
<p>By default properties cannot be edited, as specified by the
<a href="#refguide:config:configuration-properties.adoc#applib" class="page unresolved"><code>isis.applib.annotation.
domain-object.editing</code></a> configuration property.</p>
</div>
<div class="paragraph">
<p>This policy can be overridden for an individual property using the <a href="../../refguide/applib-ant/Property.html#editing" class="page"><code>@Property#editing</code></a> annotation; this makes sense for properties where there are no business rules governing their content, for example "notes" or "comments" fields.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Getter @Setter
@Property(editing = Editing.ENABLED)
private String notes;</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to make all properties of a domain object editable using <a href="../../refguide/applib-ant/DomainObject.html" class="page"><code>@DomainObject</code></a>, though use cases for this are rare.</p>
</div>
<div class="paragraph">
<p>For very simply "CRUD-y" like applications, you might wish to switch the global policy, so that all properties are enabled by default, then selectively disable them.</p>
</div>
<div class="paragraph">
<p>To disable a property (so that it cannot be edited):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Getter @Setter
private String notes;

public String disableNotes() {
    return isArchived() ? "The notes of archived objects cannot be modified" : null;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To make <em>all</em> of the properties of a domain object unmodifiable, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DomainObject(
    editing=Editing.DISABLED
)
public class Customer { /* ... */ }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is can be made a global policy using a <a href="#refguide:config:configuring-core.adoc#isis-objects-editing" class="page unresolved">configuration setting</a>:</p>
</div>
<div class="listingblock">
<div class="title">isis.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-ini hljs" data-lang="ini">isis.objects.editing=false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="collections"><a class="anchor" href="#collections"></a>Collections</h3>
<div class="paragraph">
<p>Collections are always read-only; there is no notion of adding or removing from a collection implicitly.
To add to or remove from a collection, an action should be defined.</p>
</div>
</div>
<div class="sect2">
<h3 id="actions"><a class="anchor" href="#actions"></a>Actions</h3>
<div class="paragraph">
<p>To disable an object action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Customer placeOrder(Product p, int quantity) { /* ... */ }
public String disablePlaceOrder() { /* ... */ }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here a non-<code>null</code> value is used as the reason why the action is disabled.
A localized string can be returned using <code>TranslatableString</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="action-parameters"><a class="anchor" href="#action-parameters"></a>Action Parameters</h3>
<div class="paragraph">
<p>It is also possible to disable an action parameter, so that it is disabled (greyed out) based on the value of earlier parameters.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Product categorize(Category category, Subcategory subcategory) { /* ... */}
public String disable1Categorize(Category category) {
    return category == null category.hasSubcategories() ? null : "The selected category has no subcategories"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="for-more-information-2"><a class="anchor" href="#for-more-information-2"></a>For more information</h3>
<div class="paragraph">
<p>For more information, see  <a href="../../refguide/applib-cm/methods.html#disable" class="page"><code>disable&#8230;&#8203;()</code></a> section in the appropriate reference guide.</p>
</div>
<div class="paragraph">
<p>It is also possible to hide an action parameter, based on the value of some other earlier parameter:
Each <code>hideNXxx()</code> method can declare parameters for the previous N-1 parameters, though it need not declare them all.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="validity"><a class="anchor" href="#validity"></a>Validity ("do it")</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="properties"><a class="anchor" href="#properties"></a>Properties</h3>
<div class="paragraph">
<p>Property edits can also be validated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public String getStatus() { /* ... */ }
public void setStatus(String status) { /* ... */ }

public String validateStatus(String status) { /* ... */ }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="action-parameters-2"><a class="anchor" href="#action-parameters-2"></a>Action parameters</h3>
<div class="paragraph">
<p>Action arguments can be validated either singly or as a set.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Customer placeOrder(Product p, int quantity) { /* ... */ }
public String validate0PlaceOrder(Product p) { /* ... */ }               <i class="conum" data-value="1"></i><b>(1)</b>
public String validate1PlaceOrder(int quantity) { /* ... */ }            <i class="conum" data-value="2"></i><b>(2)</b>
public String validatePlaceOrder(Product p, int quantity) { /* ... */ }  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>validates the 0th argument of the action (0-based numbering), ie <code>Product</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>validates the 1st argument of the action, ie <code>int quantity</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>validates all the arguments of the action together.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The framework validates each argument separately; only if all are valid does it check all the arguments together.</p>
</div>
<div class="paragraph">
<p>As for usability check, a non-<code>null</code> value is used as the reason why the action arguments are invalid.
It is also possible to return a localized string by returning a <code>TranslatableString</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="for-more-information-3"><a class="anchor" href="#for-more-information-3"></a>For more information</h3>
<div class="paragraph">
<p>For more information, see the <a href="../../refguide/applib-cm/methods.html#validate" class="page"><code>validate&#8230;&#8203;()</code></a> section in the appropriate reference guide.
The reference guide also explains how to define validation declaratively, using the <a href="../../refguide/applib-ant/Parameter.html#mustSatisfy" class="page"><code>@Parameter#mustSatisfy()</code></a> or <a href="../../refguide/applib-ant/Property.html#mustSatisfy" class="page"><code>@Property#mustSatisfy()</code></a> attributes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="actions-2"><a class="anchor" href="#actions-2"></a>Actions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The business rules described above (<a href="business-rules/visibility.html" class="page">visibility</a>, <a href="business-rules/usability.html" class="page">usability</a>, <a href="business-rules/validity.html" class="page">validity</a>) are business rules that enforce preconditions</p>
</div>
<div class="paragraph">
<p>The actual business logic is implemented in the form of actions: methods that are invokable by the user to allow them to accomplish some sort of goal.
Rather than have the end-user have to edit individual properties of numerous objects, an action can encode these rules and allow only safe transformations of the application from one consistent state to the next.</p>
</div>
<div class="paragraph">
<p>Examples could be: "place order", "award compensation", "approve an invoice", "check installation" and so on.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="side-effects"><a class="anchor" href="#side-effects"></a>Side effects</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Often when the state of an object is modified there is a business rule for some sort of side-effect.
For example, suppose that a <code>Person</code> has a persisted derived property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Person {

    @Getter @Setter                     <i class="conum" data-value="1"></i><b>(1)</b>
    private LocalDate dateOfBirth;

    @Getter @Setter
    private int age;                    <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>using Lombok to remove boilerplate.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>persisted derived property based on <code>dateOfBirth</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One design would be to only allow the two properties to be modified through an action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public Person updateDateOfBirth(LocalDate dateOfBirth) {
    setDateOfBirth(dateOfBirth);
    setAge(Years.between(clockService.now(), dateOfBirth));
    return this;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively we could allow the property to be edited, and then compute the side-effect.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public void setDateOfBirth(LocalDate dateOfBirth) {
    this.dateOfBirth = dateOfBirth;
    setAge(Years.between(clockService.now(), dateOfBirth));
    return this;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Datanucleus does <em>not</em> call the setter when reloading the object from the database, so there is no issue in having the side-effect code (calling <code>setAge(&#8230;&#8203;)</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The framework also allows side-effect code to be placed in separate <a href="../../refguide/applib-cm/methods.html#modify" class="page"><code>modify&#8230;&#8203;()</code></a>, <a href="../../refguide/applib-cm/methods.html#clear" class="page"><code>clear&#8230;&#8203;()</code></a> supporting methods; if present then these will be called by the framework rather than the setter.
However, because of DataNucleus' smart handling of setters, these supporting methods are in essence redundant, and so should be considered deprecated.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <p class="toc-title">On this page</p>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright Â© 2010~2020 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20200311-0401-e280af73</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hashGenerator: "pretty",
            hideEffect: "slideUp",
            selectors: "h2, h3",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
