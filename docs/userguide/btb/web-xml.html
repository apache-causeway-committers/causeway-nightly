<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>web.xml :: Apache Isis</title>
    <meta name="generator" content="Antora 2.2.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-custom.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Apache Isis</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Quick Start</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Starter Apps</span>
            <a class="navbar-item" href="../../helloworld/about.html">Hello World</a>
            <a class="navbar-item" href="../../simpleapp/about.html">Simple App</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Demos &amp; Tutorials</span>
            <a class="navbar-item" href="../../demoapp/about.html">Demo App</a>
            <a class="navbar-item" href="https://danhaywood.gitlab.io/isis-petclinic-tutorial-docs/petclinic/1.16.2/intro.html">Petclinic (tutorial)</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Guides</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">User Guide</span>
            <a class="navbar-item" href="../../userguide/about.html">Fundamentals &amp; Beyond</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Reference</span>
            <a class="navbar-item" href="../../refguide/about.html">Reference Guide</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Security</span>
            <a class="navbar-item" href="../../security/about.html">Security Guide</a>
            <a class="navbar-item" href="../../ext-secman/about.html">SecMan (extension)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Testing</span>
            <a class="navbar-item" href="../../testing/about.html">Testing Guide</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Components</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Viewers</span>
            <a class="navbar-item" href="../../vw/about.html">Wicket UI</a>
            <a class="navbar-item" href="../../vro/about.html">Restful Objects (REST)</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Persistence</span>
            <a class="navbar-item" href="../../odn/about.html">DataNucleus Object Store</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Extensions</span>
            <a class="navbar-item" href="../../extensions/about.html">Extensions Catalog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <span class="navbar-item navbar-heading">Resources</span>
            <a class="navbar-item" href="../../toc/devguide/about.html">Developers' Guide</a>
            <a class="navbar-item" href="../../toc/mavendeps/about.html">Maven dependencies</a>
            <a class="navbar-item" href="../../toc/mixins/about.html">Maven mixins</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Mailing Lists</span>
            <a class="navbar-item" href="../../toc/mailing-list/how-to-subscribe.html">How to subscribe</a>
            <a class="navbar-item" href="https://issues.apache.org/jira/browse/ISIS">ASF JIRA</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Releases</span>
            <a class="navbar-item" href="../../toc/downloads/how-to.html">Downloads</a>
            <a class="navbar-item" href="../../relnotes/about.html">Release Notes</a>
            <a class="navbar-item" href="../../mignotes/about.html">Migration Notes</a>
            <hr class="navbar-divider"/>
            <span class="navbar-item navbar-heading">Internal</span>
            <a class="navbar-item" href="../../toc/comguide/about.html">Committers' Guide</a>
            <a class="navbar-item" href="../../core/about.html">Core Framework</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">@ASF</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="http://www.apache.org/">Apache Homepage</a>
            <a class="navbar-item" href="https://www.apache.org/events/current-event">Events</a>
            <a class="navbar-item" href="https://www.apache.org/licenses/">Licenses</a>
            <a class="navbar-item" href="https://www.apache.org/security/">Security</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a>
            <a class="navbar-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a>
            <hr class="navbar-divider"/>
            <a class="navbar-item" href="https://whimsy.apache.org/board/minutes/Isis.html">PMC board minutes</a>
          </div>
        </div>
        <a class="navbar-item" href="../../toc/about.html">
          <span class="icon">
            <img src="../../_/img/isis-logo-48x48.png"></img>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="body ">
<div class="nav-container" data-component="userguide" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../about.html">User Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../fun/about.html">Fundamentals</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/core-concepts.html">Core Concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/building-blocks.html">Building Blocks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/programming-model.html">Programming Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/ui-hints.html">UI Hints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/crud.html">CRUD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/business-rules.html">Business Rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/drop-downs-and-defaults.html">Drop downs and Defaults</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../fun/available-domain-services.html">Available Domain Services</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="about.html">Beyond the Basics</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="i18n.html">i18n</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="headless-access.html">Headless Access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="hints-and-tips.html">Hints-n-Tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="programming-model.html">Programming Model</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="deployment.html">Deployment</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="web-xml.html">web.xml</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">User Guide</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title"> </span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../toc/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Core Framework</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../core/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">DataNucleus ObjectStore</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../odn/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Extensions Catalog</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../extensions/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Reference Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../refguide/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Restful Objects Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vro/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">SecMan</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../secman/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Security Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../security/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter App - Hello World</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../helloworld/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Starter App - SimpleApp</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../simpleapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Testing Guide</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../testing/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Tutorial App - Demo</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../demoapp/about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">User Guide</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../about.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Wicket Viewer</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vw/about.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../toc/about.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../about.html">User Guide</a></li>
    <li><a href="about.html">Beyond the Basics</a></li>
    <li><a href="web-xml.html">web.xml</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/apache/isis/edit/HEAD/antora/components/userguide/modules/btb/pages/web-xml.adoc">Edit this Page</a></div>
</div>
<article class="doc">
    <a name="section-top"></a>
<h1 class="page"><code>web.xml</code></h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Apache Isis provides two different viewers, the <a href="../../vw/about.html" class="page">Wicket viewer</a> and the <a href="../../vro/about.html" class="page">RestfulObjects viewer</a>.
You can deploy both of these concurrently, or deploy just the Wicket viewer, or deploy just the Restful Objects viewer.
The configuration in <code>web.xml</code> varies accordingly, both in terms of the servlet context listeners, filters and servlets.</p>
</div>
<div class="paragraph">
<p>If you are using Apache Isis' integration with Apache Shiro (for security) then this also needs configuring in <code>web.xml</code>.
See the <a href="#security:shiro:configuring-isis-to-use-shiro.adoc" class="page unresolved">security guide</a> for full details on this topic.</p>
</div>
<div class="paragraph">
<p>The servlets and filters are mapped to three main pipelines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/wicket</code> - the Wicket viewer UI</p>
</li>
<li>
<p><code>/restful</code> - the Restful Objects resources (REST API)</p>
</li>
<li>
<p>other paths, also static resources (such as <code>.png</code>, <code>.css</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With the following key:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/runtime/web-xml/key.png"><img src="_images/runtime/web-xml/key.png" alt="key" width="800px"></a>
</div>
</div>
<div class="paragraph">
<p>the diagram below shows the components to be configured if deploying both the Wicket viewer and Restful Objects viewer:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/runtime/web-xml/wicket-and-ro.png"><img src="_images/runtime/web-xml/wicket-and-ro.png" alt="wicket and ro" width="800px"></a>
</div>
</div>
<div class="paragraph">
<p>Here the Wicket viewer is responsible for the main bootstrapping of Apache Isis itself, in other words the shared (global) metadata; this is done by the <code>IsisWicketApplication</code> class (extending the <code>WicketApplication</code> Wicket API).
This class is also responsible for Apache Isis' own session and transaction management.</p>
</div>
<div class="paragraph">
<p>The Restful Objects viewer - being a JAX-RS application implemented using the RestEasy framework - requires the <code>RestEasyBootstrapper</code> servlet context listener.
It is this context listener that also sets up the <code>RestfulObjectsApplication</code>, which is then delegated to by the RestEasy <code>HttpServletDispatcher</code>.
This pipeline uses the <code>IsisSessionFilter</code> and <code>IsisTransactionFilterForRestfulObjects</code> to perform the session and transaction management before it hits the RestEasy servlet.</p>
</div>
<div class="paragraph">
<p>If only the Wicket viewer is deployed, then the diagram is more or less the same: the RestEasy servlet, context listener and supporting filters are simply removed:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/runtime/web-xml/wicket-only.png"><img src="_images/runtime/web-xml/wicket-only.png" alt="wicket only" width="800px"></a>
</div>
</div>
<div class="paragraph">
<p>Finally, if only the Restful Objects viewer is deployed, then things change a little more subtly.  Here, the Wicket filter is no longer needed.
In its place, though the <code>IsisWebAppBootstrapper</code> context listener is required: this is responsible for seting up the shared (global) metadata.</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="_images/runtime/web-xml/ro-only.png"><img src="_images/runtime/web-xml/ro-only.png" alt="ro only" width="800px"></a>
</div>
</div>
<div class="paragraph">
<p>The following sections detail these various listeners, filters and servlets in more detail.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="servlet-context-listeners"><a class="anchor" href="#servlet-context-listeners"></a>Servlet Context Listeners</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Servlet context listeners are used to perform initialization on application startup.
Both Shiro (if configured as the security mechanism) and RestEasy (for the Restful Objects viewer) require their own context listener.
In addition, if the Wicket viewer is <em>not</em> being used, then additional Apache Isis-specific listener is required for bootstrapping of the Apache Isis framework itself.</p>
</div>
<div class="sect2">
<h3 id="environmentloaderlistener-shiro"><a class="anchor" href="#environmentloaderlistener-shiro"></a><code>EnvironmentLoaderListener</code> (Shiro)</h3>
<div class="paragraph">
<p>Bootstrap listener to startup and shutdown the web application&#8217;s Shiro <code>WebEnvironment</code> at startup and shutdown respectively.</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;listener&gt;
    &lt;listener-class&gt;org.apache.shiro.web.env.EnvironmentLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="isiswebappbootstrapper"><a class="anchor" href="#isiswebappbootstrapper"></a><code>IsisWebAppBootstrapper</code></h3>
<div class="paragraph">
<p>The <code>IsisWebAppBootstrapper</code> servlet context listener bootstraps the shared (global) metadata for the Apache Isis framework.
This listener is not required (indeed must not be configured) if the Wicket viewer is in use.</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;listener&gt;
    &lt;listener-class&gt;org.apache.isis.core.webapp.IsisWebAppBootstrapper&lt;/listener-class&gt;
&lt;/listener&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its context parameters are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
    &lt;param-name&gt;deploymentType&lt;/param-name&gt;
    &lt;param-value&gt;SERVER_PROTOTYPE&lt;/param-value&gt;
&lt;/context-param&gt;
&lt;context-param&gt;
    &lt;param-name&gt;isis.viewers&lt;/param-name&gt;
    &lt;param-value&gt;restfulobjects&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resteasybootstrap-resteasy"><a class="anchor" href="#resteasybootstrap-resteasy"></a><code>ResteasyBootstrap</code> (RestEasy)</h3>
<div class="paragraph">
<p>The <code>ResteasyBootstrap</code> servlet context listener initializes the RestEasy runtime, specifying that classes (namely, those specified in Isis' <code>RestfulObjectsApplication</code>) to be exposed as REST resources.
It is required if the Restful Objects viewer is to be deployed.</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;listener&gt;
    &lt;listener-class&gt;org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap&lt;/listener-class&gt;
&lt;/listener&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are two relevant context parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
    &lt;param-name&gt;javax.ws.rs.Application&lt;/param-name&gt;        <i class="conum" data-value="1"></i><b>(1)</b>
    &lt;param-value&gt;org.apache.isis.viewer.restfulobjects.server.RestfulObjectsApplication&lt;/param-value&gt;
&lt;/context-param&gt;
&lt;context-param&gt;
    &lt;param-name&gt;resteasy.servlet.mapping.prefix&lt;/param-name&gt;
    &lt;param-value&gt;/restful/&lt;/param-value&gt;                    <i class="conum" data-value="2"></i><b>(2)</b>
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>used by RestEasy to determine the JAX-RS resources and other related configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>should correspond to the filter mapping of the <code>HttpServletDispatcher</code> servlet</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="servlets"><a class="anchor" href="#servlets"></a>Servlets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Servlets process HTTP requests and return corresponding responses.</p>
</div>
<div class="sect2">
<h3 id="httpservletdispatcher-resteasy"><a class="anchor" href="#httpservletdispatcher-resteasy"></a><code>HttpServletDispatcher</code> (RestEasy)</h3>
<div class="paragraph">
<p>This servlet is provided by the RestEasy framework, and does the dispatching to the resources defined by Apache Isis' <code>RestfulObjectsApplication</code> (see above).</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;RestfulObjectsRestEasyDispatcher&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher&lt;/servlet-class&gt;
&lt;/servlet&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its mapping is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;RestfulObjectsRestEasyDispatcher&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/restful/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resourceservlet"><a class="anchor" href="#resourceservlet"></a><code>ResourceServlet</code></h3>
<div class="paragraph">
<p>The <code>ResourceServlet</code> loads and services static content either from the filesystem or from the classpath, each with an appropriate mime type.</p>
</div>
<div class="paragraph">
<p>Static content here means request paths ending in <code>.js</code>, <code>.css</code>, <code>.html</code>, <code>.png</code>, <code>.jpg</code>, <code>.jpeg</code> and <code>gif</code>.</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;servlet&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.apache.isis.core.webapp.content.ResourceServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its mapping is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.png&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.jpeg&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.gif&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.svg&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;Resource&lt;/servlet-name&gt;
    &lt;url-pattern&gt;*.swf&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filters"><a class="anchor" href="#filters"></a>Filters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The order in which filters appear in <code>web.xml</code> matters: first to last they define a pipeline.
This is shown in the above diagrams, and the subsections also list the in the same order that they should appear in your <code>web.xml</code>.</p>
</div>
<div class="sect2">
<h3 id="shirofilter-shiro"><a class="anchor" href="#shirofilter-shiro"></a><code>ShiroFilter</code> (Shiro)</h3>
<div class="paragraph">
<p>Shiro filter that sets up a Shiro security manager for the request, obtained from the Shiro <code>WebEnvironment</code> set up by the Shiro <code>EnvironmentLoaderListener</code> (discussed above).</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.shiro.web.servlet.ShiroFilter&lt;/filter-class&gt;
&lt;/filter&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its mapping is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter-mapping&gt;
    &lt;filter-name&gt;ShiroFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="isislogonexceptionfilter"><a class="anchor" href="#isislogonexceptionfilter"></a><code>IsisLogOnExceptionFilter</code></h3>
<div class="paragraph">
<p>The <code>IsisLogOnExceptionFilter</code> filter simply logs the URL of any request that causes an exception to be thrown, then re-propagates the exception.
The use case is simply to ensure that all exceptions are logged (against the <code>IsisLogOnExceptionFilter</code> slf4j appender).</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter&gt;
    &lt;filter-name&gt;IsisLogOnExceptionFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.isis.core.webapp.diagnostics.IsisLogOnExceptionFilter&lt;/filter-class&gt;
&lt;/filter&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Its mapping is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter-mapping&gt;
    &lt;filter-name&gt;IsisLogOnExceptionFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/wicket/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;IsisLogOnExceptionFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/restful/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resourcecachingfilter"><a class="anchor" href="#resourcecachingfilter"></a><code>ResourceCachingFilter</code></h3>
<div class="paragraph">
<p>The <code>ResourceCachingFilter</code> adds HTTP cache headers to specified resources, based on their pattern.</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.isis.core.webapp.content.ResourceCachingFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;CacheTime&lt;/param-name&gt;      <i class="conum" data-value="1"></i><b>(1)</b>
        &lt;param-value&gt;86400&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>cache time, in seconds</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Its mapping is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.css&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.png&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.jpg&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.jpeg&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.gif&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.svg&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.html&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.js&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;ResourceCachingFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;*.swf&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="wicketfilter"><a class="anchor" href="#wicketfilter"></a><code>WicketFilter</code></h3>
<div class="paragraph">
<p>The <code>WicketFilter</code> is responsible for initiating the handling of Wicket requests.</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter&gt;
    &lt;filter-name&gt;WicketFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.wicket.protocol.http.WicketFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;applicationClassName&lt;/param-name&gt;
        &lt;param-value&gt;org.apache.isis.viewer.wicket.viewer.IsisWicketApplication&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is generally boilerplate.
It is possible to specify a subclass of <code>IsisWicketApplication</code> (and in earlier versions of the framework this was generally required), but there now exist sufficient configuration properties that subclassing is generally not required.</p>
</div>
<div class="paragraph">
<p>Its mapping is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter-mapping&gt;
    &lt;filter-name&gt;WicketFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/wicket/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This filter reads one context parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
    &lt;param-name&gt;configuration&lt;/param-name&gt;
    &lt;param-value&gt;deployment&lt;/param-value&gt;   <i class="conum" data-value="1"></i><b>(1)</b>
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>alternatively set to "development"; see <a href="../../refguide/config/deployment-types.html" class="page">deployment types</a> for further discussion.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="isissessionfilter"><a class="anchor" href="#isissessionfilter"></a><code>IsisSessionFilter</code></h3>
<div class="paragraph">
<p>The <code>IsisSessionFilter</code> is responsible for the (persistence) session management; in effect a wrapper around DataNucleus' <code>PersistenceManager</code> object.
It is only required for the Restful Objects viewer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter&gt;
    &lt;filter-name&gt;IsisSessionFilterForRestfulObjects&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.isis.core.webapp.IsisSessionFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;authenticationSessionStrategy&lt;/param-name&gt;  <i class="conum" data-value="1"></i><b>(1)</b>
        &lt;param-value&gt;
            org.apache.isis.viewer.restfulobjects.server.authentication.AuthenticationSessionStrategyBasicAuth
        &lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;whenNoSession&lt;/param-name&gt;                  <i class="conum" data-value="2"></i><b>(2)</b>
        &lt;param-value&gt;basicAuthChallenge&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;passThru&lt;/param-name&gt;                       <i class="conum" data-value="3"></i><b>(3)</b>
        &lt;param-value&gt;/restful/swagger,/restful/health&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;!--
    &lt;init-param&gt;
        &lt;param-name&gt;restricted&lt;/param-name&gt;                     <i class="conum" data-value="4"></i><b>(4)</b>
        &lt;param-value&gt;...&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;redirectToOnException&lt;/param-name&gt;          <i class="conum" data-value="5"></i><b>(5)</b>
        &lt;param-value&gt;...&lt;/param-value&gt;
    &lt;/init-param&gt;
    --&gt;
&lt;/filter&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>pluggable strategy for determining what the authentication session (credentials) are of the request</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>what the servlet should do if no existing session was found.
Usual values are either <code>unauthorized</code>, <code>basicAuthChallenge</code> or <code>auto</code>.
Discussed in more detail below.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>specify which URIs to ignore and simply pass through.
Originally introduced to allow the <code>SwaggerSpec</code> resource (which does not require a session) to be invoked.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>A comma separated list of paths that are allowed through even if not authenticated.
The servlets mapped to these paths are expected to be able to deal with there being no session.
Typically they will be logon pages, or for health checks (as per <a href="../../refguide/applib-svc/application-layer-spi/HealthCheckService.html" class="page"><code>HealthCheckService</code></a> SPI.
See below for further details.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>where to redirect to if an exception occurs.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>whenNoSession</code> parameter determines what the behaviour should be if no existing session can be found.
There are a number of predetermined values available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>unauthorized</code> will generates a 401 response</p>
</li>
<li>
<p><code>basicAuthChallenge</code> will also generate a 401 response, and also issues a Basic Auth challenge using <code>WWW-Authenticate</code> response header</p>
</li>
<li>
<p><code>auto</code> combines the <code>unauthorized</code> and <code>basicAuthChallenge</code> strategies: it will generate a 401 response, but only issues a Basic Auth challenge if it detects that the request originates from a web browser (ie that the HTTP <code>Accept</code> header is set to <code>text/html</code>).
This means that custom Javascript apps can perform their authentication correctly, while the REST API can still be explored using the web browser (relying upon the web browser&#8217;s in-built support for HTTP Basic Auth).</p>
</li>
<li>
<p><code>continue</code>, in which case the request is allowed to continue but the destination expected to know that there will be no open session</p>
</li>
<li>
<p><code>restricted</code>, which allows access to a restricted list of URLs, otherwise will redirect to the first of that list of URLs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If accessing the REST API through a web browser, then normally <code>basicAuthChallenge</code> is appropriate; the browser will automatically display a simple prompt.
If accessing the REST API through a custom Javascript app, then <code>unauthorized</code> is usually the one to use.</p>
</div>
<div class="paragraph">
<p>This filter should be mapped to the <code>servlet-name</code> for the RestEasy <code>HttpServletDispatcher</code>; for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter-mapping&gt;
    &lt;filter-name&gt;IsisSessionFilterForRestfulObjects&lt;/filter-name&gt;
    &lt;servlet-name&gt;RestfulObjectsRestEasyDispatcher&lt;/servlet-name&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="isistransactionfilterforrestfulobjects"><a class="anchor" href="#isistransactionfilterforrestfulobjects"></a><code>IsisTransactionFilterForRestfulObjects</code></h3>
<div class="paragraph">
<p>The <code>IsisTransactionFilterForRestfulObjects</code> filter simply ensures that a transaction is in progress for all calls routed to the <a href="../../vro/about.html" class="page">RestfulObjects viewer</a>.</p>
</div>
<div class="paragraph">
<p>Its definition is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter&gt;
    &lt;filter-name&gt;IsisTransactionFilterForRestfulObjects&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.isis.viewer.restfulobjects.server.webapp.IsisTransactionFilterForRestfulObjects&lt;/filter-class&gt;
&lt;/filter&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This filter should be mapped to the <code>servlet-name</code> for the RestEasy <code>HttpServletDispatcher</code>; for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;filter-mapping&gt;
    &lt;filter-name&gt;IsisTransactionFilterForRestfulObjects&lt;/filter-name&gt;
    &lt;servlet-name&gt;RestfulObjectsRestEasyDispatcher&lt;/servlet-name&gt;
&lt;/filter-mapping&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-files"><a class="anchor" href="#configuration-files"></a>Configuration Files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>However Apache Isis is bootstrapped (using the <code>IsisWicketApplication</code> or using <code>IsisWebAppBootstrapper</code>), it will read a number of configuration files, such as <code>isis.properties</code>.</p>
</div>
<div class="paragraph">
<p>By default these are read from <code>WEB-INF</code> directory.
This can be overridden using the <code>isis.config.dir</code> context parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
  &lt;param-name&gt;isis.config.dir&lt;/param-name&gt;
  &lt;param-value&gt;location of your config directory if fixed&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another context parameter, <code>isis.viewres</code> specifies which additional configuration files to search for (over and above the default ones of <code>isis.properties</code> et al):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;context-param&gt;
    &lt;param-name&gt;isis.viewers&lt;/param-name&gt;
    &lt;param-value&gt;wicket,restfulobjects&lt;/param-value&gt;
&lt;/context-param&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, this will cause <code>viewer_wicket.properties</code> and <code>viewer_restfulobjects.properties</code> to also be loaded.</p>
</div>
</div>
</div>
</article>
<aside class="article-aside toc" role="navigation">
    <h3 class="toc-title">On this page</h3>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="content">
        <div class="copyright">
            <p>
                Copyright © 2010~2019 The Apache Software Foundation, licensed under the Apache License, v2.0.
                <br/>
                Apache, the Apache feather logo, Apache Isis, and the Apache Isis project logo are all trademarks of The Apache Software Foundation.
            </p>
        </div>
        <div class="revision">
            <p>Revision: 2.0.0-M2.20191118-2239-ec1463e6</p>
        </div>
    </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/jquery-3.4.1.min.js"></script>
<script src="../../_/js/vendor/jquery-ui-1.12.1.custom.widget-only.min.js"></script>
<script src="../../_/js/vendor/jquery.tocify.min.js"></script>

<script>
    $(function() {
        $("#article-toc").tocify( {
            showEffect: "slideDown",
            hideEffect: "slideUp",
            scrollTo: 120,
            smoothScroll: true,
            theme: "jqueryui",
            highlightOnScroll: true
        } );
    });
</script>
  </body>
</html>
