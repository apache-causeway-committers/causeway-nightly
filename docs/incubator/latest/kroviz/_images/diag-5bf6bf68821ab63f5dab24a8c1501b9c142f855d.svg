<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="877px" preserveAspectRatio="none" style="width:1232px;height:877px;background:#FFFFFF;" version="1.1" viewBox="0 0 1232 877" width="1232px" zoomAndPan="magnify"><defs><filter height="300%" id="fcr8f49jz8eq7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[5336d0432c5753478f8bb0248199b33b]
cluster handler--><polygon fill="#FFFFFF" filter="url(#fcr8f49jz8eq7)" points="726,549.5,783,549.5,790,572.2999,916,572.2999,916,722.5,726,722.5,726,549.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="726" x2="790" y1="572.2999" y2="572.2999"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="51" x="730" y="565.4999">handler</text><!--MD5=[01435ace8273dc3cae88e7f376e4d373]
cluster core--><polygon fill="#FFFFFF" filter="url(#fcr8f49jz8eq7)" points="16,6,52,6,59,28.7999,497,28.7999,497,870.5,16,870.5,16,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="16" x2="59" y1="28.7999" y2="28.7999"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="20" y="21.9999">core</text><!--MD5=[2e31800f208179cab94650aeb782e4d8]
cluster event--><polygon fill="#FFFFFF" filter="url(#fcr8f49jz8eq7)" points="40,49,84,49,91,71.7999,473,71.7999,473,469.5,40,469.5,40,49" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="40" x2="91" y1="71.7999" y2="71.7999"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="38" x="44" y="64.9999">event</text><!--MD5=[e8161453ee08a0169facd928153a06ce]
cluster aggregator--><polygon fill="#FFFFFF" filter="url(#fcr8f49jz8eq7)" points="193,569.5,274,569.5,281,592.2999,377,592.2999,377,846.5,193,846.5,193,569.5" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="193" x2="281" y1="592.2999" y2="592.2999"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="75" x="197" y="585.4999">aggregator</text><!--MD5=[ffd769195028dd438823d2edcff41d80]
cluster to--><polygon fill="#FFFFFF" filter="url(#fcr8f49jz8eq7)" points="521,583,541,583,548,605.7999,671,605.7999,671,689,521,689,521,583" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="521" x2="548" y1="605.7999" y2="605.7999"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="14" x="525" y="598.9999">to</text><!--MD5=[c429691f2fe3ffc642d3e6ed879a8b4b]
cluster remote--><polygon fill="#FFFFFF" filter="url(#fcr8f49jz8eq7)" points="940,588,950,578,1215,578,1215,679,1205,689,940,689,940,588" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="1205" x2="1215" y1="588" y2="578"/><line style="stroke:#000000;stroke-width:1.5;" x1="940" x2="1205" y1="588" y2="588"/><line style="stroke:#000000;stroke-width:1.5;" x1="1205" x2="1205" y1="588" y2="689"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="48" x="1049.5" y="604.9999">remote</text><!--MD5=[c8ff661d8810405741f708d20018b1ce]
class ResponseHandler--><rect codeLine="2" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="121.9999" id="ResponseHandler" style="stroke:#A80036;stroke-width:1.5;" width="157" x="742.5" y="584.5"/><ellipse cx="757.5" cy="611.1002" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M756.8594,614.8814 Q757.6563,614.8814 758.2188,614.6939 Q758.7969,614.4908 759.0313,614.272 Q759.2813,614.0377 759.5156,613.8502 Q759.7656,613.647 759.9844,613.647 Q760.3281,613.647 760.5781,613.9127 Q760.8438,614.1627 760.8438,614.4908 Q760.8438,615.2252 759.6719,615.9127 Q758.5156,616.5845 756.8125,616.5845 Q754.6563,616.5845 753.2344,615.3189 Q751.8125,614.0533 751.8125,612.1158 L751.8125,610.9908 Q751.8125,608.9595 753.1406,607.5845 Q754.4688,606.1939 756.4375,606.1939 Q757.625,606.1939 758.8438,606.772 L759.0156,606.8502 Q759.3125,606.4439 759.7344,606.4439 Q760.2188,606.4439 760.3906,606.7408 Q760.5781,607.022 760.5781,607.5689 L760.5781,608.9908 Q760.5781,610.1158 759.7344,610.1158 Q759.4219,610.1158 759.2188,609.9439 Q759.0313,609.772 758.9844,609.6314 Q758.9531,609.4752 758.9063,609.2095 Q758.7969,608.6939 758.2813,608.3814 Q757.7656,608.0689 757.3125,607.9908 Q756.875,607.897 756.5,607.897 Q755.2188,607.897 754.3594,608.772 Q753.5156,609.647 753.5156,610.9908 L753.5156,612.0845 Q753.5156,613.3658 754.4219,614.1314 Q755.3281,614.8814 756.8594,614.8814 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="51" x="808.5" y="601.5001">«Facade»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="129" x="769.5" y="615.9002">«ChainOfResponsibility»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="94" x="787" y="630.3003">ResponseHandler</text><line style="stroke:#A80036;stroke-width:1.5;" x1="743.5" x2="898.5" y1="637.7003" y2="637.7003"/><line style="stroke:#A80036;stroke-width:1.5;" x1="743.5" x2="898.5" y1="645.7003" y2="645.7003"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="83" x="748.5" y="660.7002">handle(LogEntry)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="748.5" y="673.9001">canHandle(json)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="748.5" y="687.1">doHandle()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="748.5" y="700.2999">parse(json)</text><!--MD5=[3b2d7f27bec20edac89f8d9c90732cb8]
class XHR--><rect codeLine="12" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="61.1999" id="XHR" style="stroke:#A80036;stroke-width:1.5;" width="58" x="399" y="329.5"/><ellipse cx="414" cy="345.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M413.3594,349.2813 Q414.1563,349.2813 414.7188,349.0938 Q415.2969,348.8906 415.5313,348.6719 Q415.7813,348.4375 416.0156,348.25 Q416.2656,348.0469 416.4844,348.0469 Q416.8281,348.0469 417.0781,348.3125 Q417.3438,348.5625 417.3438,348.8906 Q417.3438,349.625 416.1719,350.3125 Q415.0156,350.9844 413.3125,350.9844 Q411.1563,350.9844 409.7344,349.7188 Q408.3125,348.4531 408.3125,346.5156 L408.3125,345.3906 Q408.3125,343.3594 409.6406,341.9844 Q410.9688,340.5938 412.9375,340.5938 Q414.125,340.5938 415.3438,341.1719 L415.5156,341.25 Q415.8125,340.8438 416.2344,340.8438 Q416.7188,340.8438 416.8906,341.1406 Q417.0781,341.4219 417.0781,341.9688 L417.0781,343.3906 Q417.0781,344.5156 416.2344,344.5156 Q415.9219,344.5156 415.7188,344.3438 Q415.5313,344.1719 415.4844,344.0313 Q415.4531,343.875 415.4063,343.6094 Q415.2969,343.0938 414.7813,342.7813 Q414.2656,342.4688 413.8125,342.3906 Q413.375,342.2969 413,342.2969 Q411.7188,342.2969 410.8594,343.1719 Q410.0156,344.0469 410.0156,345.3906 L410.0156,346.4844 Q410.0156,347.7656 410.9219,348.5313 Q411.8281,349.2813 413.3594,349.2813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="26" x="428" y="350.3">XHR</text><line style="stroke:#A80036;stroke-width:1.5;" x1="400" x2="456" y1="361.5" y2="361.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="400" x2="456" y1="369.5" y2="369.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="405" y="384.4999">invoke()</text><!--MD5=[36f4d8c507a01d05cb42b0aec07b28f8]
class EventStore--><rect codeLine="15" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="135.1998" id="EventStore" style="stroke:#A80036;stroke-width:1.5;" width="115" x="56.5" y="292.5"/><ellipse cx="71.5" cy="319.1002" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M70.8594,322.8814 Q71.6563,322.8814 72.2188,322.6939 Q72.7969,322.4908 73.0313,322.272 Q73.2813,322.0377 73.5156,321.8502 Q73.7656,321.647 73.9844,321.647 Q74.3281,321.647 74.5781,321.9127 Q74.8438,322.1627 74.8438,322.4908 Q74.8438,323.2252 73.6719,323.9127 Q72.5156,324.5845 70.8125,324.5845 Q68.6563,324.5845 67.2344,323.3189 Q65.8125,322.0533 65.8125,320.1158 L65.8125,318.9908 Q65.8125,316.9595 67.1406,315.5845 Q68.4688,314.1939 70.4375,314.1939 Q71.625,314.1939 72.8438,314.772 L73.0156,314.8502 Q73.3125,314.4439 73.7344,314.4439 Q74.2188,314.4439 74.3906,314.7408 Q74.5781,315.022 74.5781,315.5689 L74.5781,316.9908 Q74.5781,318.1158 73.7344,318.1158 Q73.4219,318.1158 73.2188,317.9439 Q73.0313,317.772 72.9844,317.6314 Q72.9531,317.4752 72.9063,317.2095 Q72.7969,316.6939 72.2813,316.3814 Q71.7656,316.0689 71.3125,315.9908 Q70.875,315.897 70.5,315.897 Q69.2188,315.897 68.3594,316.772 Q67.5156,317.647 67.5156,318.9908 L67.5156,320.0845 Q67.5156,321.3658 68.4219,322.1314 Q69.3281,322.8814 70.8594,322.8814 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="104.5" y="309.5001">«Cache»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="87" x="83.5" y="323.9002">«EventSourcing»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="56" x="99" y="338.3003">EventStore</text><line style="stroke:#A80036;stroke-width:1.5;" x1="57.5" x2="170.5" y1="345.7003" y2="345.7003"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66" x="62.5" y="360.7002">log:LogEntry[]</text><line style="stroke:#A80036;stroke-width:1.5;" x1="57.5" x2="170.5" y1="366.9002" y2="366.9002"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="29" x="62.5" y="381.9001">start()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="26" x="62.5" y="395.1">end()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="62.5" y="408.2999">fault()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44" x="62.5" y="421.4998">find(href)</text><!--MD5=[cb32f8b1b756f5d42df70837c47813f1]
class LogEntry--><rect codeLine="22" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="186.7992" id="LogEntry" style="stroke:#A80036;stroke-width:1.5;" width="157" x="206.5" y="266.5"/><ellipse cx="240.4" cy="285.9001" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M239.7594,289.6814 Q240.5563,289.6814 241.1188,289.4939 Q241.6969,289.2907 241.9313,289.072 Q242.1813,288.8376 242.4156,288.6501 Q242.6656,288.447 242.8844,288.447 Q243.2281,288.447 243.4781,288.7126 Q243.7438,288.9626 243.7438,289.2907 Q243.7438,290.0251 242.5719,290.7126 Q241.4156,291.3845 239.7125,291.3845 Q237.5563,291.3845 236.1344,290.1189 Q234.7125,288.8532 234.7125,286.9157 L234.7125,285.7907 Q234.7125,283.7595 236.0406,282.3845 Q237.3688,280.9939 239.3375,280.9939 Q240.525,280.9939 241.7438,281.572 L241.9156,281.6501 Q242.2125,281.2439 242.6344,281.2439 Q243.1188,281.2439 243.2906,281.5407 Q243.4781,281.822 243.4781,282.3689 L243.4781,283.7907 Q243.4781,284.9157 242.6344,284.9157 Q242.3219,284.9157 242.1188,284.7439 Q241.9313,284.572 241.8844,284.4314 Q241.8531,284.2751 241.8063,284.0095 Q241.6969,283.4939 241.1813,283.1814 Q240.6656,282.8689 240.2125,282.7907 Q239.775,282.697 239.4,282.697 Q238.1188,282.697 237.2594,283.572 Q236.4156,284.447 236.4156,285.7907 L236.4156,286.8845 Q236.4156,288.1657 237.3219,288.9314 Q238.2281,289.6814 239.7594,289.6814 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="87" x="256.6" y="283.5001">«EventSourcing»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="276.6" y="297.9002">LogEntry</text><line style="stroke:#A80036;stroke-width:1.5;" x1="207.5" x2="362.5" y1="305.3002" y2="305.3002"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="36" x="212.5" y="320.3001">url:Href</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="47" x="212.5" y="333.5">title:String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="69" x="212.5" y="346.6999">startedAt:Date</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="212.5" y="359.8998">updatedAt:Date</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="212.5" y="373.0997">request:String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="212.5" y="386.2996">response:String</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="44" x="212.5" y="399.4995">blob:Blob</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="212.5" y="412.6994">object:TransferObject</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="145" x="212.5" y="425.8993">aggregators:BaseAggregator[]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="62" x="212.5" y="439.0992">cacheHits:int</text><line style="stroke:#A80036;stroke-width:1.5;" x1="207.5" x2="362.5" y1="445.2992" y2="445.2992"/><!--MD5=[4eb726f03d9593e8bfc030d2c0e199f8]
class ResourceProxy--><rect codeLine="34" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="107.5998" id="ResourceProxy" style="stroke:#A80036;stroke-width:1.5;" width="130" x="327" y="84"/><ellipse cx="350.55" cy="103.4001" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M349.9094,107.1814 Q350.7063,107.1814 351.2688,106.9939 Q351.8469,106.7907 352.0813,106.572 Q352.3313,106.3376 352.5656,106.1501 Q352.8156,105.947 353.0344,105.947 Q353.3781,105.947 353.6281,106.2126 Q353.8938,106.4626 353.8938,106.7907 Q353.8938,107.5251 352.7219,108.2126 Q351.5656,108.8845 349.8625,108.8845 Q347.7063,108.8845 346.2844,107.6189 Q344.8625,106.3532 344.8625,104.4157 L344.8625,103.2907 Q344.8625,101.2595 346.1906,99.8845 Q347.5188,98.4939 349.4875,98.4939 Q350.675,98.4939 351.8938,99.072 L352.0656,99.1501 Q352.3625,98.7439 352.7844,98.7439 Q353.2688,98.7439 353.4406,99.0407 Q353.6281,99.322 353.6281,99.8689 L353.6281,101.2907 Q353.6281,102.4157 352.7844,102.4157 Q352.4719,102.4157 352.2688,102.2439 Q352.0813,102.072 352.0344,101.9314 Q352.0031,101.7751 351.9563,101.5095 Q351.8469,100.9939 351.3313,100.6814 Q350.8156,100.3689 350.3625,100.2907 Q349.925,100.197 349.55,100.197 Q348.2688,100.197 347.4094,101.072 Q346.5656,101.947 346.5656,103.2907 L346.5656,104.3845 Q346.5656,105.6657 347.4719,106.4314 Q348.3781,107.1814 349.9094,107.1814 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="41" x="385.45" y="101.0001">«Proxy»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="79" x="366.45" y="115.4002">ResourceProxy</text><line style="stroke:#A80036;stroke-width:1.5;" x1="328" x2="456" y1="122.8002" y2="122.8002"/><line style="stroke:#A80036;stroke-width:1.5;" x1="328" x2="456" y1="130.8002" y2="130.8002"/><ellipse cx="338" cy="141.8002" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="347" y="145.8001">load(tObject:Tobject)</text><ellipse cx="338" cy="155.0001" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="41" x="347" y="159">fetch(...)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="335" y="165.2"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="46" x="347" y="172.1999">process()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="335" y="178.3999"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="347" y="185.3998">processCached()</text><!--MD5=[d20444995493a81cbf0591ffcbf8e0b7]
class BaseAggregator--><rect codeLine="47" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="82.4002" id="BaseAggregator" style="stroke:#A80036;stroke-width:1.5;" width="121" x="224.5" y="604.5"/><ellipse cx="239.5" cy="631.1002" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M240.4531,634.7564 Q240.4531,634.2564 240.7344,634.0845 Q241.0313,633.897 241.5781,633.897 L241.9688,633.897 L241.5781,632.9127 L237.5313,632.9127 L237.1406,633.897 L237.5313,633.897 Q238.6406,633.897 238.6406,634.7564 Q238.6406,635.6002 237.5313,635.6002 L235.2656,635.6002 Q234.1406,635.6002 234.1406,634.7564 Q234.1406,634.2408 234.4375,634.0689 Q234.7344,633.897 235.2813,633.897 L237.9219,627.3814 L236.8438,627.3814 Q235.7031,627.3814 235.7031,626.5377 Q235.7031,626.022 236,625.8658 Q236.2969,625.6939 236.8438,625.6939 L240.5156,625.6939 L243.9063,633.897 Q245.0625,633.897 245.0625,634.7564 Q245.0625,635.6002 243.9375,635.6002 L241.5781,635.6002 Q240.4531,635.6002 240.4531,634.7564 Z M240.875,631.2095 L239.5469,627.9439 L238.2031,631.2095 L240.875,631.2095 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="45" x="275.5" y="621.5001">«Redux»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="71" x="262.5" y="635.9002">«Aggregator»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="89" x="253.5" y="650.3003">BaseAggregator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="225.5" x2="344.5" y1="657.7003" y2="657.7003"/><line style="stroke:#A80036;stroke-width:1.5;" x1="225.5" x2="344.5" y1="665.7003" y2="665.7003"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="230.5" y="680.7002">update(logEntry)</text><!--MD5=[15240494145cdab917091a6524b04d15]
class AggregatorWithLayout--><rect codeLine="50" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="61.1999" id="AggregatorWithLayout" style="stroke:#A80036;stroke-width:1.5;" width="152" x="209" y="769.5"/><ellipse cx="224" cy="785.5" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M224.9531,789.1563 Q224.9531,788.6563 225.2344,788.4844 Q225.5313,788.2969 226.0781,788.2969 L226.4688,788.2969 L226.0781,787.3125 L222.0313,787.3125 L221.6406,788.2969 L222.0313,788.2969 Q223.1406,788.2969 223.1406,789.1563 Q223.1406,790 222.0313,790 L219.7656,790 Q218.6406,790 218.6406,789.1563 Q218.6406,788.6406 218.9375,788.4688 Q219.2344,788.2969 219.7813,788.2969 L222.4219,781.7813 L221.3438,781.7813 Q220.2031,781.7813 220.2031,780.9375 Q220.2031,780.4219 220.5,780.2656 Q220.7969,780.0938 221.3438,780.0938 L225.0156,780.0938 L228.4063,788.2969 Q229.5625,788.2969 229.5625,789.1563 Q229.5625,790 228.4375,790 L226.0781,790 Q224.9531,790 224.9531,789.1563 Z M225.375,785.6094 L224.0469,782.3438 L222.7031,785.6094 L225.375,785.6094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="120" x="238" y="790.3">AggregatorWithLayout</text><line style="stroke:#A80036;stroke-width:1.5;" x1="210" x2="360" y1="801.5" y2="801.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="63" x="215" y="816.4999">layout:Layout</text><line style="stroke:#A80036;stroke-width:1.5;" x1="210" x2="360" y1="822.6999" y2="822.6999"/><!--MD5=[1baf32c238e7b10acca77db68c6197d6]
class TransferObject--><rect codeLine="58" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="54.8002" id="TransferObject" style="stroke:#A80036;stroke-width:1.5;" width="117" x="537.5" y="618"/><ellipse cx="552.5" cy="637.4001" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M555.1719,640.697 Q555.7188,640.697 556,640.8845 Q556.2813,641.0564 556.2813,641.5564 Q556.2813,642.4001 555.1719,642.4001 L550.0313,642.4001 Q548.9063,642.4001 548.9063,641.5564 Q548.9063,641.0564 549.1875,640.8845 Q549.4844,640.697 550.0313,640.697 L551.75,640.697 L551.75,634.1814 L550.0313,634.1814 Q548.9063,634.1814 548.9063,633.3376 Q548.9063,632.8532 549.1875,632.6814 Q549.4844,632.4939 550.0313,632.4939 L555.1719,632.4939 Q555.7188,632.4939 556,632.6814 Q556.2813,632.8532 556.2813,633.3376 Q556.2813,634.1814 555.1719,634.1814 L553.4531,634.1814 L553.4531,640.697 L555.1719,640.697 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="89" x="564.5" y="635.0001">«TransferObject»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="79" x="569.5" y="649.4002">TransferObject</text><line style="stroke:#A80036;stroke-width:1.5;" x1="538.5" x2="653.5" y1="656.8002" y2="656.8002"/><line style="stroke:#A80036;stroke-width:1.5;" x1="538.5" x2="653.5" y1="664.8002" y2="664.8002"/><!--MD5=[6e6ce35054dfdc08bc5a651d5a81235c]
class ApacheIsis--><rect codeLine="69" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="54.8002" id="ApacheIsis" style="stroke:#A80036;stroke-width:1.5;" width="101" x="956.5" y="618"/><ellipse cx="971.5" cy="637.4001" fill="#FF7700" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M971.5938,639.5251 Q970.75,639.5251 970.75,638.3845 L970.75,638.2751 L969.2969,638.2751 L969.2969,640.697 L971,640.697 Q972.125,640.697 972.125,641.5564 Q972.125,642.4001 971,642.4001 L967.3438,642.4001 Q966.2188,642.4001 966.2188,641.5564 Q966.2188,640.697 967.3438,640.697 L967.5938,640.697 L967.5938,634.1814 L967.3438,634.1814 Q966.2188,634.1814 966.2188,633.3376 Q966.2188,632.8532 966.5,632.6814 Q966.7969,632.4939 967.3438,632.4939 L975.3438,632.4939 L975.3438,635.0564 Q975.3438,636.1814 974.5,636.1814 Q973.6563,636.1814 973.6563,635.0564 L973.6563,634.1814 L969.2969,634.1814 L969.2969,636.5876 L970.75,636.5876 L970.75,636.4626 Q970.75,635.3376 971.5938,635.3376 Q972.4219,635.3376 972.4219,636.4626 L972.4219,638.3845 Q972.4219,639.5251 971.5938,639.5251 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73" x="983.5" y="635.0001">«FrameWork»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="991" y="649.4002">ApacheIsis</text><line style="stroke:#A80036;stroke-width:1.5;" x1="957.5" x2="1056.5" y1="656.8002" y2="656.8002"/><line style="stroke:#A80036;stroke-width:1.5;" x1="957.5" x2="1056.5" y1="664.8002" y2="664.8002"/><!--MD5=[3065a834c1969130b06cda341c336231]
class NakedObjects--><rect codeLine="70" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" height="54.8002" id="NakedObjects" style="stroke:#A80036;stroke-width:1.5;" width="107" x="1092.5" y="618"/><ellipse cx="1107.5" cy="637.4001" fill="#FF7700" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1107.5938,639.5251 Q1106.75,639.5251 1106.75,638.3845 L1106.75,638.2751 L1105.2969,638.2751 L1105.2969,640.697 L1107,640.697 Q1108.125,640.697 1108.125,641.5564 Q1108.125,642.4001 1107,642.4001 L1103.3438,642.4001 Q1102.2188,642.4001 1102.2188,641.5564 Q1102.2188,640.697 1103.3438,640.697 L1103.5938,640.697 L1103.5938,634.1814 L1103.3438,634.1814 Q1102.2188,634.1814 1102.2188,633.3376 Q1102.2188,632.8532 1102.5,632.6814 Q1102.7969,632.4939 1103.3438,632.4939 L1111.3438,632.4939 L1111.3438,635.0564 Q1111.3438,636.1814 1110.5,636.1814 Q1109.6563,636.1814 1109.6563,635.0564 L1109.6563,634.1814 L1105.2969,634.1814 L1105.2969,636.5876 L1106.75,636.5876 L1106.75,636.4626 Q1106.75,635.3376 1107.5938,635.3376 Q1108.4219,635.3376 1108.4219,636.4626 L1108.4219,638.3845 Q1108.4219,639.5251 1107.5938,639.5251 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="73" x="1122.5" y="635.0001">«FrameWork»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="75" x="1121.5" y="649.4002">NakedObjects</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1093.5" x2="1198.5" y1="656.8002" y2="656.8002"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1093.5" x2="1198.5" y1="664.8002" y2="664.8002"/><!--MD5=[cc7ce72b489f9c0837f6b7deaaae88b5]
entity RestfulObjects--><ellipse cx="1007" cy="360" fill="#FEFECE" filter="url(#fcr8f49jz8eq7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90" x="962" y="390.9999">RestfulObjects</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="108" x="953" y="340.2">«RemoteFacade»</text><path d="M513.5,70.5 L513.5,134 L457.24,138 L513.5,142 L513.5,205.3001 A0,0 0 0 0 513.5,205.3001 L1056.5,205.3001 A0,0 0 0 0 1056.5,205.3001 L1056.5,80.5 L1046.5,70.5 L513.5,70.5 A0,0 0 0 0 513.5,70.5 " fill="#FBFB77" filter="url(#fcr8f49jz8eq7)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1046.5,70.5 L1046.5,80.5 L1056.5,80.5 L1046.5,70.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301" x="519.5" y="88.5">When ever a resource is required, the proxy is queried.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="519.5" y="104.1">(1) It's served from the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70" x="647.5" y="104.1">EventStore</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="717.5" y="104.1">, if possible.</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122" x="786.5" y="104.1">LogEntry.cacheHits</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="911.5" y="104.1">will be incremented.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="519.5" y="119.7">(2) If it's not available yet,</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="665.5" y="119.7">XHR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="696.5" y="119.7">fetches it from remote and puts it into the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="70" x="929.5" y="119.7">EventStore</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="3" x="999.5" y="119.7">.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="522.5" y="135.3001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="519.5" y="150.9001">In any case, a</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="57" x="600.5" y="150.9001">LogEntry</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="660.5" y="150.9001">containing the response (blob) will be passed on to it's aggregator(s).</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="522.5" y="166.5001"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="512" x="519.5" y="182.1001">The aggregator to be used is either determined at the point where the resource is requested,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="423" x="519.5" y="197.7001">or, based on the content of the response, assigned by the matching handler.</text><!--MD5=[211fb28d7af036b7e2906500ae0df584]
reverse link EventStore to LogEntry--><path codeLine="41" d="M184.99,360 C192.08,360 199.18,360 206.28,360 " fill="none" id="EventStore-backto-LogEntry" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="171.78,360,177.78,364,183.78,360,177.78,356,171.78,360" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[fda71fb6b504846199848becaa7d62f5]
link ResourceProxy to EventStore--><path codeLine="42" d="M327,172.55 C285.2,195.82 231.05,229.24 189,266.5 C181.42,273.22 174,280.75 166.94,288.54 " fill="none" id="ResourceProxy-to-EventStore" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="163.51,292.38,172.4876,288.3299,166.8398,288.6501,166.5197,283.0023,163.51,292.38" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15" x="304.0703" y="173.5633">(1)</text><!--MD5=[778cd200116c68d746deb5aef878df93]
link ResourceProxy to XHR--><path codeLine="43" d="M400.71,192.26 C407.42,233.22 416.49,288.65 422.29,324.12 " fill="none" id="ResourceProxy-to-XHR" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="423.12,329.21,425.5994,319.6783,422.305,324.2769,417.7064,320.9824,423.12,329.21" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="15" x="385.8499" y="212.4588">(2)</text><!--MD5=[93d2d114c2c78948f5ae0794f4c047d7]
reverse link BaseAggregator to AggregatorWithLayout--><path codeLine="53" d="M285,706.79 C285,728.28 285,751.54 285,769.32 " fill="none" id="BaseAggregator-backto-AggregatorWithLayout" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="278,706.57,285,686.57,292,706.57,278,706.57" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[669fd67190bb8c6484cd963e3cdb7075]
link XHR to ResponseHandler--><path codeLine="61" d="M457.22,382.08 C515.97,424.46 650.28,521.35 738.24,584.8 " fill="none" id="XHR-to-ResponseHandler" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="742.39,587.79,737.4337,579.2791,738.3359,584.8636,732.7514,585.7658,742.39,587.79" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="666" y="499.5">TransferObject</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="673" y="515.1">is written into</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="686.5" y="530.7">LogEntry</text><!--MD5=[1e6c986c7b6158dcdbe3ab2ed500c01a]
link LogEntry to TransferObject--><path codeLine="62" d="M358.09,453.65 C365.59,461.93 373.29,470.01 381,477.5 C435.84,530.78 507.23,583.42 552.35,614.94 " fill="none" id="LogEntry-to-TransferObject" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="556.64,617.92,551.5627,609.4807,552.5445,615.0517,546.9735,616.0335,556.64,617.92" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8f69e79f47d9e536641cd65adb35e92a]
link LogEntry to BaseAggregator--><path codeLine="63" d="M285,453.83 C285,502.51 285,559.97 285,598.99 " fill="none" id="LogEntry-to-BaseAggregator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="285,604.13,289,595.13,285,599.13,281,595.13,285,604.13" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="20" x="263.2813" y="593.7477">1..n</text><!--MD5=[8026b4f18a77ec0460a752f560bfe8e5]
link ResponseHandler to TransferObject--><path codeLine="65" d="M742.43,645.5 C715.34,645.5 685.36,645.5 659.62,645.5 " fill="none" id="ResponseHandler-to-TransferObject" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#A80036" points="654.53,645.5,663.53,649.5,659.53,645.5,663.53,641.5,654.53,645.5" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48" x="673" y="608.5">converts</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="35" x="681" y="624.1">JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="679" y="639.7">into TO</text><!--MD5=[1b036d3bee70abab8c1eec6380d9d2d0]
reverse link RestfulObjects to ApacheIsis--><path codeLine="71" d="M1007,389.33 C1007,444.2 1007,564.27 1007,617.81 " fill="none" id="RestfulObjects-backto-ApacheIsis" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="1000,389.18,1007,369.18,1014,389.18,1000,389.18" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ff455b0d12e54cd289f5a016df291ab1]
reverse link RestfulObjects to NakedObjects--><path codeLine="72" d="M1019.82,387.14 C1046.19,440.94 1106.31,563.55 1132.92,617.81 " fill="none" id="RestfulObjects-backto-NakedObjects" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="1013.53,390.22,1011.01,369.18,1026.1,384.05,1013.53,390.22" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[1cde971cbfc4340e811b59a359229905]
link XHR to RestfulObjects--><path codeLine="74" d="M457.11,360 C559.71,360 902.93,360 987.87,360 " fill="none" id="XHR-to-RestfulObjects" style="stroke:#A80036;stroke-width:1.0;"/><path d="M994.8118,351.5428 A9,9 0 0 0 994.8118 368.4572" style="stroke:#A80036;stroke-width:1.5;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="703.5" y="338">invoke()</text><polygon fill="#000000" points="675.5,348.4,684.5451,351.3389,684.5451,345.4611,675.5,348.4" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="688.5" y="353.6">json string / blob</text><!--MD5=[21d750ffe12d5f616381aca6146cc968]
@startuml
package handler {
    class ResponseHandler<<Facade>><<ChainOfResponsibility>>{
        handle(LogEntry)
        canHandle(json)
        doHandle()
        parse(json)
    }
}

package core {
    package event {
        class XHR {
            invoke()
        }
        class EventStore<<Cache>><<EventSourcing>> {
            log:LogEntry[]
            start()
            end()
            fault()
            find(href)
        }
        class LogEntry<<EventSourcing>> {
            url:Href
            title:String
            startedAt:Date
            updatedAt:Date
            request:String
            response:String
            blob:Blob
            object:TransferObject
            aggregators:BaseAggregator[]
            cacheHits:int
        }
        class ResourceProxy<<Proxy>> {
            + load(tObject:Tobject)
            + fetch(...)
            - process()
            - processCached()
        }

        EventStore o- LogEntry
        ResourceProxy "(1)"- -> EventStore
        ResourceProxy "(2)"- -> XHR
    }

    package aggregator {
        abstract  BaseAggregator<<Redux>><<Aggregator>> {
            update(logEntry)
        }
        abstract AggregatorWithLayout {
            layout:Layout
        }
        BaseAggregator <|.. AggregatorWithLayout
    }
}

package "to" {
    interface TransferObject<<TransferObject>>
}

XHR - -> ResponseHandler : TransferObject \n is written into \n LogEntry
LogEntry -> TransferObject
LogEntry - ->"1..n" BaseAggregator

ResponseHandler .> TransferObject : converts \n JSON \n into TO

circle RestfulObjects<<RemoteFacade>>
package remote <<Node>> {
    class ApacheIsis<<(F, #FF7700)FrameWork>>
    class NakedObjects<<(F, #FF7700)FrameWork>>
    RestfulObjects <|- ApacheIsis
    RestfulObjects <|- - NakedObjects
}
XHR -( RestfulObjects : invoke() \njson string / blob <

note right of ResourceProxy
When ever a resource is required, the proxy is queried.
(1) It's served from the <b>EventStore</b>, if possible. <b>LogEntry.cacheHits</b> will be incremented.
(2) If it's not available yet, <b>XHR</b> fetches it from remote and puts it into the <b>EventStore</b>.

In any case, a <b>LogEntry</b> containing the response (blob) will be passed on to it's aggregator(s).

The aggregator to be used is either determined at the point where the resource is requested,
or, based on the content of the response, assigned by the matching handler.
end note
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>